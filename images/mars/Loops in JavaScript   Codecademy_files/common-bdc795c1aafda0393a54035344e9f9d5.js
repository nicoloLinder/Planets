function FastClick(e){var t,n=this;this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=10,this.layer=e;if(!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(n,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(n,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(n,arguments)};if(FastClick.notNeeded(e))return;this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;t==="click"?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;t==="click"?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(e,t,n,r)}),typeof e.onclick=="function"&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null)}var require={baseUrl:"/assets/",shim:{jquery:{exports:"jQuery"},underscore:{exports:"_"},backbone:{exports:"Backbone",deps:["jquery","underscore"]},"vendor/react":{exports:"React"},highlightjs:{exports:"hljs"},webjslint:{exports:"JSLINT"},lint:{exports:"lint",deps:["webjslint"]},"vendor/olark":{exports:"olarkInit"},"vendor/moment":{exports:"moment"},"vendor/rails":["jquery"],"vendor/charts/core":{exports:"Chart"},"vendor/charts/bar":{exports:"Chart",deps:["vendor/charts/core"]},"vendor/charts/stackedBar":{exports:"Chart",deps:["vendor/charts/core"]},"vendor/d3.v2.min":[],"vendor/d3":{exports:"d3"},"vendor/nv.d3.min":["vendor/d3.v2.min"],"vendor/select2":[],"vendor/jqconsole":["jquery"],"vendor/nouislider":["jquery"],"vendor/prettify/prettify":[],"vendor/prettify/lang-css":["vendor/prettify/prettify"],"vendor/sinon":{exports:"sinon"},"vendor/mocha":{exports:"mocha"},"vendor/assert":{exports:"assert"},"vendor/avgrund":{exports:"Avgrund"},"vendor/stuff":{exports:"stuff"},"vendor/diff_match_patch":{exports:"DIFF_MATCH_PATCH"},"vendor/sockjs":{exports:"SockJS"},"vendor/filepicker":{exports:"filepicker"},"vendor/zeroclipboard":{exports:"ZeroClipboard"},"vendor/jquery-ui":["jquery"],"vendor/selectBoxIt":["jquery","vendor/jquery-ui"],"plugins/backbone-to-json":["backbone"],"plugins/backbone.declarative":["backbone"],"plugins/backbone.google-analytics":["backbone"],"plugins/backbone-super":["backbone"],"plugins/ie_xdr":["jquery"],"plugins/jquery.appear":["jquery"],"plugins/jquery.dataTables.min":["jquery"],"plugins/jquery.rating.pack":["jquery"],"plugins/jquery.selectrange":["jquery"],"plugins/jquery.flash-class":["jquery"],"plugins/jquery.inlineedit":["jquery","libs/markdown","plugins/jquery.selectrange"],"plugins/jquery.cookie":["jquery"],"plugins/jquery.insideof":["jquery"],"plugins/jquery.sortable":["jquery"],"plugins/jquery.highlight":["jquery"],"plugins/jquery.migrate":["jquery"],"plugins/jquery.scrolltrack":["jquery"],"plugins/jquery.scrollto":["jquery"],"plugins/bootstrap-scrollspy":[],"plugins/jquery.waypoints":["jquery"],"plugins/jquery.waypoints-sticky":["jquery","plugins/jquery.waypoints"],"plugins/bootstrap-dropdown":["jquery"],"plugins/bitly":["jquery"],"plugins/enhanced.fixed":["jquery"],"plugins/bootstrap-button":["jquery"],"plugins/bootstrap-tooltip":["jquery"],"plugins/bootstrap-afix":["jquery"],"plugins/bootstrap-popover":["plugins/bootstrap-tooltip"],"plugins/jquery.backstretch":["jquery"],"vendor/jquery.expect":{exports:"$expect",deps:["jquery"]},"vendor/orion":{exports:"orion"},"plugins/orion-codeComplete":["vendor/orion"],"plugins/orion-codeComplete-common":["vendor/orion"],"plugins/orion-codeComplete-html":["plugins/orion-codeComplete-common"],"plugins/orion-codeComplete-javascript":["plugins/orion-codeComplete-common"],"plugins/orion-codeComplete-python":["plugins/orion-codeComplete-common"],"plugins/orion-codeComplete-ruby":["plugins/orion-codeComplete-common"],"plugins/orion-codeComplete-css":["plugins/orion-codeComplete-common"],"plugins/orion-custom-editor":["vendor/orion","plugins/orion-codeComplete","plugins/orion-codeComplete-common","plugins/orion-codeComplete-css","plugins/orion-codeComplete-html","plugins/orion-codeComplete-javascript","plugins/orion-codeComplete-python","plugins/orion-codeComplete-ruby"],"plugins/orion-codemirror":["vendor/orion","plugins/orion-custom-editor"],"vendor/codemirror_modes/clike":["plugins/orion-codemirror"],"vendor/codemirror_modes/javascript":["plugins/orion-codemirror"],"vendor/codemirror_modes/python":["plugins/orion-codemirror"],"vendor/codemirror_modes/ruby":["plugins/orion-codemirror"],"vendor/codemirror_modes/css":["plugins/orion-codemirror"],"vendor/codemirror_modes/xml":["plugins/orion-codemirror"],"vendor/codemirror_modes/htmlmixed":["plugins/orion-codemirror"],"vendor/codemirror_modes/php":["plugins/orion-codemirror"],"widgets/autocomplete":["backbone"],react:"vendor/react",JSXTransformer:"vendor/JSXTransformer.min"},paths:{requireLib:"vendor/require",underscore:"vendor/underscore",backbone:"vendor/backbone",react:"vendor/react",ace:"vendor/ace-codecademy-bundle-v5",orion:"vendor/orion-codecademy-bundle-v1",highlightjs:"vendor/highlight","vendor/sockjs":"vendor/sockjs-0.3.min"}},requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function eachProp(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t!="string"?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeContextModuleFunc(e,t,n){return function(){var r=aps.call(arguments,0),i;return n&&isFunction(i=r[r.length-1])&&(i.__requireJsBuild=!0),r.push(t),e.apply(null,r)}}function addRequireMethods(e,t,n){each([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(r){var i=r[1]||r[0];e[r[0]]=t?makeContextModuleFunc(t[i],n):function(){var e=contexts[defContextName];return e[i].apply(e,arguments)}})}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function v(e){var t,n;for(t=0;e[t];t+=1){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function m(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,m=t&&t.split("/"),g=m,y=o.map,b=y&&y["*"];e&&e.charAt(0)==="."&&(t?(o.pkgs[t]?g=m=[t]:g=m.slice(0,m.length-1),e=g.concat(e.split("/")),v(e),i=o.pkgs[r=e[0]],e=e.join("/"),i&&e===r+"/"+i.main&&(e=r)):e.indexOf("./")===0&&(e=e.substring(2)));if(n&&(m||b)&&y){u=e.split("/");for(a=u.length;a>0;a-=1){l=u.slice(0,a).join("/");if(m)for(f=m.length;f>0;f-=1){s=y[m.slice(0,f).join("/")];if(s){s=s[l];if(s){c=s,h=a;break}}}if(c)break;!p&&b&&b[l]&&(p=b[l],d=a)}!c&&p&&(c=p,h=d),c&&(u.splice(0,h,c),e=u.join("/"))}return e}function g(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function y(e){var t=o.paths[e];if(t&&isArray(t)&&t.length>1)return g(e),t.shift(),r.undef(e),r.require([e]),!0}function b(e,t,n,i){var s,o,u,a=e?e.indexOf("!"):-1,f=null,c=t?t.name:null,d=e,v=!0,g="";return e||(v=!1,e="_@r"+(h+=1)),a!==-1&&(f=e.substring(0,a),e=e.substring(a+1,e.length)),f&&(f=m(f,c,i),o=l[f]),e&&(f?o&&o.normalize?g=o.normalize(e,function(e){return m(e,c,i)}):g=m(e,c,i):(g=m(e,c,i),s=r.nameToUrl(g))),u=f&&!o&&!n?"_unnormalized"+(p+=1):"",{prefix:f,name:g,parentMap:t,unnormalized:!!u,url:s,originalName:d,isDefine:v,id:(f?f+"!"+g:g)+u}}function w(e){var t=e.id,n=u[t];return n||(n=u[t]=new r.Module(e)),n}function E(e,t,n){var r=e.id,i=u[r];hasProp(l,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(l[r]):w(e).on(t,n)}function S(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=u[t];n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function x(){globalDefQueue.length&&(apsp.apply(f,[f.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function T(e,t,n){var i=e&&e.map,s=makeContextModuleFunc(n||r.require,i,t);return addRequireMethods(s,r,i),s.isBrowser=isBrowser,s}function N(e){delete u[e],each(d,function(t,n){if(t.map.id===e)return d.splice(n,1),t.defined||(r.waitCount-=1),!0})}function C(e,t,n){var r=e.map.id,i=e.depMaps,s;if(!e.inited)return;return t[r]?e:(t[r]=!0,each(i,function(e){var r=e.id,i=u[r];if(!i||n[r]||!i.inited||!i.enabled)return;return s=C(i,t,n)}),n[r]=!0,s)}function k(e,t,n){var r=e.map.id,s=e.depMaps;if(!e.inited||!e.map.isDefine)return;return t[r]?l[r]:(t[r]=e,each(s,function(s){var o=s.id,a=u[o],f;if(i[o])return;if(a){if(!a.inited||!a.enabled){n[r]=!0;return}f=k(a,t,n),n[o]||e.defineDepById(o,f)}}),e.check(!0),l[r])}function L(e){e.check()}function A(){var e,n,i,a,f=o.waitSeconds*1e3,l=f&&r.startTime+f<(new Date).getTime(),c=[],h=!1,p=!0;if(t)return;t=!0,eachProp(u,function(t){e=t.map,n=e.id;if(!t.enabled)return;if(!t.error)if(!t.inited&&l)y(n)?(a=!0,h=!0):(c.push(n),g(n));else if(!t.inited&&t.fetched&&e.isDefine){h=!0;if(!e.prefix)return p=!1}});if(l&&c.length)return i=makeError("timeout","Load timeout for modules: "+c,null,c),i.contextName=r.contextName,S(i);p&&(each(d,function(e){if(e.defined)return;var t=C(e,{},{}),n={};t&&(k(t,n,{}),eachProp(n,L))}),eachProp(u,L)),(!l||a)&&h&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,A()},50)),t=!1}function O(e){w(b(e[0],null,!0)).init(e[1],e[2])}function M(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function _(e){var t=e.currentTarget||e.srcElement;return M(t,r.onScriptLoad,"load","onreadystatechange"),M(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},u={},a={},f=[],l={},c={},h=1,p=1,d=[];return i={require:function(e){return T(e)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports=l[e.map.id]={}},module:function(e){return e.module={id:e.map.id,uri:e.map.url,config:function(){return o.config&&o.config[e.map.id]||{}},exports:l[e.map.id]}}},n=function(e){this.events=a[e.id]||{},this.map=e,this.shim=o.shim[e.id],this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.depMaps.rjsSkipMap=e.rjsSkipMap,this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDepById:function(e,t){var n;return each(this.depMaps,function(t,r){if(t.id===e)return n=r,!0}),this.defineDep(n,t)},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();T(this,!0)(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;c[e]||(c[e]=!0,r.load(this.map.id,e))},check:function(e){if(!this.enabled||this.enabling)return;var t,n,i=this.map.id,s=this.depExports,o=this.exports,a=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error)try{o=r.execCb(i,a,s,o)}catch(f){t=f}else o=r.execCb(i,a,s,o);this.map.isDefine&&(n=this.module,n&&n.exports!==undefined&&n.exports!==this.exports?o=n.exports:o===undefined&&this.usingExports&&(o=this.exports));if(t)return t.requireMap=this.map,t.requireModules=[this.map.id],t.requireType="define",S(this.error=t)}else o=a;this.exports=o,this.map.isDefine&&!this.ignore&&(l[i]=o,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),delete u[i],this.defined=!0,r.waitCount-=1,r.waitCount===0&&(d=[])}this.defining=!1,e||this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=b(e.prefix,null,!1,!0);E(n,"defined",bind(this,function(n){var i,s,a,f=this.map.name,l=this.map.parentMap?this.map.parentMap.name:null;if(this.map.unnormalized){n.normalize&&(f=n.normalize(f,function(e){return m(e,l,!0)})||""),s=b(e.prefix+"!"+f,this.map.parentMap,!1,!0),E(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=u[s.id],a&&(this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&N(e.map.id)}),S(e)}),i.fromText=function(e,t){var n=useInteractive;n&&(useInteractive=!1),w(b(e)),req.exec(t),n&&(useInteractive=!0),r.completeLoad(e)},n.load(e.name,T(e.parentMap,!0,function(e,t,n){return e.rjsSkipMap=!0,r.require(e,t,n)}),i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){this.enabled=!0,this.waitPushed||(d.push(this),r.waitCount+=1,this.waitPushed=!0),this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=b(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.depMaps.rjsSkipMap),this.depMaps[t]=e,o=i[e.id];if(o){this.depExports[t]=o(this);return}this.depCount+=1,E(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&E(e,"error",this.errback)}n=e.id,s=u[n],!i[n]&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=u[e.id];t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:l,urlFetched:c,waitCount:0,defQueue:f,Module:n,makeModuleMap:b,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.pkgs,n=o.shim,i=o.paths,s=o.map;mixin(o,e,!0),o.paths=mixin(i,e.paths,!0),e.map&&(o.map=mixin(s||{},e.map,!0,!0)),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),e.exports&&!e.exports.__buildReady&&(e.exports=r.makeShimExports(e.exports)),n[t]=e}),o.shim=n),e.packages&&(each(e.packages,function(e){var n;e=typeof e=="string"?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),o.pkgs=t),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=b(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){var t;return typeof e=="string"?(t=function(){return getGlobal(e)},t.exports=e,t):function(){return e.apply(global,arguments)}},requireDefined:function(e,t){return hasProp(l,b(e,t,!1,!0).id)},requireSpecified:function(e,t){return e=b(e,t,!1,!0).id,hasProp(l,e)||hasProp(u,e)},require:function(t,n,i,s){var o,u,a,c,h;if(typeof t=="string")return isFunction(n)?S(makeError("requireargs","Invalid require call"),i):req.get?req.get(r,t,n):(o=t,s=n,a=b(o,s,!1,!0),u=a.id,hasProp(l,u)?l[u]:S(makeError("notloaded",'Module name "'+u+'" has not been loaded yet for context: '+e)));i&&!isFunction(i)&&(s=i,i=undefined),n&&!isFunction(n)&&(s=n,n=undefined),x();while(f.length){h=f.shift();if(h[0]===null)return S(makeError("mismatch","Mismatched anonymous define() module: "+h[h.length-1]));O(h)}return c=w(b(null,s)),c.init(t,n,i,{enabled:!0}),A(),r.require},undef:function(e){x();var t=b(e,null,!0),n=u[e];delete l[e],delete c[t.url],delete a[e],n&&(n.events.defined&&(a[e]=n.events),N(e))},enable:function(e,t){var n=u[e.id];n&&w(e).enable()},completeLoad:function(e){var t,n,r,i=o.shim[e]||{},s=i.exports&&i.exports.exports;x();while(f.length){n=f.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);O(n)}r=u[e];if(!t&&!l[e]&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(y(e))return;return S(makeError("nodefine","No define call for "+e,null,[e]))}O([e,i.deps||[],i.exports])}A()},toUrl:function(e,t){var n=e.lastIndexOf("."),i=null;return n!==-1&&(i=e.substring(n,e.length),e=e.substring(0,n)),r.nameToUrl(m(e,t&&t.id,!0),i)},nameToUrl:function(e,t){var n,r,i,s,u,a,f,l,c;if(req.jsExtRegExp.test(e))l=e+(t||"");else{n=o.paths,r=o.pkgs,u=e.split("/");for(a=u.length;a>0;a-=1){f=u.slice(0,a).join("/"),i=r[f],c=n[f];if(c){isArray(c)&&(c=c[0]),u.splice(0,a,c);break}if(i){e===i.name?s=i.location+"/"+i.main:s=i.location,u.splice(0,a,s);break}}l=u.join("/"),l+=t||(/\?/.test(l)?"":".js"),l=(l.charAt(0)==="/"||l.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+l}return o.urlArgs?l+((l.indexOf("?")===-1?"?":"&")+o.urlArgs):l},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=_(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=_(e);if(!y(t.id))return S(makeError("scripterror","Script error",e,[t.id]))}}}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.0.6",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=contexts[o],i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),addRequireMethods(req),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(e){throw e},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=r.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),i.type=r.scriptType||"text/javascript",i.charset="utf-8",i.async=!0,i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;isWebWorker&&(importScripts(n),e.completeLoad(t))},isBrowser&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript),dataMain=dataMain.replace(jsSuffixRegExp,""),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=[]),!t.length&&isFunction(n)&&n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t)),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requireLib",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){return e instanceof x?e:this instanceof x?(this._wrapped=e,void 0):new x(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.4.3";var T=x.each=x.forEach=function(e,t,r){if(null!=e)if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(x.has(e,o)&&t.call(r,e[o],o,e)===n)return};x.map=x.collect=function(e,t,n){var r=[];return null==e?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}if(T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)}),!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},x.filter=x.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return null==e?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return null==e?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};x.contains=x.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2);return x.map(e,function(e){return(x.isFunction(t)?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t){return x.isEmpty(t)?[]:x.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-1/0;var r={computed:-1/0,value:-1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return 1/0;var r={computed:1/0,value:1/0};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;r.computed>o&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t||x.identity);return T(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};x.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)})},x.countBy=function(e,t,n){return L(e,t,n,function(e,t){x.has(e,t)||(e[t]=0),e[t]++})},x.sortedIndex=function(e,t,n,r){n=null==n?x.identity:k(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var u=s+o>>>1;i>n.call(r,e[u])?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return null==e?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(null==t||n?1:t))},x.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return T(e,function(e){x.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){(t?r&&o[o.length-1]===n:x.contains(o,n))||(o.push(n),s.push(e[r]))}),s},x.union=function(){return x.uniq(a.apply(r,arguments))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){for(var e=u.call(arguments),t=x.max(x.pluck(e,"length")),n=Array(t),r=0;t>r;r++)n[r]=x.pluck(e,""+r);return n},x.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},x.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(e.bind===S&&S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);return 0==t.length&&(t=x.functions(e)),T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t){var n,r,i,s,o=0,u=function(){o=new Date,i=null,s=e.apply(n,r)};return function(){var a=new Date,f=t-(a-o);return n=this,r=arguments,0>=f?(clearTimeout(i),i=null,o=a,s=e.apply(n,r)):i||(i=setTimeout(u,f)),s}},x.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},x.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&(t[t.length]=n);return t},x.values=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push(e[n]);return t},x.pairs=function(e){var t=[];for(var n in e)x.has(e,n)&&t.push([n,e[n]]);return t},x.invert=function(e){var t={};for(var n in e)x.has(e,n)&&(t[e[n]]=n);return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if("[object Array]"==i){if(o=e.length,u=o==t.length)for(;o--&&(u=M(e[o],t[o],n,r)););}else{var a=e.constructor,l=t.constructor;if(a!==l&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(l)&&l instanceof l))return!1;for(var c in e)if(x.has(e,c)&&(o++,!(u=x.has(t,c)&&M(e[c],t[c],n,r))))break;if(u){for(c in t)if(x.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(null==e)return!0;if(x.isArray(e)||x.isString(e))return 0===e.length;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&1===e.nodeType},x.isArray=w||function(e){return"[object Array]"==f.call(e)},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),x.isFunction=function(e){return"function"==typeof e},x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},x.isNull=function(e){return null===e},x.isUndefined=function(e){return void 0===e},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){for(var r=Array(e),i=0;e>i;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=x.invert(_.escape);var D={escape:RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return null==t?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(null==e)return null;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=""+ ++P;return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){n=x.defaults({},n,x.templateSettings);var r=RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){return s+=e.slice(i,u).replace(j,function(e){return"\\"+B[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),o&&(s+="';\n"+o+"\n__p+='"),i=u+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return o(t,x);var a=function(e){return o.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(e){return function(){return e._}}(this)),function(e,t){function _(e){var t=e.length,n=y.type(e);return y.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function P(e){var t=D[e]={};return y.each(e.match(w)||[],function(e,n){t[n]=!0}),t}function j(e,n,r,i){if(!y.acceptData(e))return;var s,o,u=y.expando,a=typeof n=="string",l=e.nodeType,c=l?y.cache:e,h=l?e[u]:e[u]&&u;if((!h||!c[h]||!i&&!c[h].data)&&a&&r===t)return;h||(l?e[u]=h=f.pop()||y.guid++:h=u),c[h]||(c[h]={},l||(c[h].toJSON=y.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=y.extend(c[h],n):c[h].data=y.extend(c[h].data,n);return s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[y.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[y.camelCase(n)])):o=s,o}function F(e,t,n){if(!y.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?y.cache:e,a=o?e[y.expando]:y.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){y.isArray(t)?t=t.concat(y.map(t,y.camelCase)):t in r?t=[t]:(t=y.camelCase(t),t in r?t=[t]:t=t.split(" "));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?q:y.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!q(u[a]))return}o?y.cleanData([e],!0):y.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null}function I(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(B,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:H.test(r)?y.parseJSON(r):r}catch(s){}y.data(e,n,r)}else r=t}return r}function q(e){var t;for(t in e){if(t==="data"&&y.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function nt(){return!0}function rt(){return!1}function ft(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function lt(e,t,n){t=t||0;if(y.isFunction(t))return y.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return y.grep(e,function(e){return e===t===n});if(typeof t=="string"){var r=y.grep(e,function(e){return e.nodeType===1});if(ot.test(t))return y.filter(t,r,!n);t=y.filter(t,r)}return y.grep(e,function(e){return y.inArray(e,t)>=0===n})}function ct(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function At(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ot(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Mt(e){var t=Tt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _t(e,t){var n,r=0;for(;(n=e[r])!=null;r++)y._data(n,"globalEval",!t||y._data(t[r],"globalEval"))}function Dt(e,t){if(t.nodeType!==1||!y.hasData(e))return;var n,r,i,s=y._data(e),o=y._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)y.event.add(t,n,u[n][r])}o.data&&(o.data=y.extend({},o.data))}function Pt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!y.support.noCloneEvent&&t[y.expando]){r=y._data(t);for(i in r.events)y.removeEvent(t,i,r.handle);t.removeAttribute(y.expando)}if(n==="script"&&t.text!==e.text)Ot(t).text=e.text,Mt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),y.support.html5Clone&&e.innerHTML&&!y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&Et.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function Ht(e,n){var r,i,s=0,o=typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll(n||"*"):t;if(!o)for(o=[],r=e.childNodes||e;(i=r[s])!=null;s++)!n||y.nodeName(i,n)?o.push(i):y.merge(o,Ht(i,n));return n===t||n&&y.nodeName(e,n)?y.merge([e],o):o}function Bt(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Zt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Yt.length;while(i--){t=Yt[i]+n;if(t in e)return t}return r}function en(e,t){return e=t||e,y.css(e,"display")==="none"||!y.contains(e.ownerDocument,e)}function tn(e,t){var n,r=[],i=0,s=e.length;for(;i<s;i++){n=e[i];if(!n.style)continue;r[i]=y._data(n,"olddisplay"),t?(!r[i]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&en(n)&&(r[i]=y._data(n,"olddisplay",on(n.nodeName)))):!r[i]&&!en(n)&&y._data(n,"olddisplay",y.css(n,"display"))}for(i=0;i<s;i++){n=e[i];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?r[i]||"":"none"}return e}function nn(e,t,n){var r=Xt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function rn(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=y.css(e,n+Gt[s],!0,i)),r?(n==="content"&&(o-=y.css(e,"padding"+Gt[s],!0,i)),n!=="margin"&&(o-=y.css(e,"border"+Gt[s]+"Width",!0,i))):(o+=y.css(e,"padding"+Gt[s],!0,i),n!=="padding"&&(o+=y.css(e,"border"+Gt[s]+"Width",!0,i)));return o}function sn(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=Ft(e),o=y.support.boxSizing&&y.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=jt(e,t,s);if(i<0||i==null)i=e.style[t];if(Vt.test(i))return i;r=o&&(y.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+rn(e,t,n||(o?"border":"content"),r,s)+"px"}function on(e){var t=i,n=Jt[e];if(!n){n=un(e,t);if(n==="none"||!n)It=(It||y("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=un(e,t),It.detach();Jt[e]=n}return n}function un(e,t){var n=y(t.createElement(e)).appendTo(t.body),r=y.css(n[0],"display");return n.remove(),r}function pn(e,t,n,r){var i;if(y.isArray(t))y.each(t,function(t,i){n||fn.test(e)?r(e,i):pn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&y.type(t)==="object")for(i in t)pn(e+"["+i+"]",t[i],n,r);else r(e,t)}function On(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(w)||[];if(y.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Mn(e,t,n,r){function o(u){var a;return i[u]=!0,y.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===kn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function _n(e,n){var r,i,s=y.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);return i&&y.extend(!0,e,i),e}function Dn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("Content-Type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Pn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(a[1])for(n in e.converters)o[n.toLowerCase()]=e.converters[n];for(;i=a[++u];)if(i!=="*"){if(f!=="*"&&f!==i){n=o[f+" "+i]||o["* "+i];if(!n)for(r in o){s=r.split(" ");if(s[1]===i){n=o[f+" "+s[0]]||o["* "+s[0]];if(n){n===!0?n=o[r]:o[r]!==!0&&(i=s[0],a.splice(u--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+f+" to "+i}}}f=i}return{state:"success",data:t}}function Rn(){try{return new e.XMLHttpRequest}catch(t){}}function Un(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Qn(){return setTimeout(function(){zn=t}),zn=y.now()}function Gn(e,t){y.each(t,function(t,n){var r=(Kn[t]||[]).concat(Kn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Yn(e,t,n){var r,i,s=0,o=Jn.length,u=y.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=zn||Qn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:y.extend({},t),opts:y.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:zn||Qn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=y.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Zn(l,f.opts.specialEasing);for(;s<o;s++){r=Jn[s].call(f,e,l,f.opts);if(r)return r}return Gn(f,l),y.isFunction(f.opts.start)&&f.opts.start.call(e,f),y.fx.timer(y.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Zn(e,t){var n,r,i,s,o;for(n in e){r=y.camelCase(n),i=t[r],s=e[n],y.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=y.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function er(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&en(e);n.queue||(l=y._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,y.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],y.css(e,"display")==="inline"&&y.css(e,"float")==="none"&&(!y.support.inlineBlockNeedsLayout||on(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",y.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Xn.exec(s)){delete t[r],a=a||s==="toggle";if(s===(m?"hide":"show"))continue;v.push(r)}}o=v.length;if(o){u=y._data(e,"fxshow")||y._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?y(e).show():h.done(function(){y(e).hide()}),h.done(function(){var t;y._removeData(e,"fxshow");for(t in d)y.style(e,t,d[t])});for(r=0;r<o;r++)i=v[r],f=h.createTween(i,m?u[i]:0),d[i]=u[i]||y.style(e,i),i in u||(u[i]=f.start,m&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function tr(e,t,n,r,i){return new tr.prototype.init(e,t,n,r,i)}function nr(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Gt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function rr(e){return y.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.jQuery,u=e.$,a={},f=[],l="1.9.0",c=f.concat,h=f.push,p=f.slice,d=f.indexOf,v=a.toString,m=a.hasOwnProperty,g=l.trim,y=function(e,t){return new y.fn.init(e,t,n)},b=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,E=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,S=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,x=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,T=/^[\],:{}\s]*$/,N=/(?:^|:|,)(?:\s*\[)+/g,C=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,k=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,L=/^-ms-/,A=/-([\da-z])/gi,O=function(e,t){return t.toUpperCase()},M=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",M,!1),y.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",M),y.ready())};y.fn=y.prototype={jquery:l,constructor:y,init:function(e,n,r){var s,o;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=S.exec(e);if(s&&(s[1]||!n)){if(s[1]){n=n instanceof y?n[0]:n,y.merge(this,y.parseHTML(s[1],n&&n.nodeType?n.ownerDocument||n:i,!0));if(x.test(s[1])&&y.isPlainObject(n))for(s in n)y.isFunction(this[s])?this[s](n[s]):this.attr(s,n[s]);return this}o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):y.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),y.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return p.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return y.each(this,e,t)},ready:function(e){return y.ready.promise().done(e),this},slice:function(){return this.pushStack(p.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(y.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:h,sort:[].sort,splice:[].splice},y.fn.init.prototype=y.fn,y.extend=y.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!y.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(y.isPlainObject(i)||(s=y.isArray(i)))?(s?(s=!1,o=r&&y.isArray(r)?r:[]):o=r&&y.isPlainObject(r)?r:{},u[n]=y.extend(l,o,i)):i!==t&&(u[n]=i)}return u},y.extend({noConflict:function(t){return e.$===y&&(e.$=u),t&&e.jQuery===y&&(e.jQuery=o),y},isReady:!1,readyWait:1,holdReady:function(e){e?y.readyWait++:y.ready(!0)},ready:function(e){if(e===!0?--y.readyWait:y.isReady)return;if(!i.body)return setTimeout(y.ready);y.isReady=!0;if(e!==!0&&--y.readyWait>0)return;r.resolveWith(i,[y]),y.fn.trigger&&y(i).trigger("ready").off("ready")},isFunction:function(e){return y.type(e)==="function"},isArray:Array.isArray||function(e){return y.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?a[v.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||y.type(e)!=="object"||e.nodeType||y.isWindow(e))return!1;try{if(e.constructor&&!m.call(e,"constructor")&&!m.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||m.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||i;var r=x.exec(e),s=!n&&[];return r?[t.createElement(r[1])]:(r=y.buildFragment([e],t,s),s&&y(s).remove(),y.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=y.trim(t);if(t&&T.test(t.replace(C,"@").replace(k,"]").replace(N,"")))return(new Function("return "+t))()}y.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&y.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&y.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(L,"ms-").replace(A,O)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=_(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:g&&!g.call("")?function(e){return e==null?"":g.call(e)}:function(e){return e==null?"":(e+"").replace(E,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(_(Object(e))?y.merge(n,typeof e=="string"?[e]:e):h.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(d)return d.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=_(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return c.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),y.isFunction(e)?(i=p.call(arguments,2),s=function(){return e.apply(n||this,i.concat(p.call(arguments)))},s.guid=e.guid=e.guid||y.guid++,s):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(y.type(r)==="object"){s=!0;for(a in r)y.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,y.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(y(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),y.ready.promise=function(t){if(!r){r=y.Deferred();if(i.readyState==="complete")setTimeout(y.ready);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",M,!1),e.addEventListener("load",y.ready,!1);else{i.attachEvent("onreadystatechange",M),e.attachEvent("onload",y.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!y.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}y.ready()}}()}}return r.promise(t)},y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){a["[object "+t+"]"]=t.toLowerCase()}),n=y(i);var D={};y.Callbacks=function(e){e=typeof e=="string"?D[e]||P(e):y.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){y.each(t,function(t,n){var i=y.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&y.each(arguments,function(e,t){var n;while((n=y.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return y.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},y.extend({Deferred:function(e){var t=[["resolve","done",y.Callbacks("once memory"),"resolved"],["reject","fail",y.Callbacks("once memory"),"rejected"],["notify","progress",y.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return y.Deferred(function(n){y.each(t,function(t,s){var o=s[0],u=y.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&y.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?y.extend(e,r):r}},i={};return r.pipe=r.then,y.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=p.call(arguments),r=n.length,i=r!==1||e&&y.isFunction(e.promise)?r:0,s=i===1?e:y.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?p.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&y.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),y.support=function(){var t,n,r,s,o,u,a,f,l,c,h=i.createElement("div");h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),r=h.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=h.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:h.className!=="t",leadingWhitespace:h.firstChild.nodeType===3,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!u.value,optSelected:o.selected,enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete h.test}catch(p){t.deleteExpando=!1}u=i.createElement("input"),u.setAttribute("value",""),t.input=u.getAttribute("value")==="",u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","t"),u.setAttribute("name","t"),a=i.createDocumentFragment(),a.appendChild(u),t.appendChecked=u.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){t.noCloneEvent=!1}),h.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})h.setAttribute(f="on"+c,"t"),t[c+"Bubbles"]=f in e||h.attributes[f].expando===!1;return h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=h.style.backgroundClip==="content-box",y(function(){var n,r,s,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=i.getElementsByTagName("body")[0];if(!u)return;n=i.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=h.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",l=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=l&&s[0].offsetHeight===0,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=h.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=u.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(h,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(h,null)||{width:"4px"}).width==="4px",r=h.appendChild(i.createElement("div")),r.style.cssText=h.style.cssText=o,r.style.marginRight=r.style.width="0",h.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof h.style.zoom!="undefined"&&(h.innerHTML="",h.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=h.offsetWidth===3,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",t.shrinkWrapBlocks=h.offsetWidth!==3,u.style.zoom=1),u.removeChild(n),n=h=s=r=null}),n=s=a=o=r=u=null,t}();var H=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;y.extend({cache:{},expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?y.cache[e[y.expando]]:e[y.expando],!!e&&!q(e)},data:function(e,t,n){return j(e,t,n,!1)},removeData:function(e,t){return F(e,t,!1)},_data:function(e,t,n){return j(e,t,n,!0)},_removeData:function(e,t){return F(e,t,!0)},acceptData:function(e){var t=e.nodeName&&y.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),y.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length){u=y.data(s);if(s.nodeType===1&&!y._data(s,"parsedAttrs")){r=s.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")||(i=y.camelCase(i.substring(5)),I(s,i,u[i]));y._data(s,"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){y.data(this,e)}):y.access(this,function(n){if(n===t)return s?I(s,e,y.data(s,e)):null;this.each(function(){y.data(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){y.removeData(this,e)})}}),y.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=y._data(e,t),n&&(!r||y.isArray(n)?r=y._data(e,t,y.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=y.queue(e,t),r=n.length,i=n.shift(),s=y._queueHooks(e,t),o=function(){y.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),s.cur=i,i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return y._data(e,n)||y._data(e,n,{empty:y.Callbacks("once memory").add(function(){y._removeData(e,t+"queue"),y._removeData(e,n)})})}}),y.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?y.queue(this[0],e):n===t?this:this.each(function(){var t=y.queue(this,e,n);y._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){y.dequeue(this,e)})},delay:function(e,t){return e=y.fx?y.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=y.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=y._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var R,U,z=/[\t\r\n]/g,W=/\r/g,X=/^(?:input|select|textarea|button|object)$/i,V=/^(?:a|area)$/i,$=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,J=/^(?:checked|selected)$/i,K=y.support.getSetAttribute,Q=y.support.input;y.fn.extend({attr:function(e,t){return y.access(this,y.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){y.removeAttr(this,e)})},prop:function(e,t){return y.access(this,y.prop,e,t,arguments.length>1)},removeProp:function(e){return e=y.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(y.isFunction(e))return this.each(function(t){y(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(w)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(z," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=y.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(y.isFunction(e))return this.each(function(t){y(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(w)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(z," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?y.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return y.isFunction(e)?this.each(function(n){y(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=y(this),u=t,a=e.match(w)||[];while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&y._data(this,"__className__",this.className),this.className=this.className||e===!1?"":y._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(z," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=y.valHooks[s.type]||y.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(W,""):r==null?"":r);return}return i=y.isFunction(e),this.each(function(r){var s,o=y(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":y.isArray(s)&&(s=y.map(s,function(e){return e==null?"":e+""})),n=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),y.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(y.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!y.nodeName(n.parentNode,"optgroup"))){t=y(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=y.makeArray(t);return y(e).find("option").each(function(){this.selected=y.inArray(y(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;if(typeof e.getAttribute=="undefined")return y.prop(e,n,r);o=u!==1||!y.isXMLDoc(e),o&&(n=n.toLowerCase(),s=y.attrHooks[n]||($.test(n)?U:R));if(r===t)return s&&o&&"get"in s&&(i=s.get(e,n))!==null?i:(typeof e.getAttribute!="undefined"&&(i=e.getAttribute(n)),i==null?t:i);if(r!==null)return s&&o&&"set"in s&&(i=s.set(e,r,n))!==t?i:(e.setAttribute(n,r+""),r);y.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(w);if(s&&e.nodeType===1)while(n=s[i++])r=y.propFix[n]||n,$.test(n)?!K&&J.test(n)?e[y.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:y.attr(e,n,""),e.removeAttribute(K?n:r)},attrHooks:{type:{set:function(e,t){if(!y.support.radioValue&&t==="radio"&&y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!y.isXMLDoc(e),o&&(n=y.propFix[n]||n,s=y.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):X.test(e.nodeName)||V.test(e.nodeName)&&e.href?0:t}}}}),U={get:function(e,n){var r=y.prop(e,n),i=typeof r=="boolean"&&e.getAttribute(n),s=typeof r=="boolean"?Q&&K?i!=null:J.test(n)?e[y.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?y.removeAttr(e,n):Q&&K||!J.test(n)?e.setAttribute(!K&&y.propFix[n]||n,n):e[y.camelCase("default-"+n)]=e[n]=!0,n}};if(!Q||!K)y.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return y.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,t,n){if(!y.nodeName(e,"input"))return R&&R.set(e,t,n);e.defaultValue=t}};K||(R=y.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(n==="id"||n==="name"||n==="coords"?r.value!=="":r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},y.attrHooks.contenteditable={get:R.get,set:function(e,t,n){R.set(e,t===""?!1:t,n)}},y.each(["width","height"],function(e,t){y.attrHooks[t]=y.extend(y.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})})),y.support.hrefNormalized||(y.each(["href","src","width","height"],function(e,n){y.attrHooks[n]=y.extend(y.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r==null?t:r}})}),y.each(["href","src"],function(e,t){y.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),y.support.style||(y.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),y.support.optSelected||(y.propHooks.selected=y.extend(y.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),y.support.enctype||(y.propFix.enctype="encoding"),y.support.checkOn||y.each(["radio","checkbox"],function(){y.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]=y.extend(y.valHooks[this],{set:function(e,t){if(y.isArray(t))return e.checked=y.inArray(y(e).val(),t)>=0}})});var G=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,et=/^(?:focusinfocus|focusoutblur)$/,tt=/^([^.]*)(?:\.(.+)|)$/;y.event={global:{},add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g=e.nodeType!==3&&e.nodeType!==8&&y._data(e);if(!g)return;r.handler&&(o=r,r=o.handler,s=o.selector),r.guid||(r.guid=y.guid++),(f=g.events)||(f=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof y=="undefined"||!!e&&y.event.triggered===e.type?t:y.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=(n||"").match(w)||[""],l=n.length;while(l--){a=tt.exec(n[l])||[],d=m=a[1],v=(a[2]||"").split(".").sort(),h=y.event.special[d]||{},d=(s?h.delegateType:h.bindType)||d,h=y.event.special[d]||{},c=y.extend({type:d,origType:m,data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&y.expr.match.needsContext.test(s),namespace:v.join(".")},o);if(!(p=f[d])){p=f[d]=[],p.delegateCount=0;if(!h.setup||h.setup.call(e,i,v,u)===!1)e.addEventListener?e.addEventListener(d,u,!1):e.attachEvent&&e.attachEvent("on"+d,u)}h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),s?p.splice(p.delegateCount++,0,c):p.push(c),y.event.global[d]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=y.hasData(e)&&y._data(e);if(!m||!(a=m.events))return;t=(t||"").match(w)||[""],f=t.length;while(f--){u=tt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in a)y.event.remove(e,p+t[f],n,r,!0);continue}c=y.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=a[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;while(s--)l=h[s],(i||v===l.origType)&&(!n||n.guid===l.guid)&&(!u||u.test(l.namespace))&&(!r||r===l.selector||r==="**"&&l.selector)&&(h.splice(s,1),l.selector&&h.delegateCount--,c.remove&&c.remove.call(e,l));o&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&y.removeEvent(e,p,m.handle),delete a[p])}y.isEmptyObject(a)&&(delete m.handle,y._removeData(e,"events"))},trigger:function(n,r,s,o){var u,a,f,l,c,h,p,d=[s||i],v=n.type||n,m=n.namespace?n.namespace.split("."):[];a=f=s=s||i;if(s.nodeType===3||s.nodeType===8)return;if(et.test(v+y.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),c=v.indexOf(":")<0&&"on"+v,n=n[y.expando]?n:new y.Event(v,typeof n=="object"&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=s),r=r==null?[n]:y.makeArray(r,[n]),p=y.event.special[v]||{};if(!o&&p.trigger&&p.trigger.apply(s,r)===!1)return;if(!o&&!p.noBubble&&!y.isWindow(s)){l=p.delegateType||v,et.test(l+v)||(a=a.parentNode);for(;a;a=a.parentNode)d.push(a),f=a;f===(s.ownerDocument||i)&&d.push(f.defaultView||f.parentWindow||e)}u=0;while((a=d[u++])&&!n.isPropagationStopped())n.type=u>1?l:p.bindType||v,h=(y._data(a,"events")||{})[n.type]&&y._data(a,"handle"),h&&h.apply(a,r),h=c&&a[c],h&&y.acceptData(a)&&h.apply&&h.apply(a,r)===!1&&n.preventDefault();n.type=v;if(!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(v!=="click"||!y.nodeName(s,"a"))&&y.acceptData(s)&&c&&s[v]&&!y.isWindow(s)){f=s[c],f&&(s[c]=null),y.event.triggered=v;try{s[v]()}catch(g){}y.event.triggered=t,f&&(s[c]=f)}return n.result},dispatch:function(e){e=y.event.fix(e);var n,r,i,s,o,u=[],a=p.call(arguments),f=(y._data(this,"events")||{})[e.type]||[],l=y.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=y.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,r=0;while((o=s.handlers[r++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(o.namespace))e.handleObj=o,e.data=o.data,i=((y.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.disabled!==!0||e.type!=="click"){i=[];for(r=0;r<a;r++)o=n[r],s=o.selector+" ",i[s]===t&&(i[s]=o.needsContext?y(s,this).index(f)>=0:y.find(s,this,null,[f]).length),i[s]&&i.push(o);i.length&&u.push({elem:f,handlers:i})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[y.expando])return e;var t,n,r=e,s=y.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=new y.Event(r),t=o.length;while(t--)n=o[t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(y.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==i.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===i.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=y.extend(new y.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?y.event.trigger(i,null,t):y.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},y.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},y.Event=function(e,t){if(!(this instanceof y.Event))return new y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?nt:rt):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||y.now(),this[y.expando]=!0},y.Event.prototype={isDefaultPrevented:rt,isPropagationStopped:rt,isImmediatePropagationStopped:rt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=nt;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=nt;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=nt,this.stopPropagation()}},y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!y.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),y.support.submitBubbles||(y.event.special.submit={setup:function(){if(y.nodeName(this,"form"))return!1;y.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=y.nodeName(n,"input")||y.nodeName(n,"button")?n.form:t;r&&!y._data(r,"submitBubbles")&&(y.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),y._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(y.nodeName(this,"form"))return!1;y.event.remove(this,"._submit")}}),y.support.changeBubbles||(y.event.special.change={setup:function(){if(G.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")y.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),y.event.simulate("change",this,e,!0)});return!1}y.event.add(this,"beforeactivate._change",function(e){var t=e.target;G.test(t.nodeName)&&!y._data(t,"changeBubbles")&&(y.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&y.event.simulate("change",this.parentNode,e,!0)}),y._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return y.event.remove(this,"._change"),!G.test(this.nodeName)}}),y.support.focusinBubbles||y.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){y.event.simulate(t,e.target,y.event.fix(e),!0)};y.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),y.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=rt;else if(!i)return this;return s===1&&(o=i,i=function(e){return y().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=y.guid++)),this.each(function(){y.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=rt),this.each(function(){y.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){y.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return y.event.trigger(e,t,n,!0)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){y.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Y.test(t)&&(y.event.fixHooks[t]=y.event.keyHooks),Z.test(t)&&(y.event.fixHooks[t]=y.event.mouseHooks)}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;(t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){h=!0,v=w,m=t,y=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=e&&t&&e.nextSibling;for(;n;n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=U.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=z.exec(u))n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length);for(o in i.filter)(r=V[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&t.dir==="parentNode",o=T++;return t.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[i])if(t.nodeType===1||s){l=t[w]||(t[w]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else{f=l[i]=[c],f[1]=e(t,n,u)||r;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[w]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,a<r&&yt(e.slice(a,r)),r<s&&yt(e=e.slice(r)),r<s&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=S==null?1:Math.E;E&&(f=a!==c&&a,r=n);for(;(d=T[b])!=null;b++){if(o&&d){for(v=0;m=e[v];v++)if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(s&&b!==y){for(v=0;m=t[v];v++)m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!p&&i.relative[o[1].type]){t=i.find.ID(a.matches[0].replace(et,tt),t)[0];if(!t)return n;e=e.slice(o.shift().value.length)}for(s=V.needsContext.test(e)?-1:o.length-1;s>=0;s--){a=o[s];if(i.relative[f=a.type])break;if(l=i.find[f])if(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t)){o.splice(s,1),e=r.length&&pt(o);if(!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,b,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/\{\s*\[native code\]\s*\}/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{D.call(h.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;if(n===c||n.nodeType!==9||!n.documentElement)return c;c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){for(;n=s[i];i++)n.nodeType===1&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},i.find.CLASS=S.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&!p)return t.getElementsByClassName(e)},v=[],d=[":focus"];if(S.qsa=rt(n.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=new RegExp(d.join("|")),v=new RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},b=h.compareDocumentPosition?function(e,t){var r;if(e===t)return a=!0,0;if(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))return r&1||e.parentNode&&e.parentNode.nodeType===11?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return(~t.sourceIndex||A)-(g(E,e)&&~e.sourceIndex||A);if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(b),S.detectDuplicates=a,c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']");if(S.matchesSelector&&!p&&(!v||!v.test(t))&&!d.test(t))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;a=!S.detectDuplicates,e.sort(b);if(a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=s(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.substr(i.length-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[x,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=y.attr,y.find=ut,y.expr=ut.selectors,y.expr[":"]=y.expr.pseudos,y.unique=ut.uniqueSort,y.text=ut.getText,y.isXMLDoc=ut.isXML,y.contains=ut.contains}(e);var it=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ot=/^.[^:#\[\.,]*$/,ut=y.expr.match.needsContext,at={children:!0,contents:!0,next:!0,prev:!0};y.fn.extend({find:function(e){var t,n,r;if(typeof e!="string")return r=this,this.pushStack(y(e).filter(function(){for(t=0;t<r.length;t++)if(y.contains(r[t],this))return!0}));n=[];for(t=0;t<this.length;t++)y.find(e,this[t],n);return n=this.pushStack(y.unique(n)),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=y(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(y.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(lt(this,e,!1))},filter:function(e){return this.pushStack(lt(this,e,!0))},is:function(e){return!!e&&(typeof e=="string"?ut.test(e)?y(e,this.context).index(this[0])>=0:y.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ut.test(e)||typeof e!="string"?y(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:y.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?y.unique(s):s)},index:function(e){return e?typeof e=="string"?y.inArray(this[0],y(e)):y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?y(e,t):y.makeArray(e&&e.nodeType?[e]:e),r=y.merge(this.get(),n);return this.pushStack(y.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),y.fn.andSelf=y.fn.addBack,y.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return y.dir(e,"parentNode")},parentsUntil:function(e,t,n){return y.dir(e,"parentNode",n)},next:function(e){return ft(e,"nextSibling")},prev:function(e){return ft(e,"previousSibling")},nextAll:function(e){return y.dir(e,"nextSibling")},prevAll:function(e){return y.dir(e,"previousSibling")},nextUntil:function(e,t,n){return y.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return y.dir(e,"previousSibling",n)},siblings:function(e){return y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return y.sibling(e.firstChild)},contents:function(e){return y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:y.merge([],e.childNodes)}},function(e,t){y.fn[e]=function(n,r){var i=y.map(this,t,n);return it.test(e)||(r=n),r&&typeof r=="string"&&(i=y.filter(r,i)),i=this.length>1&&!at[e]?y.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),y.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?y.find.matchesSelector(t[0],e)?[t[0]]:[]:y.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!y(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",pt=/ jQuery\d+="(?:null|\d+)"/g,dt=new RegExp("<(?:"+ht+")[\\s/>]","i"),vt=/^\s+/,mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,gt=/<([\w:]+)/,yt=/<tbody/i,bt=/<|&#?\w+;/,wt=/<(?:script|style|link)/i,Et=/^(?:checkbox|radio)$/i,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/^$|\/(?:java|ecma)script/i,Tt=/^true\/(.*)/,Nt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ct={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:y.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},kt=ct(i),Lt=kt.appendChild(i.createElement("div"));Ct.optgroup=Ct.option,Ct.tbody=Ct.tfoot=Ct.colgroup=Ct.caption=Ct.thead,Ct.th=Ct.td,y.fn.extend({text:function(e){return y.access(this,function(e){return e===t?y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(y.isFunction(e))return this.each(function(t){y(this).wrapAll(e.call(this,t))});if(this[0]){var t=y(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return y.isFunction(e)?this.each(function(t){y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=y(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y.isFunction(e);return this.each(function(n){y(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){y.nodeName(this,"body")||y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||y.filter(e,[n]).length>0)!t&&n.nodeType===1&&y.cleanData(Ht(n)),n.parentNode&&(t&&y.contains(n.ownerDocument,n)&&_t(Ht(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&y.cleanData(Ht(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&y.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return y.clone(this,e,t)})},html:function(e){return y.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(pt,""):t;if(typeof e=="string"&&!wt.test(e)&&(y.support.htmlSerialize||!dt.test(e))&&(y.support.leadingWhitespace||!vt.test(e))&&!Ct[(gt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(mt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(y.cleanData(Ht(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=y.isFunction(e);return!t&&typeof e!="string"&&(e=y(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;if(n&&this.nodeType===1||this.nodeType===11)y(this).remove(),t?t.parentNode.insertBefore(e,t):n.appendChild(e)})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=c.apply([],e);var i,s,o,u,a,f,l=0,h=this.length,p=this,d=h-1,v=e[0],m=y.isFunction(v);if(m||!(h<=1||typeof v!="string"||y.support.checkClone||!St.test(v)))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(h){i=y.buildFragment(e,this[0].ownerDocument,!1,this),s=i.firstChild,i.childNodes.length===1&&(i=s);if(s){n=n&&y.nodeName(s,"tr"),o=y.map(Ht(i,"script"),Ot),u=o.length;for(;l<h;l++)a=i,l!==d&&(a=y.clone(a,!0,!0),u&&y.merge(o,Ht(a,"script"))),r.call(n&&y.nodeName(this[l],"table")?At(this[l],"tbody"):this[l],a,l);if(u){f=o[o.length-1].ownerDocument,y.map(o,Mt);for(l=0;l<u;l++)a=o[l],xt.test(a.type||"")&&!y._data(a,"globalEval")&&y.contains(f,a)&&(a.src?y.ajax({url:a.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):y.globalEval((a.text||a.textContent||a.innerHTML||"").replace(Nt,"")))}i=s=null}}return this}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){y.fn[e]=function(e){var n,r=0,i=[],s=y(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),y(s[r])[t](n),h.apply(i,n.get());return this.pushStack(i)}}),y.extend({clone:function(e,t,n){var r,i,s,o,u,a=y.contains(e.ownerDocument,e);y.support.html5Clone||y.isXMLDoc(e)||!dt.test("<"+e.nodeName+">")?u=e.cloneNode(!0):(Lt.innerHTML=e.outerHTML,Lt.removeChild(u=Lt.firstChild));if((!y.support.noCloneEvent||!y.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!y.isXMLDoc(e)){r=Ht(u),i=Ht(e);for(o=0;(s=i[o])!=null;++o)r[o]&&Pt(s,r[o])}if(t)if(n){i=i||Ht(e),r=r||Ht(u);for(o=0;(s=i[o])!=null;o++)Dt(s,r[o])}else Dt(e,u);return r=Ht(u,"script"),r.length>0&&_t(r,!a&&Ht(e,"script")),r=i=s=null,u},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=ct(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(y.type(s)==="object")y.merge(p,s.nodeType?[s]:s);else if(!bt.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),o=(gt.exec(s)||["",""])[1].toLowerCase(),a=Ct[o]||Ct._default,u.innerHTML=a[1]+s.replace(mt,"<$1></$2>")+a[2],l=a[0];while(l--)u=u.lastChild;!y.support.leadingWhitespace&&vt.test(s)&&p.push(t.createTextNode(vt.exec(s)[0]));if(!y.support.tbody){s=o==="table"&&!yt.test(s)?u.firstChild:a[1]==="<table>"&&!yt.test(s)?u:0,l=s&&s.childNodes.length;while(l--)y.nodeName(f=s.childNodes[l],"tbody")&&!f.childNodes.length&&s.removeChild(f)}y.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),y.support.appendChecked||y.grep(Ht(p,"input"),Bt),d=0;while(s=p[d++]){if(r&&y.inArray(s,r)!==-1)continue;i=y.contains(s.ownerDocument,s),u=Ht(h.appendChild(s),"script"),i&&_t(u);if(n){l=0;while(s=u[l++])xt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,i,s,o=0,u=y.expando,a=y.cache,l=y.support.deleteExpando,c=y.event.special;for(;(i=e[o])!=null;o++)if(t||y.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)c[s]?y.event.remove(i,s):y.removeEvent(i,s,n.handle);a[r]&&(delete a[r],l?delete i[u]:typeof i.removeAttribute!="undefined"?i.removeAttribute(u):i[u]=null,f.push(r))}}}});var jt,Ft,It,qt=/alpha\([^)]*\)/i,Rt=/opacity\s*=\s*([^)]*)/,Ut=/^(top|right|bottom|left)$/,zt=/^(none|table(?!-c[ea]).+)/,Wt=/^margin/,Xt=new RegExp("^("+b+")(.*)$","i"),Vt=new RegExp("^("+b+")(?!px)[a-z%]+$","i"),$t=new RegExp("^([+-])=("+b+")","i"),Jt={BODY:"block"},Kt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:0,fontWeight:400},Gt=["Top","Right","Bottom","Left"],Yt=["Webkit","O","Moz","ms"];y.fn.extend({css:function(e,n){return y.access(this,function(e,n,r){var i,s,o={},u=0;if(y.isArray(n)){i=Ft(e),s=n.length;for(;u<s;u++)o[n[u]]=y.css(e,n[u],!1,i);return o}return r!==t?y.style(e,n,r):y.css(e,n)},e,n,arguments.length>1)},show:function(){return tn(this,!0)},hide:function(){return tn(this)},toggle:function(e){var t=typeof e=="boolean";return this.each(function(){(t?e:en(this))?y(this).show():y(this).hide()})}}),y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=jt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":y.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=y.camelCase(n),f=e.style;n=y.cssProps[a]||(y.cssProps[a]=Zt(f,a)),u=y.cssHooks[n]||y.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=$t.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(y.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!y.cssNumber[a]&&(r+="px"),!y.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=y.camelCase(n);return n=y.cssProps[a]||(y.cssProps[a]=Zt(e.style,a)),u=y.cssHooks[n]||y.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,r)),s===t&&(s=jt(e,n,i)),s==="normal"&&n in Qt&&(s=Qt[n]),r?(o=parseFloat(s),r===!0||y.isNumeric(o)?o||0:s):s},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(Ft=function(t){return e.getComputedStyle(t,null)},jt=function(e,n,r){var i,s,o,u=r||Ft(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!y.contains(e.ownerDocument,e)&&(a=y.style(e,n)),Vt.test(a)&&Wt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):i.documentElement.currentStyle&&(Ft=function(e){return e.currentStyle},jt=function(e,n,r){var i,s,o,u=r||Ft(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Vt.test(a)&&!Ut.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),y.each(["height","width"],function(e,t){y.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&zt.test(y.css(e,"display"))?y.swap(e,Kt,function(){return sn(e,t,r)}):sn(e,t,r)},set:function(e,n,r){var i=r&&Ft(e);return nn(e,n,r?rn(e,t,r,y.support.boxSizing&&y.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),y.support.opacity||(y.cssHooks.opacity={get:function(e,t){return Rt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=y.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&y.trim(s.replace(qt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=qt.test(s)?s.replace(qt,i):s+" "+i}}),y(function(){y.support.reliableMarginRight||(y.cssHooks.marginRight={get:function(e,t){if(t)return y.swap(e,{display:"inline-block"},jt,[e,"marginRight"])}}),!y.support.pixelPosition&&y.fn.position&&y.each(["top","left"],function(e,t){y.cssHooks[t]={get:function(e,n){if(n)return n=jt(e,t),Vt.test(n)?y(e).position()[t]+"px":n}}})}),y.expr&&y.expr.filters&&(y.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!y.support.reliableHiddenOffsets&&(e.style&&e.style.display||y.css(e,"display"))==="none"},y.expr.filters.visible=function(e){return!y.expr.filters.hidden(e)}),y.each({margin:"",padding:"",border:"Width"},function(e,t){y.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Gt[r]+t]=s[r]||s[r-2]||s[0];return i}},Wt.test(e)||(y.cssHooks[e+t].set=nn)});var an=/%20/g,fn=/\[\]$/,ln=/\r?\n/g,cn=/^(?:submit|button|image|reset)$/i,hn=/^(?:input|select|textarea|keygen)/i;y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&hn.test(this.nodeName)&&!cn.test(e)&&(this.checked||!Et.test(e))}).map(function(e,t){var n=y(this).val();return n==null?null:y.isArray(n)?y.map(n,function(e){return{name:t.name,value:e.replace(ln,"\r\n")}}):{name:t.name,value:n.replace(ln,"\r\n")}}).get()}}),y.param=function(e,n){var r,i=[],s=function(e,t){t=y.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=y.ajaxSettings&&y.ajaxSettings.traditional);if(y.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,function(){s(this.name,this.value)});else for(r in e)pn(r,e[r],n,s);return i.join("&").replace(an,"+")};var dn,vn,mn=y.now(),gn=/\?/,yn=/#.*$/,bn=/([?&])_=[^&]*/,wn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,En=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Sn=/^(?:GET|HEAD)$/,xn=/^\/\//,Tn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Nn=y.fn.load,Cn={},kn={},Ln="*/".concat("*");try{vn=s.href}catch(An){vn=i.createElement("a"),vn.href="",vn=vn.href}dn=Tn.exec(vn.toLowerCase())||[],y.fn.load=function(e,n,r){if(typeof e!="string"&&Nn)return Nn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),y.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),u.length>0&&y.ajax({url:e,type:s,dataType:"html",data:n}).done(function(e){o=arguments,u.html(i?y("<div>").append(y.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,o||[e.responseText,t,e])}),this},y.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){y.fn[t]=function(e){return this.on(t,e)}}),y.each(["get","post"],function(e,n){y[n]=function(e,r,i,s){return y.isFunction(r)&&(s=s||i,i=r,r=t),y.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),y.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vn,type:"GET",isLocal:En.test(dn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ln,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":y.parseJSON,"text xml":y.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?_n(_n(e,y.ajaxSettings),t):_n(y.ajaxSettings,e)},ajaxPrefilter:On(Cn),ajaxTransport:On(kn),ajax:function(e,n){function N(e,n,o,a){var l,g,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),r=t,s=a||"",x.readyState=e>0?4:0,o&&(w=Dn(c,x,o));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(y.lastModified[i]=S),S=x.getResponseHeader("etag"),S&&(y.etag[i]=S)),e===304?(l=!0,T="notmodified"):(l=Pn(c,w),T=l.state,g=l.data,b=l.error,l=!b);else{b=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(m),m=t,f&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:b]),v.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--y.active||y.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=y.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?y(h):y.event,d=y.Deferred(),v=y.Callbacks("once memory"),m=c.statusCode||{},g={},b={},E=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(E===2){if(!o){o={};while(t=wn.exec(s))o[t[1].toLowerCase()]=t[2]}t=o[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return E===2?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return E||(e=b[n]=b[n]||e,g[e]=t),this},overrideMimeType:function(e){return E||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(E<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return r&&r.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||vn)+"").replace(yn,"").replace(xn,dn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=y.trim(c.dataType||"*").toLowerCase().match(w)||[""],c.crossDomain==null&&(a=Tn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===dn[1]&&a[2]===dn[2]&&(a[3]||(a[1]==="http:"?80:443))==(dn[3]||(dn[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=y.param(c.data,c.traditional)),Mn(Cn,c,n,x);if(E===2)return x;f=c.global,f&&y.active++===0&&y.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Sn.test(c.type),i=c.url,c.hasContent||(c.data&&(i=c.url+=(gn.test(i)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=bn.test(i)?i.replace(bn,"$1_="+mn++):i+(gn.test(i)?"&":"?")+"_="+mn++)),c.ifModified&&(y.lastModified[i]&&x.setRequestHeader("If-Modified-Since",y.lastModified[i]),y.etag[i]&&x.setRequestHeader("If-None-Match",y.etag[i])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Ln+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);r=Mn(kn,c,n,x);if(!r)N(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,r.send(g,N)}catch(T){if(!(E<2))throw T;N(-1,T)}}return x}return x.abort()},getScript:function(e,n){return y.get(e,t,n,"script")},getJSON:function(e,t,n){return y.get(e,t,n,"json")}}),y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return y.globalEval(e),e}}}),y.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),y.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||y("head")[0]||i.documentElement;return{send:function(t,s){n=i.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Hn=[],Bn=/(=)\?(?=&|$)|\?\?/;y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Hn.pop()||y.expando+"_"+mn++;return this[e]=!0,e}}),y.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Bn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=y.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Bn,"$1"+s):n.jsonp!==!1&&(n.url+=(gn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||y.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Hn.push(s)),u&&y.isFunction(o)&&o(u[0]),u=o=t}),"script"});var jn,Fn,In=0,qn=e.ActiveXObject&&function(){var e;for(e in jn)jn[e](t,!0)};y.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Rn()||Un()}:Rn,Fn=y.ajaxSettings.xhr(),y.support.cors=!!Fn&&"withCredentials"in Fn,Fn=y.support.ajax=!!Fn,Fn&&y.ajaxTransport(function(n){if(!n.crossDomain||y.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=y.noop,qn&&delete jn[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,h=a.responseXML,l=a.getAllResponseHeaders(),h&&h.documentElement&&(c.xml=h),typeof a.responseText=="string"&&(c.text=a.responseText);try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r):(o=++In,qn&&(jn||(jn={},y(e).unload(qn)),jn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var zn,Wn,Xn=/^(?:toggle|show|hide)$/,Vn=new RegExp("^(?:([+-])=|)("+b+")([a-z%]*)$","i"),$n=/queueHooks$/,Jn=[er],Kn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Vn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(y.cssNumber[e]?"":"px");if(r!=="px"&&u){u=y.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,y.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};y.Animation=y.extend(Yn,{tweener:function(e,t){y.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Kn[n]=Kn[n]||[],Kn[n].unshift(t)},prefilter:function(e,t){t?Jn.unshift(e):Jn.push(e)}}),y.Tween=tr,tr.prototype={constructor:tr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(y.cssNumber[n]?"":"px")},cur:function(){var e=tr.propHooks[this.prop];return e&&e.get?e.get(this):tr.propHooks._default.get(this)},run:function(e){var t,n=tr.propHooks[this.prop];return this.options.duration?this.pos=t=y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tr.propHooks._default.set(this),this}},tr.prototype.init.prototype=tr.prototype,tr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=y.css(e.elem,e.prop,"auto"),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){y.fx.step[e.prop]?y.fx.step[e.prop](e):e.elem.style&&(e.elem.style[y.cssProps[e.prop]]!=null||y.cssHooks[e.prop])?y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},tr.propHooks.scrollTop=tr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},y.each(["toggle","show","hide"],function(e,t){var n=y.fn[t];y.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(nr(t,!0),e,r,i)}}),y.fn.extend({fadeTo:function(e,t,n,r){return this.filter(en).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=y.isEmptyObject(e),s=y.speed(t,n,r),o=function(){var t=Yn(this,y.extend({},e),s);o.finish=function(){t.stop(!0)},(i||y._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=y.timers,o=y._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&$n.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&y.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=y._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=y.timers,o=r?r.length:0;n.finish=!0,y.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),y.each({slideDown:nr("show"),slideUp:nr("hide"),slideToggle:nr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){y.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),y.speed=function(e,t,n){var r=e&&typeof e=="object"?y.extend({},e):{complete:n||!n&&t||y.isFunction(e)&&e,duration:e,easing:n&&t||t&&!y.isFunction(t)&&t};r.duration=y.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in y.fx.speeds?y.fx.speeds[r.duration]:y.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){y.isFunction(r.old)&&r.old.call(this),r.queue&&y.dequeue(this,r.queue)},r},y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},y.timers=[],y.fx=tr.prototype.init,y.fx.tick=function(){var e,n=y.timers,r=0;zn=y.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||y.fx.stop(),zn=t},y.fx.timer=function(e){e()&&y.timers.push(e)&&y.fx.start()},y.fx.interval=13,y.fx.start=function(){Wn||(Wn=setInterval(y.fx.tick,y.fx.interval))},y.fx.stop=function(){clearInterval(Wn),Wn=null},y.fx.speeds={slow:600,fast:200,_default:400},y.fx.step={},y.expr&&y.expr.filters&&(y.expr.filters.animated=function(e){return y.grep(y.timers,function(t){return e===t.elem}).length}),y.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){y.offset.setOffset(this,e,t)});var n,r,i={top:0,left:0},s=this[0],o=s&&s.ownerDocument;if(!o)return;return n=o.documentElement,y.contains(n,s)?(typeof s.getBoundingClientRect!="undefined"&&(i=s.getBoundingClientRect()),r=rr(o),{top:i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i},y.offset={setOffset:function(e,t,n){var r=y.css(e,"position");r==="static"&&(e.style.position="relative");var i=y(e),s=i.offset(),o=y.css(e,"top"),u=y.css(e,"left"),a=(r==="absolute"||r==="fixed")&&y.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),y.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},y.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return y.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),y.nodeName(e[0],"html")||(n=e.offset()),n.top+=y.css(e[0],"borderTopWidth",!0),n.left+=y.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-y.css(r,"marginTop",!0),left:t.left-n.left-y.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.documentElement;while(e&&!y.nodeName(e,"html")&&y.css(e,"position")==="static")e=e.offsetParent;return e||i.documentElement})}}),y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);y.fn[e]=function(i){return y.access(this,function(e,i,s){var o=rr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?y(o).scrollLeft():s,r?s:y(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),y.each({Height:"height",Width:"width"},function(e,n){y.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){y.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return y.access(this,function(n,r,i){var s;return y.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?y.css(n,r,u):y.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=y,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return y})}(window),define("libs/fmt",["require","exports","module"],function(e,t,n){var r=/%[sdj%]/g;n.exports=function(e){var t;if(typeof e!="string"){var n=[];for(t=0;t<arguments.length;t++)n.push(inspect(arguments[t]));return n.join(" ")}t=1;var i=arguments,s=i.length,o=String(e).replace(r,function(e){if(e==="%%")return"%";if(t>=s)return e;switch(e){case"%s":return String(i[t++]);case"%d":return Number(i[t++]);case"%j":return JSON.stringify(i[t++]);default:return e}});for(var u=i[t];t<s;u=i[++t])u===null||typeof u!="object"?o+=" "+u:o+=" "+inspect(u);return o}}),define("libs/logger",["require","exports","module","underscore","jquery","libs/fmt"],function(e,t){var n=e("underscore"),r=e("jquery"),i=e("libs/fmt"),s="//"+window.location.host+"/logs/v1/",o=["error","warn","info","debug"];t.setLevel=function(e){var t=o.indexOf(e);t>-1&&(level=t)};var u=function(e,t,i){t=n.extend({ua:window.navigator.userAgent,location:window.location.pathname,utype:CCDATA.current_user?"registered":"anon",uid:CCDATA.current_user?CCDATA.current_user._id:"null"},t);var o=document.createElement("img"),u,a={logdata:t,logname:i,date:(new Date).valueOf(),level:e};o.src=s+"?"+r.param(a)},a=function(e){if(n.isDate(e)||n.isRegExp(e))return String(e);if(!n.isObject(e))return String(e);try{return JSON.stringify(e)}catch(t){return String(e)}},f=function(e,t,n){CCDATA.env==="development"&&console.log("[LOGGER]",t),u(e,t,n)};o.forEach(function(e){t[e]=function(t,n){var r=o.indexOf(e);return r>o.length?!1:(f(e,t,n),!0)}})}),define("libs/log_errors",["require","exports","module","libs/logger"],function(e,t,n){var r=e("libs/logger");n.exports={handler:function(e){var t;typeof e=="object"?t=e.message:t=arguments[0];var n=new RegExp(window.location.host+"(.*)"),i={message:t.replace(/"/g,'\\"')};r.error(i,"javascript_errors")}}});var hljs=new function(){function e(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function t(e,t,n){return RegExp(t,"m"+(e.cI?"i":"")+(n?"g":""))}function n(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(n.nodeName=="CODE")return n;if(n.nodeType!=3||!n.nodeValue.match(/\s+/))break}}function r(e,t){var n="";for(var i=0;i<e.childNodes.length;i++)if(e.childNodes[i].nodeType==3){var s=e.childNodes[i].nodeValue;t&&(s=s.replace(/\n/g,"")),n+=s}else e.childNodes[i].nodeName=="BR"?n+="\n":n+=r(e.childNodes[i]);return/MSIE [678]/.test(navigator.userAgent)&&(n=n.replace(/\r/g,"\n")),n}function i(e){var t=e.className.split(/\s+/);t=t.concat(e.parentNode.className.split(/\s+/));for(var n=0;n<t.length;n++){var r=t[n].replace(/^language-/,"");if(d[r]||r=="no-highlight")return r}}function s(e){var t=[];return function(e,n){for(var r=0;r<e.childNodes.length;r++)e.childNodes[r].nodeType==3?n+=e.childNodes[r].nodeValue.length:e.childNodes[r].nodeName=="BR"?n+=1:(t.push({event:"start",offset:n,node:e.childNodes[r]}),n=arguments.callee(e.childNodes[r],n),t.push({event:"stop",offset:n,node:e.childNodes[r]}));return n}(e,0),t}function o(t,n,r){function u(){return t.length&&n.length?t[0].offset!=n[0].offset?t[0].offset<n[0].offset?t:n:n[0].event=="start"?t:n:t.length?t:n}function a(t){var n="<"+t.nodeName.toLowerCase();for(var r=0;r<t.attributes.length;r++){var i=t.attributes[r];n+=" "+i.nodeName.toLowerCase(),i.nodeValue!=undefined&&i.nodeValue!=0&&i.nodeValue!=null&&(n+='="'+e(i.nodeValue)+'"')}return n+">"}var i=0,s="",o=[];while(t.length||n.length){var f=u().splice(0,1)[0];s+=e(r.substr(i,f.offset-i)),i=f.offset;if(f.event=="start")s+=a(f.node),o.push(f.node);else if(f.event=="stop"){var l=o.length;do{l--;var c=o[l];s+="</"+c.nodeName.toLowerCase()+">"}while(c!=f.node);o.splice(l,1);while(l<o.length)s+=a(o[l]),l++}}return s+=r.substr(i),s}function u(){function e(n,r,i){if(n.compiled)return;i||(n.bR=t(r,n.b?n.b:"\\B|\\b"),!n.e&&!n.eW&&(n.e="\\B|\\b"),n.e&&(n.eR=t(r,n.e))),n.i&&(n.iR=t(r,n.i)),n.r==undefined&&(n.r=1),n.k&&(n.lR=t(r,n.l||hljs.IR,!0));for(var s in n.k){if(!n.k.hasOwnProperty(s))continue;n.k[s]instanceof Object?n.kG=n.k:n.kG={keyword:n.k};break}n.c||(n.c=[]),n.compiled=!0;for(var o=0;o<n.c.length;o++)e(n.c[o],r,!1);n.starts&&e(n.starts,r,!1)}for(var n in d){if(!d.hasOwnProperty(n))continue;e(d[n].dM,d[n],!0)}}function a(n,r){function i(e,t){for(var n=0;n<t.c.length;n++)if(t.c[n].bR.test(e))return t.c[n]}function s(e,t){if(b[e].e&&b[e].eR.test(t))return 1;if(b[e].eW){var n=s(e-1,t);return n?n+1:0}return 0}function o(e,t){return t.iR&&t.iR.test(e)}function f(e,n){var r=[];for(var i=0;i<e.c.length;i++)r.push(e.c[i].b);var s=b.length-1;do b[s].e&&r.push(b[s].e),s--;while(b[s+1].eW);return e.i&&r.push(e.i),t(n,"("+r.join("|")+")",!0)}function l(e,t){var n=b[b.length-1];n.t||(n.t=f(n,y)),n.t.lastIndex=t;var r=n.t.exec(e);return r?[e.substr(t,r.index-t),r[0],!1]:[e.substr(t),"",!0]}function c(e,t){var n=y.cI?t[0].toLowerCase():t[0];for(var r in e.kG){if(!e.kG.hasOwnProperty(r))continue;var i=e.kG[r].hasOwnProperty(n);if(i)return[r,i]}return!1}function h(t,n){if(!n.k)return e(t);var r="",i=0;n.lR.lastIndex=0;var s=n.lR.exec(t);while(s){r+=e(t.substr(i,s.index-i));var o=c(n,s);o?(E+=o[1],r+='<span class="'+o[0]+'">'+e(s[0])+"</span>"):r+=e(s[0]),i=n.lR.lastIndex,s=n.lR.exec(t)}return r+=e(t.substr(i,t.length-i)),r}function p(e,t){if(t.sL&&d[t.sL]){var n=a(t.sL,e);return E+=n.keyword_count,n.value}return h(e,t)}function v(t,n){var r=t.cN?'<span class="'+t.cN+'">':"";t.rB?(S+=r,t.buffer=""):t.eB?(S+=e(n)+r,t.buffer=""):(S+=r,t.buffer=n),b.push(t),w+=t.r}function g(t,n,r){var u=b[b.length-1];if(r)return S+=p(u.buffer+t,u),!1;var a=i(n,u);if(a)return S+=p(u.buffer+t,u),v(a,n),a.rB;var f=s(b.length-1,n);if(f){var l=u.cN?"</span>":"";u.rE?S+=p(u.buffer+t,u)+l:u.eE?S+=p(u.buffer+t,u)+l+e(n):S+=p(u.buffer+t+n,u)+l;while(f>1)l=b[b.length-2].cN?"</span>":"",S+=l,f--,b.length--;var c=b[b.length-1];return b.length--,b[b.length-1].buffer="",c.starts&&v(c.starts,""),u.rE}if(o(n,u))throw"Illegal"}u.called||(u(),u.called=!0);var y=d[n],b=[y.dM],w=0,E=0,S="";try{var x=0;y.dM.buffer="";do{var T=l(r,x),N=g(T[0],T[1],T[2]);x+=T[0].length,N||(x+=T[1].length)}while(!T[2]);if(b.length>1)throw"Illegal";return{r:w,keyword_count:E,value:S}}catch(C){if(C=="Illegal")return{r:0,keyword_count:0,value:e(r)};throw C}}function f(t){var n={keyword_count:0,r:0,value:e(t)},r=n;for(var i in d){if(!d.hasOwnProperty(i))continue;var s=a(i,t);s.language=i,s.keyword_count+s.r>r.keyword_count+r.r&&(r=s),s.keyword_count+s.r>n.keyword_count+n.r&&(r=n,n=s)}return r.language&&(n.second_best=r),n}function l(e,t,n){return t&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,n,r,i){return n.replace(/\t/g,t)})),n&&(e=e.replace(/\n/g,"<br>")),e}function c(e,t,n){var u=r(e,n),c=i(e);if(c=="no-highlight")return;if(c)var h=a(c,u);else{var h=f(u);c=h.language}var p=s(e);if(p.length){var d=document.createElement("pre");d.innerHTML=h.value,h.value=o(p,s(d),u)}h.value=l(h.value,t,n);var v=e.className;v.match("(\\s|^)(language-)?"+c+"(\\s|$)")||(v=v?v+" "+c:c);if(/MSIE [678]/.test(navigator.userAgent)&&e.tagName=="CODE"&&e.parentNode.tagName=="PRE"){var d=e.parentNode,m=document.createElement("div");m.innerHTML="<pre><code>"+h.value+"</code></pre>",e=m.firstChild.firstChild,m.firstChild.cN=d.cN,d.parentNode.replaceChild(m.firstChild,d)}else e.innerHTML=h.value;e.className=v,e.result={language:c,kw:h.keyword_count,re:h.r},h.second_best&&(e.second_best={language:h.second_best.language,kw:h.second_best.keyword_count,re:h.second_best.r})}function h(){if(h.called)return;h.called=!0;var e=document.getElementsByTagName("pre");for(var t=0;t<e.length;t++){var r=n(e[t]);r&&c(r,hljs.tabReplace)}}function p(){window.addEventListener?(window.addEventListener("DOMContentLoaded",h,!1),window.addEventListener("load",h,!1)):window.attachEvent?window.attachEvent("onload",h):window.onload=h}var d={};this.LANGUAGES=d,this.highlight=a,this.highlightAuto=f,this.fixMarkup=l,this.highlightBlock=c,this.initHighlighting=h,this.initHighlightingOnLoad=p,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="\\b(0x[A-Za-z0-9]+|\\d+(\\.\\d+)?)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\.",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0},this.CLCM={cN:"comment",b:"//",e:"$"},this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"},this.HCM={cN:"comment",b:"#",e:"$"},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.inherit=function(e,t){var n={};for(var r in e)n[r]=e[r];if(t)for(var r in t)n[r]=t[r];return n}};hljs.LANGUAGES.java={dM:{k:{"false":1,"synchronized":1,"int":1,"abstract":1,"float":1,"private":1,"char":1,"interface":1,"boolean":1,"static":1,"null":1,"if":1,"const":1,"for":1,"true":1,"while":1,"long":1,"throw":1,strictfp:1,"finally":1,"protected":1,"extends":1,"import":1,"native":1,"final":1,"implements":1,"return":1,"void":1,"enum":1,"else":1,"break":1,"transient":1,"new":1,"catch":1,"instanceof":1,"byte":1,"super":1,"class":1,"volatile":1,"case":1,assert:1,"short":1,"package":1,"default":1,"double":1,"public":1,"try":1,"this":1,"switch":1,"continue":1,"throws":1},c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",c:[{cN:"javadoctag",b:"@[A-Za-z]+"}],r:10},hljs.CLCM,hljs.CBLCLM,hljs.ASM,hljs.QSM,{cN:"class",b:"(class |interface )",e:"{",k:{"class":1,"interface":1},i:":",c:[{b:"(implements|extends)",k:{"extends":1,"implements":1},r:10},{cN:"title",b:hljs.UIR}]},hljs.CNM,{cN:"annotation",b:"@[A-Za-z]+"}]}},hljs.LANGUAGES.python=function(){var e={cN:"string",b:"(u|b)?r?'''",e:"'''",r:10},t={cN:"string",b:'(u|b)?r?"""',e:'"""',r:10},n={cN:"string",b:"(u|r|ur|b|br)'",e:"'",c:[hljs.BE],r:10},r={cN:"string",b:'(u|r|ur|b|br)"',e:'"',c:[hljs.BE],r:10},i={cN:"title",b:hljs.UIR},s={cN:"params",b:"\\(",e:"\\)",c:[e,t,n,r,hljs.ASM,hljs.QSM]};return{dM:{k:{keyword:{and:1,elif:1,is:1,global:1,as:1,"in":1,"if":1,from:1,raise:1,"for":1,except:1,"finally":1,print:1,"import":1,pass:1,"return":1,exec:1,"else":1,"break":1,not:1,"with":1,"class":1,assert:1,yield:1,"try":1,"while":1,"continue":1,del:1,or:1,def:1,lambda:1,nonlocal:10},built_in:{None:1,True:1,False:1,Ellipsis:1,NotImplemented:1}},i:"(</|->|\\?)",c:[hljs.HCM,e,t,n,r,hljs.ASM,hljs.QSM,{cN:"function",b:"\\bdef ",e:":",i:"$",k:{def:1},c:[i,s],r:10},{cN:"class",b:"\\bclass ",e:":",i:"[${]",k:{"class":1},c:[i,s],r:10},hljs.CNM,{cN:"decorator",b:"@",e:"$"}]}}}(),hljs.LANGUAGES.bash=function(){var e={"true":1,"false":1},t={cN:"variable",b:"\\$([a-zA-Z0-9_]+)\\b"},n={cN:"variable",b:"\\$\\{(([^}])|(\\\\}))+\\}",c:[hljs.CNM]},r={cN:"string",b:'"',e:'"',i:"\\n",c:[hljs.BE,t,n],r:0},i={cN:"test_condition",b:"",e:"",c:[r,t,n,hljs.CNM],k:{literal:e},r:0};return{dM:{k:{keyword:{"if":1,then:1,"else":1,fi:1,"for":1,"break":1,"continue":1,"while":1,"in":1,"do":1,done:1,echo:1,exit:1,"return":1,set:1,declare:1},literal:e},c:[{cN:"shebang",b:"(#!\\/bin\\/bash)|(#!\\/bin\\/sh)",r:10},hljs.HCM,hljs.CNM,r,t,n,hljs.inherit(i,{b:"\\[ ",e:" \\]",r:0}),hljs.inherit(i,{b:"\\[\\[ ",e:" \\]\\]"})]}}}(),hljs.LANGUAGES.xml=function(){var e="[A-Za-z0-9\\._:-]+",t={eW:!0,c:[{cN:"attribute",b:e,r:0},{b:'="',rB:!0,e:'"',c:[{cN:"value",b:'"',eW:!0}]},{b:"='",rB:!0,e:"'",c:[{cN:"value",b:"'",eW:!0}]},{b:"=",c:[{cN:"value",b:"[^\\s/>]+"}]}]};return{cI:!0,dM:{c:[{cN:"pi",b:"<\\?",e:"\\?>",r:10},{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style",e:">",k:{title:{style:1}},c:[t],starts:{cN:"css",e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script",e:">",k:{title:{script:1}},c:[t],starts:{cN:"javascript",e:"</script>",rE:!0,sL:"javascript"}},{cN:"vbscript",b:"<%",e:"%>",sL:"vbscript"},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:"[^ />]+"},t]}]}}}(),hljs.LANGUAGES.perl=function(){var e={getpwent:1,getservent:1,quotemeta:1,msgrcv:1,scalar:1,kill:1,dbmclose:1,undef:1,lc:1,ma:1,syswrite:1,tr:1,send:1,umask:1,sysopen:1,shmwrite:1,vec:1,qx:1,utime:1,local:1,oct:1,semctl:1,localtime:1,readpipe:1,"do":1,"return":1,format:1,read:1,sprintf:1,dbmopen:1,pop:1,getpgrp:1,not:1,getpwnam:1,rewinddir:1,qq:1,fileno:1,qw:1,endprotoent:1,wait:1,sethostent:1,bless:1,s:1,opendir:1,"continue":1,each:1,sleep:1,endgrent:1,shutdown:1,dump:1,chomp:1,connect:1,getsockname:1,die:1,socketpair:1,close:1,flock:1,exists:1,index:1,shmget:1,sub:1,"for":1,endpwent:1,redo:1,lstat:1,msgctl:1,setpgrp:1,abs:1,exit:1,select:1,print:1,ref:1,gethostbyaddr:1,unshift:1,fcntl:1,syscall:1,"goto":1,getnetbyaddr:1,join:1,gmtime:1,symlink:1,semget:1,splice:1,x:1,getpeername:1,recv:1,log:1,setsockopt:1,cos:1,last:1,reverse:1,gethostbyname:1,getgrnam:1,study:1,formline:1,endhostent:1,times:1,chop:1,length:1,gethostent:1,getnetent:1,pack:1,getprotoent:1,getservbyname:1,rand:1,mkdir:1,pos:1,chmod:1,y:1,substr:1,endnetent:1,printf:1,next:1,open:1,msgsnd:1,readdir:1,use:1,unlink:1,getsockopt:1,getpriority:1,rindex:1,wantarray:1,hex:1,system:1,getservbyport:1,endservent:1,"int":1,chr:1,untie:1,rmdir:1,prototype:1,tell:1,listen:1,fork:1,shmread:1,ucfirst:1,setprotoent:1,"else":1,sysseek:1,link:1,getgrgid:1,shmctl:1,waitpid:1,unpack:1,getnetbyname:1,reset:1,chdir:1,grep:1,split:1,require:1,caller:1,lcfirst:1,until:1,warn:1,"while":1,values:1,shift:1,telldir:1,getpwuid:1,my:1,getprotobynumber:1,"delete":1,and:1,sort:1,uc:1,defined:1,srand:1,accept:1,"package":1,seekdir:1,getprotobyname:1,semop:1,our:1,rename:1,seek:1,"if":1,q:1,chroot:1,sysread:1,setpwent:1,no:1,crypt:1,getc:1,chown:1,sqrt:1,write:1,setnetent:1,setpriority:1,foreach:1,tie:1,sin:1,msgget:1,map:1,stat:1,getlogin:1,unless:1,elsif:1,truncate:1,exec:1,keys:1,glob:1,tied:1,closedir:1,ioctl:1,socket:1,readlink:1,eval:1,xor:1,readline:1,binmode:1,setservent:1,eof:1,ord:1,bind:1,alarm:1,pipe:1,atan2:1,getgrent:1,exp:1,time:1,push:1,setgrent:1,gt:1,lt:1,or:1,ne:1,m:1},t={cN:"subst",b:"[$@]\\{",e:"}",k:e,r:10},n={cN:"variable",b:"\\$\\d"},r={cN:"variable",b:"[\\$\\%\\@\\*](\\^\\w\\b|#\\w+(\\:\\:\\w+)*|[^\\s\\w{]|{\\w+}|\\w+(\\:\\:\\w*)*)"},i=[hljs.BE,t,n,r],s={b:"->",c:[{b:hljs.IR},{b:"{",e:"}"}]},o=[n,r,hljs.HCM,{cN:"comment",b:"^(__END__|__DATA__)",e:"\\n$",r:5},s,{cN:"string",b:"q[qwxr]?\\s*\\(",e:"\\)",c:i,r:5},{cN:"string",b:"q[qwxr]?\\s*\\[",e:"\\]",c:i,r:5},{cN:"string",b:"q[qwxr]?\\s*\\{",e:"\\}",c:i,r:5},{cN:"string",b:"q[qwxr]?\\s*\\|",e:"\\|",c:i,r:5},{cN:"string",b:"q[qwxr]?\\s*\\<",e:"\\>",c:i,r:5},{cN:"string",b:"qw\\s+q",e:"q",c:i,r:5},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"string",b:'"',e:'"',c:i,r:0},{cN:"string",b:"`",e:"`",c:[hljs.BE]},{cN:"string",b:"{\\w+}",r:0},{cN:"string",b:"-?\\w+\\s*\\=\\>",r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[hljs.BE],r:0},{cN:"sub",b:"\\bsub\\b",e:"(\\s*\\(.*?\\))?[;{]",k:{sub:1},r:5},{cN:"operator",b:"-\\w\\b",r:0},{cN:"pod",b:"\\=\\w",e:"\\=cut"}];return t.c=o,s.c[1].c=o,{dM:{k:e,c:o}}}(),hljs.LANGUAGES.css=function(){var e={cN:"function",b:hljs.IR+"\\(",e:"\\)",c:[{eW:!0,eE:!0,c:[hljs.NM,hljs.ASM,hljs.QSM]}]};return{cI:!0,dM:{i:"[=/|']",c:[hljs.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:{"font-face":1,page:1}},{cN:"at_rule",b:"@",e:"[{;]",eE:!0,k:{"import":1,page:1,media:1,charset:1},c:[e,hljs.ASM,hljs.QSM,hljs.NM]},{cN:"tag",b:hljs.IR,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[hljs.CBLCLM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[e,hljs.NM,hljs.QSM,hljs.ASM,hljs.CBLCLM,{cN:"hexcolor",b:"\\#[0-9A-F]+"},{cN:"important",b:"!important"}]}}]}]}]}}}(),hljs.LANGUAGES.ruby=function(){var e="[a-zA-Z_][a-zA-Z0-9_]*(\\!|\\?)?",t="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",n={keyword:{and:1,"false":1,then:1,defined:1,module:1,"in":1,"return":1,redo:1,"if":1,BEGIN:1,retry:1,end:1,"for":1,"true":1,self:1,when:1,next:1,until:1,"do":1,begin:1,unless:1,END:1,rescue:1,nil:1,"else":1,"break":1,undef:1,not:1,"super":1,"class":1,"case":1,require:1,yield:1,alias:1,"while":1,ensure:1,elsif:1,or:1,def:1},keymethods:{__id__:1,__send__:1,abort:1,abs:1,"all?":1,allocate:1,ancestors:1,"any?":1,arity:1,assoc:1,at:1,at_exit:1,autoload:1,"autoload?":1,"between?":1,binding:1,binmode:1,"block_given?":1,call:1,callcc:1,caller:1,capitalize:1,"capitalize!":1,casecmp:1,"catch":1,ceil:1,center:1,chomp:1,"chomp!":1,chop:1,"chop!":1,chr:1,"class":1,class_eval:1,"class_variable_defined?":1,class_variables:1,clear:1,clone:1,close:1,close_read:1,close_write:1,"closed?":1,coerce:1,collect:1,"collect!":1,compact:1,"compact!":1,concat:1,"const_defined?":1,const_get:1,const_missing:1,const_set:1,constants:1,count:1,crypt:1,"default":1,default_proc:1,"delete":1,"delete!":1,delete_at:1,delete_if:1,detect:1,display:1,div:1,divmod:1,downcase:1,"downcase!":1,downto:1,dump:1,dup:1,each:1,each_byte:1,each_index:1,each_key:1,each_line:1,each_pair:1,each_value:1,each_with_index:1,"empty?":1,entries:1,eof:1,"eof?":1,"eql?":1,"equal?":1,eval:1,exec:1,exit:1,"exit!":1,extend:1,fail:1,fcntl:1,fetch:1,fileno:1,fill:1,find:1,find_all:1,first:1,flatten:1,"flatten!":1,floor:1,flush:1,for_fd:1,foreach:1,fork:1,format:1,freeze:1,"frozen?":1,fsync:1,getc:1,gets:1,global_variables:1,grep:1,gsub:1,"gsub!":1,"has_key?":1,"has_value?":1,hash:1,hex:1,id:1,include:1,"include?":1,included_modules:1,index:1,indexes:1,indices:1,induced_from:1,inject:1,insert:1,inspect:1,instance_eval:1,instance_method:1,instance_methods:1,"instance_of?":1,"instance_variable_defined?":1,instance_variable_get:1,instance_variable_set:1,instance_variables:1,"integer?":1,intern:1,invert:1,ioctl:1,"is_a?":1,isatty:1,"iterator?":1,join:1,"key?":1,keys:1,"kind_of?":1,lambda:1,last:1,length:1,lineno:1,ljust:1,load:1,local_variables:1,loop:1,lstrip:1,"lstrip!":1,map:1,"map!":1,match:1,max:1,"member?":1,merge:1,"merge!":1,method:1,"method_defined?":1,method_missing:1,methods:1,min:1,module_eval:1,modulo:1,name:1,nesting:1,"new":1,next:1,"next!":1,"nil?":1,nitems:1,"nonzero?":1,object_id:1,oct:1,open:1,pack:1,partition:1,pid:1,pipe:1,pop:1,popen:1,pos:1,prec:1,prec_f:1,prec_i:1,print:1,printf:1,private_class_method:1,private_instance_methods:1,"private_method_defined?":1,private_methods:1,proc:1,protected_instance_methods:1,"protected_method_defined?":1,protected_methods:1,public_class_method:1,public_instance_methods:1,"public_method_defined?":1,public_methods:1,push:1,putc:1,puts:1,quo:1,raise:1,rand:1,rassoc:1,read:1,read_nonblock:1,readchar:1,readline:1,readlines:1,readpartial:1,rehash:1,reject:1,"reject!":1,remainder:1,reopen:1,replace:1,require:1,"respond_to?":1,reverse:1,"reverse!":1,reverse_each:1,rewind:1,rindex:1,rjust:1,round:1,rstrip:1,"rstrip!":1,scan:1,seek:1,select:1,send:1,set_trace_func:1,shift:1,singleton_method_added:1,singleton_methods:1,size:1,sleep:1,slice:1,"slice!":1,sort:1,"sort!":1,sort_by:1,split:1,sprintf:1,squeeze:1,"squeeze!":1,srand:1,stat:1,step:1,store:1,strip:1,"strip!":1,sub:1,"sub!":1,succ:1,"succ!":1,sum:1,superclass:1,swapcase:1,"swapcase!":1,sync:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,taint:1,"tainted?":1,tell:1,test:1,"throw":1,times:1,to_a:1,to_ary:1,to_f:1,to_hash:1,to_i:1,to_int:1,to_io:1,to_proc:1,to_s:1,to_str:1,to_sym:1,tr:1,"tr!":1,tr_s:1,"tr_s!":1,trace_var:1,transpose:1,trap:1,truncate:1,"tty?":1,type:1,ungetc:1,uniq:1,"uniq!":1,unpack:1,unshift:1,untaint:1,untrace_var:1,upcase:1,"upcase!":1,update:1,upto:1,"value?":1,values:1,values_at:1,warn:1,write:1,write_nonblock:1,"zero?":1,zip:1}},r={cN:"yardoctag",b:"@[A-Za-z]+"},i={cN:"comment",b:"#",e:"$",c:[r]},s={cN:"comment",b:"^\\=begin",e:"^\\=end",c:[r],r:10},o={cN:"comment",b:"^__END__",e:"\\n$"},u={cN:"subst",b:"#\\{",e:"}",l:e,k:n},a=[hljs.BE,u],f={cN:"string",b:"'",e:"'",c:a,r:0},l={cN:"string",b:'"',e:'"',c:a,r:0},c={cN:"string",b:"%[qw]?\\(",e:"\\)",c:a,r:10},h={cN:"string",b:"%[qw]?\\[",e:"\\]",c:a,r:10},p={cN:"string",b:"%[qw]?{",e:"}",c:a,r:10},d={cN:"string",b:"%[qw]?<",e:">",c:a,r:10},v={cN:"string",b:"%[qw]?/",e:"/",c:a,r:10},m={cN:"string",b:"%[qw]?%",e:"%",c:a,r:10},g={cN:"string",b:"%[qw]?-",e:"-",c:a,r:10},y={cN:"string",b:"%[qw]?\\|",e:"\\|",c:a,r:10},b={cN:"function",b:"\\bdef\\s+",e:" |$|;",l:e,k:n,c:[{cN:"title",b:t,l:e,k:n},{cN:"params",b:"\\(",e:"\\)",l:e,k:n},i,s,o]},w={cN:"identifier",b:e,l:e,k:n,r:0},E=[i,s,o,f,l,c,h,p,d,v,m,g,y,{cN:"class",b:"\\b(class|module)\\b",e:"$|;",k:{"class":1,module:1},c:[{cN:"title",b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?",r:0},{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+hljs.IR+"::)?"+hljs.IR}]},i,s,o]},b,{cN:"constant",b:"(::)?([A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:":",c:[f,l,c,h,p,d,v,m,g,y,w],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"number",b:"\\?\\w"},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},w,{b:"("+hljs.RSR+")\\s*",c:[i,s,o,{cN:"regexp",b:"/",e:"/[a-z]*",i:"\\n",c:[hljs.BE]}],r:0}];return u.c=E,b.c[1].c=E,{dM:{l:e,k:n,c:E}}}(),hljs.LANGUAGES.javascript={dM:{k:{keyword:{"in":1,"if":1,"for":1,"while":1,"finally":1,"var":1,"new":1,"function":1,"do":1,"return":1,"void":1,"else":1,"break":1,"catch":1,"instanceof":1,"with":1,"throw":1,"case":1,"default":1,"try":1,"this":1,"switch":1,"continue":1,"typeof":1,"delete":1},literal:{"true":1,"false":1,"null":1}},c:[hljs.ASM,hljs.QSM,hljs.CLCM,hljs.CBLCLM,hljs.CNM,{b:"("+hljs.RSR+"|case|return|throw)\\s*",k:{"return":1,"throw":1,"case":1},c:[hljs.CLCM,hljs.CBLCLM,{cN:"regexp",b:"/",e:"/[gim]*",c:[{b:"\\\\/"}]}],r:0},{cN:"function",b:"\\bfunction\\b",e:"{",k:{"function":1},c:[{cN:"title",b:"[A-Za-z$_][0-9A-Za-z$_]*"},{cN:"params",b:"\\(",e:"\\)",c:[hljs.ASM,hljs.QSM,hljs.CLCM,hljs.CBLCLM]}]}]}},hljs.LANGUAGES.ini={cI:!0,dM:{i:"[^\\s]",c:[{cN:"comment",b:";",e:"$"},{cN:"title",b:"^\\[",e:"\\]"},{cN:"setting",b:"^[a-z0-9_\\[\\]]+[ \\t]*=[ \\t]*",e:"$",c:[{cN:"value",eW:!0,k:{on:1,off:1,"true":1,"false":1,yes:1,no:1},c:[hljs.QSM,hljs.NM]}]}]}},hljs.LANGUAGES.php={cI:!0,dM:{k:{and:1,include_once:1,list:1,"abstract":1,global:1,"private":1,echo:1,"interface":1,as:1,"static":1,endswitch:1,array:1,"null":1,"if":1,endwhile:1,or:1,"const":1,"for":1,endforeach:1,self:1,"var":1,"while":1,isset:1,"public":1,"protected":1,exit:1,foreach:1,"throw":1,elseif:1,"extends":1,include:1,__FILE__:1,empty:1,require_once:1,"function":1,"do":1,xor:1,"return":1,"implements":1,parent:1,clone:1,use:1,__CLASS__:1,__LINE__:1,"else":1,"break":1,print:1,eval:1,"new":1,"catch":1,__METHOD__:1,"class":1,"case":1,exception:1,php_user_filter:1,"default":1,die:1,require:1,__FUNCTION__:1,enddeclare:1,"final":1,"try":1,"this":1,"switch":1,"continue":1,endfor:1,endif:1,declare:1,unset:1,"true":1,"false":1,namespace:1},c:[hljs.CLCM,hljs.HCM,{cN:"comment",b:"/\\*",e:"\\*/",c:[{cN:"phpdoc",b:"\\s@[A-Za-z]+",r:10}]},hljs.CNM,hljs.inherit(hljs.ASM,{i:null}),hljs.inherit(hljs.QSM,{i:null}),{cN:"variable",b:"\\$[a-zA-Z_-][a-zA-Z0-9_-]*"},{cN:"preprocessor",b:"<\\?php",r:10},{cN:"preprocessor",b:"\\?>"}]}},hljs.LANGUAGES.cpp=function(){var e={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}},t={cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:e,r:10};return t.c=[t],{dM:{k:e,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},t]}}}(),hljs.LANGUAGES.sql={cI:!0,dM:{i:"[^\\s]",c:[{cN:"operator",b:"(begin|start|commit|rollback|savepoint|lock|alter|create|drop|rename|call|delete|do|handler|insert|load|replace|select|truncate|update|set|show|pragma)\\b",e:";|$",k:{keyword:{all:1,partial:1,global:1,month:1,current_timestamp:1,using:1,go:1,revoke:1,smallint:1,indicator:1,"end-exec":1,disconnect:1,zone:1,"with":1,character:1,assertion:1,to:1,add:1,current_user:1,usage:1,input:1,local:1,alter:1,match:1,collate:1,real:1,then:1,rollback:1,get:1,read:1,timestamp:1,session_user:1,not:1,integer:1,bit:1,unique:1,day:1,minute:1,desc:1,insert:1,execute:1,like:1,ilike:2,level:1,decimal:1,drop:1,"continue":1,isolation:1,found:1,where:1,constraints:1,domain:1,right:1,national:1,some:1,module:1,transaction:1,relative:1,second:1,connect:1,escape:1,close:1,system_user:1,"for":1,deferred:1,section:1,cast:1,current:1,sqlstate:1,allocate:1,intersect:1,deallocate:1,numeric:1,"public":1,preserve:1,full:1,"goto":1,initially:1,asc:1,no:1,key:1,output:1,collation:1,group:1,by:1,union:1,session:1,both:1,last:1,language:1,constraint:1,column:1,of:1,space:1,foreign:1,deferrable:1,prior:1,connection:1,unknown:1,action:1,commit:1,view:1,or:1,first:1,into:1,"float":1,year:1,primary:1,cascaded:1,except:1,restrict:1,set:1,references:1,names:1,table:1,outer:1,open:1,select:1,size:1,are:1,rows:1,from:1,prepare:1,distinct:1,leading:1,create:1,only:1,next:1,inner:1,authorization:1,schema:1,corresponding:1,option:1,declare:1,precision:1,immediate:1,"else":1,timezone_minute:1,external:1,varying:1,translation:1,"true":1,"case":1,exception:1,join:1,hour:1,"default":1,"double":1,scroll:1,value:1,cursor:1,descriptor:1,values:1,dec:1,fetch:1,procedure:1,"delete":1,and:1,"false":1,"int":1,is:1,describe:1,"char":1,as:1,at:1,"in":1,varchar:1,"null":1,trailing:1,any:1,absolute:1,current_time:1,end:1,grant:1,privileges:1,when:1,cross:1,check:1,write:1,current_date:1,pad:1,begin:1,temporary:1,exec:1,time:1,update:1,catalog:1,user:1,sql:1,date:1,on:1,identity:1,timezone_hour:1,natural:1,whenever:1,interval:1,work:1,order:1,cascade:1,diagnostics:1,nchar:1,having:1,left:1,call:1,"do":1,handler:1,load:1,replace:1,truncate:1,start:1,lock:1,show:1,pragma:1},aggregate:{count:1,sum:1,min:1,max:1,avg:1}},c:[{cN:"string",b:"'",e:"'",c:[hljs.BE,{b:"''"}],r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE,{b:'""'}],r:0},{cN:"string",b:"`",e:"`",c:[hljs.BE]},hljs.CNM,{b:"\\n"}]},hljs.CBLCLM,{cN:"comment",b:"--",e:"$"}]}},hljs.LANGUAGES.diff={cI:!0,dM:{c:[{cN:"chunk",b:"^\\@\\@ +\\-\\d+,\\d+ +\\+\\d+,\\d+ +\\@\\@$",r:10},{cN:"chunk",b:"^\\*\\*\\* +\\d+,\\d+ +\\*\\*\\*\\*$",r:10},{cN:"chunk",b:"^\\-\\-\\- +\\d+,\\d+ +\\-\\-\\-\\-$",r:10},{cN:"header",b:"Index: ",e:"$"},{cN:"header",b:"=====",e:"=====$"},{cN:"header",b:"^\\-\\-\\-",e:"$"},{cN:"header",b:"^\\*{3} ",e:"$"},{cN:"header",b:"^\\+\\+\\+",e:"$"},{cN:"header",b:"\\*{5}",e:"\\*{5}$"},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"change",b:"^\\!",e:"$"}]}},hljs.LANGUAGES.cs={dM:{k:{"abstract":1,as:1,base:1,bool:1,"break":1,"byte":1,"case":1,"catch":1,"char":1,checked:1,"class":1,"const":1,"continue":1,decimal:1,"default":1,delegate:1,"do":1,"do":1,"double":1,"else":1,"enum":1,event:1,explicit:1,extern:1,"false":1,"finally":1,fixed:1,"float":1,"for":1,foreach:1,"goto":1,"if":1,implicit:1,"in":1,"int":1,"interface":1,internal:1,is:1,lock:1,"long":1,namespace:1,"new":1,"null":1,object:1,operator:1,out:1,override:1,params:1,"private":1,"protected":1,"public":1,readonly:1,ref:1,"return":1,sbyte:1,sealed:1,"short":1,sizeof:1,stackalloc:1,"static":1,string:1,struct:1,"switch":1,"this":1,"throw":1,"true":1,"try":1,"typeof":1,uint:1,ulong:1,unchecked:1,unsafe:1,ushort:1,using:1,virtual:1,"volatile":1,"void":1,"while":1,ascending:1,descending:1,from:1,get:1,group:1,into:1,join:1,let:1,orderby:1,partial:1,select:1,set:1,value:1,"var":1,where:1,yield:1},c:[{cN:"comment",b:"///",e:"$",rB:!0,c:[{cN:"xmlDocTag",b:"///|<!--|-->"},{cN:"xmlDocTag",b:"</?",e:">"}]},hljs.CLCM,hljs.CBLCLM,{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},hljs.ASM,hljs.QSM,hljs.CNM]}},define("highlightjs",function(e){return function(){return e.hljs}}(this)),function(e){typeof define=="function"?define("vendor/es5-shim",[],e):typeof YUI=="function"?YUI.add("es5",e):e()}(function(){function h(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=r.call(arguments,1),s=function(){if(this instanceof s){var e=function(){};e.prototype=n.prototype;var o=new e,u=n.apply(o,i.concat(r.call(arguments)));return Object(u)===u?u:o}return n.apply(t,i.concat(r.call(arguments)))};return s});var e=Function.prototype.call,t=Array.prototype,n=Object.prototype,r=t.slice,i=e.bind(n.toString),s=e.bind(n.hasOwnProperty),o,u,a,f,l;if(l=s(n,"__defineGetter__"))o=e.bind(n.__defineGetter__),u=e.bind(n.__defineSetter__),a=e.bind(n.__lookupGetter__),f=e.bind(n.__lookupSetter__);Array.isArray||(Array.isArray=function(t){return i(t)=="[object Array]"}),Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=A(this),r=arguments[1],s=-1,o=n.length>>>0;if(i(t)!="[object Function]")throw new TypeError;while(++s<o)s in n&&t.call(r,n[s],s,n)}),Array.prototype.map||(Array.prototype.map=function(t){var n=A(this),r=n.length>>>0,s=Array(r),o=arguments[1];if(i(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var u=0;u<r;u++)u in n&&(s[u]=t.call(o,n[u],u,n));return s}),Array.prototype.filter||(Array.prototype.filter=function(t){var n=A(this),r=n.length>>>0,s=[],o,u=arguments[1];if(i(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var a=0;a<r;a++)a in n&&(o=n[a],t.call(u,o,a,n)&&s.push(o));return s}),Array.prototype.every||(Array.prototype.every=function(t){var n=A(this),r=n.length>>>0,s=arguments[1];if(i(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<r;o++)if(o in n&&!t.call(s,n[o],o,n))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=A(this),r=n.length>>>0,s=arguments[1];if(i(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<r;o++)if(o in n&&t.call(s,n[o],o,n))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=A(this),r=n.length>>>0;if(i(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!r&&arguments.length==1)throw new TypeError("reduce of empty array with no initial value");var s=0,o;if(arguments.length>=2)o=arguments[1];else do{if(s in n){o=n[s++];break}if(++s>=r)throw new TypeError("reduce of empty array with no initial value")}while(!0);for(;s<r;s++)s in n&&(o=t.call(void 0,o,n[s],s,n));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=A(this),r=n.length>>>0;if(i(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!r&&arguments.length==1)throw new TypeError("reduceRight of empty array with no initial value");var s,o=r-1;if(arguments.length>=2)s=arguments[1];else do{if(o in n){s=n[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}while(!0);do o in this&&(s=t.call(void 0,s,n[o],o,n));while(o--);return s}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var n=A(this),r=n.length>>>0;if(!r)return-1;var i=0;arguments.length>1&&(i=k(arguments[1])),i=i>=0?i:Math.max(0,r+i);for(;i<r;i++)if(i in n&&n[i]===t)return i;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){var n=A(this),r=n.length>>>0;if(!r)return-1;var i=r-1;arguments.length>1&&(i=Math.min(i,k(arguments[1]))),i=i>=0?i:r-Math.abs(i);for(;i>=0;i--)if(i in n&&t===n[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:n)});if(!Object.getOwnPropertyDescriptor){var c="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,r){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(c+t);if(!s(t,r))return;var i={enumerable:!0,configurable:!0};if(l){var o=t.__proto__;t.__proto__=n;var u=a(t,r),h=f(t,r);t.__proto__=o;if(u||h)return u&&(i.get=u),h&&(i.set=h),i}return i.value=t[r],i}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),Object.create||(Object.create=function(t,n){var r;if(t===null)r={},r.__proto__=null;else{if(typeof t!="object")throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return n!==void 0&&Object.defineProperties(r,n),r});if(Object.defineProperty){var p=h({}),d=typeof document=="undefined"||h(document.createElement("div"));if(!p||!d)var v=Object.defineProperty}if(!Object.defineProperty||v){var m="Property description must be an object: ",g="Object.defineProperty called on non-object: ",y="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,r,i){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(g+t);if(typeof i!="object"&&typeof i!="function"||i===null)throw new TypeError(m+i);if(v)try{return v.call(Object,t,r,i)}catch(c){}if(s(i,"value"))if(l&&(a(t,r)||f(t,r))){var h=t.__proto__;t.__proto__=n,delete t[r],t[r]=i.value,t.__proto__=h}else t[r]=i.value;else{if(!l)throw new TypeError(y);s(i,"get")&&o(t,r,i.get),s(i,"set")&&u(t,r,i.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)s(n,r)&&r!="__proto__"&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(b){Object.freeze=function(t){return function(n){return typeof n=="function"?n:t(n)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)!==t)throw new TypeError;var n="";while(s(t,n))n+="?";t[n]=!0;var r=s(t,n);return delete t[n],r});if(!Object.keys){var w=!0,E=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],S=E.length;for(var x in{toString:null})w=!1;Object.keys=function O(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on a non-object");var O=[];for(var t in e)s(e,t)&&O.push(t);if(w)for(var n=0,r=S;n<r;n++){var i=E[n];s(e,i)&&O.push(i)}return O}}if(!Date.prototype.toISOString||(new Date(-621987552e5)).toISOString().indexOf("-000001")===-1)Date.prototype.toISOString=function(){var t,n,r,i;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");t=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],i=this.getUTCFullYear(),i=(i<0?"-":i>9999?"+":"")+("00000"+Math.abs(i)).slice(0<=i&&i<=9999?-4:-6),n=t.length;while(n--)r=t[n],r<10&&(t[n]="0"+r);return i+"-"+t.slice(0,2).join("-")+"T"+t.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"};Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(t){if(typeof this.toISOString!="function")throw new TypeError("toISOString property is not callable");return this.toISOString()});if(!Date.parse||Date.parse("+275760-09-13T00:00:00.000Z")!==864e13)Date=function(e){var t=function i(t,n,r,s,o,u,a){var f=arguments.length;if(this instanceof e){var l=f==1&&String(t)===t?new e(i.parse(t)):f>=7?new e(t,n,r,s,o,u,a):f>=6?new e(t,n,r,s,o,u):f>=5?new e(t,n,r,s,o):f>=4?new e(t,n,r,s):f>=3?new e(t,n,r):f>=2?new e(t,n):f>=1?new e(t):new e;return l.constructor=i,l}return e.apply(this,arguments)},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");for(var r in e)t[r]=e[r];return t.now=e.now,t.UTC=e.UTC,t.prototype=e.prototype,t.prototype.constructor=t,t.parse=function(r){var i=n.exec(r);if(i){i.shift();for(var s=1;s<7;s++)i[s]=+(i[s]||(s<3?1:0)),s==1&&i[s]--;var o=+i.pop(),u=+i.pop(),a=i.pop(),f=0;if(a){if(u>23||o>59)return NaN;f=(u*60+o)*6e4*(a=="+"?-1:1)}var l=+i[0];return 0<=l&&l<=99?(i[0]=l+400,e.UTC.apply(this,i)+f-126227808e5):e.UTC.apply(this,i)+f}return e.parse.apply(this,arguments)},t}(Date);var T="	\n\f\r \u2028\u2029";if(!String.prototype.trim||T.trim()){T="["+T+"]";var N=new RegExp("^"+T+T+"*"),C=new RegExp(T+T+"*$");String.prototype.trim=function(){if(this===undefined||this===null)throw new TypeError("can't convert "+this+" to object");return String(this).replace(N,"").replace(C,"")}}var k=function(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e},L="a"[0]!="a",A=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return L&&typeof e=="string"&&e?e.split(""):Object(e)}}),function(e,t,n){function i(n){r[n]||(r[n]=!0,e.migrateWarnings.push(n),t.console&&console.warn&&!e.migrateMute&&console.warn("JQMIGRATE: "+n))}function s(t,n,r,s){if(Object.defineProperty)try{Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return i(s),r},set:function(e){i(s),r=e}});return}catch(o){}e._definePropertyBroken=!0,t[n]=r}var r={};e.migrateWarnings=[],e.migrateReset=function(){r={},e.migrateWarnings.length=0},document.compatMode==="BackCompat"&&i("jQuery is not compatible with Quirks Mode");var o={},u=e.attr,a=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},f=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,c=/^[238]$/,h=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;s(e,"attrFn",o,"jQuery.attrFn is deprecated"),e.attr=function(t,r,s,o){var a=r.toLowerCase(),f=t&&t.nodeType;if(o){i("jQuery.fn.attr( props, pass ) is deprecated");if(t&&!c.test(f)&&e.isFunction(e.fn[r]))return e(t)[r](s)}return r==="type"&&s!==n&&l.test(t.nodeName)&&i("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[a]&&h.test(a)&&(e.attrHooks[a]={get:function(t,r){var i,s=e.prop(t,r);return s===!0||typeof s!="boolean"&&(i=t.getAttributeNode(r))&&i.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var i;return n===!1?e.removeAttr(t,r):(i=e.propFix[r]||r,i in t&&(t[i]=!0),t.setAttribute(r,r.toLowerCase())),r}},p.test(a)&&i("jQuery.fn.attr("+a+") may use property instead of attribute")),u.call(e,t,r,s)},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return n==="button"?a.apply(this,arguments):(n!=="input"&&n!=="option"&&i("property-based jQuery.fn.attr('value') is deprecated"),t in e?e.value:null)},set:function(e,t){var n=(e.nodeName||"").toLowerCase();if(n==="button")return f.apply(this,arguments);n!=="input"&&n!=="option"&&i("property-based jQuery.fn.attr('value', val) is deprecated"),e.value=t}};var d,v,m=e.fn.init,g=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;e.fn.init=function(t,n,r){var s;if(t&&typeof t=="string"&&!e.isPlainObject(n)&&(s=g.exec(t))&&s[1]){t.charAt(0)!=="<"&&i("$(html) HTML strings must start with '<' character"),n&&n.context&&(n=n.context);if(e.parseHTML)return m.call(this,e.parseHTML(e.trim(t),n,!0),n,r)}return m.apply(this,arguments)},e.fn.init.prototype=e.fn,e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},d=e.uaMatch(navigator.userAgent),v={},d.browser&&(v[d.browser]=!0,v.version=d.version),v.chrome?v.webkit=!0:v.webkit&&(v.safari=!0),e.browser=v,s(e,"browser",v,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(i,s){return s&&s instanceof e&&!(s instanceof t)&&(s=t(s)),e.fn.init.call(this,i,s,n)},t.fn.init.prototype=t.fn;var n=t(document);return i("jQuery.sub() is deprecated"),t};var y=e.fn.data;e.fn.data=function(t){var r,s,o=this[0];if(o&&t==="events"&&arguments.length===1){r=e.data(o,t),s=e._data(o,t);if((r===n||r===s)&&s!==n)return i("Use of jQuery.fn.data('events') is deprecated"),s}return y.apply(this,arguments)};var b=/\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack,E=e.buildFragment;e.fn.andSelf=function(){return i("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,n,r,s){n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,i("jQuery.clean() is deprecated");var o,u,a,f,l=[];e.merge(l,e.buildFragment(t,n).childNodes);if(r){a=function(e){if(!e.type||b.test(e.type))return s?s.push(e.parentNode?e.parentNode.removeChild(e):e):r.appendChild(e)};for(o=0;(u=l[o])!=null;o++)if(!e.nodeName(u,"script")||!a(u))r.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(f=e.grep(e.merge([],u.getElementsByTagName("script")),a),l.splice.apply(l,[o+1,0].concat(f)),o+=f.length)}return l}),e.buildFragment=function(t,n,r,o){var u,a="jQuery.buildFragment() is deprecated";n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n;try{u=E.call(e,t,n,r,o)}catch(f){u=E.call(e,t,n.nodeType?[n]:n[0],r,o),i(a)}return u.fragment||(s(u,"fragment",u,a),s(u,"cacheable",!1,a)),u};var S=e.event.add,x=e.event.remove,T=e.event.trigger,N=e.fn.toggle,C=e.fn.live,k=e.fn.die,L="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",A=new RegExp("\\b(?:"+L+")\\b"),O=/(?:^|\s)hover(\.\S+|)\b/,M=function(t){return typeof t!="string"||e.event.special.hover?t:(O.test(t)&&i("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(O,"mouseenter$1 mouseleave$1"))};e.event.props&&e.event.props[0]!=="attrChange"&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),s(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,r,s){e!==document&&A.test(t)&&i("AJAX events should be attached to document: "+t),S.call(this,e,M(t||""),n,r,s)},e.event.remove=function(e,t,n,r,i){x.call(this,e,M(t)||"",n,r,i)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return i("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);i("jQuery.fn.toggle(handler, handler...) is deprecated");var r=arguments,s=t.guid||e.guid++,o=0,u=function(n){var i=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,i+1),n.preventDefault(),r[i].apply(this,arguments)||!1};u.guid=s;while(o<r.length)r[o++].guid=s;return this.click(u)},e.fn.live=function(t,n,r){return i("jQuery.fn.live() is deprecated"),C?C.apply(this,arguments):(e(this.context).on(t,this.selector,n,r),this)},e.fn.die=function(t,n){return i("jQuery.fn.die() is deprecated"),k?k.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,r){return!n&!A.test(e)&&i("Global events are undocumented and deprecated"),T.call(this,e,t,n||document,r)},e.each(L.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window),define("plugins/jquery.migrate",function(){}),function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return e.namespace==="rails"}).length};n()&&e.error("jquery-ujs has already been loaded!");var r;e.rails=r={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var i,s,o,u,a,f,l,c;if(r.fire(n,"ajax:before")){u=n.data("cross-domain"),a=u===t?null:u,f=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.is("form")){i=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(r.inputChangeSelector)?(i=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(i=n.data("method"),s=r.href(n),o=n.data("params")||null);c={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),r.fire(n,"ajax:beforeSend",[e,i])},success:function(e,t,r){n.trigger("ajax:success",[e,t,r])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,r){n.trigger("ajax:error",[e,t,r])},xhrFields:{withCredentials:f},crossDomain:a},s&&(c.url=s);var p=r.ajax(c);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var i=r.href(n),s=n.data("method"),o=n.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(r.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(r.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),n=!1,i;return t?(r.fire(e,"confirm")&&(n=r.confirm(t),i=r.fire(e,"confirm:complete",[n])),n&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea";return t.find(u).each(function(){s=e(this),o=s.is(":checkbox,:radio")?s.is(":checked"):s.val(),!o==!r&&(i=i.add(s))}),i.length?i:!1},nonBlankInputs:function(e,t){return r.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return r.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},r.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||r.CSRFProtection(n)}),e(document).delegate(r.linkDisableSelector,"ajax:complete",function(){r.enableElement(e(this))}),e(document).delegate(r.linkClickSelector,"click.rails",function(n){var i=e(this),s=i.data("method"),o=i.data("params");if(!r.allowAction(i))return r.stopEverything(n);i.is(r.linkDisableSelector)&&r.disableElement(i);if(i.data("remote")!==t){if((n.metaKey||n.ctrlKey)&&(!s||s==="GET")&&!o)return!0;var u=r.handleRemote(i);return u===!1?r.enableElement(i):u.error(function(){r.enableElement(i)}),!1}if(i.data("method"))return r.handleMethod(i),!1}),e(document).delegate(r.inputChangeSelector,"change.rails",function(t){var n=e(this);return r.allowAction(n)?(r.handleRemote(n),!1):r.stopEverything(t)}),e(document).delegate(r.formSubmitSelector,"submit.rails",function(n){var i=e(this),s=i.data("remote")!==t,o=r.blankInputs(i,r.requiredInputSelector),u=r.nonBlankInputs(i,r.fileInputSelector);if(!r.allowAction(i))return r.stopEverything(n);if(o&&i.attr("novalidate")==t&&r.fire(i,"ajax:aborted:required",[o]))return r.stopEverything(n);if(s){if(u){setTimeout(function(){r.disableFormElements(i)},13);var a=r.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){r.enableFormElements(i)},13),a}return!e.support.submitBubbles&&e().jquery<"1.7"&&r.callFormSubmitBindings(i,n)===!1?r.stopEverything(n):(r.handleRemote(i),!1)}setTimeout(function(){r.disableFormElements(i)},13)}),e(document).delegate(r.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!r.allowAction(n))return r.stopEverything(t);var i=n.attr("name"),s=i?{name:i,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),e(document).delegate(r.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&r.disableFormElements(e(this))}),e(document).delegate(r.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&r.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))}(jQuery),define("vendor/rails",function(){}),window.Modernizr=function(e,t,n){function r(e){m.cssText=e}function i(e,t){return r(b.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t){for(var r in e){var i=e[r];if(!o(i,"-")&&m[i]!==n)return t=="pfx"?i:!0}return!1}function a(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}function f(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+E.join(r+" ")+r).split(" ");return s(t,"string")||s(t,"undefined")?u(i,t):(i=(e+" "+S.join(r+" ")+r).split(" "),a(i,t,n))}var l="2.6.2",c={},h=!0,p=t.documentElement,d="modernizr",v=t.createElement(d),m=v.style,g,y={}.toString,b=" -webkit- -moz- -o- -ms- ".split(" "),w="Webkit Moz O ms",E=w.split(" "),S=w.toLowerCase().split(" "),x={},T={},N={},C=[],k=C.slice,L,A=function(e,n,r,i){var s,o,u,a,f=t.createElement("div"),l=t.body,c=l||t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:d+(r+1),f.appendChild(u);return s=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),f.id=d,(l?f:c).innerHTML+=s,c.appendChild(f),l||(c.style.background="",c.style.overflow="hidden",a=p.style.overflow,p.style.overflow="hidden",p.appendChild(c)),o=n(f,e),l?f.parentNode.removeChild(f):(c.parentNode.removeChild(c),p.style.overflow=a),!!o},O={}.hasOwnProperty,M;!s(O,"undefined")&&!s(O.call,"undefined")?M=function(e,t){return O.call(e,t)}:M=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=k.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(k.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(k.call(arguments)))};return r}),x.history=function(){return!!e.history&&!!history.pushState},x.borderimage=function(){return f("borderImage")},x.cssanimations=function(){return f("animationName")},x.localstorage=function(){try{return localStorage.setItem(d,d),localStorage.removeItem(d),!0}catch(e){return!1}};for(var _ in x)M(x,_)&&(L=_.toLowerCase(),c[L]=x[_](),C.push((c[L]?"":"no-")+L));return c.addTest=function(e,t){if(typeof e=="object")for(var r in e)M(e,r)&&c.addTest(r,e[r]);else{e=e.toLowerCase();if(c[e]!==n)return c;t=typeof t=="function"?t():t,typeof h!="undefined"&&h&&(p.className+=" cc-"+(t?"":"no-")+e),c[e]=t}return c},r(""),v=g=null,c._version=l,c._prefixes=b,c._domPrefixes=S,c._cssomPrefixes=E,c.testProp=function(e){return u([e])},c.testAllProps=f,c.testStyles=A,c.prefixed=function(e,t,n){return t?f(e,t,n):f(e,"pfx")},p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" cc-js cc-"+C.join(" cc-"):""),c}(this,this.document),Modernizr.addTest("cssscrollbar",function(){var e,t="#modernizr{overflow: scroll; width: 40px }#"+Modernizr._prefixes.join("scrollbar{width:0px} #modernizr::").split("#").slice(1).join("#")+"scrollbar{width:0px}";return Modernizr.testStyles(t,function(t){e="scrollWidth"in t&&t.scrollWidth==40}),e}),define("vendor/modernizr.custom",function(){}),window.XDomainRequest&&jQuery.ajaxTransport(function(e){if(e.crossDomain&&e.async){e.timeout&&(e.xdrTimeout=e.timeout,delete e.timeout);var t;return{send:function(n,r){function i(e,n,i,s){t.onload=t.onerror=t.ontimeout=jQuery.noop,t=undefined,r(e,n,i,s)}t=new XDomainRequest,t.onload=function(){i(200,"OK",{text:t.responseText},"Content-Type: "+t.contentType)},t.onerror=function(){i(404,"Not Found")},t.onprogress=jQuery.noop,t.ontimeout=function(){i(0,"timeout")},t.timeout=e.xdrTimeout||Number.MAX_VALUE,t.open(e.type,e.url),t.send(e.hasContent&&e.data||null)},abort:function(){t&&(t.onerror=jQuery.noop,t.abort())}}}}),define("plugins/ie_xdr",function(){}),function(e){var t,n=e();e.fn.sortable=function(r){var i=String(r);return r=e.extend({connectWith:!1},r),this.each(function(){if(/^enable|disable|destroy$/.test(i)){var s=e(this).children(e(this).data("items")).attr("draggable",i=="enable");i=="destroy"&&s.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s");return}var o,u,s=e(this).children(r.items),a=e("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');s.find(r.handle).mousedown(function(){o=!0}).mouseup(function(){o=!1}),e(this).data("items",r.items),n=n.add(a),r.connectWith&&e(r.connectWith).add(this).data("connectWith",r.connectWith),s.attr("draggable","true").on("dragstart.h5s",function(n){if(r.handle&&!o)return!1;o=!1;var i=n.originalEvent.dataTransfer;i.effectAllowed="move",i.setData("Text","dummy"),u=(t=e(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(e){if(!t)return;t.removeClass("sortable-dragging").show(),n.detach(),u!=t.index()&&(typeof r.update=="function"&&r.update.call(t.parent()[0],e,{item:t}),t.parent().trigger("sortupdate",{item:t})),t=null}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,a]).on("dragover.h5s dragenter.h5s drop.h5s",function(i){return!s.is(t)&&r.connectWith!==e(t).parent().data("connectWith")?!0:i.type=="drop"?(i.stopPropagation(),n.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(i.preventDefault(),i.originalEvent.dataTransfer.dropEffect="move",s.is(this)?(a.height(t.outerHeight()),a.width(t.outerWidth()),t.hide(),e(this)[a.index()<e(this).index()?"after":"before"](a),n.not(a).detach()):!n.is(this)&&!e(this).children(r.items).length&&(n.detach(),e(this).append(a)),!1)})})}}(jQuery),define("plugins/jquery.sortable",function(){}),function(e,t){function r(e){return e}function i(e){return decodeURIComponent(e.replace(n," "))}var n=/\+/g;e.cookie=function(n,s,o){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(s))||s==null)){o=e.extend({},e.cookie.defaults,o),s==null&&(o.expires=-1);if(typeof o.expires=="number"){var u=o.expires,a=o.expires=new Date;a.setDate(a.getDate()+u)}return s=String(s),t.cookie=[encodeURIComponent(n),"=",o.raw?s:encodeURIComponent(s),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("")}o=s||e.cookie.defaults||{};var f=o.raw?r:i,l=t.cookie.split("; ");for(var c=0,h;h=l[c]&&l[c].split("=");c++)if(f(h.shift())===n)return f(h.join("="));return null},e.cookie.defaults={}}(jQuery,document),define("plugins/jquery.cookie",function(){}),function(e){var t={className:"flash",delay:500},n={init:function(n){return n=e.extend(t,n),this.each(function(){var t=e(this).addClass(n.className),r=t.data("flashClass")||t.data("flashClass",{});clearTimeout(r.timer),r.timer=setTimeout(function(){t.removeClass(n.className)},n.delay)})}};e.fn.flashClass=function(){return n.init.apply(this,arguments)}}(jQuery),define("plugins/jquery.flash-class",function(){}),function(){var e=this,t=e.Backbone,n=[],r=n.push,i=n.slice,s=n.splice,o;typeof exports!="undefined"?o=exports:o=e.Backbone={},o.VERSION="0.9.10";var u=e._;!u&&typeof require!="undefined"&&(u=require("underscore")),o.$=e.jQuery||e.Zepto||e.ender,o.noConflict=function(){return e.Backbone=t,this},o.emulateHTTP=!1,o.emulateJSON=!1;var a=/\s+/,f=function(e,t,n,r){if(!n)return!0;if(typeof n=="object")for(var i in n)e[t].apply(e,[i,n[i]].concat(r));else{if(!a.test(n))return!0;var s=n.split(a);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r))}},l=function(e,t){var n,r=-1,i=e.length;switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0]);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1]);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,t[0],t[1],t[2]);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},c=o.Events={on:function(e,t,n){if(!f(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!f(this,"once",e,[t,n])||!t)return this;var r=this,i=u.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){var r,i,s,o,a,l,c,h;if(!this._events||!f(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;o=e?[e]:u.keys(this._events);for(a=0,l=o.length;a<l;a++){e=o[a];if(r=this._events[e]){s=[];if(t||n)for(c=0,h=r.length;c<h;c++)i=r[c],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&s.push(i);this._events[e]=s}}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!f(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},listenTo:function(e,t,n){var r=this._listeners||(this._listeners={}),i=e._listenerId||(e._listenerId=u.uniqueId("l"));return r[i]=e,e.on(t,typeof t=="object"?this:n,this),this},stopListening:function(e,t,n){var r=this._listeners;if(!r)return;if(e)e.off(t,typeof t=="object"?this:n,this),!t&&!n&&delete r[e._listenerId];else{typeof t=="object"&&(n=this);for(var i in r)r[i].off(t,n,this);this._listeners={}}return this}};c.bind=c.on,c.unbind=c.off,u.extend(o,c);var h=o.Model=function(e,t){var n,r=e||{};this.cid=u.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(r=this.parse(r,t)||{});if(n=u.result(this,"defaults"))r=u.defaults({},r,n);this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};u.extend(h.prototype,c,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return u.clone(this.attributes)},sync:function(){return o.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return u.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,n){var r,i,s,o,a,f,l,c;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={});if(!this._validate(i,n))return!1;s=n.unset,a=n.silent,o=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=u.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],u.isEqual(c[r],t)||o.push(r),u.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,s?delete c[r]:c[r]=t;if(!a){o.length&&(this._pending=!0);for(var h=0,p=o.length;h<p;h++)this.trigger("change:"+o[h],this,c[o[h]],n)}if(f)return this;if(!a)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,u.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,u.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!u.isEmpty(this.changed):u.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?u.clone(this.changed):!1;var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e){if(u.isEqual(r[i],t=e[i]))continue;(n||(n={}))[i]=t}return n},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){if(!e.set(e.parse(n,r),r))return!1;t&&t(e,n,r)},this.sync("read",this,e)},save:function(e,t,n){var r,i,s,o,a=this.attributes;return e==null||typeof e=="object"?(r=e,n=t):(r={})[e]=t,r&&(!n||!n.wait)&&!this.set(r,n)?!1:(n=u.extend({validate:!0},n),this._validate(r,n)?(r&&n.wait&&(this.attributes=u.extend({},a,r)),n.parse===void 0&&(n.parse=!0),i=n.success,n.success=function(e,t,n){e.attributes=a;var s=e.parse(t,n);n.wait&&(s=u.extend(r||{},s));if(u.isObject(s)&&!e.set(s,n))return!1;i&&i(e,t,n)},s=this.isNew()?"create":n.patch?"patch":"update",s==="patch"&&(n.attrs=r),o=this.sync(s,this,n),r&&n.wait&&(this.attributes=a),o):!1)},destroy:function(e){e=e?u.clone(e):{};var t=this,n=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(e,t,i){(i.wait||e.isNew())&&r(),n&&n(e,t,i)};if(this.isNew())return e.success(this,null,e),!1;var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=u.result(this,"urlRoot")||u.result(this.collection,"url")||M();return this.isNew()?e:e+(e.charAt(e.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(e){return!this.validate||!this.validate(this.attributes,e)},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=u.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,t||{}),!1):!0}});var p=o.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this.models=[],this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,u.extend({silent:!0},t))};u.extend(p.prototype,c,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return o.sync.apply(this,arguments)},add:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,i,o,a,f,l,c,h,p,d;c=[],h=t.at,p=this.comparator&&h==null&&t.sort!=0,d=u.isString(this.comparator)?this.comparator:null;for(n=0,i=e.length;n<i;n++){if(!(o=this._prepareModel(a=e[n],t))){this.trigger("invalid",this,a,t);continue}if(f=this.get(o)){t.merge&&(f.set(a===o?o.attributes:a,t),p&&!l&&f.hasChanged(d)&&(l=!0));continue}c.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,o.id!=null&&(this._byId[o.id]=o)}c.length&&(p&&(l=!0),this.length+=c.length,h!=null?s.apply(this.models,[h,0].concat(c)):r.apply(this.models,c)),l&&this.sort({silent:!0});if(t.silent)return this;for(n=0,i=c.length;n<i;n++)(o=c[n]).trigger("add",o,this,t);return l&&this.trigger("sort",this,t),this},remove:function(e,t){e=u.isArray(e)?e.slice():[e],t||(t={});var n,r,i,s;for(n=0,r=e.length;n<r;n++){s=this.get(e[n]);if(!s)continue;delete this._byId[s.id],delete this._byId[s.cid],i=this.indexOf(s),this.models.splice(i,1),this.length--,t.silent||(t.index=i,s.trigger("remove",s,this,t)),this._removeReference(s)}return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,u.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return e==null?void 0:(this._idAttr||(this._idAttr=this.model.prototype.idAttribute),this._byId[e.id||e.cid||e[this._idAttr]||e])},at:function(e){return this.models[e]},where:function(e){return u.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),u.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return u.invoke(this.models,"get",e)},update:function(e,t){t=u.extend({add:!0,merge:!0,remove:!0},t),t.parse&&(e=this.parse(e,t));var n,r,i,s,o=[],a=[],f={};u.isArray(e)||(e=e?[e]:[]);if(t.add&&!t.remove)return this.add(e,t);for(r=0,i=e.length;r<i;r++)n=e[r],s=this.get(n),t.remove&&s&&(f[s.cid]=!0),(t.add&&!s||t.merge&&s)&&o.push(n);if(t.remove)for(r=0,i=this.models.length;r<i;r++)n=this.models[r],f[n.cid]||a.push(n);return a.length&&this.remove(a,t),o.length&&this.add(o,t),this},reset:function(e,t){t||(t={}),t.parse&&(e=this.parse(e,t));for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models.slice(),this._reset(),e&&this.add(e,u.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e=e?u.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success;return e.success=function(e,n,r){var i=r.update?"update":"reset";e[i](n,r),t&&t(e,n,r)},this.sync("read",this,e)},create:function(e,t){t=t?u.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models.length=0,this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:!1},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)},sortedIndex:function(e,t,n){t||(t=this.comparator);var r=u.isFunction(t)?t:function(e){return e.get(t)};return u.sortedIndex(this.models,e,r,n)}});var d=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(d,function(e){p.prototype[e]=function(){var t=i.call(arguments);return t.unshift(this.models),u[e].apply(u,t)}});var v=["groupBy","countBy","sortBy"];u.each(v,function(e){p.prototype[e]=function(t,n){var r=u.isFunction(t)?t:function(e){return e.get(t)};return u[e](this.models,r,n)}});var m=o.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},g=/\((.*?)\)/g,y=/(\(\?)?:\w+/g,b=/\*\w+/g,w=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(m.prototype,c,{initialize:function(){},route:function(e,t,n){return u.isRegExp(e)||(e=this._routeToRegExp(e)),n||(n=this[t]),o.history.route(e,u.bind(function(r){var i=this._extractParameters(e,r);n&&n.apply(this,i),this.trigger.apply(this,["route:"+t].concat(i)),this.trigger("route",t,i),o.history.trigger("route",this,t,i)},this)),this},navigate:function(e,t){return o.history.navigate(e,t),this},_bindRoutes:function(){if(!this.routes)return;var e,t=u.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(w,"\\$&").replace(g,"(?:$1)?").replace(y,function(e,t){return t?e:"([^/]+)"}).replace(b,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}});var E=o.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},S=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,T=/msie [\w.]+/,N=/\/$/;E.started=!1,u.extend(E.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(N,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(S,"")},start:function(e){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=u.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var t=this.getFragment(),n=document.documentMode,r=T.exec(navigator.userAgent.toLowerCase())&&(!n||n<=7);this.root=("/"+this.root+"/").replace(x,"/"),r&&this._wantsHashChange&&(this.iframe=o.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?o.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?o.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;var i=this.location,s=i.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&s&&i.hash&&(this.fragment=this.getHash().replace(S,""),this.history.replaceState({},document.title,this.root+this.fragment+i.search));if(!this.options.silent)return this.loadUrl()},stop:function(){o.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n},navigate:function(e,t){if(!E.started)return!1;if(!t||t===!0)t={trigger:t};e=this.getFragment(e||"");if(this.fragment===e)return;this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),o.history=new E;var C=o.View=function(e){this.cid=u.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},k=/^(\S+)\s*(.*)$/,L=["model","collection","el","id","attributes","className","tagName","events"];u.extend(C.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof o.$?e:o.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=u.result(this,"events")))return;this.undelegateEvents();for(var t in e){var n=e[t];u.isFunction(n)||(n=this[e[t]]);if(!n)throw new Error('Method "'+e[t]+'" does not exist');var r=t.match(k),i=r[1],s=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,s===""?this.$el.on(i,n):this.$el.on(i,s,n)}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=u.extend({},u.result(this,"options"),e)),u.extend(this,u.pick(e,L)),this.options=e},_ensureElement:function(){if(!this.el){var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var t=o.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(t,!1)}else this.setElement(u.result(this,"el"),!1)}});var A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};o.sync=function(e,t,n){var r=A[e];u.defaults(n||(n={}),{emulateHTTP:o.emulateHTTP,emulateJSON:o.emulateJSON});var i={type:r,dataType:"json"};n.url||(i.url=u.result(t,"url")||M()),n.data==null&&t&&(e==="create"||e==="update"||e==="patch")&&(i.contentType="application/json",i.data=JSON.stringify(n.attrs||t.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{});if(n.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){i.type="POST",n.emulateJSON&&(i.data._method=r);var s=n.beforeSend;n.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",r);if(s)return s.apply(this,arguments)}}i.type!=="GET"&&!n.emulateJSON&&(i.processData=!1);var a=n.success;n.success=function(e){a&&a(t,e,n),t.trigger("sync",t,e,n)};var f=n.error;n.error=function(e){f&&f(t,e,n),t.trigger("error",t,e,n)};var l=n.xhr=o.ajax(u.extend(i,n));return t.trigger("request",t,l,n),l},o.ajax=function(){return o.$.ajax.apply(o.$,arguments)};var O=function(e,t){var n=this,r;e&&u.has(e,"constructor")?r=e.constructor:r=function(){return n.apply(this,arguments)},u.extend(r,n,t);var i=function(){this.constructor=r};return i.prototype=n.prototype,r.prototype=new i,e&&u.extend(r.prototype,e),r.__super__=n.prototype,r};h.extend=p.extend=m.extend=C.extend=E.extend=O;var M=function(){throw new Error('A "url" property or function must be specified')};o.History.prototype.loadUrl=function(e){var t=this.fragment=this.getFragment(e,this._wantsPushState),n=u.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0});return n};var _=o.sync;o.sync=function(e,t,n){return n||(n={}),n.cache=!1,_.call(this,e,t,n)},o.View.prototype.dispose=function(){return this.undelegateEvents(),this.model&&this.model.off&&this.model.off(null,null,this),this.collection&&this.collection.off&&this.collection.off(null,null,this),this},function(){var e=o.View.prototype.dispose;o.View.prototype.dispose=function(){return this.state&&this.state.off&&this.state.off(null,null,this),e.apply(this,u.toArray(arguments))}}()}.call(window),define("backbone",["jquery","underscore"],function(e){return function(){return e.Backbone}}(this)),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("vendor/react",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.React=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return i(n?n:t)},f,f.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){var r=e("./focusNode"),i={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};t.exports=i},{"./focusNode":120}],2:[function(e,t,n){function f(){var e=window.opera;return typeof e=="object"&&typeof e.version=="function"&&parseInt(e.version(),10)<=12}function v(e){return(e.ctrlKey||e.altKey||e.metaKey)&&(!e.ctrlKey||!e.altKey)}var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./ExecutionEnvironment"),o=e("./SyntheticInputEvent"),u=e("./keyOf"),a=s.canUseDOM&&"TextEvent"in window&&!("documentMode"in document||f()),l=32,c=String.fromCharCode(l),h=r.topLevelTypes,p={beforeInput:{phasedRegistrationNames:{bubbled:u({onBeforeInput:null}),captured:u({onBeforeInputCapture:null})},dependencies:[h.topCompositionEnd,h.topKeyPress,h.topTextInput,h.topPaste]}},d=null,m={eventTypes:p,extractEvents:function(e,t,n,r){var s;if(a)switch(e){case h.topKeyPress:var u=r.which;if(u!==l)return;s=String.fromCharCode(u);break;case h.topTextInput:s=r.data;if(s===c)return;break;default:return}else{switch(e){case h.topPaste:d=null;break;case h.topKeyPress:r.which&&!v(r)&&(d=String.fromCharCode(r.which));break;case h.topCompositionEnd:d=r.data}if(d===null)return;s=d}if(!s)return;var f=o.getPooled(p.beforeInput,n,r);return f.data=s,d=null,i.accumulateTwoPhaseDispatches(f),f}};t.exports=m},{"./EventConstants":16,"./EventPropagators":21,"./ExecutionEnvironment":22,"./SyntheticInputEvent":98,"./keyOf":141}],3:[function(e,t,n){var r=e("./invariant"),i={addClass:function(e,t){return r(!/\s/.test(t),'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.add(t):i.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return r(!/\s/.test(t),'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.remove(t):i.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?i.addClass:i.removeClass)(e,t)},hasClass:function(e,t){return r(!/\s/.test(t),"CSS.hasClass takes only a single class name."),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}};t.exports=i},{"./invariant":134}],4:[function(e,t,n){function i(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={columnCount:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},s=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){s.forEach(function(t){r[i(t,e)]=r[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},u={isUnitlessNumber:r,shorthandPropertyExpansions:o};t.exports=u},{}],5:[function(e,t,n){var r=e("./CSSProperty"),i=e("./dangerousStyleValue"),s=e("./hyphenateStyleName"),o=e("./memoizeStringOnly"),u=o(function(e){return s(e)}),a={createMarkupForStyles:function(e){var t="";for(var n in e){if(!e.hasOwnProperty(n))continue;var r=e[n];r!=null&&(t+=u(n)+":",t+=i(n,r)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var s in t){if(!t.hasOwnProperty(s))continue;var o=i(s,t[s]);if(o)n[s]=o;else{var u=r.shorthandPropertyExpansions[s];if(u)for(var a in u)n[a]="";else n[s]=""}}}};t.exports=a},{"./CSSProperty":4,"./dangerousStyleValue":115,"./hyphenateStyleName":132,"./memoizeStringOnly":143}],6:[function(e,t,n){function o(){this._callbacks=null,this._contexts=null}var r=e("./PooledClass"),i=e("./invariant"),s=e("./mixInto");s(o,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){i(e.length===t.length,"Mismatched list of contexts in callback queue"),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;n<r;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(o),t.exports=o},{"./PooledClass":28,"./invariant":134,"./mixInto":147}],7:[function(e,t,n){function y(e){return e.nodeName==="SELECT"||e.nodeName==="INPUT"&&e.type==="file"}function w(e){var t=a.getPooled(p.change,v,e);s.accumulateTwoPhaseDispatches(t),u.batchedUpdates(E,t)}function E(e){i.enqueueEvents(e),i.processEventQueue()}function S(e,t){d=e,v=t,d.attachEvent("onchange",w)}function x(){if(!d)return;d.detachEvent("onchange",w),d=null,v=null}function T(e,t,n){if(e===h.topChange)return n}function N(e,t,n){e===h.topFocus?(x(),S(t,n)):e===h.topBlur&&x()}function L(e,t){d=e,v=t,m=e.value,g=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(d,"value",k),d.attachEvent("onpropertychange",O)}function A(){if(!d)return;delete d.value,d.detachEvent("onpropertychange",O),d=null,v=null,m=null,g=null}function O(e){if(e.propertyName!=="value")return;var t=e.srcElement.value;if(t===m)return;m=t,w(e)}function M(e,t,n){if(e===h.topInput)return n}function _(e,t,n){e===h.topFocus?(A(),L(t,n)):e===h.topBlur&&A()}function D(e,t,n){if(e===h.topSelectionChange||e===h.topKeyUp||e===h.topKeyDown)if(d&&d.value!==m)return m=d.value,v}function P(e){return e.nodeName==="INPUT"&&(e.type==="checkbox"||e.type==="radio")}function H(e,t,n){if(e===h.topClick)return n}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./EventPropagators"),o=e("./ExecutionEnvironment"),u=e("./ReactUpdates"),a=e("./SyntheticEvent"),f=e("./isEventSupported"),l=e("./isTextInputElement"),c=e("./keyOf"),h=r.topLevelTypes,p={change:{phasedRegistrationNames:{bubbled:c({onChange:null}),captured:c({onChangeCapture:null})},dependencies:[h.topBlur,h.topChange,h.topClick,h.topFocus,h.topInput,h.topKeyDown,h.topKeyUp,h.topSelectionChange]}},d=null,v=null,m=null,g=null,b=!1;o.canUseDOM&&(b=f("change")&&(!("documentMode"in document)||document.documentMode>8));var C=!1;o.canUseDOM&&(C=f("input")&&(!("documentMode"in document)||document.documentMode>9));var k={get:function(){return g.get.call(this)},set:function(e){m=""+e,g.set.call(this,e)}},B={eventTypes:p,extractEvents:function(e,t,n,r){var i,o;y(t)?b?i=T:o=N:l(t)?C?i=M:(i=D,o=_):P(t)&&(i=H);if(i){var u=i(e,t,n);if(u){var f=a.getPooled(p.change,u,r);return s.accumulateTwoPhaseDispatches(f),f}}o&&o(e,t,n)}};t.exports=B},{"./EventConstants":16,"./EventPluginHub":18,"./EventPropagators":21,"./ExecutionEnvironment":22,"./ReactUpdates":87,"./SyntheticEvent":96,"./isEventSupported":135,"./isTextInputElement":137,"./keyOf":141}],8:[function(e,t,n){var r=0,i={createReactRootIndex:function(){return r++}};t.exports=i},{}],9:[function(e,t,n){function g(e){switch(e){case d.topCompositionStart:return m.compositionStart;case d.topCompositionEnd:return m.compositionEnd;case d.topCompositionUpdate:return m.compositionUpdate}}function y(e,t){return e===d.topKeyDown&&t.keyCode===c}function b(e,t){switch(e){case d.topKeyUp:return l.indexOf(t.keyCode)!==-1;case d.topKeyDown:return t.keyCode!==c;case d.topKeyPress:case d.topMouseDown:case d.topBlur:return!0;default:return!1}}function w(e){this.root=e,this.startSelection=o.getSelection(e),this.startValue=this.getText()}var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./ExecutionEnvironment"),o=e("./ReactInputSelection"),u=e("./SyntheticCompositionEvent"),a=e("./getTextContentAccessor"),f=e("./keyOf"),l=[9,13,27,32],c=229,h=s.canUseDOM&&"CompositionEvent"in window,p=!h||"documentMode"in document&&document.documentMode>8&&document.documentMode<=11,d=r.topLevelTypes,v=null,m={compositionEnd:{phasedRegistrationNames:{bubbled:f({onCompositionEnd:null}),captured:f({onCompositionEndCapture:null})},dependencies:[d.topBlur,d.topCompositionEnd,d.topKeyDown,d.topKeyPress,d.topKeyUp,d.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:f({onCompositionStart:null}),captured:f({onCompositionStartCapture:null})},dependencies:[d.topBlur,d.topCompositionStart,d.topKeyDown,d.topKeyPress,d.topKeyUp,d.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:f({onCompositionUpdate:null}),captured:f({onCompositionUpdateCapture:null})},dependencies:[d.topBlur,d.topCompositionUpdate,d.topKeyDown,d.topKeyPress,d.topKeyUp,d.topMouseDown]}};w.prototype.getText=function(){return this.root.value||this.root[a()]},w.prototype.getData=function(){var e=this.getText(),t=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return e.substr(t,e.length-n-t)};var E={eventTypes:m,extractEvents:function(e,t,n,r){var s,o;h?s=g(e):v?b(e,r)&&(s=m.compositionEnd):y(e,r)&&(s=m.compositionStart),p&&(!v&&s===m.compositionStart?v=new w(t):s===m.compositionEnd&&v&&(o=v.getData(),v=null));if(s){var a=u.getPooled(s,n,r);return o&&(a.data=o),i.accumulateTwoPhaseDispatches(a),a}}};t.exports=E},{"./EventConstants":16,"./EventPropagators":21,"./ExecutionEnvironment":22,"./ReactInputSelection":63,"./SyntheticCompositionEvent":94,"./getTextContentAccessor":129,"./keyOf":141}],10:[function(e,t,n){function a(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var r=e("./Danger"),i=e("./ReactMultiChildUpdateTypes"),s=e("./getTextContentAccessor"),o=e("./invariant"),u=s(),f;u==="textContent"?f=function(e,t){e.textContent=t}:f=function(e,t){while(e.firstChild)e.removeChild(e.firstChild);if(t){var n=e.ownerDocument||document;e.appendChild(n.createTextNode(t))}};var l={dangerouslyReplaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,updateTextContent:f,processUpdates:function(e,t){var n,s=null,u=null;for(var l=0;n=e[l];l++)if(n.type===i.MOVE_EXISTING||n.type===i.REMOVE_NODE){var c=n.fromIndex,h=n.parentNode.childNodes[c],p=n.parentID;o(h,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting <p> or <a> tags, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",c,p),s=s||{},s[p]=s[p]||[],s[p][c]=h,u=u||[],u.push(h)}var d=r.dangerouslyRenderMarkup(t);if(u)for(var v=0;v<u.length;v++)u[v].parentNode.removeChild(u[v]);for(var m=0;n=e[m];m++)switch(n.type){case i.INSERT_MARKUP:a(n.parentNode,d[n.markupIndex],n.toIndex);break;case i.MOVE_EXISTING:a(n.parentNode,s[n.parentID][n.fromIndex],n.toIndex);break;case i.TEXT_CONTENT:f(n.parentNode,n.textContent);break;case i.REMOVE_NODE:}}};t.exports=l},{"./Danger":13,"./ReactMultiChildUpdateTypes":69,"./getTextContentAccessor":129,"./invariant":134}],11:[function(e,t,n){var r=e("./invariant"),i={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},s=e.DOMPropertyNames||{},u=e.DOMMutationMethods||{};e.isCustomAttribute&&o._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var a in t){r(!o.isStandardName.hasOwnProperty(a),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",a),o.isStandardName[a]=!0;var f=a.toLowerCase();o.getPossibleStandardName[f]=a;if(n.hasOwnProperty(a)){var l=n[a];o.getPossibleStandardName[l]=a,o.getAttributeName[a]=l}else o.getAttributeName[a]=f;o.getPropertyName[a]=s.hasOwnProperty(a)?s[a]:a,u.hasOwnProperty(a)?o.getMutationMethod[a]=u[a]:o.getMutationMethod[a]=null;var c=t[a];o.mustUseAttribute[a]=c&i.MUST_USE_ATTRIBUTE,o.mustUseProperty[a]=c&i.MUST_USE_PROPERTY,o.hasSideEffects[a]=c&i.HAS_SIDE_EFFECTS,o.hasBooleanValue[a]=c&i.HAS_BOOLEAN_VALUE,o.hasNumericValue[a]=c&i.HAS_NUMERIC_VALUE,o.hasPositiveNumericValue[a]=c&i.HAS_POSITIVE_NUMERIC_VALUE,o.hasOverloadedBooleanValue[a]=c&i.HAS_OVERLOADED_BOOLEAN_VALUE,r(!o.mustUseAttribute[a]||!o.mustUseProperty[a],"DOMProperty: Cannot require using both attribute and property: %s",a),r(o.mustUseProperty[a]||!o.hasSideEffects[a],"DOMProperty: Properties that have side effects must use property: %s",a),r(!!o.hasBooleanValue[a]+!!o.hasNumericValue[a]+!!o.hasOverloadedBooleanValue[a]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",a)}}},s={},o={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<o._isCustomAttributeFunctions.length;t++){var n=o._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n=s[e],r;return n||(s[e]=n={}),t in n||(r=document.createElement(e),n[t]=r[t]),n[t]},injection:i};t.exports=o},{"./invariant":134}],12:[function(e,t,n){function u(e,t){return t==null||r.hasBooleanValue[e]&&!t||r.hasNumericValue[e]&&isNaN(t)||r.hasPositiveNumericValue[e]&&t<1||r.hasOverloadedBooleanValue[e]&&t===!1}var r=e("./DOMProperty"),i=e("./escapeTextForBrowser"),s=e("./memoizeStringOnly"),o=e("./warning"),a=s(function(e){return i(e)+'="'}),f={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},l={},c=function(e){if(f.hasOwnProperty(e)&&f[e]||l.hasOwnProperty(e)&&l[e])return;l[e]=!0;var t=e.toLowerCase(),n=r.isCustomAttribute(t)?t:r.getPossibleStandardName.hasOwnProperty(t)?r.getPossibleStandardName[t]:null;o(n==null,"Unknown DOM property "+e+". Did you mean "+n+"?")},h={createMarkupForID:function(e){return a(r.ID_ATTRIBUTE_NAME)+i(e)+'"'},createMarkupForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(e)&&r.isStandardName[e]){if(u(e,t))return"";var n=r.getAttributeName[e];return r.hasBooleanValue[e]||r.hasOverloadedBooleanValue[e]&&t===!0?i(n):a(n)+i(t)+'"'}return r.isCustomAttribute(e)?t==null?"":a(e)+i(t)+'"':(c(e),null)},setValueForProperty:function(e,t,n){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var i=r.getMutationMethod[t];if(i)i(e,n);else if(u(t,n))this.deleteValueForProperty(e,t);else if(r.mustUseAttribute[t])e.setAttribute(r.getAttributeName[t],""+n);else{var s=r.getPropertyName[t];if(!r.hasSideEffects[t]||e[s]!==n)e[s]=n}}else r.isCustomAttribute(t)?n==null?e.removeAttribute(t):e.setAttribute(t,""+n):c(t)},deleteValueForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var n=r.getMutationMethod[t];if(n)n(e,undefined);else if(r.mustUseAttribute[t])e.removeAttribute(r.getAttributeName[t]);else{var i=r.getPropertyName[t],s=r.getDefaultValueForProperty(e.nodeName,i);if(!r.hasSideEffects[t]||e[i]!==s)e[i]=s}}else r.isCustomAttribute(t)?e.removeAttribute(t):c(t)}};t.exports=h},{"./DOMProperty":11,"./escapeTextForBrowser":118,"./memoizeStringOnly":143,"./warning":158}],13:[function(e,t,n){function l(e){return e.substring(1,e.indexOf(" "))}var r=e("./ExecutionEnvironment"),i=e("./createNodesFromMarkup"),s=e("./emptyFunction"),o=e("./getMarkupWrap"),u=e("./invariant"),a=/^(<[^ \/>]+)/,f="data-danger-index",c={dangerouslyRenderMarkup:function(e){u(r.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a Worker thread. This is likely a bug in the framework. Please report immediately.");var t,n={};for(var c=0;c<e.length;c++)u(e[c],"dangerouslyRenderMarkup(...): Missing markup."),t=l(e[c]),t=o(t)?t:"*",n[t]=n[t]||[],n[t][c]=e[c];var h=[],p=0;for(t in n){if(!n.hasOwnProperty(t))continue;var d=n[t];for(var v in d)if(d.hasOwnProperty(v)){var m=d[v];d[v]=m.replace(a,"$1 "+f+'="'+v+'" ')}var g=i(d.join(""),s);for(c=0;c<g.length;++c){var y=g[c];y.hasAttribute&&y.hasAttribute(f)?(v=+y.getAttribute(f),y.removeAttribute(f),u(!h.hasOwnProperty(v),"Danger: Assigning to an already-occupied result index."),h[v]=y,p+=1):console.error("Danger: Discarding unexpected node:",y)}}return u(p===h.length,"Danger: Did not assign to every index of resultList."),u(h.length===e.length,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,h.length),h},dangerouslyReplaceNodeWithMarkup:function(e,t){u(r.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. This is likely a bug in the framework. Please report immediately."),u(t,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),u(e.tagName.toLowerCase()!=="html","dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See renderComponentToString().");var n=i(t,s)[0];e.parentNode.replaceChild(n,e)}};t.exports=c},{"./ExecutionEnvironment":22,"./createNodesFromMarkup":113,"./emptyFunction":116,"./getMarkupWrap":126,"./invariant":134}],14:[function(e,t,n){var r=e("./keyOf"),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({CompositionEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];t.exports=i},{"./keyOf":141}],15:[function(e,t,n){var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./SyntheticMouseEvent"),o=e("./ReactMount"),u=e("./keyOf"),a=r.topLevelTypes,f=o.getFirstReactDOM,l={mouseEnter:{registrationName:u({onMouseEnter:null}),dependencies:[a.topMouseOut,a.topMouseOver]},mouseLeave:{registrationName:u({onMouseLeave:null}),dependencies:[a.topMouseOut,a.topMouseOver]}},c=[null,null],h={eventTypes:l,extractEvents:function(e,t,n,r){if(e===a.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==a.topMouseOut&&e!==a.topMouseOver)return null;var u;if(t.window===t)u=t;else{var h=t.ownerDocument;h?u=h.defaultView||h.parentWindow:u=window}var p,d;e===a.topMouseOut?(p=t,d=f(r.relatedTarget||r.toElement)||u):(p=u,d=t);if(p===d)return null;var v=p?o.getID(p):"",m=d?o.getID(d):"",g=s.getPooled(l.mouseLeave,v,r);g.type="mouseleave",g.target=p,g.relatedTarget=d;var y=s.getPooled(l.mouseEnter,m,r);return y.type="mouseenter",y.target=d,y.relatedTarget=p,i.accumulateEnterLeaveDispatches(g,y,v,m),c[0]=g,c[1]=y,c}};t.exports=h},{"./EventConstants":16,"./EventPropagators":21,"./ReactMount":67,"./SyntheticMouseEvent":100,"./keyOf":141}],16:[function(e,t,n){var r=e("./keyMirror"),i=r({bubbled:null,captured:null}),s=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:s,PropagationPhases:i};t.exports=o},{"./keyMirror":140}],17:[function(e,t,n){var r=e("./emptyFunction"),i={listen:function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if(e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};t.exports=i},{"./emptyFunction":116}],18:[function(e,t,n){function d(){var e=!p||!p.traverseTwoPhase||!p.traverseEnterLeave;if(e)throw new Error("InstanceHandle not injected before use!")}var r=e("./EventPluginRegistry"),i=e("./EventPluginUtils"),s=e("./accumulate"),o=e("./forEachAccumulated"),u=e("./invariant"),a=e("./isEventSupported"),f=e("./monitorCodeUse"),l={},c=null,h=function(e){if(e){var t=i.executeDispatch,n=r.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},p=null,v={injection:{injectMount:i.injection.injectMount,injectInstanceHandle:function(e){p=e,d()},getInstanceHandle:function(){return d(),p},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(e,t,n){u(!n||typeof n=="function","Expected %s listener to be a function, instead got type %s",t,typeof n),t==="onScroll"&&!a("scroll",!0)&&(f("react_no_scroll_event"),console.warn("This browser doesn't support the `onScroll` event"));var r=l[t]||(l[t]={});r[e]=n},getListener:function(e,t){var n=l[t];return n&&n[e]},deleteListener:function(e,t){var n=l[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in l)delete l[t][e]},extractEvents:function(e,t,n,i){var o,u=r.plugins;for(var a=0,f=u.length;a<f;a++){var l=u[a];if(l){var c=l.extractEvents(e,t,n,i);c&&(o=s(o,c))}}return o},enqueueEvents:function(e){e&&(c=s(c,e))},processEventQueue:function(){var e=c;c=null,o(e,h),u(!c,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")},__purge:function(){l={}},__getListenerBank:function(){return l}};t.exports=v},{"./EventPluginRegistry":19,"./EventPluginUtils":20,"./accumulate":106,"./forEachAccumulated":121,"./invariant":134,"./isEventSupported":135,"./monitorCodeUse":148}],19:[function(e,t,n){function o(){if(!i)return;for(var e in s){var t=s[e],n=i.indexOf(e);r(n>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e);if(f.plugins[n])continue;r(t.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),f.plugins[n]=t;var o=t.eventTypes;for(var a in o)r(u(o[a],t,a),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",a,e)}}function u(e,t,n){r(!f.eventNameDispatchConfigs.hasOwnProperty(n),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n),f.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];a(o,t,n)}return!0}return e.registrationName?(a(e.registrationName,t,n),!0):!1}function a(e,t,n){r(!f.registrationNameModules[e],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),f.registrationNameModules[e]=t,f.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var r=e("./invariant"),i=null,s={},f={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){r(!i,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),i=Array.prototype.slice.call(e),o()},injectEventPluginsByName:function(e){var t=!1;for(var n in e){if(!e.hasOwnProperty(n))continue;var i=e[n];if(!s.hasOwnProperty(n)||s[n]!==i)r(!s[n],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n),s[n]=i,t=!0}t&&o()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return f.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames){if(!t.phasedRegistrationNames.hasOwnProperty(n))continue;var r=f.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){i=null;for(var e in s)s.hasOwnProperty(e)&&delete s[e];f.plugins.length=0;var t=f.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=f.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};t.exports=f},{"./invariant":134}],20:[function(e,t,n){function u(e){return e===o.topMouseUp||e===o.topTouchEnd||e===o.topTouchCancel}function a(e){return e===o.topMouseMove||e===o.topTouchMove}function f(e){return e===o.topMouseDown||e===o.topTouchStart}function c(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;l(e);if(Array.isArray(n))for(var i=0;i<n.length;i++){if(e.isPropagationStopped())break;t(e,n[i],r[i])}else n&&t(e,n,r)}function h(e,t,n){e.currentTarget=s.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function p(e,t){c(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function d(e){var t=e._dispatchListeners,n=e._dispatchIDs;l(e);if(Array.isArray(t))for(var r=0;r<t.length;r++){if(e.isPropagationStopped())break;if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function v(e){var t=d(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function m(e){l(e);var t=e._dispatchListeners,n=e._dispatchIDs;i(!Array.isArray(t),"executeDirectDispatch(...): Invalid `event`.");var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function g(e){return!!e._dispatchListeners}var r=e("./EventConstants"),i=e("./invariant"),s={Mount:null,injectMount:function(e){s.Mount=e,i(e&&e.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode.")}},o=r.topLevelTypes,l;l=function(e){var t=e._dispatchListeners,n=e._dispatchIDs,r=Array.isArray(t),s=Array.isArray(n),o=s?n.length:n?1:0,u=r?t.length:t?1:0;i(s===r&&o===u,"EventPluginUtils: Invalid `event`.")};var y={isEndish:u,isMoveish:a,isStartish:f,executeDirectDispatch:m,executeDispatch:h,executeDispatchesInOrder:p,executeDispatchesInOrderStopAtTrue:v,hasDispatches:g,injection:s,useTouchEvents:!1};t.exports=y},{"./EventConstants":16,"./invariant":134}],21:[function(e,t,n){function f(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return a(e,r)}function l(e,t,n){if(!e)throw new Error("Dispatching id must not be null");var r=t?u.bubbled:u.captured,i=f(e,n,r);i&&(n._dispatchListeners=s(n._dispatchListeners,i),n._dispatchIDs=s(n._dispatchIDs,e))}function c(e){e&&e.dispatchConfig.phasedRegistrationNames&&i.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,l,e)}function h(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=a(e,r);i&&(n._dispatchListeners=s(n._dispatchListeners,i),n._dispatchIDs=s(n._dispatchIDs,e))}}function p(e){e&&e.dispatchConfig.registrationName&&h(e.dispatchMarker,null,e)}function d(e){o(e,c)}function v(e,t,n,r){i.injection.getInstanceHandle().traverseEnterLeave(n,r,h,e,t)}function m(e){o(e,p)}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./accumulate"),o=e("./forEachAccumulated"),u=r.PropagationPhases,a=i.getListener,g={accumulateTwoPhaseDispatches:d,accumulateDirectDispatches:m,accumulateEnterLeaveDispatches:v};t.exports=g},{"./EventConstants":16,"./EventPluginHub":18,"./accumulate":106,"./forEachAccumulated":121}],22:[function(e,t,n){var r=typeof window!="undefined"&&!!window.document&&!!window.document.createElement,i={canUseDOM:r,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:r&&(!!window.addEventListener||!!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},{}],23:[function(e,t,n){var r=e("./DOMProperty"),i=e("./ExecutionEnvironment"),s=r.injection.MUST_USE_ATTRIBUTE,o=r.injection.MUST_USE_PROPERTY,u=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_SIDE_EFFECTS,f=r.injection.HAS_NUMERIC_VALUE,l=r.injection.HAS_POSITIVE_NUMERIC_VALUE,c=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,h;if(i.canUseDOM){var p=document.implementation;h=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var d={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,accessKey:null,action:null,allowFullScreen:s|u,allowTransparency:s,alt:null,async:u,autoComplete:null,autoPlay:u,cellPadding:null,cellSpacing:null,charSet:s,checked:o|u,className:h?s:o,cols:s|l,colSpan:null,content:null,contentEditable:null,contextMenu:s,controls:o|u,coords:null,crossOrigin:null,data:null,dateTime:s,defer:u,dir:null,disabled:s|u,download:c,draggable:null,encType:null,form:s,formNoValidate:u,frameBorder:s,height:s,hidden:s|u,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:o,label:null,lang:null,list:null,loop:o|u,max:null,maxLength:s,mediaGroup:null,method:null,min:null,multiple:o|u,muted:o|u,name:null,noValidate:u,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:o|u,rel:null,required:u,role:s,rows:s|l,rowSpan:null,sandbox:null,scope:null,scrollLeft:o,scrolling:null,scrollTop:o,seamless:s|u,selected:o|u,shape:null,size:s|l,span:l,spellCheck:null,src:null,srcDoc:o,srcSet:null,start:f,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:o|a,width:s,wmode:s,autoCapitalize:null,autoCorrect:null,itemProp:s,itemScope:s|u,itemType:s,property:null},DOMAttributeNames:{className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=d},{"./DOMProperty":11,"./ExecutionEnvironment":22}],24:[function(e,t,n){var r=e("./ReactLink"),i=e("./ReactStateSetters"),s={linkState:function(e){return new r(this.state[e],i.createStateKeySetter(this,e))}};t.exports=s},{"./ReactLink":65,"./ReactStateSetters":81}],25:[function(e,t,n){function o(e){i(e.props.checkedLink==null||e.props.valueLink==null,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa.")}function u(e){o(e),i(e.props.value==null&&e.props.onChange==null,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink.")}function a(e){o(e),i(e.props.checked==null&&e.props.onChange==null,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink")}function f(e){this.props.valueLink.requestChange(e.target.value)}function l(e){this.props.checkedLink.requestChange(e.target.checked)}var r=e("./ReactPropTypes"),i=e("./invariant"),s={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},c={Mixin:{propTypes:{value:function(e,t,n){if(!e[t]||s[e.type]||e.onChange||e.readOnly||e.disabled)return;return new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){if(!e[t]||e.onChange||e.readOnly||e.disabled)return;return new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:r.func}},getValue:function(e){return e.props.valueLink?(u(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(a(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(u(e),f):e.props.checkedLink?(a(e),l):e.props.onChange}};t.exports=c},{"./ReactPropTypes":75,"./invariant":134}],26:[function(e,t,n){function u(e){e.remove()}var r=e("./ReactBrowserEventEmitter"),i=e("./accumulate"),s=e("./forEachAccumulated"),o=e("./invariant"),a={trapBubbledEvent:function(e,t){o(this.isMounted(),"Must be mounted to trap events");var n=r.trapBubbledEvent(e,t,this.getDOMNode());this._localEventListeners=i(this._localEventListeners,n)},componentWillUnmount:function(){this._localEventListeners&&s(this._localEventListeners,u)}};t.exports=a},{"./ReactBrowserEventEmitter":31,"./accumulate":106,"./forEachAccumulated":121,"./invariant":134}],27:[function(e,t,n){var r=e("./EventConstants"),i=e("./emptyFunction"),s=r.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,r){if(e===s.topTouchStart){var o=r.target;o&&!o.onclick&&(o.onclick=i)}}};t.exports=o},{"./EventConstants":16,"./emptyFunction":116}],28:[function(e,t,n){var r=e("./invariant"),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},s=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},u=function(e,t,n,r,i){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,r,i),o}return new s(e,t,n,r,i)},a=function(e){var t=this;r(e instanceof t,"Trying to release an instance into a pool of a different type."),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},f=10,l=i,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=f),n.release=a,n},h={addPoolingTo:c,oneArgumentPooler:i,twoArgumentPooler:s,threeArgumentPooler:o,fiveArgumentPooler:u};t.exports=h},{"./invariant":134}],29:[function(e,t,n){var r=e("./DOMPropertyOperations"),i=e("./EventPluginUtils"),s=e("./ReactChildren"),o=e("./ReactComponent"),u=e("./ReactCompositeComponent"),a=e("./ReactContext"),f=e("./ReactCurrentOwner"),l=e("./ReactDescriptor"),c=e("./ReactDOM"),h=e("./ReactDOMComponent"),p=e("./ReactDefaultInjection"),d=e("./ReactInstanceHandles"),v=e("./ReactMount"),m=e("./ReactMultiChild"),g=e("./ReactPerf"),y=e("./ReactPropTypes"),b=e("./ReactServerRendering"),w=e("./ReactTextComponent"),E=e("./onlyChild");p.inject();var S={Children:{map:s.map,forEach:s.forEach,count:s.count,only:E},DOM:c,PropTypes:y,initializeTouchEvents:function(e){i.useTouchEvents=e},createClass:u.createClass,createDescriptor:function(e,t,n){var r=Array.prototype.slice.call(arguments,1);return e.apply(null,r)},constructAndRenderComponent:v.constructAndRenderComponent,constructAndRenderComponentByID:v.constructAndRenderComponentByID,renderComponent:g.measure("React","renderComponent",v.renderComponent),renderComponentToString:b.renderComponentToString,renderComponentToStaticMarkup:b.renderComponentToStaticMarkup,unmountComponentAtNode:v.unmountComponentAtNode,isValidClass:l.isValidFactory,isValidComponent:l.isValidDescriptor,withContext:a.withContext,__internals:{Component:o,CurrentOwner:f,DOMComponent:h,DOMPropertyOperations:r,InstanceHandles:d,Mount:v,MultiChild:m,TextComponent:w}},x=e("./ExecutionEnvironment");if(x.canUseDOM&&window.top===window.self&&navigator.userAgent.indexOf("Chrome")>-1){console.debug("Download the React DevTools for a better development experience: http://fb.me/react-devtools");var T=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze];for(var N in T)if(!T[N]){console.error("One or more ES5 shim/shams expected by React are not available: http://fb.me/react-warning-polyfills");break}}S.version="0.11.1",t.exports=S},{"./DOMPropertyOperations":12,"./EventPluginUtils":20,"./ExecutionEnvironment":22,"./ReactChildren":34,"./ReactComponent":35,"./ReactCompositeComponent":38,"./ReactContext":39,"./ReactCurrentOwner":40,"./ReactDOM":41,"./ReactDOMComponent":43,"./ReactDefaultInjection":53,"./ReactDescriptor":56,"./ReactInstanceHandles":64,"./ReactMount":67,"./ReactMultiChild":68,"./ReactPerf":71,"./ReactPropTypes":75,"./ReactServerRendering":79,"./ReactTextComponent":83,"./onlyChild":149}],30:[function(e,t,n){var r=e("./ReactEmptyComponent"),i=e("./ReactMount"),s=e("./invariant"),o={getDOMNode:function(){return s(this.isMounted(),"getDOMNode(): A component must be mounted to have a DOM node."),r.isNullComponentID(this._rootNodeID)?null:i.getNode(this._rootNodeID)}};t.exports=o},{"./ReactEmptyComponent":58,"./ReactMount":67,"./invariant":134}],31:[function(e,t,n){function v(e){return Object.prototype.hasOwnProperty.call(e,d)||(e[d]=h++,l[e[d]]={}),l[e[d]]}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./EventPluginRegistry"),o=e("./ReactEventEmitterMixin"),u=e("./ViewportMetrics"),a=e("./isEventSupported"),f=e("./merge"),l={},c=!1,h=0,p={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},d="_reactListenersID"+String(Math.random()).slice(2),m=f(o,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=e}},setEnabled:function(e){m.ReactEventListener&&m.ReactEventListener.setEnabled(e)},isEnabled:function(){return!!m.ReactEventListener&&!!m.ReactEventListener.isEnabled()},listenTo:function(e,t){var n=t,i=v(n),o=s.registrationNameDependencies[e],u=r.topLevelTypes;for(var f=0,l=o.length;f<l;f++){var c=o[f];if(!i.hasOwnProperty(c)||!i[c])c===u.topWheel?a("wheel")?m.ReactEventListener.trapBubbledEvent(u.topWheel,"wheel",n):a("mousewheel")?m.ReactEventListener.trapBubbledEvent(u.topWheel,"mousewheel",n):m.ReactEventListener.trapBubbledEvent(u.topWheel,"DOMMouseScroll",n):c===u.topScroll?a("scroll",!0)?m.ReactEventListener.trapCapturedEvent(u.topScroll,"scroll",n):m.ReactEventListener.trapBubbledEvent(u.topScroll,"scroll",m.ReactEventListener.WINDOW_HANDLE):c===u.topFocus||c===u.topBlur?(a("focus",!0)?(m.ReactEventListener.trapCapturedEvent(u.topFocus,"focus",n),m.ReactEventListener.trapCapturedEvent(u.topBlur,"blur",n)):a("focusin")&&(m.ReactEventListener.trapBubbledEvent(u.topFocus,"focusin",n),m.ReactEventListener.trapBubbledEvent(u.topBlur,"focusout",n)),i[u.topBlur]=!0,i[u.topFocus]=!0):p.hasOwnProperty(c)&&m.ReactEventListener.trapBubbledEvent(c,p[c],n),i[c]=!0}},trapBubbledEvent:function(e,t,n){return m.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return m.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!c){var e=u.refreshScrollValues;m.ReactEventListener.monitorScrollValue(e),c=!0}},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:i.putListener,getListener:i.getListener,deleteListener:i.deleteListener,deleteAllListeners:i.deleteAllListeners});t.exports=m},{"./EventConstants":16,"./EventPluginHub":18,"./EventPluginRegistry":19,"./ReactEventEmitterMixin":60,"./ViewportMetrics":105,"./isEventSupported":135,"./merge":144}],32:[function(e,t,n){var r=e("./React"),i=e("./ReactTransitionGroup"),s=e("./ReactCSSTransitionGroupChild"),o=r.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:r.PropTypes.string.isRequired,transitionEnter:r.PropTypes.bool,transitionLeave:r.PropTypes.bool},getDefaultProps:function(){return{transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return s({name:this.props.transitionName,enter:this.props.transitionEnter,leave:this.props.transitionLeave},e)},render:function(){return this.transferPropsTo(i({childFactory:this._wrapChild},this.props.children))}});t.exports=o},{"./React":29,"./ReactCSSTransitionGroupChild":33,"./ReactTransitionGroup":86}],33:[function(e,t,n){var r=e("./React"),i=e("./CSSCore"),s=e("./ReactTransitionEvents"),o=e("./onlyChild"),u=17,a=5e3,f=null;f=function(){console.warn("transition(): tried to perform an animation without an animationend or transitionend event after timeout ("+a+"ms). You should either disable this "+"transition in JS or add a CSS animation/transition.")};var l=r.createClass({displayName:"ReactCSSTransitionGroupChild",transition:function(e,t){var n=this.getDOMNode(),r=this.props.name+"-"+e,o=r+"-active",u=null,l=function(){clearTimeout(u),i.removeClass(n,r),i.removeClass(n,o),s.removeEndEventListener(n,l),t&&t()};s.addEndEventListener(n,l),i.addClass(n,r),this.queueClass(o),u=setTimeout(f,a)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,u))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(i.addClass.bind(i,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillEnter:function(e){this.props.enter?this.transition("enter",e):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e):e()},render:function(){return o(this.props.children)}});t.exports=l},{"./CSSCore":3,"./React":29,"./ReactTransitionEvents":85,"./onlyChild":149}],34:[function(e,t,n){function a(e,t){this.forEachFunction=e,this.forEachContext=t}function f(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function l(e,t,n){if(e==null)return e;var r=a.getPooled(t,n);i(e,f,r),a.release(r)}function c(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function h(e,t,n,r){var i=e,o=i.mapResult,u=!o.hasOwnProperty(n);s(u,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n);if(u){var a=i.mapFunction.call(i.mapContext,t,r);o[n]=a}}function p(e,t,n){if(e==null)return e;var r={},s=c.getPooled(r,t,n);return i(e,h,s),c.release(s),r}function d(e,t,n,r){return null}function v(e,t){return i(e,d,null)}var r=e("./PooledClass"),i=e("./traverseAllChildren"),s=e("./warning"),o=r.twoArgumentPooler,u=r.threeArgumentPooler;r.addPoolingTo(a,o),r.addPoolingTo(c,u);var m={forEach:l,map:p,count:v};t.exports=m},{"./PooledClass":28,"./traverseAllChildren":156,"./warning":158}],35:[function(e,t,n){var r=e("./ReactDescriptor"),i=e("./ReactOwner"),s=e("./ReactUpdates"),o=e("./invariant"),u=e("./keyMirror"),a=e("./merge"),f=u({MOUNTED:null,UNMOUNTED:null}),l=!1,c=null,h=null,p={injection:{injectEnvironment:function(e){o(!l,"ReactComponent: injectEnvironment() can only be called once."),h=e.mountImageIntoNode,c=e.unmountIDFromEnvironment,p.BackendIDOperations=e.BackendIDOperations,l=!0}},LifeCycle:f,BackendIDOperations:null,Mixin:{isMounted:function(){return this._lifeCycleState===f.MOUNTED},setProps:function(e,t){var n=this._pendingDescriptor||this._descriptor;this.replaceProps(a(n.props,e),t)},replaceProps:function(e,t){o(this.isMounted(),"replaceProps(...): Can only update a mounted component."),o(this._mountDepth===0,"replaceProps(...): You called `setProps` or `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."),this._pendingDescriptor=r.cloneAndReplaceProps(this._pendingDescriptor||this._descriptor,e),s.enqueueUpdate(this,t)},_setPropsInternal:function(e,t){var n=this._pendingDescriptor||this._descriptor;this._pendingDescriptor=r.cloneAndReplaceProps(n,a(n.props,e)),s.enqueueUpdate(this,t)},construct:function(e){this.props=e.props,this._owner=e._owner,this._lifeCycleState=f.UNMOUNTED,this._pendingCallbacks=null,this._descriptor=e,this._pendingDescriptor=null},mountComponent:function(e,t,n){o(!this.isMounted(),"mountComponent(%s, ...): Can only mount an unmounted component. Make sure to avoid storing components between renders or reusing a single component instance in multiple places.",e);var r=this._descriptor.props;if(r.ref!=null){var s=this._descriptor._owner;i.addComponentAsRefTo(this,r.ref,s)}this._rootNodeID=e,this._lifeCycleState=f.MOUNTED,this._mountDepth=n},unmountComponent:function(){o(this.isMounted(),"unmountComponent(): Can only unmount a mounted component.");var e=this.props;e.ref!=null&&i.removeComponentAsRefFrom(this,e.ref,this._owner),c(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=f.UNMOUNTED},receiveComponent:function(e,t){o(this.isMounted(),"receiveComponent(...): Can only update a mounted component."),this._pendingDescriptor=e,this.performUpdateIfNecessary(t)},performUpdateIfNecessary:function(e){if(this._pendingDescriptor==null)return;var t=this._descriptor,n=this._pendingDescriptor;this._descriptor=n,this.props=n.props,this._owner=n._owner,this._pendingDescriptor=null,this.updateComponent(e,t)},updateComponent:function(e,t){var n=this._descriptor;if(n._owner!==t._owner||n.props.ref!==t.props.ref)t.props.ref!=null&&i.removeComponentAsRefFrom(this,t.props.ref,t._owner),n.props.ref!=null&&i.addComponentAsRefTo(this,n.props.ref,n._owner)},mountComponentIntoNode:function(e,t,n){var r=s.ReactReconcileTransaction.getPooled();r.perform(this._mountComponentIntoNode,this,e,t,r,n),s.ReactReconcileTransaction.release(r)},_mountComponentIntoNode:function(e,t,n,r){var i=this.mountComponent(e,n,0);h(i,t,r)},isOwnedBy:function(e){return this._owner===e},getSiblingByRef:function(e){var t=this._owner;return!t||!t.refs?null:t.refs[e]}}};t.exports=p},{"./ReactDescriptor":56,"./ReactOwner":70,"./ReactUpdates":87,"./invariant":134,"./keyMirror":140,"./merge":144}],36:[function(e,t,n){var r=e("./ReactDOMIDOperations"),i=e("./ReactMarkupChecksum"),s=e("./ReactMount"),o=e("./ReactPerf"),u=e("./ReactReconcileTransaction"),a=e("./getReactRootElementInContainer"),f=e("./invariant"),l=e("./setInnerHTML"),c=1,h=9,p={ReactReconcileTransaction:u,BackendIDOperations:r,unmountIDFromEnvironment:function(e){s.purgeID(e)},mountImageIntoNode:o.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(e,t,n){f(t&&(t.nodeType===c||t.nodeType===h),"mountComponentIntoNode(...): Target container is not valid.");if(n){if(i.canReuseMarkup(e,a(t)))return;f(t.nodeType!==h,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side."),console.warn("React attempted to use reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server.")}f(t.nodeType!==h,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See renderComponentToString() for server rendering."),l(t,e)})};t.exports=p},{"./ReactDOMIDOperations":45,"./ReactMarkupChecksum":66,"./ReactMount":67,"./ReactPerf":71,"./ReactReconcileTransaction":77,"./getReactRootElementInContainer":128,"./invariant":134,"./setInnerHTML":152}],37:[function(e,t,n){var r=e("./shallowEqual"),i={shouldComponentUpdate:function(e,t){return!r(this.props,e)||!r(this.state,t)}};t.exports=i},{"./shallowEqual":153}],38:[function(e,t,n){function A(e){var t=e._owner||null;return t&&t.constructor&&t.constructor.displayName?" Check the render method of `"+t.constructor.displayName+"`.":""}function O(e,t,n){for(var r in t)t.hasOwnProperty(r)&&g(typeof t[r]=="function","%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactCompositeComponent",d[n],r)}function M(e,t){var n=k.hasOwnProperty(t)?k[t]:null;I.hasOwnProperty(t)&&g(n===N.OVERRIDE_BASE,"ReactCompositeComponentInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e.hasOwnProperty(t)&&g(n===N.DEFINE_MANY||n===N.DEFINE_MANY_MERGED,"ReactCompositeComponentInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function _(e){var t=e._compositeLifeCycleState;g(e.isMounted()||t===F.MOUNTING,"replaceState(...): Can only update a mounted or mounting component."),g(t!==F.RECEIVING_STATE,"replaceState(...): Cannot update during an existing state transition (such as within `render`). This could potentially cause an infinite loop so it is forbidden."),g(t!==F.UNMOUNTING,"replaceState(...): Cannot update while unmounting component. This usually means you called setState() on an unmounted component.")}function D(e,t){g(!o.isValidFactory(t),"ReactCompositeComponent: You're attempting to use a component class as a mixin. Instead, just use a regular object."),g(!o.isValidDescriptor(t),"ReactCompositeComponent: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype;for(var r in t){var i=t[r];if(!t.hasOwnProperty(r))continue;M(n,r);if(L.hasOwnProperty(r))L[r](e,i);else{var s=k.hasOwnProperty(r),u=n.hasOwnProperty(r),a=i&&i.__reactDontBind,f=typeof i=="function",l=f&&!s&&!u&&!a;if(l)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=i,n[r]=i;else if(u){var c=k[r];g(s&&(c===N.DEFINE_MANY_MERGED||c===N.DEFINE_MANY),"ReactCompositeComponent: Unexpected spec policy %s for key %s when mixing in component specs.",c,r),c===N.DEFINE_MANY_MERGED?n[r]=B(n[r],i):c===N.DEFINE_MANY&&(n[r]=j(n[r],i))}else n[r]=i,typeof i=="function"&&t.displayName&&(n[r].displayName=t.displayName+"_"+r)}}}function P(e,t){if(!t)return;for(var n in t){var r=t[n];if(!t.hasOwnProperty(n))continue;var i=n in e,s=r;if(i){var o=e[n],u=typeof o,a=typeof r;g(u==="function"&&a==="function","ReactCompositeComponent: You are attempting to define `%s` on your component more than once, but that is only supported for functions, which are chained together. This conflict may be due to a mixin.",n),s=j(o,r)}e[n]=s}}function H(e,t){return g(e&&t&&typeof e=="object"&&typeof t=="object","mergeObjectsWithNoDuplicateKeys(): Cannot merge non-objects"),S(t,function(t,n){g(e[n]===undefined,"mergeObjectsWithNoDuplicateKeys(): Tried to merge two objects with the same key: %s",n),e[n]=t}),e}function B(e,t){return function(){var r=e.apply(this,arguments),i=t.apply(this,arguments);return r==null?i:i==null?r:H(r,i)}}function j(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var r=e("./ReactComponent"),i=e("./ReactContext"),s=e("./ReactCurrentOwner"),o=e("./ReactDescriptor"),u=e("./ReactDescriptorValidator"),a=e("./ReactEmptyComponent"),f=e("./ReactErrorUtils"),l=e("./ReactOwner"),c=e("./ReactPerf"),h=e("./ReactPropTransferer"),p=e("./ReactPropTypeLocations"),d=e("./ReactPropTypeLocationNames"),v=e("./ReactUpdates"),m=e("./instantiateReactComponent"),g=e("./invariant"),y=e("./keyMirror"),b=e("./merge"),w=e("./mixInto"),E=e("./monitorCodeUse"),S=e("./mapObject"),x=e("./shouldUpdateReactComponent"),T=e("./warning"),N=y({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),C=[],k={mixins:N.DEFINE_MANY,statics:N.DEFINE_MANY,propTypes:N.DEFINE_MANY,contextTypes:N.DEFINE_MANY,childContextTypes:N.DEFINE_MANY,getDefaultProps:N.DEFINE_MANY_MERGED,getInitialState:N.DEFINE_MANY_MERGED,getChildContext:N.DEFINE_MANY_MERGED,render:N.DEFINE_ONCE,componentWillMount:N.DEFINE_MANY,componentDidMount:N.DEFINE_MANY,componentWillReceiveProps:N.DEFINE_MANY,shouldComponentUpdate:N.DEFINE_ONCE,componentWillUpdate:N.DEFINE_MANY,componentDidUpdate:N.DEFINE_MANY,componentWillUnmount:N.DEFINE_MANY,updateComponent:N.OVERRIDE_BASE},L={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)D(e,t[n])},childContextTypes:function(e,t){O(e,t,p.childContext),e.childContextTypes=b(e.childContextTypes,t)},contextTypes:function(e,t){O(e,t,p.context),e.contextTypes=b(e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=B(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){O(e,t,p.prop),e.propTypes=b(e.propTypes,t)},statics:function(e,t){P(e,t)}},F=y({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null,RECEIVING_STATE:null}),I={construct:function(e){r.Mixin.construct.apply(this,arguments),l.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=null,this._compositeLifeCycleState=null},isMounted:function(){return r.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==F.MOUNTING},mountComponent:c.measure("ReactCompositeComponent","mountComponent",function(e,t,n){r.Mixin.mountComponent.call(this,e,t,n),this._compositeLifeCycleState=F.MOUNTING,this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.context=this._processContext(this._descriptor._context),this.props=this._processProps(this.props),this.state=this.getInitialState?this.getInitialState():null,g(typeof this.state=="object"&&!Array.isArray(this.state),"%s.getInitialState(): must return an object or null",this.constructor.displayName||"ReactCompositeComponent"),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=m(this._renderValidatedComponent()),this._compositeLifeCycleState=null;var i=this._renderedComponent.mountComponent(e,t,n+1);return this.componentDidMount&&t.getReactMountReady().enqueue(this.componentDidMount,this),i}),unmountComponent:function(){this._compositeLifeCycleState=F.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,r.Mixin.unmountComponent.call(this)},setState:function(e,t){g(typeof e=="object"||e==null,"setState(...): takes an object of state variables to update."),T(e!=null,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),this.replaceState(b(this._pendingState||this.state,e),t)},replaceState:function(e,t){_(this),this._pendingState=e,this._compositeLifeCycleState!==F.MOUNTING&&v.enqueueUpdate(this,t)},_processContext:function(e){var t=null,n=this.constructor.contextTypes;if(n){t={};for(var r in n)t[r]=e[r];this._checkPropTypes(n,t,p.context)}return t},_processChildContext:function(e){var t=this.getChildContext&&this.getChildContext(),n=this.constructor.displayName||"ReactCompositeComponent";if(t){g(typeof this.constructor.childContextTypes=="object","%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",n),this._checkPropTypes(this.constructor.childContextTypes,t,p.childContext);for(var r in t)g(r in this.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',n,r);return b(e,t)}return e},_processProps:function(e){var t=this.constructor.defaultProps,n;if(t){n=b(e);for(var r in t)typeof n[r]=="undefined"&&(n[r]=t[r])}else n=e;var i=this.constructor.propTypes;return i&&this._checkPropTypes(i,n,p.prop),n},_checkPropTypes:function(e,t,n){var r=this.constructor.displayName;for(var i in e)if(e.hasOwnProperty(i)){var s=e[i](t,i,r,n);if(s instanceof Error){var o=A(this);T(!1,s.message+o)}}},performUpdateIfNecessary:function(e){var t=this._compositeLifeCycleState;if(t===F.MOUNTING||t===F.RECEIVING_PROPS)return;if(this._pendingDescriptor==null&&this._pendingState==null&&!this._pendingForceUpdate)return;var n=this.context,r=this.props,i=this._descriptor;this._pendingDescriptor!=null&&(i=this._pendingDescriptor,n=this._processContext(i._context),r=this._processProps(i.props),this._pendingDescriptor=null,this._compositeLifeCycleState=F.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(r,n)),this._compositeLifeCycleState=F.RECEIVING_STATE;var s=this._pendingState||this.state;this._pendingState=null;try{var o=this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(r,s,n);typeof o=="undefined"&&console.warn((this.constructor.displayName||"ReactCompositeComponent")+".shouldComponentUpdate(): Returned undefined instead of a "+"boolean value. Make sure to return true or false."),o?(this._pendingForceUpdate=!1,this._performComponentUpdate(i,r,s,n,e)):(this._descriptor=i,this.props=r,this.state=s,this.context=n,this._owner=i._owner)}finally{this._compositeLifeCycleState=null}},_performComponentUpdate:function(e,t,n,r,i){var s=this._descriptor,o=this.props,u=this.state,a=this.context;this.componentWillUpdate&&this.componentWillUpdate(t,n,r),this._descriptor=e,this.props=t,this.state=n,this.context=r,this._owner=e._owner,this.updateComponent(i,s),this.componentDidUpdate&&i.getReactMountReady().enqueue(this.componentDidUpdate.bind(this,o,u,a),this)},receiveComponent:function(e,t){if(e===this._descriptor&&e._owner!=null)return;r.Mixin.receiveComponent.call(this,e,t)},updateComponent:c.measure("ReactCompositeComponent","updateComponent",function(e,t){r.Mixin.updateComponent.call(this,e,t);var n=this._renderedComponent,i=n._descriptor,s=this._renderValidatedComponent();if(x(i,s))n.receiveComponent(s,e);else{var o=this._rootNodeID,u=n._rootNodeID;n.unmountComponent(),this._renderedComponent=m(s);var a=this._renderedComponent.mountComponent(o,e,this._mountDepth+1);r.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(u,a)}}),forceUpdate:function(e){var t=this._compositeLifeCycleState;g(this.isMounted()||t===F.MOUNTING,"forceUpdate(...): Can only force an update on mounted or mounting components."),g(t!==F.RECEIVING_STATE&&t!==F.UNMOUNTING,"forceUpdate(...): Cannot force an update while unmounting component or during an existing state transition (such as within `render`)."),this._pendingForceUpdate=!0,v.enqueueUpdate(this,e)},_renderValidatedComponent:c.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var e,t=i.current;i.current=this._processChildContext(this._descriptor._context),s.current=this;try{e=this.render(),e===null||e===!1?(e=a.getEmptyComponent(),a.registerNullComponentID(this._rootNodeID)):a.deregisterNullComponentID(this._rootNodeID)}finally{i.current=t,s.current=null}return g(o.isValidDescriptor(e),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.constructor.displayName||"ReactCompositeComponent"),e}),_bindAutoBindMethods:function(){for(var e in this.__reactAutoBindMap){if(!this.__reactAutoBindMap.hasOwnProperty(e))continue;var t=this.__reactAutoBindMap[e];this[e]=this._bindAutoBindMethod(f.guard(t,this.constructor.displayName+"."+e))}},_bindAutoBindMethod:function(e){var t=this,n=function(){return e.apply(t,arguments)};n.__reactBoundContext=t,n.__reactBoundMethod=e,n.__reactBoundArguments=null;var r=t.constructor.displayName,i=n.bind;return n.bind=function(s){var o=Array.prototype.slice.call(arguments,1);if(s!==t&&s!==null)E("react_bind_warning",{component:r}),console.warn("bind(): React component methods may only be bound to the component instance. See "+r);else if(!o.length)return E("react_bind_warning",{component:r}),console.warn("bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See "+r),n;var u=i.apply(n,arguments);return u.__reactBoundContext=t,u.__reactBoundMethod=e,u.__reactBoundArguments=o,u},n}},q=function(){};w(q,r.Mixin),w(q,l.Mixin),w(q,h.Mixin),w(q,I);var R={LifeCycle:F,Base:q,createClass:function(e){var t=function(e,t){this.construct(e,t)};t.prototype=new q,t.prototype.constructor=t,C.forEach(D.bind(null,t)),D(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),g(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),t.prototype.componentShouldUpdate&&(E("react_component_should_update_warning",{component:e.displayName}),console.warn((e.displayName||"A component")+" has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value."));for(var n in k)t.prototype[n]||(t.prototype[n]=null);var r=o.createFactory(t);return u.createFactory(r,t.propTypes,t.contextTypes)},injection:{injectMixin:function(e){C.push(e)}}};t.exports=R},{"./ReactComponent":35,"./ReactContext":39,"./ReactCurrentOwner":40,"./ReactDescriptor":56,"./ReactDescriptorValidator":57,"./ReactEmptyComponent":58,"./ReactErrorUtils":59,"./ReactOwner":70,"./ReactPerf":71,"./ReactPropTransferer":72,"./ReactPropTypeLocationNames":73,"./ReactPropTypeLocations":74,"./ReactUpdates":87,"./instantiateReactComponent":133,"./invariant":134,"./keyMirror":140,"./mapObject":142,"./merge":144,"./mixInto":147,"./monitorCodeUse":148,"./shouldUpdateReactComponent":154,"./warning":158}],39:[function(e,t,n){var r=e("./merge"),i={current:{},withContext:function(e,t){var n,s=i.current;i.current=r(s,e);try{n=t()}finally{i.current=s}return n}};t.exports=i},{"./merge":144}],40:[function(e,t,n){var r={current:null};t.exports=r},{}],41:[function(e,t,n){function a(e,t){var n=function(e){this.construct(e)};n.prototype=new s(t,e),n.prototype.constructor=n,n.displayName=t;var o=r.createFactory(n);return i.createFactory(o)}var r=e("./ReactDescriptor"),i=e("./ReactDescriptorValidator"),s=e("./ReactDOMComponent"),o=e("./mergeInto"),u=e("./mapObject"),f=u({a:!1,abbr:!1,address:!1,area:!0,article:!1,aside:!1,audio:!1,b:!1,base:!0,bdi:!1,bdo:!1,big:!1,blockquote:!1,body:!1,br:!0,button:!1,canvas:!1,caption:!1,cite:!1,code:!1,col:!0,colgroup:!1,data:!1,datalist:!1,dd:!1,del:!1,details:!1,dfn:!1,div:!1,dl:!1,dt:!1,em:!1,embed:!0,fieldset:!1,figcaption:!1,figure:!1,footer:!1,form:!1,h1:!1,h2:!1,h3:!1,h4:!1,h5:!1,h6:!1,head:!1,header:!1,hr:!0,html:!1,i:!1,iframe:!1,img:!0,input:!0,ins:!1,kbd:!1,keygen:!0,label:!1,legend:!1,li:!1,link:!0,main:!1,map:!1,mark:!1,menu:!1,menuitem:!1,meta:!0,meter:!1,nav:!1,noscript:!1,object:!1,ol:!1,optgroup:!1,option:!1,output:!1,p:!1,param:!0,pre:!1,progress:!1,q:!1,rp:!1,rt:!1,ruby:!1,s:!1,samp:!1,script:!1,section:!1,select:!1,small:!1,source:!0,span:!1,strong:!1,style:!1,sub:!1,summary:!1,sup:!1,table:!1,tbody:!1,td:!1,textarea:!1,tfoot:!1,th:!1,thead:!1,time:!1,title:!1,tr:!1,track:!0,u:!1,ul:!1,"var":!1,video:!1,wbr:!0,circle:!1,defs:!1,ellipse:!1,g:!1,line:!1,linearGradient:!1,mask:!1,path:!1,pattern:!1,polygon:!1,polyline:!1,radialGradient:!1,rect:!1,stop:!1,svg:!1,text:!1,tspan:!1},a),l={injectComponentClasses:function(e){o(f,e)}};f.injection=l,t.exports=f},{"./ReactDOMComponent":43,"./ReactDescriptor":56,"./ReactDescriptorValidator":57,"./mapObject":142,"./mergeInto":146}],42:[function(e,t,n){var r=e("./AutoFocusMixin"),i=e("./ReactBrowserComponentMixin"),s=e("./ReactCompositeComponent"),o=e("./ReactDOM"),u=e("./keyMirror"),a=o.button,f=u({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),l=s.createClass({displayName:"ReactDOMButton",mixins:[r,i],render:function(){var e={};for(var t in this.props)this.props.hasOwnProperty(t)&&(!this.props.disabled||!f[t])&&(e[t]=this.props[t]);return a(e,this.props.children)}});t.exports=l},{"./AutoFocusMixin":1,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":38,"./ReactDOM":41,"./keyMirror":140}],43:[function(e,t,n){function x(e){if(!e)return;p(e.children==null||e.dangerouslySetInnerHTML==null,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),p(e.style==null||typeof e.style=="object","The `style` prop expects a mapping from style properties to values, not a string.")}function T(e,t,n,r){var i=f.findReactContainerForID(e);if(i){var s=i.nodeType===S?i.ownerDocument:i;y(t,s)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function N(e,t){this._tagOpen="<"+e,this._tagClose=t?"":"</"+e+">",this.tagName=e.toUpperCase()}var r=e("./CSSPropertyOperations"),i=e("./DOMProperty"),s=e("./DOMPropertyOperations"),o=e("./ReactBrowserComponentMixin"),u=e("./ReactComponent"),a=e("./ReactBrowserEventEmitter"),f=e("./ReactMount"),l=e("./ReactMultiChild"),c=e("./ReactPerf"),h=e("./escapeTextForBrowser"),p=e("./invariant"),d=e("./keyOf"),v=e("./merge"),m=e("./mixInto"),g=a.deleteListener,y=a.listenTo,b=a.registrationNameModules,w={string:!0,number:!0},E=d({style:null}),S=1;N.Mixin={mountComponent:c.measure("ReactDOMComponent","mountComponent",function(e,t,n){return u.Mixin.mountComponent.call(this,e,t,n),x(this.props),this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t)+this._tagClose}),_createOpenTagMarkupAndPutListeners:function(e){var t=this.props,n=this._tagOpen;for(var i in t){if(!t.hasOwnProperty(i))continue;var o=t[i];if(o==null)continue;if(b.hasOwnProperty(i))T(this._rootNodeID,i,o,e);else{i===E&&(o&&(o=t.style=v(t.style)),o=r.createMarkupForStyles(o));var u=s.createMarkupForProperty(i,o);u&&(n+=" "+u)}}if(e.renderToStaticMarkup)return n+">";var a=s.createMarkupForID(this._rootNodeID);return n+" "+a+">"},_createContentMarkup:function(e){var t=this.props.dangerouslySetInnerHTML;if(t!=null){if(t.__html!=null)return t.__html}else{var n=w[typeof this.props.children]?this.props.children:null,r=n!=null?null:this.props.children;if(n!=null)return h(n);if(r!=null){var i=this.mountChildren(r,e);return i.join("")}}return""},receiveComponent:function(e,t){if(e===this._descriptor&&e._owner!=null)return;u.Mixin.receiveComponent.call(this,e,t)},updateComponent:c.measure("ReactDOMComponent","updateComponent",function(e,t){x(this._descriptor.props),u.Mixin.updateComponent.call(this,e,t),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e)}),_updateDOMProperties:function(e,t){var n=this.props,r,s,o;for(r in e){if(n.hasOwnProperty(r)||!e.hasOwnProperty(r))continue;if(r===E){var a=e[r];for(s in a)a.hasOwnProperty(s)&&(o=o||{},o[s]="")}else b.hasOwnProperty(r)?g(this._rootNodeID,r):(i.isStandardName[r]||i.isCustomAttribute(r))&&u.BackendIDOperations.deletePropertyByID(this._rootNodeID,r)}for(r in n){var f=n[r],l=e[r];if(!n.hasOwnProperty(r)||f===l)continue;if(r===E){f&&(f=n.style=v(f));if(l){for(s in l)l.hasOwnProperty(s)&&(!f||!f.hasOwnProperty(s))&&(o=o||{},o[s]="");for(s in f)f.hasOwnProperty(s)&&l[s]!==f[s]&&(o=o||{},o[s]=f[s])}else o=f}else b.hasOwnProperty(r)?T(this._rootNodeID,r,f,t):(i.isStandardName[r]||i.isCustomAttribute(r))&&u.BackendIDOperations.updatePropertyByID(this._rootNodeID,r,f)}o&&u.BackendIDOperations.updateStylesByID(this._rootNodeID,o)},_updateDOMChildren:function(e,t){var n=this.props,r=w[typeof e.children]?e.children:null,i=w[typeof n.children]?n.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,o=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,a=r!=null?null:e.children,f=i!=null?null:n.children,l=r!=null||s!=null,c=i!=null||o!=null;a!=null&&f==null?this.updateChildren(null,t):l&&!c&&this.updateTextContent(""),i!=null?r!==i&&this.updateTextContent(""+i):o!=null?s!==o&&u.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,o):f!=null&&this.updateChildren(f,t)},unmountComponent:function(){this.unmountChildren(),a.deleteAllListeners(this._rootNodeID),u.Mixin.unmountComponent.call(this)}},m(N,u.Mixin),m(N,N.Mixin),m(N,l.Mixin),m(N,o),t.exports=N},{"./CSSPropertyOperations":5,"./DOMProperty":11,"./DOMPropertyOperations":12,"./ReactBrowserComponentMixin":30,"./ReactBrowserEventEmitter":31,"./ReactComponent":35,"./ReactMount":67,"./ReactMultiChild":68,"./ReactPerf":71,"./escapeTextForBrowser":118,"./invariant":134,"./keyOf":141,"./merge":144,"./mixInto":147}],44:[function(e,t,n){var r=e("./EventConstants"),i=e("./LocalEventTrapMixin"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=u.form,f=o.createClass({displayName:"ReactDOMForm",mixins:[s,i],render:function(){return this.transferPropsTo(a(null,this.props.children))},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});t.exports=f},{"./EventConstants":16,"./LocalEventTrapMixin":26,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":38,"./ReactDOM":41}],45:[function(e,t,n){var r=e("./CSSPropertyOperations"),i=e("./DOMChildrenOperations"),s=e("./DOMPropertyOperations"),o=e("./ReactMount"),u=e("./ReactPerf"),a=e("./invariant"),f=e("./setInnerHTML"),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},c={updatePropertyByID:u.measure("ReactDOMIDOperations","updatePropertyByID",function(e,t,n){var r=o.getNode(e);a(!l.hasOwnProperty(t),"updatePropertyByID(...): %s",l[t]),n!=null?s.setValueForProperty(r,t,n):s.deleteValueForProperty(r,t)}),deletePropertyByID:u.measure("ReactDOMIDOperations","deletePropertyByID",function(e,t,n){var r=o.getNode(e);a(!l.hasOwnProperty(t),"updatePropertyByID(...): %s",l[t]),s.deleteValueForProperty(r,t,n)}),updateStylesByID:u.measure("ReactDOMIDOperations","updateStylesByID",function(e,t){var n=o.getNode(e);r.setValueForStyles(n,t)}),updateInnerHTMLByID:u.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(e,t){var n=o.getNode(e);f(n,t)}),updateTextContentByID:u.measure("ReactDOMIDOperations","updateTextContentByID",function(e,t){var n=o.getNode(e);i.updateTextContent(n,t)}),dangerouslyReplaceNodeWithMarkupByID:u.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(e,t){var n=o.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)}),dangerouslyProcessChildrenUpdates:u.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);i.processUpdates(e,t)})};t.exports=c},{"./CSSPropertyOperations":5,"./DOMChildrenOperations":10,"./DOMPropertyOperations":12,"./ReactMount":67,"./ReactPerf":71,"./invariant":134,"./setInnerHTML":152}],46:[function(e,t,n){var r=e("./EventConstants"),i=e("./LocalEventTrapMixin"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=u.img,f=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[s,i],render:function(){return a(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});t.exports=f},{"./EventConstants":16,"./LocalEventTrapMixin":26,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":38,"./ReactDOM":41}],47:[function(e,t,n){var r=e("./AutoFocusMixin"),i=e("./DOMPropertyOperations"),s=e("./LinkedValueUtils"),o=e("./ReactBrowserComponentMixin"),u=e("./ReactCompositeComponent"),a=e("./ReactDOM"),f=e("./ReactMount"),l=e("./invariant"),c=e("./merge"),h=a.input,p={},d=u.createClass({displayName:"ReactDOMInput",mixins:[r,s.Mixin,o],getInitialState:function(){var e=this.props.defaultValue;return{checked:this.props.defaultChecked||!1,value:e!=null?e:null}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=c(this.props);e.defaultChecked=null,e.defaultValue=null;var t=s.getValue(this);e.value=t!=null?t:this.state.value;var n=s.getChecked(this);return e.checked=n!=null?n:this.state.checked,e.onChange=this._handleChange,h(e,this.props.children)},componentDidMount:function(){var e=f.getID(this.getDOMNode());p[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=f.getID(e);delete p[t]},componentDidUpdate:function(e,t,n){var r=this.getDOMNode();this.props.checked!=null&&i.setValueForProperty(r,"checked",this.props.checked||!1);var o=s.getValue(this);o!=null&&i.setValueForProperty(r,"value",""+o)},_handleChange:function(e){var t,n=s.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({checked:e.target.checked,value:e.target.value});var r=this.props.name;if(this.props.type==="radio"&&r!=null){var i=this.getDOMNode(),o=i;while(o.parentNode)o=o.parentNode;var u=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]');for(var a=0,c=u.length;a<c;a++){var h=u[a];if(h===i||h.form!==i.form)continue;var d=f.getID(h);l(d,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var v=p[d];l(v,"ReactDOMInput: Unknown radio button ID %s.",d),v.setState({checked:!1})}}return t}});t.exports=d},{"./AutoFocusMixin":1,"./DOMPropertyOperations":12,"./LinkedValueUtils":25,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":38,"./ReactDOM":41,"./ReactMount":67,"./invariant":134,"./merge":144}],48:[function(e,t,n){var r=e("./ReactBrowserComponentMixin"),i=e("./ReactCompositeComponent"),s=e("./ReactDOM"),o=e("./warning"),u=s.option,a=i.createClass({displayName:"ReactDOMOption",mixins:[r],componentWillMount:function(){o(this.props.selected==null,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return u(this.props,this.props.children)}});t.exports=a},{"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":38,"./ReactDOM":41,"./warning":158}],49:[function(e,t,n){function l(e,t,n){if(e[t]==null)return;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if "+"`multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar "+"value if `multiple` is false.")}function c(e,t){var n=e.props.multiple,r=t!=null?t:e.state.value,i=e.getDOMNode().options,s,o,u;if(n){s={};for(o=0,u=r.length;o<u;++o)s[""+r[o]]=!0}else s=""+r;for(o=0,u=i.length;o<u;o++){var a=n?s.hasOwnProperty(i[o].value):i[o].value===s;a!==i[o].selected&&(i[o].selected=a)}}var r=e("./AutoFocusMixin"),i=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=e("./merge"),f=u.select,h=o.createClass({displayName:"ReactDOMSelect",mixins:[r,i.Mixin,s],propTypes:{defaultValue:l,value:l},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillReceiveProps:function(e){!this.props.multiple&&e.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!e.multiple&&this.setState({value:this.state.value[0]})},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=a(this.props);return e.onChange=this._handleChange,e.value=null,f(e,this.props.children)},componentDidMount:function(){c(this,i.getValue(this))},componentDidUpdate:function(e){var t=i.getValue(this),n=!!e.multiple,r=!!this.props.multiple;(t!=null||n!==r)&&c(this,t)},_handleChange:function(e){var t,n=i.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1);var r;if(this.props.multiple){r=[];var s=e.target.options;for(var o=0,u=s.length;o<u;o++)s[o].selected&&r.push(s[o].value)}else r=e.target.value;return this.setState({value:r}),t}});t.exports=h},{"./AutoFocusMixin":1,"./LinkedValueUtils":25,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":38,"./ReactDOM":41,"./merge":144}],50:[function(e,t,n){function o(e,t,n,r){return e===n&&t===r}function u(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var s=i.text.length,o=s+r;return{start:s,end:o}}function a(e){var t=window.getSelection();if(t.rangeCount===0)return null;var n=t.anchorNode,r=t.anchorOffset,i=t.focusNode,s=t.focusOffset,u=t.getRangeAt(0),a=o(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),f=a?0:u.toString().length,l=u.cloneRange();l.selectNodeContents(e),l.setEnd(u.startContainer,u.startOffset);var c=o(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=c?0:l.toString().length,p=h+f,d=document.createRange();d.setStart(n,r),d.setEnd(i,s);var v=d.collapsed;return d.detach(),{start:v?p:h,end:v?h:p}}function f(e,t){var n=document.selection.createRange().duplicate(),r,i;typeof t.end=="undefined"?(r=t.start,i=r):t.start>t.end?(r=t.end,i=t.start):(r=t.start,i=t.end),n.moveToElementText(e),n.moveStart("character",r),n.setEndPoint("EndToStart",n),n.moveEnd("character",i-r),n.select()}function l(e,t){var n=window.getSelection(),r=e[s()].length,o=Math.min(t.start,r),u=typeof t.end=="undefined"?o:Math.min(t.end,r);if(!n.extend&&o>u){var a=u;u=o,o=a}var f=i(e,o),l=i(e,u);if(f&&l){var c=document.createRange();c.setStart(f.node,f.offset),n.removeAllRanges(),o>u?(n.addRange(c),n.extend(l.node,l.offset)):(c.setEnd(l.node,l.offset),n.addRange(c)),c.detach()}}var r=e("./ExecutionEnvironment"),i=e("./getNodeForCharacterOffset"),s=e("./getTextContentAccessor"),c=r.canUseDOM&&document.selection,h={getOffsets:c?u:a,setOffsets:c?f:l};t.exports=h},{"./ExecutionEnvironment":22,"./getNodeForCharacterOffset":127,"./getTextContentAccessor":129}],51:[function(e,t,n){var r=e("./AutoFocusMixin"),i=e("./DOMPropertyOperations"),s=e("./LinkedValueUtils"),o=e("./ReactBrowserComponentMixin"),u=e("./ReactCompositeComponent"),a=e("./ReactDOM"),f=e("./invariant"),l=e("./merge"),c=e("./warning"),h=a.textarea,p=u.createClass({displayName:"ReactDOMTextarea",mixins:[r,s.Mixin,o],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;t!=null&&(c(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),f(e==null,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(t)&&(f(t.length<=1,"<textarea> can only have at most one child."),t=t[0]),e=""+t),e==null&&(e="");var n=s.getValue(this);return{initialValue:""+(n!=null?n:e)}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=l(this.props);return f(e.dangerouslySetInnerHTML==null,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,h(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var r=s.getValue(this);if(r!=null){var o=this.getDOMNode();i.setValueForProperty(o,"value",""+r)}},_handleChange:function(e){var t,n=s.getOnChange(this);return n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({value:e.target.value}),t}});t.exports=p},{"./AutoFocusMixin":1,"./DOMPropertyOperations":12,"./LinkedValueUtils":25,"./ReactBrowserComponentMixin":30,"./ReactCompositeComponent":38,"./ReactDOM":41,"./invariant":134,"./merge":144,"./warning":158}],52:[function(e,t,n){function l(){this.reinitializeTransaction()}var r=e("./ReactUpdates"),i=e("./Transaction"),s=e("./emptyFunction"),o=e("./mixInto"),u={initialize:s,close:function(){h.isBatchingUpdates=!1}},a={initialize:s,close:r.flushBatchedUpdates.bind(r)},f=[a,u];o(l,i.Mixin),o(l,{getTransactionWrappers:function(){return f}});var c=new l,h={isBatchingUpdates:!1,batchedUpdates:function(e,t,n){var r=h.isBatchingUpdates;h.isBatchingUpdates=!0,r?e(t,n):c.perform(e,null,t,n)}};t.exports=h},{"./ReactUpdates":87,"./Transaction":104,"./emptyFunction":116,"./mixInto":147}],53:[function(e,t,n){function _(){T.EventEmitter.injectReactEventListener(x),T.EventPluginHub.injectEventPluginOrder(u),T.EventPluginHub.injectInstanceHandle(N),T.EventPluginHub.injectMount(C),T.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:A,EnterLeaveEventPlugin:a,ChangeEventPlugin:i,CompositionEventPlugin:o,MobileSafariClickEventPlugin:c,SelectEventPlugin:k,BeforeInputEventPlugin:r}),T.DOM.injectComponentClasses({button:m,form:g,img:y,input:b,option:w,select:E,textarea:S,html:M(v.html),head:M(v.head),body:M(v.body)}),T.CompositeComponent.injectMixin(h),T.DOMProperty.injectDOMPropertyConfig(l),T.DOMProperty.injectDOMPropertyConfig(O),T.EmptyComponent.injectEmptyComponent(v.noscript),T.Updates.injectReconcileTransaction(p.ReactReconcileTransaction),T.Updates.injectBatchingStrategy(d),T.RootIndex.injectCreateReactRootIndex(f.canUseDOM?s.createReactRootIndex:L.createReactRootIndex),T.Component.injectEnvironment(p);var t=f.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(t)){var n=e("./ReactDefaultPerf");n.start()}}var r=e("./BeforeInputEventPlugin"),i=e("./ChangeEventPlugin"),s=e("./ClientReactRootIndex"),o=e("./CompositionEventPlugin"),u=e("./DefaultEventPluginOrder"),a=e("./EnterLeaveEventPlugin"),f=e("./ExecutionEnvironment"),l=e("./HTMLDOMPropertyConfig"),c=e("./MobileSafariClickEventPlugin"),h=e("./ReactBrowserComponentMixin"),p=e("./ReactComponentBrowserEnvironment"),d=e("./ReactDefaultBatchingStrategy"),v=e("./ReactDOM"),m=e("./ReactDOMButton"),g=e("./ReactDOMForm"),y=e("./ReactDOMImg"),b=e("./ReactDOMInput"),w=e("./ReactDOMOption"),E=e("./ReactDOMSelect"),S=e("./ReactDOMTextarea"),x=e("./ReactEventListener"),T=e("./ReactInjection"),N=e("./ReactInstanceHandles"),C=e("./ReactMount"),k=e("./SelectEventPlugin"),L=e("./ServerReactRootIndex"),A=e("./SimpleEventPlugin"),O=e("./SVGDOMPropertyConfig"),M=e("./createFullPageComponent");t.exports={inject:_}},{"./BeforeInputEventPlugin":2,"./ChangeEventPlugin":7,"./ClientReactRootIndex":8,"./CompositionEventPlugin":9,"./DefaultEventPluginOrder":14,"./EnterLeaveEventPlugin":15,"./ExecutionEnvironment":22,"./HTMLDOMPropertyConfig":23,"./MobileSafariClickEventPlugin":27,"./ReactBrowserComponentMixin":30,"./ReactComponentBrowserEnvironment":36,"./ReactDOM":41,"./ReactDOMButton":42,"./ReactDOMForm":44,"./ReactDOMImg":46,"./ReactDOMInput":47,"./ReactDOMOption":48,"./ReactDOMSelect":49,"./ReactDOMTextarea":51,"./ReactDefaultBatchingStrategy":52,"./ReactDefaultPerf":54,"./ReactEventListener":61,"./ReactInjection":62,"./ReactInstanceHandles":64,"./ReactMount":67,"./SVGDOMPropertyConfig":89,"./SelectEventPlugin":90,"./ServerReactRootIndex":91,"./SimpleEventPlugin":92,"./createFullPageComponent":112}],54:[function(e,t,n){function a(e){return Math.floor(e*100)/100}function f(e,t,n){e[t]=(e[t]||0)+n}var r=e("./DOMProperty"),i=e("./ReactDefaultPerfAnalysis"),s=e("./ReactMount"),o=e("./ReactPerf"),u=e("./performanceNow"),l={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){l._injected||o.injection.injectMeasure(l.measure),l._allMeasurements.length=0,o.enableMeasure=!0},stop:function(){o.enableMeasure=!1},getLastMeasurements:function(){return l._allMeasurements},printExclusive:function(e){e=e||l._allMeasurements;var t=i.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":a(e.inclusive),"Exclusive mount time (ms)":a(e.exclusive),"Exclusive render time (ms)":a(e.render),"Mount time per instance (ms)":a(e.exclusive/e.count),"Render time per instance (ms)":a(e.render/e.count),Instances:e.count}}))},printInclusive:function(e){e=e||l._allMeasurements;var t=i.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":a(e.time),Instances:e.count}})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},printWasted:function(e){e=e||l._allMeasurements;var t=i.getInclusiveSummary(e,!0);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||l._allMeasurements;var t=i.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[r.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,r){var i=l._allMeasurements[l._allMeasurements.length-1].writes;i[e]=i[e]||[],i[e].push({type:t,time:n,args:r})},measure:function(e,t,n){return function(){var r=Array.prototype.slice.call(arguments,0),i,o,a;if(t==="_renderNewRootComponent"||t==="flushBatchedUpdates")return l._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),a=u(),o=n.apply(this,r),l._allMeasurements[l._allMeasurements.length-1].totalTime=u()-a,o;if(e==="ReactDOMIDOperations"||e==="ReactComponentBrowserEnvironment"){a=u(),o=n.apply(this,r),i=u()-a;if(t==="mountImageIntoNode"){var c=s.getID(r[1]);l._recordWrite(c,t,i,r[0])}else t==="dangerouslyProcessChildrenUpdates"?r[0].forEach(function(e){var t={};e.fromIndex!==null&&(t.fromIndex=e.fromIndex),e.toIndex!==null&&(t.toIndex=e.toIndex),e.textContent!==null&&(t.textContent=e.textContent),e.markupIndex!==null&&(t.markup=r[1][e.markupIndex]),l._recordWrite(e.parentID,e.type,i,t)}):l._recordWrite(r[0],t,i,Array.prototype.slice.call(r,1));return o}if(e!=="ReactCompositeComponent"||t!=="mountComponent"&&t!=="updateComponent"&&t!=="_renderValidatedComponent")return n.apply(this,r);var h=t==="mountComponent"?r[0]:this._rootNodeID,p=t==="_renderValidatedComponent",d=t==="mountComponent",v=l._mountStack,m=l._allMeasurements[l._allMeasurements.length-1];p?f(m.counts,h,1):d&&v.push(0),a=u(),o=n.apply(this,r),i=u()-a;if(p)f(m.render,h,i);else if(d){var g=v.pop();v[v.length-1]+=i,f(m.exclusive,h,i-g),f(m.inclusive,h,i)}else f(m.inclusive,h,i);return m.displayNames[h]={current:this.constructor.displayName,owner:this._owner?this._owner.constructor.displayName:"<root>"},o}}};t.exports=l},{"./DOMProperty":11,"./ReactDefaultPerfAnalysis":55,"./ReactMount":67,"./ReactPerf":71,"./performanceNow":151}],55:[function(e,t,n){function o(e){var t=0;for(var n=0;n<e.length;n++){var r=e[n];t+=r.totalTime}return t}function u(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],i;for(i in r.writes)r.writes[i].forEach(function(e){t.push({id:i,type:s[e.type]||e.type,args:e.args})})}return t}function a(e){var t={},n;for(var s=0;s<e.length;s++){var o=e[s],u=r(o.exclusive,o.inclusive);for(var a in u)n=o.displayNames[a].current,t[n]=t[n]||{componentName:n,inclusive:0,exclusive:0,render:0,count:0},o.render[a]&&(t[n].render+=o.render[a]),o.exclusive[a]&&(t[n].exclusive+=o.exclusive[a]),o.inclusive[a]&&(t[n].inclusive+=o.inclusive[a]),o.counts[a]&&(t[n].count+=o.counts[a])}var f=[];for(n in t)t[n].exclusive>=i&&f.push(t[n]);return f.sort(function(e,t){return t.exclusive-e.exclusive}),f}function f(e,t){var n={},s;for(var o=0;o<e.length;o++){var u=e[o],a=r(u.exclusive,u.inclusive),f;t&&(f=l(u));for(var c in a){if(t&&!f[c])continue;var h=u.displayNames[c];s=h.owner+" > "+h.current,n[s]=n[s]||{componentName:s,time:0,count:0},u.inclusive[c]&&(n[s].time+=u.inclusive[c]),u.counts[c]&&(n[s].count+=u.counts[c])}}var p=[];for(s in n)n[s].time>=i&&p.push(n[s]);return p.sort(function(e,t){return t.time-e.time}),p}function l(e){var t={},n=Object.keys(e.writes),i=r(e.exclusive,e.inclusive);for(var s in i){var o=!1;for(var u=0;u<n.length;u++)if(n[u].indexOf(s)===0){o=!0;break}!o&&e.counts[s]>0&&(t[s]=!0)}return t}var r=e("./merge"),i=1.2,s={mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},c={getExclusiveSummary:a,getInclusiveSummary:f,getDOMSummary:u,getTotalTime:o};t.exports=c},{"./merge":144}],56:[function(e,t,n){function u(e,t){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[t]:null},set:function(e){o(!1,"Don't set the "+t+" property of the component. "+"Mutate the existing props object instead."),this._store[t]=e}})}function f(e){try{var t={props:!0};for(var n in t)u(e,n);a=!0}catch(r){}}function l(e,t){if(typeof t!="function")return;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(typeof r=="function"){var i=r.bind(t);for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);e[n]=i}else e[n]=r}}var r=e("./ReactContext"),i=e("./ReactCurrentOwner"),s=e("./merge"),o=e("./warning"),a=!1,c=function(){};f(c.prototype),c.createFactory=function(e){var t=Object.create(c.prototype),n=function(e,n){e==null?e={}:typeof e=="object"&&(e=s(e));var o=arguments.length-1;if(o===1)e.children=n;else if(o>1){var u=Array(o);for(var f=0;f<o;f++)u[f]=arguments[f+1];e.children=u}var l=Object.create(t);return l._owner=i.current,l._context=r.current,l._store={validated:!1,props:e},a?(Object.freeze(l),l):(l.props=e,l)};return n.prototype=t,n.type=e,t.type=e,l(n,e),t.constructor=n,n},c.cloneAndReplaceProps=function(e,t){var n=Object.create(e.constructor.prototype);return n._owner=e._owner,n._context=e._context,n._store={validated:e._store.validated,props:t},a?(Object.freeze(n),n):(n.props=t,n)},c.isValidFactory=function(e){return typeof e=="function"&&e.prototype instanceof c},c.isValidDescriptor=function(e){return e instanceof c},t.exports=c},{"./ReactContext":39,"./ReactCurrentOwner":40,"./merge":144,"./warning":158}],57:[function(e,t,n){function c(){var e=s.current;return e&&e.constructor.displayName||undefined}function h(e,t){if(e._store.validated||e.props.key!=null)return;e._store.validated=!0,d("react_key_warning",'Each child in an array should have a unique "key" prop.',e,t)}function p(e,t,n){if(!l.test(e))return;d("react_numeric_key_warning","Child objects should have non-numeric keys so ordering is preserved.",t,n)}function d(e,t,n,r){var i=c(),a=r.displayName,f=i||a,l=u[e];if(l.hasOwnProperty(f))return;l[f]=!0,t+=i?" Check the render method of "+i+".":" Check the renderComponent call using <"+a+">.";var h=null;n._owner&&n._owner!==s.current&&(h=n._owner.constructor.displayName,t+=" It was passed a child from "+h+"."),t+=" See http://fb.me/react-warning-keys for more information.",o(e,{component:f,componentOwner:h}),console.warn(t)}function v(){var e=c()||"";if(a.hasOwnProperty(e))return;a[e]=!0,o("react_object_map_children")}function m(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];r.isValidDescriptor(i)&&h(i,t)}else if(r.isValidDescriptor(e))e._store.validated=!0;else if(e&&typeof e=="object"){v();for(var s in e)p(s,e[s],t)}}function g(e,t,n,r){for(var i in t)if(t.hasOwnProperty(i)){var s;try{s=t[i](n,i,e,r)}catch(u){s=u}s instanceof Error&&!(s.message in f)&&(f[s.message]=!0,o("react_failed_descriptor_type_check",{message:s.message}))}}var r=e("./ReactDescriptor"),i=e("./ReactPropTypeLocations"),s=e("./ReactCurrentOwner"),o=e("./monitorCodeUse"),u={react_key_warning:{},react_numeric_key_warning:{}},a={},f={},l=/^\d+$/,y={createFactory:function(e,t,n){var r=function(r,s){var o=e.apply(this,arguments);for(var u=1;u<arguments.length;u++)m(arguments[u],o.type);var a=o.type.displayName;return t&&g(a,t,o.props,i.prop),n&&g(a,n,o._context,i.context),o};r.prototype=e.prototype,r.type=e.type;for(var s in e)e.hasOwnProperty(s)&&(r[s]=e[s]);return r}};t.exports=y},{"./ReactCurrentOwner":40,"./ReactDescriptor":56,"./ReactPropTypeLocations":74,"./monitorCodeUse":148}],58:[function(e,t,n){function u(){return r(i,"Trying to return null from a render, but no null placeholder component was injected."),i()}function a(e){s[e]=!0}function f(e){delete s[e]}function l(e){return s[e]}var r=e("./invariant"),i,s={},o={injectEmptyComponent:function(e){i=e}},c={deregisterNullComponentID:f,getEmptyComponent:u,injection:o,isNullComponentID:l,registerNullComponentID:a};t.exports=c},{"./invariant":134}],59:[function(e,t,n){var r={guard:function(e,t){return e}};t.exports=r},{}],60:[function(e,t,n){function i(e){r.enqueueEvents(e),r.processEventQueue()}var r=e("./EventPluginHub"),s={handleTopLevel:function(e,t,n,s){var o=r.extractEvents(e,t,n,s);i(o)}};t.exports=s},{"./EventPluginHub":18}],61:[function(e,t,n){function h(e){var t=u.getID(e),n=o.getReactRootIDFromNodeID(t),r=u.findReactContainerForID(n),i=u.getFirstReactDOM(r);return i}function p(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function d(e){var t=u.getFirstReactDOM(f(e.nativeEvent))||window,n=t;while(n)e.ancestors.push(n),n=h(n);for(var r=0,i=e.ancestors.length;r<i;r++){t=e.ancestors[r];var s=u.getID(t)||"";m._handleTopLevel(e.topLevelType,t,s,e.nativeEvent)}}function v(e){var t=l(window);e(t)}var r=e("./EventListener"),i=e("./ExecutionEnvironment"),s=e("./PooledClass"),o=e("./ReactInstanceHandles"),u=e("./ReactMount"),a=e("./ReactUpdates"),f=e("./getEventTarget"),l=e("./getUnboundedScrollPosition"),c=e("./mixInto");c(p,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),s.addPoolingTo(p,s.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:i.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var i=n;if(!i)return;return r.listen(i,t,m.dispatchEvent.bind(null,e))},trapCapturedEvent:function(e,t,n){var i=n;if(!i)return;return r.capture(i,t,m.dispatchEvent.bind(null,e))},monitorScrollValue:function(e){var t=v.bind(null,e);r.listen(window,"scroll",t),r.listen(window,"resize",t)},dispatchEvent:function(e,t){if(!m._enabled)return;var n=p.getPooled(e,t);try{a.batchedUpdates(d,n)}finally{p.release(n)}}};t.exports=m},{"./EventListener":17,"./ExecutionEnvironment":22,"./PooledClass":28,"./ReactInstanceHandles":64,"./ReactMount":67,"./ReactUpdates":87,"./getEventTarget":125,"./getUnboundedScrollPosition":130,"./mixInto":147}],62:[function(e,t,n){var r=e("./DOMProperty"),i=e("./EventPluginHub"),s=e("./ReactComponent"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=e("./ReactEmptyComponent"),f=e("./ReactBrowserEventEmitter"),l=e("./ReactPerf"),c=e("./ReactRootIndex"),h=e("./ReactUpdates"),p={Component:s.injection,CompositeComponent:o.injection,DOMProperty:r.injection,EmptyComponent:a.injection,EventPluginHub:i.injection,DOM:u.injection,EventEmitter:f.injection,Perf:l.injection,RootIndex:c.injection,Updates:h.injection};t.exports=p},{"./DOMProperty":11,"./EventPluginHub":18,"./ReactBrowserEventEmitter":31,"./ReactComponent":35,"./ReactCompositeComponent":38,"./ReactDOM":41,"./ReactEmptyComponent":58,"./ReactPerf":71,"./ReactRootIndex":78,"./ReactUpdates":87}],63:[function(e,t,n){function u(e){return i(document.documentElement,e)}var r=e("./ReactDOMSelection"),i=e("./containsNode"),s=e("./focusNode"),o=e("./getActiveElement"),a={hasSelectionCapabilities:function(e){return e&&(e.nodeName==="INPUT"&&e.type==="text"||e.nodeName==="TEXTAREA"||e.contentEditable==="true")},getSelectionInformation:function(){var e=o();return{focusedElem:e,selectionRange:a.hasSelectionCapabilities(e)?a.getSelection(e):null}},restoreSelection:function(e){var t=o(),n=e.focusedElem,r=e.selectionRange;t!==n&&u(n)&&(a.hasSelectionCapabilities(n)&&a.setSelection(n,r),s(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName==="INPUT"){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;typeof i=="undefined"&&(i=n);if("selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName==="INPUT"){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",i-n),s.select()}else r.setOffsets(e,t)}};t.exports=a},{"./ReactDOMSelection":50,"./containsNode":109,"./focusNode":120,"./getActiveElement":122}],64:[function(e,t,n){function a(e){return s+e.toString(36)}function f(e,t){return e.charAt(t)===s||t===e.length}function l(e){return e===""||e.charAt(0)===s&&e.charAt(e.length-1)!==s}function c(e,t){return t.indexOf(e)===0&&f(t,e.length)}function h(e){return e?e.substr(0,e.lastIndexOf(s)):""}function p(e,t){i(l(e)&&l(t),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,t),i(c(e,t),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,t);if(e===t)return e;var n=e.length+o;for(var r=n;r<t.length;r++)if(f(t,r))break;return t.substr(0,r)}function d(e,t){var n=Math.min(e.length,t.length);if(n===0)return"";var r=0;for(var s=0;s<=n;s++)if(f(e,s)&&f(t,s))r=s;else if(e.charAt(s)!==t.charAt(s))break;var o=e.substr(0,r);return i(l(o),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,t,o),o}function v(e,t,n,r,s,o){e=e||"",t=t||"",i(e!==t,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e);var a=c(t,e);i(a||c(e,t),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,t);var f=0,l=a?h:p;for(var d=e;;d=l(d,t)){var v;(!s||d!==e)&&(!o||d!==t)&&(v=n(d,a,r));if(v===!1||d===t)break;i(f++<u,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,t)}}var r=e("./ReactRootIndex"),i=e("./invariant"),s=".",o=s.length,u=100,m={createReactRootID:function(){return a(r.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===s&&e.length>1){var t=e.indexOf(s,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var s=d(e,t);s!==e&&v(e,s,n,r,!1,!0),s!==t&&v(s,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(v("",e,t,n,!0,!1),v(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){v("",e,t,n,!0,!1)},_getFirstCommonAncestorID:d,_getNextDescendantID:p,isAncestorIDOf:c,SEPARATOR:s};t.exports=m},{"./ReactRootIndex":78,"./invariant":134}],65:[function(e,t,n){function i(e,t){this.value=e,this.requestChange=t}function s(e){var t={value:typeof e=="undefined"?r.PropTypes.any.isRequired:e.isRequired,requestChange:r.PropTypes.func.isRequired};return r.PropTypes.shape(t)}var r=e("./React");i.PropTypes={link:s},t.exports=i},{"./React":29}],66:[function(e,t,n){var r=e("./adler32"),i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(">"," "+i.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var s=r(e);return s===n}};t.exports=i},{"./adler32":107}],67:[function(e,t,n){function T(e){var t=l(e);return t&&P.getID(t)}function N(e){var t=C(e);if(t)if(g.hasOwnProperty(t)){var n=g[t];n!==e&&(h(!A(n,t),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",m,t),g[t]=e)}else g[t]=e;return t}function C(e){return e&&e.getAttribute&&e.getAttribute(m)||""}function k(e,t){var n=C(e);n!==t&&delete g[n],e.setAttribute(m,t),g[t]=e}function L(e){if(!g.hasOwnProperty(e)||!A(g[e],e))g[e]=P.findReactNodeByID(e);return g[e]}function A(e,t){if(e){h(C(e)===t,"ReactMount: Unexpected modification of `%s`",m);var n=P.findReactContainerForID(t);if(n&&f(n,e))return!0}return!1}function O(e){delete g[e]}function _(e){var t=g[e];if(!t||!A(t,e))return!1;M=t}function D(e){M=null,u.traverseAncestors(e,_);var t=M;return M=null,t}var r=e("./DOMProperty"),i=e("./ReactBrowserEventEmitter"),s=e("./ReactCurrentOwner"),o=e("./ReactDescriptor"),u=e("./ReactInstanceHandles"),a=e("./ReactPerf"),f=e("./containsNode"),l=e("./getReactRootElementInContainer"),c=e("./instantiateReactComponent"),h=e("./invariant"),p=e("./shouldUpdateReactComponent"),d=e("./warning"),v=u.SEPARATOR,m=r.ID_ATTRIBUTE_NAME,g={},y=1,b=9,w={},E={},S={},x=[],M=null,P={_instancesByReactRootID:w,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){var i=t.props;return P.scrollMonitor(n,function(){e.replaceProps(i,r)}),S[T(n)]=l(n),e},_registerComponent:function(e,t){h(t&&(t.nodeType===y||t.nodeType===b),"_registerComponent(...): Target container is not a DOM element."),i.ensureScrollValueMonitoring();var n=P.registerContainer(t);return w[n]=e,n},_renderNewRootComponent:a.measure("ReactMount","_renderNewRootComponent",function(e,t,n){d(s.current==null,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var r=c(e),i=P._registerComponent(r,t);return r.mountComponentIntoNode(i,t,n),S[i]=l(t),r}),renderComponent:function(e,t,n){h(o.isValidDescriptor(e),"renderComponent(): Invalid component descriptor.%s",o.isValidFactory(e)?" Instead of passing a component class, make sure to instantiate it first by calling it with props.":typeof e.props!="undefined"?" This may be caused by unintentionally loading two independent copies of React.":"");var r=w[T(t)];if(r){var i=r._descriptor;if(p(i,e))return P._updateRootComponent(r,e,t,n);P.unmountComponentAtNode(t)}var s=l(t),u=s&&P.isRenderedByReact(s),a=u&&!r,f=P._renderNewRootComponent(e,t,a);return n&&n.call(f),f},constructAndRenderComponent:function(e,t,n){return P.renderComponent(e(t),n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return h(r,'Tried to get element with id of "%s" but it is not present on the page.',n),P.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=T(e);return t&&(t=u.getReactRootIDFromNodeID(t)),t||(t=u.createReactRootID()),E[t]=e,t},unmountComponentAtNode:function(e){d(s.current==null,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var t=T(e),n=w[t];return n?(P.unmountComponentFromNode(n,e),delete w[t],delete E[t],delete S[t],!0):!1},unmountComponentFromNode:function(e,t){e.unmountComponent(),t.nodeType===b&&(t=t.documentElement);while(t.lastChild)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=u.getReactRootIDFromNodeID(e),n=E[t],r=S[t];if(r&&r.parentNode!==n){h(C(r)===t,"ReactMount: Root element ID differed from reactRootID.");var i=n.firstChild;i&&t===C(i)?S[t]=i:console.warn("ReactMount: Root element has been removed from its original container. New container:",r.parentNode)}return n},findReactNodeByID:function(e){var t=P.findReactContainerForID(e);return P.findComponentRoot(t,e)},isRenderedByReact:function(e){if(e.nodeType!==1)return!1;var t=P.getID(e);return t?t.charAt(0)===v:!1},getFirstReactDOM:function(e){var t=e;while(t&&t.parentNode!==t){if(P.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=x,r=0,i=D(t)||e;n[0]=i.firstChild,n.length=1;while(r<n.length){var s=n[r++],o;while(s){var a=P.getID(s);a?t===a?o=s:u.isAncestorIDOf(a,t)&&(n.length=r=0,n.push(s.firstChild)):n.push(s.firstChild),s=s.nextSibling}if(o)return n.length=0,o}n.length=0,h(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting <p> or <a> tags, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",t,P.getID(e))},getReactRootID:T,getID:N,setID:k,getNode:L,purgeID:O};t.exports=P},{"./DOMProperty":11,"./ReactBrowserEventEmitter":31,"./ReactCurrentOwner":40,"./ReactDescriptor":56,"./ReactInstanceHandles":64,"./ReactPerf":71,"./containsNode":109,"./getReactRootElementInContainer":128,"./instantiateReactComponent":133,"./invariant":134,"./shouldUpdateReactComponent":154,"./warning":158}],68:[function(e,t,n){function c(e,t,n){f.push({parentID:e,parentNode:null,type:i.INSERT_MARKUP,markupIndex:l.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function h(e,t,n){f.push({parentID:e,parentNode:null,type:i.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function p(e,t){f.push({parentID:e,parentNode:null,type:i.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function d(e,t){f.push({parentID:e,parentNode:null,type:i.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function v(){f.length&&(r.BackendIDOperations.dangerouslyProcessChildrenUpdates(f,l),m())}function m(){f.length=0,l.length=0}var r=e("./ReactComponent"),i=e("./ReactMultiChildUpdateTypes"),s=e("./flattenChildren"),o=e("./instantiateReactComponent"),u=e("./shouldUpdateReactComponent"),a=0,f=[],l=[],g={Mixin:{mountChildren:function(e,t){var n=s(e),r=[],i=0;this._renderedChildren=n;for(var u in n){var a=n[u];if(n.hasOwnProperty(u)){var f=o(a);n[u]=f;var l=this._rootNodeID+u,c=f.mountComponent(l,t,this._mountDepth+1);f._mountIndex=i,r.push(c),i++}}return r},updateTextContent:function(e){a++;var t=!0;try{var n=this._renderedChildren;for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{a--,a||(t?m():v())}},updateChildren:function(e,t){a++;var n=!0;try{this._updateChildren(e,t),n=!1}finally{a--,a||(n?m():v())}},_updateChildren:function(e,t){var n=s(e),r=this._renderedChildren;if(!n&&!r)return;var i,a=0,f=0;for(i in n){if(!n.hasOwnProperty(i))continue;var l=r&&r[i],c=l&&l._descriptor,h=n[i];if(u(c,h))this.moveChild(l,f,a),a=Math.max(l._mountIndex,a),l.receiveComponent(h,t),l._mountIndex=f;else{l&&(a=Math.max(l._mountIndex,a),this._unmountChildByName(l,i));var p=o(h);this._mountChildByNameAtIndex(p,i,f,t)}f++}for(i in r)r.hasOwnProperty(i)&&(!n||!n[i])&&this._unmountChildByName(r[i],i)},unmountChildren:function(){var e=this._renderedChildren;for(var t in e){var n=e[t];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&h(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){c(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){p(this._rootNodeID,e._mountIndex)},setTextContent:function(e){d(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r){var i=this._rootNodeID+t,s=e.mountComponent(i,r,this._mountDepth+1);e._mountIndex=n,this.createChild(e,s),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[t]=e},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null,e.unmountComponent(),delete this._renderedChildren[t]}}};t.exports=g},{"./ReactComponent":35,"./ReactMultiChildUpdateTypes":69,"./flattenChildren":119,"./instantiateReactComponent":133,"./shouldUpdateReactComponent":154}],69:[function(e,t,n){var r=e("./keyMirror"),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=i},{"./keyMirror":140}],70:[function(e,t,n){var r=e("./emptyObject"),i=e("./invariant"),s={isValidOwner:function(e){return!!e&&typeof e.attachRef=="function"&&typeof e.detachRef=="function"},addComponentAsRefTo:function(e,t,n){i(s.isValidOwner(n),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){i(s.isValidOwner(n),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.refs[t]===e&&n.detachRef(t)},Mixin:{construct:function(){this.refs=r},attachRef:function(e,t){i(t.isOwnedBy(this),"attachRef(%s, ...): Only a component's owner can store a ref to it.",e);var n=this.refs===r?this.refs={}:this.refs;n[e]=t},detachRef:function(e){delete this.refs[e]}}};t.exports=s},{"./emptyObject":117,"./invariant":134}],71:[function(e,t,n){function i(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:i,measure:function(e,t,n){var i=null;return function(){return r.enableMeasure?(i||(i=r.storedMeasure(e,t,n)),i.apply(this,arguments)):n.apply(this,arguments)}},injection:{injectMeasure:function(e){r.storedMeasure=e}}};t.exports=r},{}],72:[function(e,t,n){function u(e){return function(t,n,r){t.hasOwnProperty(n)?t[n]=e(t[n],r):t[n]=r}}function l(e,t){for(var n in t){if(!t.hasOwnProperty(n))continue;var r=f[n];r&&f.hasOwnProperty(n)?r(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var r=e("./emptyFunction"),i=e("./invariant"),s=e("./joinClasses"),o=e("./merge"),a=u(function(e,t){return o(t,e)}),f={children:r,className:u(s),key:r,ref:r,style:a},c={TransferStrategies:f,mergeProps:function(e,t){return l(o(e),t)},Mixin:{transferPropsTo:function(e){return i(e._owner===this,"%s: You can't call transferPropsTo() on a component that you don't own, %s. This usually means you are calling transferPropsTo() on a component passed in as props or children.",this.constructor.displayName,e.type.displayName),l(e.props,this.props),e}}};t.exports=c},{"./emptyFunction":116,"./invariant":134,"./joinClasses":139,"./merge":144}],73:[function(e,t,n){var r={};r={prop:"prop",context:"context",childContext:"child context"},t.exports=r},{}],74:[function(e,t,n){var r=e("./keyMirror"),i=r({prop:null,context:null,childContext:null});t.exports=i},{"./keyMirror":140}],75:[function(e,t,n){function a(e){function t(t,n,r,s,u){s=s||o;if(n[r]!=null)return e(n,r,s,u);var a=i[u];if(t)return new Error("Required "+a+" `"+r+"` was not specified in "+("`"+s+"`."))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function f(e){function t(t,n,r,s){var o=t[n],u=w(o);if(u!==e){var a=i[s],f=E(o);return new Error("Invalid "+a+" `"+n+"` of type `"+f+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}}return a(t)}function l(){return a(s.thatReturns())}function c(e){function t(t,n,r,s){var o=t[n];if(!Array.isArray(o)){var u=i[s],a=w(o);return new Error("Invalid "+u+" `"+n+"` of type "+("`"+a+"` supplied to `"+r+"`, expected an array."))}for(var f=0;f<o.length;f++){var l=e(o,f,r,s);if(l instanceof Error)return l}}return a(t)}function h(){function e(e,t,n,s){if(!r.isValidDescriptor(e[t])){var o=i[s];return new Error("Invalid "+o+" `"+t+"` supplied to "+("`"+n+"`, expected a React component."))}}return a(e)}function p(e){function t(t,n,r,s){if(!(t[n]instanceof e)){var u=i[s],a=e.name||o;return new Error("Invalid "+u+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+a+"`."))}}return a(t)}function d(e){function t(t,n,r,s){var o=t[n];for(var u=0;u<e.length;u++)if(o===e[u])return;var a=i[s],f=JSON.stringify(e);return new Error("Invalid "+a+" `"+n+"` of value `"+o+"` "+("supplied to `"+r+"`, expected one of "+f+"."))}return a(t)}function v(e){function t(t,n,r,s){var o=t[n],u=w(o);if(u!=="object"){var a=i[s];return new Error("Invalid "+a+" `"+n+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an object."))}for(var f in o)if(o.hasOwnProperty(f)){var l=e(o,f,r,s);if(l instanceof Error)return l}}return a(t)}function m(e){function t(t,n,r,s){for(var o=0;o<e.length;o++){var u=e[o];if(u(t,n,r,s)==null)return}var a=i[s];return new Error("Invalid "+a+" `"+n+"` supplied to "+("`"+r+"`."))}return a(t)}function g(){function e(e,t,n,r){if(!b(e[t])){var s=i[r];return new Error("Invalid "+s+" `"+t+"` supplied to "+("`"+n+"`, expected a renderable prop."))}}return a(e)}function y(e){function t(t,n,r,s){var o=t[n],u=w(o);if(u!=="object"){var a=i[s];return new Error("Invalid "+a+" `"+n+"` of type `"+u+"` "+("supplied to `"+r+"`, expected `object`."))}for(var f in e){var l=e[f];if(!l)continue;var c=l(o,f,r,s);if(c)return c}}return a(t,"expected `object`")}function b(e){switch(typeof e){case"number":case"string":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(b);if(r.isValidDescriptor(e))return!0;for(var t in e)if(!b(e[t]))return!1;return!0;default:return!1}}function w(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function E(e){var t=w(e);if(t==="object"){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var r=e("./ReactDescriptor"),i=e("./ReactPropTypeLocationNames"),s=e("./emptyFunction"),o="<<anonymous>>",u={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),any:l(),arrayOf:c,component:h(),instanceOf:p,objectOf:v,oneOf:d,oneOfType:m,renderable:g(),shape:y};t.exports=u},{"./ReactDescriptor":56,"./ReactPropTypeLocationNames":73,"./emptyFunction":116}],76:[function(e,t,n){function o(){this.listenersToPut=[]}var r=e("./PooledClass"),i=e("./ReactBrowserEventEmitter"),s=e("./mixInto");s(o,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];i.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(o),t.exports=o},{"./PooledClass":28,"./ReactBrowserEventEmitter":31,"./mixInto":147}],77:[function(e,t,n){function v(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.putListenerQueue=u.getPooled()}var r=e("./CallbackQueue"),i=e("./PooledClass"),s=e("./ReactBrowserEventEmitter"),o=e("./ReactInputSelection"),u=e("./ReactPutListenerQueue"),a=e("./Transaction"),f=e("./mixInto"),l={initialize:o.getSelectionInformation,close:o.restoreSelection},c={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},p={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},d=[p,l,c,h],m={getTransactionWrappers:function(){return d},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,u.release(this.putListenerQueue),this.putListenerQueue=null}};f(v,a.Mixin),f(v,m),i.addPoolingTo(v),t.exports=v},{"./CallbackQueue":6,"./PooledClass":28,"./ReactBrowserEventEmitter":31,"./ReactInputSelection":63,"./ReactPutListenerQueue":76,"./Transaction":104,"./mixInto":147}],78:[function(e,t,n){var r={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:r};t.exports=i},{}],79:[function(e,t,n){function f(e){a(r.isValidDescriptor(e),"renderComponentToString(): You must pass a valid ReactComponent."),a(arguments.length!==2||typeof arguments[1]!="function","renderComponentToString(): This function became synchronous and now returns the generated markup. Please remove the second parameter.");var t;try{var n=i.createReactRootID();return t=o.getPooled(!1),t.perform(function(){var r=u(e),i=r.mountComponent(n,t,0);return s.addChecksumToMarkup(i)},null)}finally{o.release(t)}}function l(e){a(r.isValidDescriptor(e),"renderComponentToStaticMarkup(): You must pass a valid ReactComponent.");var t;try{var n=i.createReactRootID();return t=o.getPooled(!0),t.perform(function(){var r=u(e);return r.mountComponent(n,t,0)},null)}finally{o.release(t)}}var r=e("./ReactDescriptor"),i=e("./ReactInstanceHandles"),s=e("./ReactMarkupChecksum"),o=e("./ReactServerRenderingTransaction"),u=e("./instantiateReactComponent"),a=e("./invariant");t.exports={renderComponentToString:f,renderComponentToStaticMarkup:l}},{"./ReactDescriptor":56,"./ReactInstanceHandles":64,"./ReactMarkupChecksum":66,"./ReactServerRenderingTransaction":80,"./instantiateReactComponent":133,"./invariant":134}],80:[function(e,t,n){function h(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=i.getPooled(null),this.putListenerQueue=s.getPooled()}var r=e("./PooledClass"),i=e("./CallbackQueue"),s=e("./ReactPutListenerQueue"),o=e("./Transaction"),u=e("./emptyFunction"),a=e("./mixInto"),f={initialize:function(){this.reactMountReady.reset()},close:u},l={initialize:function(){this.putListenerQueue.reset()},close:u},c=[l,f],p={getTransactionWrappers:function(){return c},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,s.release(this.putListenerQueue),this.putListenerQueue=null}};a(h,o.Mixin),a(h,p),r.addPoolingTo(h),t.exports=h},{"./CallbackQueue":6,"./PooledClass":28,"./ReactPutListenerQueue":76,"./Transaction":104,"./emptyFunction":116,"./mixInto":147}],81:[function(e,t,n){function i(e,t){var n={};return function(i){n[t]=i,e.setState(n)}}var r={createStateSetter:function(e,t){return function(n,r,i,s,o,u){var a=t.call(e,n,r,i,s,o,u);a&&e.setState(a)}},createStateKeySetter:function(e,t){var n=e.__keySetters||(e.__keySetters={});return n[t]||(n[t]=i(e,t))}};r.Mixin={createStateSetter:function(e){return r.createStateSetter(this,e)},createStateKeySetter:function(e){return r.createStateKeySetter(this,e)}},t.exports=r},{}],82:[function(e,t,n){function g(e){}function b(e){return function(t,n){var r;y.isDOMComponent(t)?r=t.getDOMNode():t.tagName&&(r=t);var o=new g;o.target=r;var u=new p(f.eventNameDispatchConfigs[e],l.getID(r),o);d(u,n),s.accumulateTwoPhaseDispatches(u),h.batchedUpdates(function(){i.enqueueEvents(u),i.processEventQueue()})}}function w(){y.Simulate={};var e;for(e in f.eventNameDispatchConfigs)y.Simulate[e]=b(e)}function x(e){return function(t,n){var r=new g(e);d(r,n),y.isDOMComponent(t)?y.simulateNativeEventOnDOMComponent(e,t,r):!t.tagName||y.simulateNativeEventOnNode(e,t,r)}}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./EventPropagators"),o=e("./React"),u=e("./ReactDescriptor"),a=e("./ReactDOM"),f=e("./ReactBrowserEventEmitter"),l=e("./ReactMount"),c=e("./ReactTextComponent"),h=e("./ReactUpdates"),p=e("./SyntheticEvent"),d=e("./mergeInto"),v=e("./copyProperties"),m=r.topLevelTypes,y={renderIntoDocument:function(e){var t=document.createElement("div");return o.renderComponent(e,t)},isDescriptor:function(e){return u.isValidDescriptor(e)},isDescriptorOfType:function(e,t){return u.isValidDescriptor(e)&&e.type===t.type},isDOMComponent:function(e){return!!(e&&e.mountComponent&&e.tagName)},isDOMComponentDescriptor:function(e){return!(!e||!u.isValidDescriptor(e)||!e.tagName)},isCompositeComponent:function(e){return typeof e.render=="function"&&typeof e.setState=="function"},isCompositeComponentWithType:function(e,t){return!!y.isCompositeComponent(e)&&e.constructor===t.type},isCompositeComponentDescriptor:function(e){if(!u.isValidDescriptor(e))return!1;var t=e.type.prototype;return typeof t.render=="function"&&typeof t.setState=="function"},isCompositeComponentDescriptorWithType:function(e,t){return!!y.isCompositeComponentDescriptor(e)&&e.constructor===t},isTextComponent:function(e){return e instanceof c.type},findAllInRenderedTree:function(e,t){if(!e)return[];var n=t(e)?[e]:[];if(y.isDOMComponent(e)){var r=e._renderedChildren,i;for(i in r){if(!r.hasOwnProperty(i))continue;n=n.concat(y.findAllInRenderedTree(r[i],t))}}else y.isCompositeComponent(e)&&(n=n.concat(y.findAllInRenderedTree(e._renderedComponent,t)));return n},scryRenderedDOMComponentsWithClass:function(e,t){return y.findAllInRenderedTree(e,function(e){var n=e.props.className;return y.isDOMComponent(e)&&n&&(" "+n+" ").indexOf(" "+t+" ")!==-1})},findRenderedDOMComponentWithClass:function(e,t){var n=y.scryRenderedDOMComponentsWithClass(e,t);if(n.length!==1)throw new Error("Did not find exactly one match for class:"+t);return n[0]},scryRenderedDOMComponentsWithTag:function(e,t){return y.findAllInRenderedTree(e,function(e){return y.isDOMComponent(e)&&e.tagName===t.toUpperCase()})},findRenderedDOMComponentWithTag:function(e,t){var n=y.scryRenderedDOMComponentsWithTag(e,t);if(n.length!==1)throw new Error("Did not find exactly one match for tag:"+t);return n[0]},scryRenderedComponentsWithType:function(e,t){return y.findAllInRenderedTree(e,function(e){return y.isCompositeComponentWithType(e,t)})},findRenderedComponentWithType:function(e,t){var n=y.scryRenderedComponentsWithType(e,t);if(n.length!==1)throw new Error("Did not find exactly one match for componentType:"+t);return n[0]},mockComponent:function(e,t){var n=o.createClass({render:function(){var t=t||e.mockTagName||"div";return a[t](null,this.props.children)}});return v(e,n),e.mockImplementation(n),this},simulateNativeEventOnNode:function(e,t,n){n.target=t,f.ReactEventListener.dispatchEvent(e,n)},simulateNativeEventOnDOMComponent:function(e,t,n){y.simulateNativeEventOnNode(e,t.getDOMNode(),n)},nativeTouchData:function(e,t){return{touches:[{pageX:e,pageY:t}]}},Simulate:null,SimulateNative:{}},E=i.injection.injectEventPluginOrder;i.injection.injectEventPluginOrder=function(){E.apply(this,arguments),w()};var S=i.injection.injectEventPluginsByName;i.injection.injectEventPluginsByName=function(){S.apply(this,arguments),w()},w();var T;for(T in m){var N=T.indexOf("top")===0?T.charAt(3).toLowerCase()+T.substr(4):T;y.SimulateNative[N]=x(T)}t.exports=y},{"./EventConstants":16,"./EventPluginHub":18,"./EventPropagators":21,"./React":29,"./ReactBrowserEventEmitter":31,"./ReactDOM":41,"./ReactDescriptor":56,"./ReactMount":67,"./ReactTextComponent":83,"./ReactUpdates":87,"./SyntheticEvent":96,"./copyProperties":110,"./mergeInto":146}],83:[function(e,t,n){var r=e("./DOMPropertyOperations"),i=e("./ReactBrowserComponentMixin"),s=e("./ReactComponent"),o=e("./ReactDescriptor"),u=e("./escapeTextForBrowser"),a=e("./mixInto"),f=function(e){this.construct(e)};a(f,s.Mixin),a(f,i),a(f,{mountComponent:function(e,t,n){s.Mixin.mountComponent.call(this,e,t,n);var i=u(this.props);return t.renderToStaticMarkup?i:"<span "+r.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){var n=e.props;n!==this.props&&(this.props=n,s.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}}),t.exports=o.createFactory(f)},{"./DOMPropertyOperations":12,"./ReactBrowserComponentMixin":30,"./ReactComponent":35,"./ReactDescriptor":56,"./escapeTextForBrowser":118,"./mixInto":147}],84:[function(e,t,n){var r=e("./ReactChildren"),i={getChildMapping:function(e){return r.map(e,function(e){return e})},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},i=[];for(var s in e)t.hasOwnProperty(s)?i.length&&(r[s]=i,i=[]):i.push(s);var o,u={};for(var a in t){if(r.hasOwnProperty(a))for(o=0;o<r[a].length;o++){var f=r[a][o];u[r[a][o]]=n(f)}u[a]=n(a)}for(o=0;o<i.length;o++)u[i[o]]=n(i[o]);return u}};t.exports=i},{"./ReactChildren":34}],85:[function(e,t,n){function o(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete i.animationend.animation,"TransitionEvent"in window||delete i.transitionend.transition;for(var n in i){var r=i[n];for(var o in r)if(o in t){s.push(r[o]);break}}}function u(e,t,n){e.addEventListener(t,n,!1)}function a(e,t,n){e.removeEventListener(t,n,!1)}var r=e("./ExecutionEnvironment"),i={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[];r.canUseDOM&&o();var f={addEndEventListener:function(e,t){if(s.length===0){window.setTimeout(t,0);return}s.forEach(function(n){u(e,n,t)})},removeEndEventListener:function(e,t){if(s.length===0)return;s.forEach(function(n){a(e,n,t)})}};t.exports=f},{"./ExecutionEnvironment":22}],86:[function(e,t,n){var r=e("./React"),i=e("./ReactTransitionChildMapping"),s=e("./cloneWithProps"),o=e("./emptyFunction"),u=e("./merge"),a=r.createClass({displayName:"ReactTransitionGroup",propTypes:{component:r.PropTypes.func,childFactory:r.PropTypes.func},getDefaultProps:function(){return{component:r.DOM.span,childFactory:o.thatReturnsArgument}},getInitialState:function(){return{children:i.getChildMapping(this.props.children)}},componentWillReceiveProps:function(e){var t=i.getChildMapping(e.children),n=this.state.children;this.setState({children:i.mergeChildMappings(n,t)});var r;for(r in t){var s=n&&n.hasOwnProperty(r);t[r]&&!s&&!this.currentlyTransitioningKeys[r]&&this.keysToEnter.push(r)}for(r in n){var o=t&&t.hasOwnProperty(r);n[r]&&!o&&!this.currentlyTransitioningKeys[r]&&this.keysToLeave.push(r)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=i.getChildMapping(this.props.children);(!n||!n.hasOwnProperty(e))&&this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=i.getChildMapping(this.props.children);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{var r=u(this.state.children);delete r[e],this.setState({children:r})}},render:function(){var e={};for(var t in this.state.children){var n=this.state.children[t];n&&(e[t]=s(this.props.childFactory(n),{ref:t}))}return this.transferPropsTo(this.props.component(null,e))}});t.exports=a},{"./React":29,"./ReactTransitionChildMapping":84,"./cloneWithProps":108,"./emptyFunction":116,"./merge":144}],87:[function(e,t,n){function p(){a(T.ReactReconcileTransaction&&h,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function g(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=r.getPooled(null),this.reconcileTransaction=T.ReactReconcileTransaction.getPooled()}function y(e,t,n){p(),h.batchedUpdates(e,t,n)}function b(e,t){return e._mountDepth-t._mountDepth}function w(e){var t=e.dirtyComponentsLength;a(t===c.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",t,c.length),c.sort(b);for(var n=0;n<t;n++){var r=c[n];if(r.isMounted()){var i=r._pendingCallbacks;r._pendingCallbacks=null,r.performUpdateIfNecessary(e.reconcileTransaction);if(i)for(var s=0;s<i.length;s++)e.callbackQueue.enqueue(i[s],r)}}}function S(e,t){a(!t||typeof t=="function","enqueueUpdate(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),p(),l(s.current==null,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");if(!h.isBatchingUpdates){h.batchedUpdates(S,e,t);return}c.push(e),t&&(e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t])}var r=e("./CallbackQueue"),i=e("./PooledClass"),s=e("./ReactCurrentOwner"),o=e("./ReactPerf"),u=e("./Transaction"),a=e("./invariant"),f=e("./mixInto"),l=e("./warning"),c=[],h=null,d={initialize:function(){this.dirtyComponentsLength=c.length},close:function(){this.dirtyComponentsLength!==c.length?(c.splice(0,this.dirtyComponentsLength),E()):c.length=0}},v={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},m=[d,v];f(g,u.Mixin),f(g,{getTransactionWrappers:function(){return m},destructor:function(){this.dirtyComponentsLength=null,r.release(this.callbackQueue),this.callbackQueue=null,T.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return u.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),i.addPoolingTo(g);var E=o.measure("ReactUpdates","flushBatchedUpdates",function(){while(c.length){var e=g.getPooled();e.perform(w,null,e),g.release(e)}}),x={injectReconcileTransaction:function(e){a(e,"ReactUpdates: must provide a reconcile transaction class"),T.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){a(e,"ReactUpdates: must provide a batching strategy"),a(typeof e.batchedUpdates=="function","ReactUpdates: must provide a batchedUpdates() function"),a(typeof e.isBatchingUpdates=="boolean","ReactUpdates: must provide an isBatchingUpdates boolean attribute"),h=e}},T={ReactReconcileTransaction:null,batchedUpdates:y,enqueueUpdate:S,flushBatchedUpdates:E,injection:x};t.exports=T},{"./CallbackQueue":6,"./PooledClass":28,"./ReactCurrentOwner":40,"./ReactPerf":71,"./Transaction":104,"./invariant":134,"./mixInto":147,"./warning":158}],88:[function(e,t,n){var r=e("./LinkedStateMixin"),i=e("./React"),s=e("./ReactComponentWithPureRenderMixin"),o=e("./ReactCSSTransitionGroup"),u=e("./ReactTransitionGroup"),a=e("./cx"),f=e("./cloneWithProps"),l=e("./update");i.addons={CSSTransitionGroup:o,LinkedStateMixin:r,PureRenderMixin:s,TransitionGroup:u,classSet:a,cloneWithProps:f,update:l},i.addons.Perf=e("./ReactDefaultPerf"),i.addons.TestUtils=e("./ReactTestUtils"),t.exports=i},{"./LinkedStateMixin":24,"./React":29,"./ReactCSSTransitionGroup":32,"./ReactComponentWithPureRenderMixin":37,"./ReactDefaultPerf":54,"./ReactTestUtils":82,"./ReactTransitionGroup":86,"./cloneWithProps":108,"./cx":114,"./update":157}],89:[function(e,t,n){var r=e("./DOMProperty"),i=r.injection.MUST_USE_ATTRIBUTE,s={Properties:{cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,y1:i,y2:i,y:i},DOMAttributeNames:{fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=s},{"./DOMProperty":11}],90:[function(e,t,n){function g(e){if("selectionStart"in e&&s.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(document.selection){var t=document.selection.createRange();return{parentElement:t.parentElement(),text:t.text,top:t.boundingTop,left:t.boundingLeft}}var n=window.getSelection();return{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}}function y(e){if(m||p==null||p!=u())return;var t=g(p);if(!v||!l(v,t)){v=t;var n=o.getPooled(h.select,d,e);return n.type="select",n.target=p,i.accumulateTwoPhaseDispatches(n),n}}var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./ReactInputSelection"),o=e("./SyntheticEvent"),u=e("./getActiveElement"),a=e("./isTextInputElement"),f=e("./keyOf"),l=e("./shallowEqual"),c=r.topLevelTypes,h={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[c.topBlur,c.topContextMenu,c.topFocus,c.topKeyDown,c.topMouseDown,c.topMouseUp,c.topSelectionChange]}},p=null,d=null,v=null,m=!1,b={eventTypes:h,extractEvents:function(e,t,n,r){switch(e){case c.topFocus:if(a(t)||t.contentEditable==="true")p=t,d=n,v=null;break;case c.topBlur:p=null,d=null,v=null;break;case c.topMouseDown:m=!0;break;case c.topContextMenu:case c.topMouseUp:return m=!1,y(r);case c.topSelectionChange:case c.topKeyDown:case c.topKeyUp:return y(r)}}};t.exports=b},{"./EventConstants":16,"./EventPropagators":21,"./ReactInputSelection":63,"./SyntheticEvent":96,"./getActiveElement":122,"./isTextInputElement":137,"./keyOf":141,"./shallowEqual":153}],91:[function(e,t,n){var r=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};t.exports=i},{}],92:[function(e,t,n){var r=e("./EventConstants"),i=e("./EventPluginUtils"),s=e("./EventPropagators"),o=e("./SyntheticClipboardEvent"),u=e("./SyntheticEvent"),a=e("./SyntheticFocusEvent"),f=e("./SyntheticKeyboardEvent"),l=e("./SyntheticMouseEvent"),c=e("./SyntheticDragEvent"),h=e("./SyntheticTouchEvent"),p=e("./SyntheticUIEvent"),d=e("./SyntheticWheelEvent"),v=e("./invariant"),m=e("./keyOf"),g=r.topLevelTypes,y={blur:{phasedRegistrationNames:{bubbled:m({onBlur:!0}),captured:m({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:m({onClick:!0}),captured:m({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:m({onContextMenu:!0}),captured:m({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:m({onCopy:!0}),captured:m({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:m({onCut:!0}),captured:m({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:m({onDoubleClick:!0}),captured:m({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:m({onDrag:!0}),captured:m({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:m({onDragEnd:!0}),captured:m({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:m({onDragEnter:!0}),captured:m({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:m({onDragExit:!0}),captured:m({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:m({onDragLeave:!0}),captured:m({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:m({onDragOver:!0}),captured:m({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:m({onDragStart:!0}),captured:m({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:m({onDrop:!0}),captured:m({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:m({onFocus:!0}),captured:m({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:m({onInput:!0}),captured:m({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:m({onKeyDown:!0}),captured:m({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:m({onKeyPress:!0}),captured:m({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:m({onKeyUp:!0}),captured:m({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:m({onLoad:!0}),captured:m({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:m({onError:!0}),captured:m({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:m({onMouseDown:!0}),captured:m({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:m({onMouseMove:!0}),captured:m({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:m({onMouseOut:!0}),captured:m({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:m({onMouseOver:!0}),captured:m({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:m({onMouseUp:!0}),captured:m({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:m({onPaste:!0}),captured:m({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:m({onReset:!0}),captured:m({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:m({onScroll:!0}),captured:m({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:m({onSubmit:!0}),captured:m({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:m({onTouchCancel:!0}),captured:m({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:m({onTouchEnd:!0}),captured:m({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:m({onTouchMove:!0}),captured:m({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:m({onTouchStart:!0}),captured:m({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:m({onWheel:!0}),captured:m({onWheelCapture:!0})}}},b={topBlur:y.blur,topClick:y.click,topContextMenu:y.contextMenu,topCopy:y.copy,topCut:y.cut,topDoubleClick:y.doubleClick,topDrag:y.drag,topDragEnd:y.dragEnd,topDragEnter:y.dragEnter,topDragExit:y.dragExit,topDragLeave:y.dragLeave,topDragOver:y.dragOver,topDragStart:y.dragStart,topDrop:y.drop,topError:y.error,topFocus:y.focus,topInput:y.input,topKeyDown:y.keyDown,topKeyPress:y.keyPress,topKeyUp:y.keyUp,topLoad:y.load,topMouseDown:y.mouseDown,topMouseMove:y.mouseMove,topMouseOut:y.mouseOut,topMouseOver:y.mouseOver,topMouseUp:y.mouseUp,topPaste:y.paste,topReset:y.reset,topScroll:y.scroll,topSubmit:y.submit,topTouchCancel:y.touchCancel,topTouchEnd:y.touchEnd,topTouchMove:y.touchMove,topTouchStart:y.touchStart,topWheel:y.wheel};for(var w in b)b[w].dependencies=[w];var E={eventTypes:y,executeDispatch:function(e,t,n){var r=i.executeDispatch(e,t,n);r===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var i=b[e];if(!i)return null;var m;switch(e){case g.topInput:case g.topLoad:case g.topError:case g.topReset:case g.topSubmit:m=u;break;case g.topKeyPress:if(r.charCode===0)return null;case g.topKeyDown:case g.topKeyUp:m=f;break;case g.topBlur:case g.topFocus:m=a;break;case g.topClick:if(r.button===2)return null;case g.topContextMenu:case g.topDoubleClick:case g.topMouseDown:case g.topMouseMove:case g.topMouseOut:case g.topMouseOver:case g.topMouseUp:m=l;break;case g.topDrag:case g.topDragEnd:case g.topDragEnter:case g.topDragExit:case g.topDragLeave:case g.topDragOver:case g.topDragStart:case g.topDrop:m=c;break;case g.topTouchCancel:case g.topTouchEnd:case g.topTouchMove:case g.topTouchStart:m=h;break;case g.topScroll:m=p;break;case g.topWheel:m=d;break;case g.topCopy:case g.topCut:case g.topPaste:m=o}v(m,"SimpleEventPlugin: Unhandled event type, `%s`.",e);var y=m.getPooled(i,n,r);return s.accumulateTwoPhaseDispatches(y),y}};t.exports=E},{"./EventConstants":16,"./EventPluginUtils":20,"./EventPropagators":21,"./SyntheticClipboardEvent":93,"./SyntheticDragEvent":95,"./SyntheticEvent":96,"./SyntheticFocusEvent":97,"./SyntheticKeyboardEvent":99,"./SyntheticMouseEvent":100,"./SyntheticTouchEvent":101,"./SyntheticUIEvent":102,"./SyntheticWheelEvent":103,"./invariant":134,"./keyOf":141}],93:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(s,i),t.exports=s},{"./SyntheticEvent":96}],94:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticEvent":96}],95:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={dataTransfer:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticMouseEvent":100}],96:[function(e,t,n){function f(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var s in r){if(!r.hasOwnProperty(s))continue;var o=r[s];o?this[s]=o(n):this[s]=n[s]}var u=n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1;u?this.isDefaultPrevented=i.thatReturnsTrue:this.isDefaultPrevented=i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse}var r=e("./PooledClass"),i=e("./emptyFunction"),s=e("./getEventTarget"),o=e("./merge"),u=e("./mergeInto"),a={type:null,target:s,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};u(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=i.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=i.thatReturnsTrue},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),f.Interface=a,f.augmentClass=function(e,t){var n=this,i=Object.create(n.prototype);u(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=o(n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.threeArgumentPooler)},r.addPoolingTo(f,r.threeArgumentPooler),t.exports=f},{"./PooledClass":28,"./emptyFunction":116,"./getEventTarget":125,"./merge":144,"./mergeInto":146}],97:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i={relatedTarget:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticUIEvent":102}],98:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticEvent":96}],99:[function(e,t,n){function u(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventKey"),s=e("./getEventModifierState"),o={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return e.type==="keypress"?"charCode"in e?e.charCode:e.keyCode:0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.keyCode||e.charCode}};r.augmentClass(u,o),t.exports=u},{"./SyntheticUIEvent":102,"./getEventKey":123,"./getEventModifierState":124}],100:[function(e,t,n){function u(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./ViewportMetrics"),s=e("./getEventModifierState"),o={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:s,button:function(e){var t=e.button;return"which"in e?t:t===2?2:t===4?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};r.augmentClass(u,o),t.exports=u},{"./SyntheticUIEvent":102,"./ViewportMetrics":105,"./getEventModifierState":124}],101:[function(e,t,n){function o(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventModifierState"),s={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};r.augmentClass(o,s),t.exports=o},{"./SyntheticUIEvent":102,"./getEventModifierState":124}],102:[function(e,t,n){function o(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i=e("./getEventTarget"),s={view:function(e){if(e.view)return e.view;var t=i(e);if(t!=null&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(o,s),t.exports=o},{"./SyntheticEvent":96,"./getEventTarget":125}],103:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticMouseEvent":100}],104:[function(e,t,n){var r=e("./invariant"),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,s,o,u,a){r(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var f,l;try{this._isInTransaction=!0,f=!0,this.initializeAll(0),l=e.call(t,n,i,s,o,u,a),f=!1}finally{try{if(f)try{this.closeAll(0)}catch(c){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){var t=this.transactionWrappers;for(var n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=s.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===s.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(e){r(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");var t=this.transactionWrappers;for(var n=e;n<t.length;n++){var i=t[n],o=this.wrapperInitData[n],u;try{u=!0,o!==s.OBSERVED_ERROR&&i.close&&i.close.call(this,o),u=!1}finally{if(u)try{this.closeAll(n+1)}catch(a){}}}this.wrapperInitData.length=0}},s={Mixin:i,OBSERVED_ERROR:{}};t.exports=s},{"./invariant":134}],105:[function(e,t,n){var r=e("./getUnboundedScrollPosition"),i={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var e=r(window);i.currentScrollLeft=e.x,i.currentScrollTop=e.y}};t.exports=i},{"./getUnboundedScrollPosition":130}],106:[function(e,t,n){function i(e,t){r(t!=null,"accumulate(...): Accumulated items must be not be null or undefined.");if(e==null)return t;var n=Array.isArray(e),i=Array.isArray(t);return n?e.concat(t):i?[e].concat(t):[e,t]}var r=e("./invariant");t.exports=i},{"./invariant":134}],107:[function(e,t,n){function i(e){var t=1,n=0;for(var i=0;i<e.length;i++)t=(t+e.charCodeAt(i))%r,n=(n+t)%r;return t|n<<16}var r=65521;t.exports=i},{}],108:[function(e,t,n){function u(e,t){s(!e.props.ref,"You are calling cloneWithProps() on a child with a ref. This is dangerous because you're creating a new child which will not be added as a ref to its parent.");var n=r.mergeProps(t,e.props);return!n.hasOwnProperty(o)&&e.props.hasOwnProperty(o)&&(n.children=e.props.children),e.constructor(n)}var r=e("./ReactPropTransferer"),i=e("./keyOf"),s=e("./warning"),o=i({children:null});t.exports=u},{"./ReactPropTransferer":72,"./keyOf":141,"./warning":158}],109:[function(e,t,n){function i(e,t){return!e||!t?!1:e===t?!0:r(e)?!1:r(t)?i(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1}var r=e("./isTextNode");t.exports=i},{"./isTextNode":138}],110:[function(e,t,n){function r(e,t,n,r,i,s,o){e=e||{};if(o)throw new Error("Too many arguments passed to copyProperties");var u=[t,n,r,i,s],a=0,f;while(u[a]){f=u[a++];for(var l in f)e[l]=f[l];f.hasOwnProperty&&f.hasOwnProperty("toString")&&typeof f.toString!="undefined"&&e.toString!==f.toString&&(e.toString=f.toString)}return e}t.exports=r},{}],111:[function(e,t,n){function i(e){return!!e&&(typeof e=="object"||typeof e=="function")&&"length"in e&&!("setInterval"in e)&&typeof e.nodeType!="number"&&(Array.isArray(e)||"callee"in e||"item"in e)}function s(e){return i(e)?Array.isArray(e)?e.slice():r(e):[e]}var r=e("./toArray");t.exports=s},{"./toArray":155}],112:[function(e,t,n){function s(e){var t=r.createClass({displayName:"ReactFullPageComponent"+(e.type.displayName||""),componentWillUnmount:function(){i(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName)},render:function(){return this.transferPropsTo(e(null,this.props.children))}});return t}var r=e("./ReactCompositeComponent"),i=e("./invariant");t.exports=s},{"./ReactCompositeComponent":38,"./invariant":134}],113:[function(e,t,n){function f(e){var t=e.match(a);return t&&t[1].toLowerCase()}function l(e,t){var n=u;o(!!u,"createNodesFromMarkup dummy not initialized");var r=f(e),a=r&&s(r);if(a){n.innerHTML=a[1]+e+a[2];var l=a[0];while(l--)n=n.lastChild}else n.innerHTML=e;var c=n.getElementsByTagName("script");c.length&&(o(t,"createNodesFromMarkup(...): Unexpected <script> element rendered."),i(c).forEach(t));var h=i(n.childNodes);while(n.lastChild)n.removeChild(n.lastChild);return h}var r=e("./ExecutionEnvironment"),i=e("./createArrayFrom"),s=e("./getMarkupWrap"),o=e("./invariant"),u=r.canUseDOM?document.createElement("div"):null,a=/^\s*<(\w+)/;t.exports=l},{"./ExecutionEnvironment":22,"./createArrayFrom":111,"./getMarkupWrap":126,"./invariant":134}],114:[function(e,t,n){function r(e){return typeof e=="object"?Object.keys(e).filter(function(t){return e[t]}).join(" "):Array.prototype.join.call(arguments," ")}t.exports=r},{}],115:[function(e,t,n){function s(e,t){var n=t==null||typeof t=="boolean"||t==="";if(n)return"";var r=isNaN(t);return r||t===0||i.hasOwnProperty(e)&&i[e]?""+t:(typeof t=="string"&&(t=t.trim()),t+"px")}var r=e("./CSSProperty"),i=r.isUnitlessNumber;t.exports=s},{"./CSSProperty":4}],116:[function(e,t,n){function i(e){return function(){return e}}function s(){}var r=e("./copyProperties");r(s,{thatReturns:i,thatReturnsFalse:i(!1),thatReturnsTrue:i(!0),thatReturnsNull:i(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(e){return e}}),t.exports=s},{"./copyProperties":110}],117:[function(e,t,n){var r={};Object.freeze(r),t.exports=r},{}],118:[function(e,t,n){function s(e){return r[e]}function o(e){return(""+e).replace(i,s)}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},i=/[&><"']/g;t.exports=o},{}],119:[function(e,t,n){function s(e,t,n){var r=e,s=!r.hasOwnProperty(n);i(s,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),s&&t!=null&&(r[n]=t)}function o(e){if(e==null)return e;var t={};return r(e,s,t),t}var r=e("./traverseAllChildren"),i=e("./warning");t.exports=o},{"./traverseAllChildren":156,"./warning":158}],120:[function(e,t,n){function r(e){e.disabled||e.focus()}t.exports=r},{}],121:[function(e,t,n){var r=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=r},{}],122:[function(e,t,n){function r(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=r},{}],123:[function(e,t,n){function o(e){if(e.key){var t=i[e.key]||e.key;if(t!=="Unidentified")return t}if(e.type==="keypress"){var n="charCode"in e?e.charCode:e.keyCode;return n===13?"Enter":String.fromCharCode(n)}if(e.type==="keydown"||e.type==="keyup")return s[e.keyCode]||"Unidentified";r(!1,"Unexpected keyboard event type: %s",e.type)}var r=e("./invariant"),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=o},{"./invariant":134}],124:[function(e,t,n){function i(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var i=r[e];return i?!!n[i]:!1}function s(e){return i}var r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=s},{}],125:[function(e,t,n){function r(e){var t=e.target||e.srcElement||window;return t.nodeType===3?t.parentNode:t}t.exports=r},{}],126:[function(e,t,n){function h(e){return i(!!s,"Markup wrapping node not initialized"),c.hasOwnProperty(e)||(e="*"),o.hasOwnProperty(e)||(e==="*"?s.innerHTML="<link />":s.innerHTML="<"+e+"></"+e+">",o[e]=!s.firstChild),o[e]?c[e]:null}var r=e("./ExecutionEnvironment"),i=e("./invariant"),s=r.canUseDOM?document.createElement("div"):null,o={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},u=[1,'<select multiple="true">',"</select>"],a=[1,"<table>","</table>"],f=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,"<svg>","</svg>"],c={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:a,colgroup:a,tbody:a,tfoot:a,thead:a,td:f,th:f,circle:l,defs:l,ellipse:l,g:l,line:l,linearGradient:l,path:l,polygon:l,polyline:l,radialGradient:l,rect:l,stop:l,text:l};t.exports=h},{"./ExecutionEnvironment":22,"./invariant":134}],127:[function(e,t,n){function r(e){while(e&&e.firstChild)e=e.firstChild;return e}function i(e){while(e){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function s(e,t){var n=r(e),s=0,o=0;while(n){if(n.nodeType==3){o=s+n.textContent.length;if(s<=t&&o>=t)return{node:n,offset:t-s};s=o}n=r(i(n))}}t.exports=s},{}],128:[function(e,t,n){function i(e){return e?e.nodeType===r?e.documentElement:e.firstChild:null}var r=9;t.exports=i},{}],129:[function(e,t,n){function s(){return!i&&r.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var r=e("./ExecutionEnvironment"),i=null;t.exports=s},{"./ExecutionEnvironment":22}],130:[function(e,t,n){function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],131:[function(e,t,n){function i(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=i},{}],132:[function(e,t,n){function s(e){return r(e).replace(i,"-ms-")}var r=e("./hyphenate"),i=/^ms-/;t.exports=s},{"./hyphenate":131}],133:[function(e,t,n){function i(e){return e&&typeof e.type=="function"&&typeof e.type.prototype.mountComponent=="function"&&typeof e.type.prototype.receiveComponent=="function"}function s(e){return r(i(e),"Only React Components are valid for mounting."),new e.type(e)}var r=e("./invariant");t.exports=s},{"./invariant":134}],134:[function(e,t,n){var r=function(e,t,n,r,i,s,o,u){if(t===undefined)throw new Error("invariant requires an error message argument");if(!e){var a;if(t===undefined)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,r,i,s,o,u],l=0;a=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return f[l++]}))}throw a.framesToPop=1,a}};t.exports=r},{}],135:[function(e,t,n){function s(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var o=document.createElement("div");o.setAttribute(n,"return;"),s=typeof o[n]=="function"}return!s&&i&&e==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var r=e("./ExecutionEnvironment"),i;r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=s},{"./ExecutionEnvironment":22}],136:[function(e,t,n){function r(e){return!!e&&(typeof Node=="function"?e instanceof Node:typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.nodeName=="string")}t.exports=r},{}],137:[function(e,t,n){function i(e){return e&&(e.nodeName==="INPUT"&&r[e.type]||e.nodeName==="TEXTAREA")}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=i},{}],138:[function(e,t,n){function i(e){return r(e)&&e.nodeType==3}var r=e("./isNode");t.exports=i},{"./isNode":136}],139:[function(e,t,n){function r(e){e||(e="");var t,n=arguments.length;if(n>1)for(var r=1;r<n;r++)t=arguments[r],t&&(e+=" "+t);return e}t.exports=r},{}],140:[function(e,t,n){var r=e("./invariant"),i=function(e){var t={},n;r(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object.");for(n in e){if(!e.hasOwnProperty(n))continue;t[n]=n}return t};t.exports=i},{"./invariant":134}],141:[function(e,t,n){var r=function(e){var t;for(t in e){if(!e.hasOwnProperty(t))continue;return t}return null};t.exports=r},{}],142:[function(e,t,n){function r(e,t,n){if(!e)return null;var r=0,i={};for(var s in e)e.hasOwnProperty(s)&&(i[s]=t.call(n,e[s],s,r++));return i}t.exports=r},{}],143:[function(e,t,n){function r(e){var t={};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e.call(this,n)}}t.exports=r},{}],144:[function(e,t,n){var r=e("./mergeInto"),i=function(e,t){var n={};return r(n,e),r(n,t),n};t.exports=i},{"./mergeInto":146}],145:[function(e,t,n){var r=e("./invariant"),i=e("./keyMirror"),s=36,o=function(e){return typeof e!="object"||e===null},u={MAX_MERGE_DEPTH:s,isTerminal:o,normalizeMergeArg:function(e){return e===undefined||e===null?{}:e},checkMergeArrayArgs:function(e,t){r(Array.isArray(e)&&Array.isArray(t),"Tried to merge arrays, instead got %s and %s.",e,t)},checkMergeObjectArgs:function(e,t){u.checkMergeObjectArg(e),u.checkMergeObjectArg(t)},checkMergeObjectArg:function(e){r(!o(e)&&!Array.isArray(e),"Tried to merge an object, instead got %s.",e)},checkMergeIntoObjectArg:function(e){r((!o(e)||typeof e=="function")&&!Array.isArray(e),"Tried to merge into an object, instead got %s.",e)},checkMergeLevel:function(e){r(e<s,"Maximum deep merge depth exceeded. You may be attempting to merge circular structures in an unsupported way.")},checkArrayStrategy:function(e){r(e===undefined||e in u.ArrayStrategies,"You must provide an array strategy to deep merge functions to instruct the deep merge how to resolve merging two arrays.")},ArrayStrategies:i({Clobber:!0,IndexByIndex:!0})};t.exports=u},{"./invariant":134,"./keyMirror":140}],146:[function(e,t,n){function o(e,t){s(e);if(t!=null){i(t);for(var n in t){if(!t.hasOwnProperty(n))continue;e[n]=t[n]}}}var r=e("./mergeHelpers"),i=r.checkMergeObjectArg,s=r.checkMergeIntoObjectArg;t.exports=o},{"./mergeHelpers":145}],147:[function(e,t,n){var r=function(e,t){var n;for(n in t){if(!t.hasOwnProperty(n))continue;e.prototype[n]=t[n]}};t.exports=r},{}],148:[function(e,t,n){function i(e,t){r(e&&!/[^a-z0-9_]/.test(e),"You must provide an eventName using only the characters [a-z0-9_]")}var r=e("./invariant");t.exports=i},{"./invariant":134}],149:[function(e,t,n){function s(e){return i(r.isValidDescriptor(e),"onlyChild must be passed a children with exactly one child."),e}var r=e("./ReactDescriptor"),i=e("./invariant");t.exports=s},{"./ReactDescriptor":56,"./invariant":134}],150:[function(e,t,n){var r=e("./ExecutionEnvironment"),i;r.canUseDOM&&(i=window.performance||window.msPerformance||window.webkitPerformance),t.exports=i||{}},{"./ExecutionEnvironment":22}],151:[function(e,t,n){var r=e("./performance");if(!r||!r.now)r=Date;var i=r.now.bind(r);t.exports=i},{"./performance":150}],152:[function(e,t,n){var r=e("./ExecutionEnvironment"),i=function(e,t){e.innerHTML=t};if(r.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",s.innerHTML===""&&(i=function(e,t){e.parentNode&&e.parentNode.replaceChild(e,e);if(t.match(/^[ \r\n\t\f]/)||t[0]==="<"&&(t.indexOf("<noscript")!==-1||t.indexOf("<script")!==-1||t.indexOf("<style")!==-1||t.indexOf("<meta")!==-1||t.indexOf("<link")!==-1)){e.innerHTML=""+t;var n=e.firstChild;n.data.length===1?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=i},{"./ExecutionEnvironment":22}],153:[function(e,t,n){function r(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=r},{}],154:[function(e,t,n){function r(e,t){return e&&t&&e.type===t.type&&(e.props&&e.props.key)===(t.props&&t.props.key)&&e._owner===t._owner?!0:!1}t.exports=r},{}],155:[function(e,t,n){function i(e){var t=e.length;r(!Array.isArray(e)&&(typeof e=="object"||typeof e=="function"),"toArray: Array-like object expected"),r(typeof t=="number","toArray: Object needs a length property"),r(t===0||t-1 in e,"toArray: Object should have keys for indices");if(e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}var i=Array(t);for(var s=0;s<t;s++)i[s]=e[s];return i}var r=e("./invariant");t.exports=i},{"./invariant":134}],156:[function(e,t,n){function l(e){return a[e]}function c(e,t){return e&&e.props&&e.props.key!=null?p(e.props.key):t.toString(36)}function h(e){return(""+e).replace(f,l)}function p(e){return"$"+h(e)}function v(e,t,n){return e==null?0:d(e,"",0,t,n)}var r=e("./ReactInstanceHandles"),i=e("./ReactTextComponent"),s=e("./invariant"),o=r.SEPARATOR,u=":",a={"=":"=0",".":"=1",":":"=2"},f=/[=.:]/g,d=function(e,t,n,r,a){var f=0;if(Array.isArray(e))for(var l=0;l<e.length;l++){var h=e[l],v=t+(t?u:o)+c(h,l),m=n+f;f+=d(h,v,m,r,a)}else{var g=typeof e,y=t==="",b=y?o+c(e,0):t;if(e==null||g==="boolean")r(a,null,b,n),f=1;else if(e.type&&e.type.prototype&&e.type.prototype.mountComponentIntoNode)r(a,e,b,n),f=1;else if(g==="object"){s(!e||e.nodeType!==1,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");for(var w in e)e.hasOwnProperty(w)&&(f+=d(e[w],t+(t?u:o)+p(w)+u+c(e[w],0),n+f,r,a))}else if(g==="string"){var E=i(e);r(a,E,b,n),f+=1}else if(g==="number"){var S=i(""+e);r(a,S,b,n),f+=1}}return f};t.exports=v},{"./ReactInstanceHandles":64,"./ReactTextComponent":83,"./invariant":134}],157:[function(e,t,n){function o(e){return Array.isArray(e)?e.concat():e&&typeof e=="object"?r(new e.constructor,e):e}function v(e,t,n){s(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e);var r=t[n];s(Array.isArray(r),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,r)}function m(e,t){s(typeof t=="object","update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",p.join(", "),l);if(t.hasOwnProperty(l))return s(Object.keys(t).length===1,"Cannot have more than one key in an object with %s",l),t[l];var n=o(e);if(t.hasOwnProperty(c)){var i=t[c];s(i&&typeof i=="object","update(): %s expects a spec of type 'object'; got %s",c,i),s(n&&typeof n=="object","update(): %s expects a target of type 'object'; got %s",c,n),r(n,t[c])}t.hasOwnProperty(u)&&(v(e,t,u),t[u].forEach(function(e){n.push(e)})),t.hasOwnProperty(a)&&(v(e,t,a),t[a].forEach(function(e){n.unshift(e)})),t.hasOwnProperty(f)&&(s(Array.isArray(e),"Expected %s target to be an array; got %s",f,e),s(Array.isArray(t[f]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",f,t[f]),t[f].forEach(function(e){s(Array.isArray(e),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",f,t[f]),n.splice.apply(n,e)})),t.hasOwnProperty(h)&&(s(typeof t[h]=="function","update(): expected spec of %s to be a function; got %s.",h,t[h]),n=t[h](n));for(var g in t)if(!d.hasOwnProperty(g)||!d[g])n[g]=m(e[g],t[g]);return n}var r=e("./copyProperties"),i=e("./keyOf"),s=e("./invariant"),u=i({$push:null}),a=i({$unshift:null}),f=i({$splice:null}),l=i({$set:null}),c=i({$merge:null}),h=i({$apply:null}),p=[u,a,f,l,c,h],d={};p.forEach(function(e){d[e]=!0}),t.exports=m},{"./copyProperties":110,"./invariant":134,"./keyOf":141}],158:[function(e,t,n){var r=e("./emptyFunction"),i=r;i=function(e,t){var n=Array.prototype.slice.call(arguments,2);if(t===undefined)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){var r=0;console.warn("Warning: "+t.replace(/%s/g,function(){return n[r++]}))}},t.exports=i},{"./emptyFunction":116}]},{},[88])(88)}),define("components/test_widget",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react"),i=r.DOM;n.exports=r.createClass({displayName:"exports",getInitialState:function(){return this.props},update:function(e){this.setState({value:e.target.value}),this.props.onTextSubmit({value:e.target.value})},render:function(){return r.DOM.div({className:"TestWidget"},r.DOM.p(null,"Hi, ",this.state.name,".  Try typing a message in the box below. "),r.DOM.textarea({rows:"20",ref:"inputText",value:this.state.value,onChange:this.update}),r.DOM.p(null,this.state.value))}})}),define("components/test_widget2",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react"),i=r.DOM;n.exports=r.createClass({displayName:"exports",getInitialState:function(){return this.props},render:function(){return r.DOM.div({className:"TestWidget2"},r.DOM.h1({align:"center"},"Howdy, ",this.props.name,"!"))}})}),define("vendor/htmlparser",["require","exports","module"],function(e,t,n){(function(){function e(){return!0}function r(e,t){this._options=t?t:{},this._options.includeLocation==undefined&&(this._options.includeLocation=!1),this.validateHandler(e),this._handler=e,this.reset()}function i(e){i.super_.call(this,e,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function s(e,t){this.reset(),this._options=t?t:{},this._options.ignoreWhitespace==undefined&&(this._options.ignoreWhitespace=!1),this._options.verbose==undefined&&(this._options.verbose=!0),this._options.enforceEmptyTags==undefined&&(this._options.enforceEmptyTags=!0),typeof e=="function"&&(this._callback=e)}function u(e,t){var n=function(){};n.prototype=t.prototype,e.super_=t,e.prototype=new n,e.prototype.constructor=e}if(!e()){if(!this.Tautologistics)this.Tautologistics={};else if(this.Tautologistics.NodeHtmlParser)return;this.Tautologistics.NodeHtmlParser={},t=this.Tautologistics.NodeHtmlParser}var n={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag"};r._reTrim=/(^\s+|\s+$)/g,r._reTrimComment=/(^\!--|--$)/g,r._reWhitespace=/\s/g,r._reTagName=/^\s*(\/?)\s*([^\s\/]+)/,r._reAttrib=/([^=<>\"\'\s]+)\s*=\s*"([^"]*)"|([^=<>\"\'\s]+)\s*=\s*'([^']*)'|([^=<>\"\'\s]+)\s*=\s*([^'"\s]+)|([^=<>\"\'\s\/]+)/g,r._reTags=/[\<\>]/g,r.prototype.parseComplete=function(t){this.reset(),this.parseChunk(t),this.done()},r.prototype.parseChunk=function(t){this._done&&this.handleError(new Error("Attempted to parse chunk after parsing already done")),this._buffer+=t,this.parseTags()},r.prototype.done=function(){if(this._done)return;this._done=!0;if(this._buffer.length){var t=this._buffer;this._buffer="";var i={raw:t,data:this._parseState==n.Text?t:t.replace(r._reTrim,""),type:this._parseState};if(this._parseState==n.Tag||this._parseState==n.Script||this._parseState==n.Style)i.name=this.parseTagName(i.data);this.parseAttribs(i),this._elements.push(i)}this.writeHandler(),this._handler.done()},r.prototype.reset=function(){this._buffer="",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=n.Text,this._prevTagSep="",this._tagStack=[],this._handler.reset()},r.prototype._options=null,r.prototype._handler=null,r.prototype._buffer=null,r.prototype._done=!1,r.prototype._elements=null,r.prototype._elementsCurrent=0,r.prototype._current=0,r.prototype._next=0,r.prototype._location=null,r.prototype._parseState=n.Text,r.prototype._prevTagSep="",r.prototype._tagStack=null,r.prototype.parseTagAttribs=function(t){var r=t.length,i=0;while(i<r){var s=t[i++];(s.type==n.Tag||s.type==n.Script||s.type==n.style)&&this.parseAttribs(s)}return t},r.prototype.parseAttribs=function(t){if(t.type!=n.Script&&t.type!=n.Style&&t.type!=n.Tag)return;var i=t.data.split(r._reWhitespace,1)[0],s=t.data.substring(i.length);if(s.length<1)return;var o;r._reAttrib.lastIndex=0;while(o=r._reAttrib.exec(s))t.attribs==undefined&&(t.attribs={}),typeof o[1]=="string"&&o[1].length?t.attribs[o[1]]=o[2]:typeof o[3]=="string"&&o[3].length?t.attribs[o[3].toString()]=o[4].toString():typeof o[5]=="string"&&o[5].length?t.attribs[o[5]]=o[6]:typeof o[7]=="string"&&o[7].length&&(t.attribs[o[7]]=o[7])},r.prototype.parseTagName=function(t){if(t==null||t=="")return"";var n=r._reTagName.exec(t);return n?(n[1]?"/":"")+n[2]:""},r.prototype.parseTags=function(){var t=this._buffer.length-1;while(r._reTags.test(this._buffer)){this._next=r._reTags.lastIndex-1;var i=this._buffer.charAt(this._next),s=this._buffer.substring(this._current,this._next),o={raw:s,data:this._parseState==n.Text?s:s.replace(r._reTrim,""),type:this._parseState},u=this.parseTagName(o.data);if(this._tagStack.length)if(this._tagStack[this._tagStack.length-1]==n.Script){if(u.toLowerCase()=="/script")this._tagStack.pop();else if(o.raw.indexOf("!--")!=0){o.type=n.Text;if(this._elements.length&&this._elements[this._elements.length-1].type==n.Text){var a=this._elements[this._elements.length-1];a.raw=a.data=a.raw+this._prevTagSep+o.raw,o.raw=o.data=""}}}else if(this._tagStack[this._tagStack.length-1]==n.Style){if(u.toLowerCase()=="/style")this._tagStack.pop();else if(o.raw.indexOf("!--")!=0){o.type=n.Text;if(this._elements.length&&this._elements[this._elements.length-1].type==n.Text){var a=this._elements[this._elements.length-1];o.raw!=""?(a.raw=a.data=a.raw+this._prevTagSep+o.raw,o.raw=o.data=""):a.raw=a.data=a.raw+this._prevTagSep}else o.raw!=""&&(o.raw=o.data=o.raw)}}else if(this._tagStack[this._tagStack.length-1]==n.Comment){var f=o.raw.length;if(o.raw.charAt(f-2)=="-"&&o.raw.charAt(f-1)=="-"&&i==">"){this._tagStack.pop();if(this._elements.length&&this._elements[this._elements.length-1].type==n.Comment){var a=this._elements[this._elements.length-1];a.raw=a.data=(a.raw+o.raw).replace(r._reTrimComment,""),o.raw=o.data="",o.type=n.Text}else o.type=n.Comment}else{o.type=n.Comment;if(this._elements.length&&this._elements[this._elements.length-1].type==n.Comment){var a=this._elements[this._elements.length-1];a.raw=a.data=a.raw+o.raw+i,o.raw=o.data="",o.type=n.Text}else o.raw=o.data=o.raw+i}}if(o.type==n.Tag){o.name=u;var l=u.toLowerCase();if(o.raw.indexOf("!--")==0){o.type=n.Comment,delete o.name;var f=o.raw.length;o.raw.charAt(f-1)=="-"&&o.raw.charAt(f-2)=="-"&&i==">"?o.raw=o.data=o.raw.replace(r._reTrimComment,""):(o.raw+=i,this._tagStack.push(n.Comment))}else o.raw.indexOf("!")==0||o.raw.indexOf("?")==0?o.type=n.Directive:l=="script"?(o.type=n.Script,o.data.charAt(o.data.length-1)!="/"&&this._tagStack.push(n.Script)):l=="/script"?o.type=n.Script:l=="style"?(o.type=n.Style,o.data.charAt(o.data.length-1)!="/"&&this._tagStack.push(n.Style)):l=="/style"&&(o.type=n.Style);o.name&&o.name.charAt(0)=="/"&&(o.data=o.name)}if(o.raw!=""||o.type!=n.Text)this._options.includeLocation&&!o.location&&(o.location=this.getLocation(o.type==n.Tag)),this.parseAttribs(o),this._elements.push(o),o.type!=n.Text&&o.type!=n.Comment&&o.type!=n.Directive&&o.data.charAt(o.data.length-1)=="/"&&this._elements.push({raw:"/"+o.name,data:"/"+o.name,name:"/"+o.name,type:o.type});this._parseState=i=="<"?n.Tag:n.Text,this._current=this._next+1,this._prevTagSep=i}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=t?this._buffer.substring(this._current):"",this._current=0,this.writeHandler()},r.prototype.getLocation=function(t){var n,r=this._location,i=this._current-(t?1:0),s=t&&r.charOffset==0&&this._current==0;for(;r.charOffset<i;r.charOffset++)n=this._buffer.charAt(r.charOffset),n=="\n"?(r.inBuffer++,r.col=0):n!="\r"&&r.col++;return{line:r.row+r.inBuffer+1,col:r.col+(s?0:1)}},r.prototype.validateHandler=function(t){if(typeof t!="object")throw new Error("Handler is not an object");if(typeof t.reset!="function")throw new Error("Handler method 'reset' is invalid");if(typeof t.done!="function")throw new Error("Handler method 'done' is invalid");if(typeof t.writeTag!="function")throw new Error("Handler method 'writeTag' is invalid");if(typeof t.writeText!="function")throw new Error("Handler method 'writeText' is invalid");if(typeof t.writeComment!="function")throw new Error("Handler method 'writeComment' is invalid");if(typeof t.writeDirective!="function")throw new Error("Handler method 'writeDirective' is invalid")},r.prototype.writeHandler=function(t){t=!!t;if(this._tagStack.length&&!t)return;while(this._elements.length){var r=this._elements.shift();switch(r.type){case n.Comment:this._handler.writeComment(r);break;case n.Directive:this._handler.writeDirective(r);break;case n.Text:this._handler.writeText(r);break;default:this._handler.writeTag(r)}}},r.prototype.handleError=function(t){if(typeof this._handler.error!="function")throw t;this._handler.error(t)},u(i,s),i.prototype.done=function(){var t={},n,r=o.getElementsByTagName(function(e){return e=="rss"||e=="feed"},this.dom,!1);r.length&&(n=r[0]);if(n){if(n.name=="rss"){t.type="rss",n=n.children[0],t.id="";try{t.title=o.getElementsByTagName("title",n.children,!1)[0].children[0].data}catch(s){}try{t.link=o.getElementsByTagName("link",n.children,!1)[0].children[0].data}catch(s){}try{t.description=o.getElementsByTagName("description",n.children,!1)[0].children[0].data}catch(s){}try{t.updated=new Date(o.getElementsByTagName("lastBuildDate",n.children,!1)[0].children[0].data)}catch(s){}try{t.author=o.getElementsByTagName("managingEditor",n.children,!1)[0].children[0].data}catch(s){}t.items=[],o.getElementsByTagName("item",n.children).forEach(function(e,n,r){var i={};try{i.id=o.getElementsByTagName("guid",e.children,!1)[0].children[0].data}catch(s){}try{i.title=o.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(s){}try{i.link=o.getElementsByTagName("link",e.children,!1)[0].children[0].data}catch(s){}try{i.description=o.getElementsByTagName("description",e.children,!1)[0].children[0].data}catch(s){}try{i.pubDate=new Date(o.getElementsByTagName("pubDate",e.children,!1)[0].children[0].data)}catch(s){}t.items.push(i)})}else{t.type="atom";try{t.id=o.getElementsByTagName("id",n.children,!1)[0].children[0].data}catch(s){}try{t.title=o.getElementsByTagName("title",n.children,!1)[0].children[0].data}catch(s){}try{t.link=o.getElementsByTagName("link",n.children,!1)[0].attribs.href}catch(s){}try{t.description=o.getElementsByTagName("subtitle",n.children,!1)[0].children[0].data}catch(s){}try{t.updated=new Date(o.getElementsByTagName("updated",n.children,!1)[0].children[0].data)}catch(s){}try{t.author=o.getElementsByTagName("email",n.children,!0)[0].children[0].data}catch(s){}t.items=[],o.getElementsByTagName("entry",n.children).forEach(function(e,n,r){var i={};try{i.id=o.getElementsByTagName("id",e.children,!1)[0].children[0].data}catch(s){}try{i.title=o.getElementsByTagName("title",e.children,!1)[0].children[0].data}catch(s){}try{i.link=o.getElementsByTagName("link",e.children,!1)[0].attribs.href}catch(s){}try{i.description=o.getElementsByTagName("summary",e.children,!1)[0].children[0].data}catch(s){}try{i.pubDate=new Date(o.getElementsByTagName("updated",e.children,!1)[0].children[0].data)}catch(s){}t.items.push(i)})}this.dom=t}i.super_.prototype.done.call(this)},s._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},s.reWhitespace=/^\s*$/,s.prototype.dom=null,s.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},s.prototype.done=function(){this._done=!0,this.handleCallback(null)},s.prototype.writeTag=function(t){this.handleElement(t)},s.prototype.writeText=function(t){if(this._options.ignoreWhitespace&&s.reWhitespace.test(t.data))return;this.handleElement(t)},s.prototype.writeComment=function(t){this.handleElement(t)},s.prototype.writeDirective=function(t){this.handleElement(t)},s.prototype.error=function(t){this.handleCallback(t)},s.prototype._options=null,s.prototype._callback=null,s.prototype._done=!1,s.prototype._tagStack=null,s.prototype.handleCallback=function(t){if(typeof this._callback!="function"){if(t)throw t;return}this._callback(t,this.dom)},s.prototype.isEmptyTag=function(e){var t=e.name.toLowerCase();return t.charAt(0)=="/"&&(t=t.substring(1)),this._options.enforceEmptyTags&&!!s._emptyTags[t]},s.prototype.handleElement=function(t){this._done&&this.handleCallback(new Error("Writing to the handler after done() called is not allowed without a reset()")),this._options.verbose||(delete t.raw,(t.type=="tag"||t.type=="script"||t.type=="style")&&delete t.data);if(!this._tagStack.last())t.type!=n.Text&&t.type!=n.Comment&&t.type!=n.Directive?t.name.charAt(0)!="/"&&(this.dom.push(t),this.isEmptyTag(t)||this._tagStack.push(t)):this.dom.push(t);else if(t.type!=n.Text&&t.type!=n.Comment&&t.type!=n.Directive)if(t.name.charAt(0)=="/"){var r=t.name.substring(1);if(!this.isEmptyTag(t)){var i=this._tagStack.length-1;while(i>-1&&this._tagStack[i--].name!=r);if(i>-1||this._tagStack[0].name==r)while(i<this._tagStack.length-1)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(t),this.isEmptyTag(t)||this._tagStack.push(t);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(t)};var o={testElement:function(t,n){if(!n)return!1;for(var r in t)if(r=="tag_name"){if(n.type!="tag"&&n.type!="script"&&n.type!="style")return!1;if(!t.tag_name(n.name))return!1}else if(r=="tag_type"){if(!t.tag_type(n.type))return!1}else if(r=="tag_contains"){if(n.type!="text"&&n.type!="comment"&&n.type!="directive")return!1;if(!t.tag_contains(n.data))return!1}else if(!n.attribs||!t[r](n.attribs[r]))return!1;return!0},getElements:function(t,n,r,i){function a(e){return function(t){return t==e}}r=r===undefined||r===null||!!r,i=isNaN(parseInt(i))?-1:parseInt(i);if(!n)return[];var s=[],u;for(var f in t)typeof t[f]!="function"&&(t[f]=a(t[f]));o.testElement(t,n)&&s.push(n);if(i>=0&&s.length>=i)return s;if(r&&n.children)u=n.children;else{if(!(n instanceof Array))return s;u=n}for(var l=0;l<u.length;l++){s=s.concat(o.getElements(t,u[l],r,i));if(i>=0&&s.length>=i)break}return s},getElementById:function(t,n,r){var i=o.getElements({id:t},n,r,1);return i.length?i[0]:null},getElementsByTagName:function(t,n,r,i){return o.getElements({tag_name:t},n,r,i)},getElementsByTagType:function(t,n,r,i){return o.getElements({tag_type:t},n,r,i)}};t.Parser=r,t.DefaultHandler=s,t.RssHandler=i,t.ElementType=n,t.DomUtils=o})()}),define("libs/patch_html",["require","exports","module","vendor/htmlparser","underscore"],function(e,t,n){var r=e("vendor/htmlparser"),i=e("underscore"),s=r.DefaultHandler._emptyTags;n.exports=function(e){var t=typeof e=="string"?e:e.HTML||"",n=e.includes||{},o=n.JS||{},u=n.CSS||{},a=e.external||{},f=a.JS||[],l=a.CSS||[];e=i.extend(e,{overwriteAnchorTarget:!0});var c=function(e){if(e.attribs===undefined)return;if(e.attribs.href===undefined)return;if(/^\#.*/.test(e.attribs.href))return;e.attribs.target="_blank",e.raw=e.name+" "+p(e.attribs)},h=function(t){if(Array.isArray(t))return t.map(h).join("");if(!t)return"";switch(t.type){case"tag":t.name==="a"&&e.overwriteAnchorTarget&&c(t);if(s[t.name])return"<"+t.raw+">";case"style":case"script":return"<"+t.raw+">"+h(t.children)+"</"+t.name+">";case"directive":return"<"+t.raw+">";case"comment":return"<!--"+t.raw+"-->";default:return t.raw}},p=function(e){return i.map(e,function(e,t){return t+'="'+e+'"'}).join(" ")};f=f.map(function(e){var t='script src="'+e+'"';return{raw:t,data:t,type:"script",name:"script",attribs:{src:e}}}),l=l.map(function(e){var t='link rel="stylesheet" href="'+e+'"';return{raw:t,data:t,type:"link",name:"link",attribs:{href:e,rel:"stylesheet"}}});var d=null,v=new r.DefaultHandler(function(e,t){if(e)throw e;var n=r.DomUtils.getElements({tag_type:"directive"},t);(!n.length||!n.filter(function(e){return!!e.name.match(/!DOCTYPE/i)}).length)&&t.unshift({raw:"!DOCTYPE html",data:"!DOCTYPE html",type:"directive",name:"!DOCTYPE"});var s,a;n=r.DomUtils.getElements({tag_name:"html"},t);if(!n.length){var l=[];a=t.filter(function(e){return e.type==="directive"||e.type==="comment"?(l.push(e),!1):!0}),s={raw:"html",data:"html",type:"tag",name:"html",attribs:{},children:a},l.push(s),t=l}else s=n[0],Array.isArray(s.children)||(s.children=[]);n=r.DomUtils.getElements({tag_name:"head"},t);var c;n.length?c=n[0]:(c={raw:"head",data:"head",type:"tag",name:"head",attribs:{},children:[]},s.children.unshift(c)),c.children=f.concat(c.children),n=r.DomUtils.getElements({tag_name:"body"},t);var v;if(!n.length){var m=[];a=s.children.filter(function(e,t){return e.type!=="directive"&&e.name!=="head"&&e.name!=="html"?(m.push(t),!0):!1}),s.children=s.children.filter(function(e){return a.indexOf(e)===-1}),v={raw:"body",data:"body",type:"tag",name:"body",attribs:{},children:a},s.children.push(v)}else v=n[0];r.DomUtils.getElements({tag_name:"link",rel:"stylesheet",href:function(e){return u[e]!==undefined}},t).forEach(function(e){var t=u[e.attribs.href];i.extend(e,{raw:"style",data:"style",type:"tag",name:"style",attribs:{},children:[{raw:t,data:t,type:"text"}]})}),r.DomUtils.getElements({tag_name:"script",src:function(e){return o[e]!==undefined}},t).forEach(function(e){var t=o[e.attribs.src];delete e.attribs.src;var n="script "+p(e.attribs);i.extend(e,{raw:n,data:n,children:[{raw:t,data:t,type:"text"}]})}),r.DomUtils.getElements({tag_name:"script"},t).forEach(function(e){if(e.attribs&&e.attribs.src)return;e.attribs||(e.attribs={}),e.attribs.defer="";var t="script "+p(e.attribs);i.extend(e,{raw:t,data:t})}),d=h(t)}),m=new r.Parser(v);return m.parseComplete(t),d}}),define("libs/composer/patch_html",["require","exports","module","libs/patch_html"],function(e,t,n){var r=e("libs/patch_html"),i=CCDATA.assets_compiled?["/assets/web_libs.js?v4"]:["/assets/env/luke.min.js","/assets/env/runner.js"];n.exports=function(e,t,n){function a(e){if(e)return(e.split(".").slice(-1)[0]||"").toLowerCase()}var s=(e.extScripts||[]).concat(i),o=e.files||[],u={HTML:"",PHP:null,includes:{JS:{},CSS:{}},external:{JS:s}};o.forEach(function(e){var t;e.filename&&(t=a(e.filename).toUpperCase()),t!=="HTML"&&t!=="PHP"||!!u[t]?u.includes[t]&&(u.includes[t][e.filename]=e.content):u[t]=e.content}),u.PHP?e.evaluator.php(u.PHP,function(e,i,s){e?u.HTML=e:u.HTML=s,t.call(n,r(u))}):t.call(n,r(u))}}),function(e){function r(r,s,o,u){function h(){f.handshake(),c||(o(f),c=!0)}o=o||n,u=u||{};if(!s)throw new Error("Stuff: el not found.");var a=document.createElement("iframe"),f=new i(a,{el:s});f.config=u,e.addEventListener("message",f.messageHandler.bind(f),!1),t.push(a),a.setAttribute("scrolling","no"),a.setAttribute("src",r);for(var l in u.callbacks)u.callbacks.hasOwnProperty(l)&&f.on(l,u.callbacks[l].bind(f));var c=!1;a.addEventListener("load",h,!1),s.appendChild(a)}function i(e,t){this.iframe=e,this.callbacks={once:{},always:{}};if(t.sandbox===!0)this.sandbox="allow-scripts allow-same-origin";else if(typeof t.sandbox=="string"){var n=t.sandbox;n.indexOf("allow-scripts")===-1&&(n+=" allow-scripts"),n.indexOf("allow-same-origin")===-1&&(n+=" allow-same-origin"),this.sandbox=n}else this.sandbox=null;this.secret=Math.ceil(Math.random()*999999999)+1}var t=[],n=function(){};r.clear=function(){t.forEach(function(e){var t=e.parentElement;t&&t.removeChild(e)}),t=[]},i.prototype={trigger:function(e,t){var n=this,r,i;r=this.callbacks.once[e];if(r!==undefined&&r.length>0){var s=r.shift();s.call(s.thisArg||this,t)}i=this.callbacks.always[e],i&&i.forEach(function(e){e.call(e.thisArg||n,t)})},messageHandler:function(e){var t;try{t=JSON.parse(e.data)}catch(n){return}if(t.secret!==this.secret)return;var r=t.data,i=t.type;this.trigger(i,r)},post:function(e,t){this.iframe.contentWindow.postMessage(JSON.stringify({type:e,data:t,secret:this.secret}),"*")},evaljs:function(t,r,i){var s=function(t){var i=t.error,s=i,o;i&&(o=e[i.__errorType__])&&(s=new o(i.message),s.stack=i.stack,s.type=i.type,s.arguments=i.arguments),(r||n).call(this,s,t.result)};s.thisArg=i,this.once("evaljs",s),this.post("evaljs",t)},load:function(e,t,r){t=t||n,t.thisArg=r,this.once("load",t),this.post("disableFunctions",this.config.disabledFunctions||[]),this.post("load",e)},html:function(e,t){e=e||n,e.thisArg=t,this.once("html",e),this.post("html",null)},handshake:function(){this.post("handshake",this.sandbox)},once:function(e,t,r){t=t||n,t.thisArg=r,this.callbacks.once[e]=this._pushOrCreate(this.callbacks.once[e],t)},on:function(e,t,r){t=t||n,t.thisArg=r,this.callbacks.always[e]=this._pushOrCreate(this.callbacks.always[e],t)},_pushOrCreate:function(e,t){return e?e.push(t):e=[t],e},off:function(e,t){var n=this.callbacks[e];if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}else this.callbacks[e]=[]}},r.Context=i,e.stuff=r}(this),define("vendor/stuff",function(e){return function(){return e.stuff}}(this)),define("env/env",["require","exports","module"],function(e,t,n){n.exports={_externalOrigin:function(){return _.contains(["development","test"],CCDATA.env)?"//external-dev.codecademy.com:"+window.location.port:"//external-"+CCDATA.env+".codecademy.com"},secureSandboxIndex:function(){if(_.contains(["development","test"],CCDATA.env)){var e=this._externalOrigin()+CCDATA.secureSandboxIndexPath;return e=e.replace(".html",".dev.html"),e}var e=CCDATA.secureSandboxIndexPath.replace("cdn","external");return e}}}),define("components/iframe_preview",["require","exports","module","vendor/react","libs/composer/patch_html","vendor/stuff","env/env","underscore"],function(e,t,n){var r=e("vendor/react"),i=e("libs/composer/patch_html"),s=e("vendor/stuff"),o=e("env/env"),u=e("underscore"),a=o.secureSandboxIndex();n.exports=r.createClass({displayName:"exports",getInitialState:function(){return{}},componentDidMount:function(){this.state.container=this.getDOMNode(),this._loadFiles(this.props.presenter.files),$(window).on("resize",u.debounce(this._handleResize,100))},componentWillUnmount:function(){$(window).off("resize")},componentWillReceiveProps:function(e){this._shouldLoadFiles(e)&&this._loadFiles(e.presenter.files)},_loadFiles:function(e){var t=this,n=undefined,r=new RegExp(".*.html$");if(e)for(var s=0;s<e.length;s++)e[s].filename.match(r)&&(n=e[s]);n?i({files:e,extScripts:["//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js",CCDATA.assets_compiled?"/assets/jquery.expect.js":"/assets/vendor/jquery.expect.js"]},function(e){t._loadHTML(e)}):console.warn("Preview: Can't render files; no HTML file found.")},_loadHTML:function(e){var t=this;this._withStuffContext(function(n){this.load(e,function(){this.evaljs("window.topInnerWidth = "+innerWidth+";")}),this.iframe.setAttribute("width","100%"),this.iframe.setAttribute("height","100%"),t.state.context.on("size",function(e){t._scale(e.width)})})},runLegacySCT:function(e){var t=this;this._withStuffContext(function(n){this.evaljs("window.__runner.testWeb("+JSON.stringify(e)+","+JSON.stringify(t.props.presenter.files)+")",function(e,n){e?t.props.broadcast.testResult(!1,e.message):typeof n=="string"?t.props.broadcast.testResult(!1,n):t.props.broadcast.testResult(!0,"")}.bind(this))})},_scale:function(e){e&&(this.state.contentWidth=e);var t=$(".iframe-preview").find("iframe"),n=t.width(),r=n/this.state.contentWidth;r=Math.min(1,r);var i={"-moz-transform":"scale("+r+")","-webkit-transform":"scale("+r+")",transform:"scale("+r+")","-moz-transform-origin":"top left","-webkit-transform-origin":"top left","transform-origin":"top left",width:1/r*100+"%",height:1/r*100+"%"};t.css(i)},_withStuffContext:function(e){var t=this;return this.state.context===undefined?s(a,t.state.container,function(n){t.state.context=n,e.call(n)}):e.call(t.state.context),this},_handleResize:function(){this._scale(undefined)},_shouldLoadFiles:function(e){var t=this.props.presenter.files,n=e.presenter.files;return JSON.stringify(t)!=JSON.stringify(n)},render:function(){return r.DOM.div({className:"iframe-preview"},r.DOM.div({className:"cc-preview__overlay"},r.DOM.div({className:"widget-spinner widget-spinner--small widget-spinner--blue"}),r.DOM.div({className:"cc-preview__controls"},r.DOM.a({className:"js-preview-minimize cc-preview__control cc-preview__control--minimize"}))),r.DOM.div({className:"cc-preview__stuff no-fadein"}))}})}),define("components/cc_text_area",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react"),i=r.DOM;n.exports=r.createClass({displayName:"exports",getInitialState:function(){return{value:this.props.value}},handleChange:function(e){this.setState({value:e.target.value}),this.props.onJSONSubmit({value:this.refs.jsontext.getDOMNode().value})},render:function(){return r.DOM.div({className:"field field--text"},r.DOM.textarea({rows:"20",ref:"jsontext"},this.props.value),r.DOM.button({className:"button button--fill-space",id:"update-widget",onClick:this.handleChange},"Update widget properties"))}})}),define("orion/editor/shim",[],function(){return Object.create||(Object.create=function(e,t){function n(){}n.prototype=e;var r=new n;if(t)for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i].hasOwnProperty("value")?t[i].value:function(){if(arguments.length>0)return t[i].get();t[i].set(arguments)});return r}),Object.keys||(Object.keys=function(e){var t=[],n;for(n in e)e.hasOwnProperty(n)&&t.push(n);return t}),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return n.length?function(){return arguments.length?t.apply(e,n.concat(Array.prototype.slice.call(arguments))):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}),Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t],t)}),Array.prototype.map||(Array.prototype.map=function(e){for(var t=Array(this.length),n=0;n<this.length;n++)t[n]=e(this[n]);return t}),Array.prototype.reduce||(Array.prototype.reduce=function(e,t){var n,r=!1;1<arguments.length&&(n=t,r=!0);for(var i=0;this.length>i;++i)r?n=e(n,this[i],i,this):(n=this[i],r=!0);return n}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),{}}),function(){function e(e,t,n,r,i,s){t[e]&&(n.push(e),(t[e]===!0||t[e]===1)&&r.push(i+e+"/"+s))}function t(e,t,n,r,i){t=r+t+"/"+i,require._fileExists(e.toUrl(t+".js"))&&n.push(t)}function n(e,t,r){for(var i in t)t.hasOwnProperty(i)&&(!e.hasOwnProperty(i)||r)?e[i]=t[i]:typeof t[i]=="object"&&n(e[i],t[i],r)}var r=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.1+",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f=r.exec(i),l=f[1],c=f[4],h=f[5],v=c.split("-"),y=[],b={},w,E="";f[5]?(l=f[1],i=l+h):(h=f[4],c=s.locale,c||(c=s.locale=typeof navigator=="undefined"?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),v=c.split("-"));if(a.isBuild){y.push(i),t(o,"root",y,l,h);for(w=0;w<v.length;w++)a=v[w],E+=(E?"-":"")+a,t(o,E,y,l,h);o(y,function(){u()})}else o([i],function(t){var r=[],i;e("root",t,r,y,l,h);for(w=0;w<v.length;w++)i=v[w],E+=(E?"-":"")+i,e(E,t,r,y,l,h);o(y,function(){var e,i,s;for(e=r.length-1;e>-1&&r[e];e--){s=r[e],i=t[s];if(i===!0||i===1)i=o(l+s+"/"+h);n(b,i)}u(b)})})}}})}(),define("orion/editor/i18n",{load:function(e,t,n){t.specified&&t.specified("orion/bootstrap")?t(["orion/i18n!"+e],function(e){n(e)}):n({})}}),define("orion/editor/nls/root/messages",{multipleAnnotations:"Multiple annotations:",line:"Line: ${0}",breakpoint:"Breakpoint",bookmark:"Bookmark",task:"Task",error:"Error",warning:"Warning",matchingSearch:"Matching Search",currentSearch:"Current Search",currentLine:"Current Line",matchingBracket:"Matching Bracket",currentBracket:"Current Bracket",lineUp:"Line Up",lineDown:"Line Down",lineStart:"Line Start",lineEnd:"Line End",charPrevious:"Previous Character",charNext:"Next Character",pageUp:"Page Up",pageDown:"Page Down",scrollPageUp:"Scroll Page Up",scrollPageDown:"Scroll Page Down",scrollLineUp:"Scroll Line Up",scrollLineDown:"Scroll Line Down",wordPrevious:"Previous Word",wordNext:"Next Word",textStart:"Document Start",textEnd:"Document End",scrollTextStart:"Scroll Document Start",scrollTextEnd:"Scroll Document End",centerLine:"Center Line",selectLineUp:"Select Line Up",selectLineDown:"Select Line Down",selectWholeLineUp:" Select Whole Line Up",selectWholeLineDown:"Select Whole Line Down",selectLineStart:"Select Line Start",selectLineEnd:"Select Line End",selectCharPrevious:"Select Previous Character",selectCharNext:"Select Next Character",selectPageUp:"Select Page Up",selectPageDown:"Select Page Down",selectWordPrevious:"Select Previous Word",selectWordNext:"Select Next Word",selectTextStart:"Select Document Start",selectTextEnd:"Select Document End",deletePrevious:"Delete Previous Character",deleteNext:"Delete Next Character",deleteWordPrevious:"Delete Previous Word",deleteWordNext:"Delete Next Word",deleteLineStart:"Delete Line Start",deleteLineEnd:"Delete Line End",tab:"Insert Tab",enter:"Insert Line Delimiter",enterNoCursor:"Insert Line Delimiter",selectAll:"Select All",copy:"Copy",cut:"Cut",paste:"Paste",uppercase:"To Upper Case",lowercase:"To Lower Case",capitalize:"Capitalize",reversecase:"Reverse Case",toggleWrapMode:"Toggle Wrap Mode",toggleTabMode:"Toggle Tab Mode",toggleOverwriteMode:"Toggle Overwrite Mode",committerOnTime:"${0} on ${1}",emacs:"Emacs",exchangeMarkPoint:"Exchange Mark and Point",setMarkCommand:"Set Mark",clearMark:"Clear Mark",digitArgument:"Digit Argument ${0}",negativeArgument:"Negative Argument",Comment:"Comment","Flat outline":"Flat outline",incrementalFindStr:"Incremental find: ${0}",incrementalFindStrNotFound:"Incremental find: ${0} (not found)",incrementalFindReverseStr:"Reverse Incremental find: ${0}",incrementalFindReverseStrNotFound:"Reverse Incremental find: ${0} (not found)",find:"Find...",undo:"Undo",redo:"Redo",cancelMode:"Cancel Current Mode",findNext:"Find Next Occurrence",findPrevious:"Find Previous Occurrence",incrementalFind:"Incremental Find",incrementalFindReverse:"Incremental Find Reverse",indentLines:"Indent Lines",unindentLines:"Unindent Lines",moveLinesUp:"Move Lines Up",moveLinesDown:"Move Lines Down",copyLinesUp:"Copy Lines Up",copyLinesDown:"Copy Lines Down",deleteLines:"Delete Lines",gotoLine:"Goto Line...",gotoLinePrompty:"Goto Line:",nextAnnotation:"Next Annotation",prevAnnotation:"Previous Annotation",expand:"Expand",collapse:"Collapse",expandAll:"Expand All",collapseAll:"Collapse All",lastEdit:"Last Edit Location",trimTrailingWhitespaces:"Trim Trailing Whitespaces",toggleLineComment:"Toggle Line Comment",addBlockComment:"Add Block Comment",removeBlockComment:"Remove Block Comment",linkedModeEntered:"Linked Mode entered",linkedModeExited:"Linked Mode exited",syntaxError:"Syntax Error",contentAssist:"Content Assist",lineColumn:"Line ${0} : Col ${1}",vi:"vi",vimove:"(Move)",viyank:"(Yank)",videlete:"(Delete)",vichange:"(Change)",viLeft:"${0} Left",viRight:"${0} Right",viUp:"${0} Up",viDown:"${0} Down",viw:"${0} Next Word",vib:"${0} Beginning of Word",viW:"${0} Next Word (ws stop)",viB:"${0} Beginning of Word (ws stop)",vie:"${0} End of Word",viE:"${0} End of Word (ws stop)",vi$:"${0} End of the line","vi^_":"${0} First non-blank Char Current Line","vi+":"${0} First Char Next Line","vi-":"${0} First Char Previous Line","vi|":"${0} nth Column in Line",viH:"${0} Top of Page",viM:"${0} Middle of Page",viL:"${0} Bottom of Page","vi/":"${0} Search Forward","vi?":"${0} Search Backward",vin:"${0} Next Search",viN:"${0} Previous Search",vif:"${0} Search Char Fwd",viF:"${0} Search Char Bckwd",vit:"${0} Search Before Char Fwd",viT:"${0} Search Before Char Bckwd","vi,":"${0} Repeat Reverse Char Search","vi;":"${0} Repeat Char Search",viG:"${0} Go to Line",viycd:"${0} Current Line",via:"Append After Cursor",viA:"Append to End of Line",vii:"Insert Before Cursor",viI:"Insert at Beginning of Line",viO:"Insert Line Above",vio:"Insert Line Below",viR:"Begin Overwriting Text",vis:"Substitute a Character",viS:"Substitute Entire Line",viC:"Change Text Until Line End",vip:"Paste After Char or Line",viP:"Paste Before Char or Line",viStar:"Search Word Under Cursor",replaceAll:"Replacing all...",replacedMatches:"Replaced ${0} matches",nothingReplaced:"Nothing replaced",notFound:"Not found"}),define("orion/editor/nls/messages",["orion/editor/i18n!orion/editor/nls/messages","orion/editor/nls/root/messages"],function(e,t){var n={root:t},r;for(r in e)e.hasOwnProperty(r)&&typeof n[r]=="undefined"&&(n[r]=e[r]);return n}),define("orion/editor/eventTarget",[],function(){function e(){}return e.addMixin=function(t){var n=e.prototype,r;for(r in n)n.hasOwnProperty(r)&&(t[r]=n[r])},e.prototype={addEventListener:function(e,t,n){this._eventTypes||(this._eventTypes={});var r=this._eventTypes[e];r||(r=this._eventTypes[e]={level:0,listeners:[]}),r.listeners.push({listener:t,useCapture:n})},dispatchEvent:function(e){var t=e.type;this._dispatchEvent("pre"+t,e),this._dispatchEvent(t,e),this._dispatchEvent("post"+t,e)},_dispatchEvent:function(e,t){var n=this._eventTypes?this._eventTypes[e]:null;if(n){var r=n.listeners;try{if(n.level++,r)for(var i=0,s=r.length;i<s;i++)if(r[i]){var o=r[i].listener;typeof o=="function"?o.call(this,t):o.handleEvent&&typeof o.handleEvent=="function"&&o.handleEvent(t)}}finally{if(n.level--,n.compact&&n.level===0){for(i=r.length-1;i>=0;i--)r[i]||r.splice(i,1);r.length===0&&delete this._eventTypes[e],n.compact=!1}}}},isListening:function(e){return this._eventTypes?this._eventTypes[e]!==void 0:!1},removeEventListener:function(e,t,n){if(this._eventTypes){var r=this._eventTypes[e];if(r){for(var i=r.listeners,s=0,o=i.length;s<o;s++){var u=i[s];if(u&&u.listener===t&&u.useCapture===n){r.level!==0?(i[s]=null,r.compact=!0):i.splice(s,1);break}}i.length===0&&delete this._eventTypes[e]}}}},{EventTarget:e}}),define("orion/regex",[],function(){return{escape:function(e){return e.replace(/([\\$\^*\/+?\.\(\)|{}\[\]])/g,"\\$&")},parse:function(e){return(e=/^\s*\/(.+)\/([gim]{0,3})\s*$/.exec(e))?{pattern:e[1],flags:e[2]}:null}}}),define("orion/util",[],function(){var e=navigator.userAgent,t=e.indexOf("MSIE")!==-1||e.indexOf("Trident")!==-1?document.documentMode:void 0,n=parseFloat(e.split("Firefox/")[1]||e.split("Minefield/")[1])||void 0,r=e.indexOf("Opera")!==-1?parseFloat(e.split("Version/")[1]):void 0,i=parseFloat(e.split("Chrome/")[1])||void 0,s=e.indexOf("Safari")!==-1&&!i,o=parseFloat(e.split("WebKit/")[1])||void 0,u=e.indexOf("Android")!==-1,a=e.indexOf("iPad")!==-1,e=e.indexOf("iPhone")!==-1,f=a||e,l=navigator.platform.indexOf("Mac")!==-1,c=navigator.platform.indexOf("Win")!==-1,h=navigator.platform.indexOf("Linux")!==-1,p="ontouchstart"in document.createElement("input");return{formatMessage:function(e){var t=arguments;return e.replace(/\$\{([^\}]+)\}/g,function(e,n){return t[(n<<0)+1]})},createElement:function(e,t){return e.createElementNS?e.createElementNS("http://www.w3.org/1999/xhtml",t):e.createElement(t)},isIE:t,isFirefox:n,isOpera:r,isChrome:i,isSafari:s,isWebkit:o,isAndroid:u,isIPad:a,isIPhone:e,isIOS:f,isMac:l,isWindows:c,isLinux:h,isTouch:p,platformDelimiter:c?"\r\n":"\n"}}),define("orion/editor/textModel",["orion/editor/eventTarget","orion/regex","orion/util"],function(e,t,n){function r(e,t){this._lastLineIndex=-1,this._text=[""],this._lineOffsets=[0],this.setText(e),this.setLineDelimiter(t)}return r.prototype={destroy:function(){},find:function(e){this._text.length>1&&(this._text=[this._text.join("")]);var n=e.string,r=e.regex,i=n,s="",o=e.caseInsensitive;if(i)if(r){if(n=t.parse(i))i=n.pattern,s=n.flags}else i=n.replace(/([\\$\^*\/+?\.\(\)|{}\[\]])/g,"\\$&"),o&&(i=i.replace(/[iI\u0130\u0131]/g,"[Ii]"));var u=null,a;if(i){var n=e.reverse,f=e.wrap,r=e.wholeWord,l=e.start||0,e=e.end,c=e!==null&&e!==void 0;s.indexOf("g")===-1&&(s+="g"),s.indexOf("m")===-1&&(s+="m"),o&&s.indexOf("i")===-1&&(s+="i"),r&&(i="\\b"+i+"\\b");var h=this._text[0],p,d,v=0;c&&(o=l<e?l:e,h=h.substring(o,l<e?e:l),v=o);var g=RegExp(i,s);n?a=function(){var e=null;for(g.lastIndex=0;;){d=g.lastIndex,p=g.exec(h);if(d===g.lastIndex)return null;if(!p)break;if(!(p.index+v<l)){if(!f||e)break;l=h.length+v}e={start:p.index+v,end:g.lastIndex+v}}return e&&(l=e.start),e}:(c||(g.lastIndex=l),a=function(){for(;;){d=g.lastIndex,p=g.exec(h);if(d===g.lastIndex)break;if(p)return{start:p.index+v,end:g.lastIndex+v};if(d===0||!f)break}return null}),u=a()}return{next:function(){var e=u;return e&&(u=a()),e},hasNext:function(){return u!==null}}},getCharCount:function(){for(var e=0,t=0;t<this._text.length;t++)e+=this._text[t].length;return e},getLine:function(e,t){var n=this.getLineCount();if(0<=e&&e<n){var r=this._lineOffsets[e];if(e+1<n){n=this.getText(r,this._lineOffsets[e+1]);if(t)return n;for(var r=n.length,i;(i=n.charCodeAt(r-1))===10||i===13;)r--;return n.substring(0,r)}return this.getText(r)}return null},getLineAtOffset:function(e){var t=this.getCharCount();if(0<=e&&e<=t){var n=this.getLineCount();if(e===t)return n-1;var r,i,s=this._lastLineIndex;if(0<=s&&s<n&&(r=this._lineOffsets[s],i=s+1<n?this._lineOffsets[s+1]:t,r<=e&&e<i))return s;for(var o=n,u=-1;o-u>1;)if(s=Math.floor((o+u)/2),r=this._lineOffsets[s],i=s+1<n?this._lineOffsets[s+1]:t,e<=r)o=s;else{if(e<i){o=s;break}u=s}return this._lastLineIndex=o}return-1},getLineCount:function(){return this._lineOffsets.length},getLineDelimiter:function(){return this._lineDelimiter},getLineEnd:function(e,t){var n=this.getLineCount();if(0<=e&&e<n){if(e+1<n){n=this._lineOffsets[e+1];if(t)return n;for(var r=this.getText(Math.max(this._lineOffsets[e],n-2),n),i=r.length,s;(s=r.charCodeAt(i-1))===10||s===13;)i--;return n-(r.length-i)}return this.getCharCount()}return-1},getLineStart:function(e){return 0<=e&&e<this.getLineCount()?this._lineOffsets[e]:-1},getText:function(e,t){e===void 0&&(e=0),t===void 0&&(t=this.getCharCount());if(e===t)return"";for(var n=0,r=0,i;r<this._text.length;){i=this._text[r].length;if(e<=n+i)break;n+=i,r++}for(var s=n,o=r;r<this._text.length;){i=this._text[r].length;if(t<=n+i)break;n+=i,r++}return o===r?this._text[o].substring(e-s,t-n):(s=this._text[o].substring(e-s),n=this._text[r].substring(0,t-n),s+this._text.slice(o+1,r).join("")+n)},onChanging:function(e){return this.dispatchEvent(e)},onChanged:function(e){return this.dispatchEvent(e)},setLineDelimiter:function(e,t){e==="auto"&&(e=void 0,this.getLineCount()>1&&(e=this.getText(this.getLineEnd(0),this.getLineEnd(0,!0)))),this._lineDelimiter=e?e:n.platformDelimiter;if(t){var r=this.getLineCount();if(r>1){for(var i=Array(r),s=0;s<r;s++)i[s]=this.getLine(s);this.setText(i.join(this._lineDelimiter))}}},setText:function(e,t,n){e===void 0&&(e=""),t===void 0&&(t=0),n===void 0&&(n=this.getCharCount());if(t!==n||e!==""){for(var r=this.getLineAtOffset(t),i=this.getLineAtOffset(n),s=t,o=n-t,u=i-r,a=e.length,f=0,l=this.getLineCount(),c=0,h=0,p=0,d=[];;){c!==-1&&c<=p&&(c=e.indexOf("\r",p)),h!==-1&&h<=p&&(h=e.indexOf("\n",p));if(h===-1&&c===-1)break;p=c!==-1&&h!==-1?c+1===h?h+1:(c<h?c:h)+1:c!==-1?c+1:h+1,d.push(t+p),f++}this.onChanging({type:"Changing",text:e,start:s,removedCharCount:o,addedCharCount:a,removedLineCount:u,addedLineCount:f}),d.length===0&&(p=this.getLineStart(r),i=i+1<l?this.getLineStart(i+1):this.getCharCount(),t!==p&&(e=this.getText(p,t)+e,t=p),n!==i&&(e+=this.getText(n,i),n=i)),p=a-o;for(i=r+u+1;i<l;i++)this._lineOffsets[i]+=p;if(d.length<5e4)r=[r+1,u].concat(d),Array.prototype.splice.apply(this._lineOffsets,r);else{p=r+1,this._lineOffsets.splice(p,u);for(l=0;l<d.length;l+=5e4)r=[p,0].concat(d.slice(l,Math.min(d.length,l+5e4))),Array.prototype.splice.apply(this._lineOffsets,r),p+=5e4}for(p=l=0;p<this._text.length;){i=this._text[p].length;if(t<=l+i)break;l+=i,p++}r=l;for(d=p;p<this._text.length;){i=this._text[p].length;if(n<=l+i)break;l+=i,p++}i=this._text[p],t=this._text[d].substring(0,t-r),n=i.substring(n-l),d=[d,p-d+1],t&&d.push(t),e&&d.push(e),n&&d.push(n),Array.prototype.splice.apply(this._text,d),this._text.length===0&&(this._text=[""]),this.onChanged({type:"Changed",start:s,removedCharCount:o,addedCharCount:a,removedLineCount:u,addedLineCount:f})}}},e.EventTarget.addMixin(r.prototype),{TextModel:r}}),define("orion/keyBinding",["orion/util"],function(e){function t(e,t,n,r,i,s){this.type=s||"keydown",this.keyCode=typeof e=="string"&&this.type==="keydown"?e.toUpperCase().charCodeAt(0):e,this.mod1=t!==void 0&&t!==null?t:!1,this.mod2=n!==void 0&&n!==null?n:!1,this.mod3=r!==void 0&&r!==null?r:!1,this.mod4=i!==void 0&&i!==null?i:!1}function n(e){this.keys=e}return t.prototype={getKeys:function(){return[this]},match:function(t,n){if(n!==void 0){if(n!==0)return!1}else if(t instanceof Array){if(t.length>1)return!1;t=t[0]}return t.type!==this.type?!1:this.keyCode===t.keyCode||this.keyCode===String.fromCharCode(e.isOpera?t.which:t.charCode!==void 0?t.charCode:t.keyCode)?this.mod1!==(e.isMac?t.metaKey:t.ctrlKey)?!1:this.type==="keydown"&&this.mod2!==t.shiftKey?!1:this.mod3!==t.altKey?!1:e.isMac&&this.mod4!==t.ctrlKey?!1:!0:!1},equals:function(e){return e?this.keyCode!==e.keyCode?!1:this.mod1!==e.mod1?!1:this.mod2!==e.mod2?!1:this.mod3!==e.mod3?!1:this.mod4!==e.mod4?!1:this.type!==e.type?!1:!0:!1}},n.prototype={getKeys:function(){return this.keys.slice(0)},match:function(e,t){var n=this.keys;if(t!==void 0)return t>n.length?!1:n[t].match(e)?t===n.length-1?!0:t+1:!1;e instanceof Array||(e=[e]);if(e.length>n.length)return!1;var r;for(r=0;r<e.length;r++)if(!n[r].match(e[r]))return!1;return r===n.length?!0:r},equals:function(e){if(!e.keys)return!1;if(e.keys.length!==this.keys.length)return!1;for(var t=0;t<e.keys.length;t++)if(!e.keys[t].equals(this.keys[t]))return!1;return!0}},{KeyBinding:t,KeyStroke:t,KeySequence:n}}),define("orion/editor/keyModes",["orion/keyBinding","orion/util"],function(e,t){function n(e){e&&(this._view=e,this._keyBindings=this.createKeyBindings(),this._keyBindingIndex=0)}function r(e){n.call(this,e)}return n.prototype={createKeyBindings:function(){return[]},getKeyBindings:function(e){for(var t=[],n=this._keyBindings,r=0;r<n.length;r++)n[r].actionID===e&&t.push(n[r].keyBinding);return t},getView:function(){return this._view},isActive:function(){return this._view.getKeyModes().indexOf(this)!==-1},match:function(e){if(e.type==="keydown")switch(e.keyCode){case 16:case 17:case 18:case 91:return}for(var t=this._keyBindingIndex,n=this._matchingKeyBindings||this._keyBindings,r=[],i=0;i<n.length;i++){var s=n[i],o=s.keyBinding.match(e,t);if(o===!0)return this._keyBindingIndex=0,this._matchingKeyBindings=null,s.actionID;typeof o=="number"&&r.push(s)}if(r.length!==0)return this._keyBindingIndex++,this._matchingKeyBindings=r,"noop";this._keyBindingIndex=0,this._matchingKeyBindings=null},setKeyBinding:function(e,t){for(var n=this._keyBindings,r=0;r<n.length;r++){var i=n[r];if(i.keyBinding.equals(e)){t?i.actionID=t:i.predefined?i.actionID="noop":n.splice(r,1);return}}t&&n.push({keyBinding:e,actionID:t})},setView:function(e){this._view=e}},r.prototype=new n,r.prototype.createKeyBindings=function(){var n=e.KeyBinding,r=[];r.push({actionID:"lineUp",keyBinding:new n(38),predefined:!0}),r.push({actionID:"lineDown",keyBinding:new n(40),predefined:!0}),r.push({actionID:"charPrevious",keyBinding:new n(37),predefined:!0}),r.push({actionID:"charNext",keyBinding:new n(39),predefined:!0}),t.isMac?(r.push({actionID:"scrollPageUp",keyBinding:new n(33),predefined:!0}),r.push({actionID:"scrollPageDown",keyBinding:new n(34),predefined:!0}),r.push({actionID:"pageUp",keyBinding:new n(33,null,null,!0),predefined:!0}),r.push({actionID:"pageDown",keyBinding:new n(34,null,null,!0),predefined:!0}),r.push({actionID:"lineStart",keyBinding:new n(37,!0),predefined:!0}),r.push({actionID:"lineEnd",keyBinding:new n(39,!0),predefined:!0}),r.push({actionID:"wordPrevious",keyBinding:new n(37,null,null,!0),predefined:!0}),r.push({actionID:"wordNext",keyBinding:new n(39,null,null,!0),predefined:!0}),r.push({actionID:"scrollTextStart",keyBinding:new n(36),predefined:!0}),r.push({actionID:"scrollTextEnd",keyBinding:new n(35),predefined:!0}),r.push({actionID:"textStart",keyBinding:new n(38,!0),predefined:!0}),r.push({actionID:"textEnd",keyBinding:new n(40,!0),predefined:!0}),r.push({actionID:"scrollPageUp",keyBinding:new n(38,null,null,null,!0),predefined:!0}),r.push({actionID:"scrollPageDown",keyBinding:new n(40,null,null,null,!0),predefined:!0}),r.push({actionID:"lineStart",keyBinding:new n(37,null,null,null,!0),predefined:!0}),r.push({actionID:"lineEnd",keyBinding:new n(39,null,null,null,!0),predefined:!0}),r.push({actionID:"lineStart",keyBinding:new n(38,null,null,!0),predefined:!0}),r.push({actionID:"lineEnd",keyBinding:new n(40,null,null,!0),predefined:!0})):(r.push({actionID:"pageUp",keyBinding:new n(33),predefined:!0}),r.push({actionID:"pageDown",keyBinding:new n(34),predefined:!0}),r.push({actionID:"lineStart",keyBinding:new n(36),predefined:!0}),r.push({actionID:"lineEnd",keyBinding:new n(35),predefined:!0}),r.push({actionID:"wordPrevious",keyBinding:new n(37,!0),predefined:!0}),r.push({actionID:"wordNext",keyBinding:new n(39,!0),predefined:!0}),r.push({actionID:"textStart",keyBinding:new n(36,!0),predefined:!0}),r.push({actionID:"textEnd",keyBinding:new n(35,!0),predefined:!0})),t.isFirefox&&t.isLinux&&(r.push({actionID:"lineUp",keyBinding:new n(38,!0),predefined:!0}),r.push({actionID:"lineDown",keyBinding:new n(40,!0),predefined:!0})),t.isWindows&&(r.push({actionID:"scrollLineUp",keyBinding:new n(38,!0),predefined:!0}),r.push({actionID:"scrollLineDown",keyBinding:new n(40,!0),predefined:!0})),r.push({actionID:"selectLineUp",keyBinding:new n(38,null,!0),predefined:!0}),r.push({actionID:"selectLineDown",keyBinding:new n(40,null,!0),predefined:!0}),r.push({actionID:"selectCharPrevious",keyBinding:new n(37,null,!0),predefined:!0}),r.push({actionID:"selectCharNext",keyBinding:new n(39,null,!0),predefined:!0}),r.push({actionID:"selectPageUp",keyBinding:new n(33,null,!0),predefined:!0}),r.push({actionID:"selectPageDown",keyBinding:new n(34,null,!0),predefined:!0}),t.isMac?(r.push({actionID:"selectLineStart",keyBinding:new n(37,!0,!0),predefined:!0}),r.push({actionID:"selectLineEnd",keyBinding:new n(39,!0,!0),predefined:!0}),r.push({actionID:"selectWordPrevious",keyBinding:new n(37,null,!0,!0),predefined:!0}),r.push({actionID:"selectWordNext",keyBinding:new n(39,null,!0,!0),predefined:!0}),r.push({actionID:"selectTextStart",keyBinding:new n(36,null,!0),predefined:!0}),r.push({actionID:"selectTextEnd",keyBinding:new n(35,null,!0),predefined:!0}),r.push({actionID:"selectTextStart",keyBinding:new n(38,!0,!0),predefined:!0}),r.push({actionID:"selectTextEnd",keyBinding:new n(40,!0,!0),predefined:!0}),r.push({actionID:"selectLineStart",keyBinding:new n(37,null,!0,null,!0),predefined:!0}),r.push({actionID:"selectLineEnd",keyBinding:new n(39,null,!0,null,!0),predefined:!0}),r.push({actionID:"selectLineStart",keyBinding:new n(38,null,!0,!0),predefined:!0}),r.push({actionID:"selectLineEnd",keyBinding:new n(40,null,!0,!0),predefined:!0})):(t.isLinux&&(r.push({actionID:"selectWholeLineUp",keyBinding:new n(38,!0,!0),predefined:!0}),r.push({actionID:"selectWholeLineDown",keyBinding:new n(40,!0,!0),predefined:!0})),r.push({actionID:"selectLineStart",keyBinding:new n(36,null,!0),predefined:!0}),r.push({actionID:"selectLineEnd",keyBinding:new n(35,null,!0),predefined:!0}),r.push({actionID:"selectWordPrevious",keyBinding:new n(37,!0,!0),predefined:!0}),r.push({actionID:"selectWordNext",keyBinding:new n(39,!0,!0),predefined:!0}),r.push({actionID:"selectTextStart",keyBinding:new n(36,!0,!0),predefined:!0}),r.push({actionID:"selectTextEnd",keyBinding:new n(35,!0,!0),predefined:!0})),r.push({actionID:"undo",keyBinding:new e.KeyBinding("z",!0),predefined:!0}),t.isMac?r.push({actionID:"redo",keyBinding:new e.KeyBinding("z",!0,!0),predefined:!0}):r.push({actionID:"redo",keyBinding:new e.KeyBinding("y",!0),predefined:!0}),r.push({actionID:"deletePrevious",keyBinding:new n(8),predefined:!0}),r.push({actionID:"deletePrevious",keyBinding:new n(8,null,!0),predefined:!0}),r.push({actionID:"deleteNext",keyBinding:new n(46),predefined:!0}),r.push({actionID:"deleteWordPrevious",keyBinding:new n(8,!0),predefined:!0}),r.push({actionID:"deleteWordPrevious",keyBinding:new n(8,!0,!0),predefined:!0}),r.push({actionID:"deleteWordNext",keyBinding:new n(46,!0),predefined:!0}),r.push({actionID:"tab",keyBinding:new n(9),predefined:!0}),r.push({actionID:"shiftTab",keyBinding:new n(9,null,!0),predefined:!0}),r.push({actionID:"enter",keyBinding:new n(13),predefined:!0}),r.push({actionID:"enter",keyBinding:new n(13,null,!0),predefined:!0}),r.push({actionID:"selectAll",keyBinding:new n("a",!0),predefined:!0}),r.push({actionID:"toggleTabMode",keyBinding:new n("m",!0),predefined:!0}),t.isMac&&(r.push({actionID:"deleteNext",keyBinding:new n(46,null,!0),predefined:!0}),r.push({actionID:"deleteWordPrevious",keyBinding:new n(8,null,null,!0),predefined:!0}),r.push({actionID:"deleteWordNext",keyBinding:new n(46,null,null,!0),predefined:!0})),r.push({actionID:"toggleWrapMode",keyBinding:new e.KeyBinding("w",!0,!1,!0)}),r.push({actionID:"toggleOverwriteMode",keyBinding:new e.KeyBinding(45)});if(!t.isFirefox){var i=t.isMac&&t.isChrome;r.push({actionID:"noop",keyBinding:new n("u",!i,!1,!1,i),predefined:!0}),r.push({actionID:"noop",keyBinding:new n("i",!i,!1,!1,i),predefined:!0}),r.push({actionID:"noop",keyBinding:new n("b",!i,!1,!1,i),predefined:!0})}return t.isFirefox&&(r.push({actionID:"copy",keyBinding:new n(45,!0),predefined:!0}),r.push({actionID:"paste",keyBinding:new n(45,null,!0),predefined:!0}),r.push({actionID:"cut",keyBinding:new n(46,null,!0),predefined:!0})),t.isMac&&(r.push({actionID:"lineStart",keyBinding:new n("a",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"lineEnd",keyBinding:new n("e",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"lineUp",keyBinding:new n("p",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"lineDown",keyBinding:new n("n",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"charPrevious",keyBinding:new n("b",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"charNext",keyBinding:new n("f",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"deletePrevious",keyBinding:new n("h",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"deleteNext",keyBinding:new n("d",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"deleteLineEnd",keyBinding:new n("k",!1,!1,!1,!0),predefined:!0}),t.isFirefox?(r.push({actionID:"scrollPageDown",keyBinding:new n("v",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"deleteLineStart",keyBinding:new n("u",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"deleteWordPrevious",keyBinding:new n("w",!1,!1,!1,!0),predefined:!0})):(r.push({actionID:"pageDown",keyBinding:new n("v",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"centerLine",keyBinding:new n("l",!1,!1,!1,!0),predefined:!0}),r.push({actionID:"enterNoCursor",keyBinding:new n("o",!1,!1,!1,!0),predefined:!0}))),r},{KeyMode:n,DefaultKeyMode:r}}),define("orion/editor/textTheme",["require","orion/editor/eventTarget","orion/util"],function(e,t,n){function r(e){e=e||{},this._document=e.document||document}var i={};return r.getTheme=function(e){var e=e||"default",t=i[e];return t||(t=i[e]=new r),t},r.prototype={getThemeClass:function(){return this._themeClass},setThemeClass:function(e,t){var n=this,r=n._themeClass;n._themeClass=e,this._load(e,t,function(){n.onThemeChanged({type:"ThemeChanged",oldValue:r,newValue:n.getThemeClass()})})},onThemeChanged:function(e){return this.dispatchEvent(e)},buildStyleSheet:function(e,t){function n(t,n,i){n&&(r.push("."+e+" ."+t+" {"),r.push("	"+(i?"background-color":"color")+": "+n+";"),r.push("}"))}var r=[];return r.push(""),r.push("."+e+" {"),t.fontFamily&&r.push("	font-family: "+t.fontFamily+";"),t.fontSize&&r.push("	font-size: "+t.fontSize+";"),t.fontSize&&r.push("	color: "+t.text+";"),r.push("}"),r.push("."+e+".textview {"),t.background&&r.push("	background-color: "+t.background+";"),r.push("}"),n("ruler.annotations",t.annotationRuler,!0),n("ruler.lines",t.annotationRuler,!0),n("ruler.folding",t.annotationRuler,!0),n("ruler.overview",t.overviewRuler,!0),n("rulerLines",t.lineNumber,!1),n("rulerLines.even",t.lineNumberEven,!1),n("rulerLines.odd",t.lineNumberOdd,!1),n("annotationLine.currentLine",t.currentLine,!0),n("entity-name-tag",t.keyword,!1),n("entity-other-attribute-name",t.attribute,!1),n("string-quoted",t.string,!1),n("meta.annotation.currentLine",t.currentLine,!0),n("keyword",t.keyword,!1),n("string",t.string,!1),n("comment",t.comment,!1),n("comment.block.documentation",t.comment,!1),n("keyword.other.documentation.markup",t.comment,!1),r.join("\n")},_createStyle:function(e,t,r,i){var s=this._document,e="orion-theme-"+e,o=s.getElementById(e);if(o){if(i||o.firstChild.data===t)return;o.removeChild(o.firstChild),o.appendChild(s.createTextNode(t))}else i?(o=n.createElement(s,"link"),o.rel="stylesheet",o.type="text/css",o.href=t,o.addEventListener("load",function(){r()})):(o=n.createElement(s,"style"),o.appendChild(s.createTextNode(t))),o.id=e,(s.getElementsByTagName("head")[0]||s.documentElement).appendChild(o);i||r()},_load:function(t,n,r){if(t)if(typeof n=="string")this._createStyle(t,n,r);else if(n=n.href,n.substring(n.length-4)!==".css"&&(n+=".css"),/^\//.test(n)||/[a-zA-Z0-9]+:\/\//i.test(n)||!e.toUrl)this._createStyle(t,n,r,!0);else{var i=this;e(["text!"+n],function(e){i._createStyle(t,e,r,!1)})}else r()}},t.EventTarget.addMixin(r.prototype),{TextTheme:r}}),define("orion/editor/util",[],function(){return{contains:function(e,t){if(!t)return!1;if(!e.compareDocumentPosition){for(var n=t;n;){if(e===n)return!0;n=n.parentNode}return!1}return e===t||(e.compareDocumentPosition(t)&16)!==0},addEventListener:function(e,t,n,r){typeof e.addEventListener=="function"?e.addEventListener(t,n,r===!0):e.attachEvent("on"+t,n)},removeEventListener:function(e,t,n,r){typeof e.removeEventListener=="function"?e.removeEventListener(t,n,r===!0):e.detachEvent("on"+t,n)}}}),define("orion/editor/textView","i18n!orion/editor/nls/messages,orion/editor/textModel,orion/editor/keyModes,orion/editor/eventTarget,orion/editor/textTheme,orion/editor/util,orion/util".split(","),function(e,t,n,r,i,s,o){function u(e,t,n){if(n){t.className="";for(var n=t.attributes,r=n.length;r-->0;)(!o.isIE||o.isIE>=9||o.isIE<9&&n[r].specified)&&t.removeAttribute(n[r].name)}if(e){e.styleClass&&(t.className=e.styleClass);if(n=e.style)for(var i in n)n.hasOwnProperty(i)&&(t.style[i]=n[i]);if(e=e.attributes)for(var s in e)e.hasOwnProperty(s)&&t.setAttribute(s,e[s])}}function a(e){return e instanceof Array?e.slice(0):e}function f(e,t){if(!e)return t;if(!t)return e;for(var n in t)t.hasOwnProperty(n)&&(e.hasOwnProperty(n)||(e[n]=t[n]));return e}function l(e,t){if(e===t)return!0;if(e&&!t||!e&&t)return!1;if(e&&e.constructor===String||t&&t.constructor===String)return!1;if(e instanceof Array||t instanceof Array){if(e instanceof Array&&t instanceof Array){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!l(e[n],t[n]))return!1;return!0}return!1}if(e instanceof Object&&t instanceof Object){for(n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(!l(e[n],t[n]))return!1}for(n in t)if(!e.hasOwnProperty(n))return!1;return!0}return!1}function c(e,t,n){for(var r=0,i=0,s=0,o=e.length;s<o;){r!==-1&&r<=s&&(r=e.indexOf("\r",s)),i!==-1&&i<=s&&(i=e.indexOf("\n",s));var u=s,a;if(i===-1&&r===-1){t(e.substring(s));break}r!==-1&&i!==-1?r+1===i?(a=r,s=i+1):(a=r<i?r:i,s=(r<i?r:i)+1):r!==-1?(a=r,s=r+1):(a=i,s=i+1),t(e.substring(u,a)),n()}}function h(e){var t,n,r,i,s=e.ownerDocument.defaultView||e.ownerDocument.parentWindow;return s.getComputedStyle?(e=s.getComputedStyle(e,null),t=e.getPropertyValue("padding-left"),n=e.getPropertyValue("padding-top"),r=e.getPropertyValue("padding-right"),i=e.getPropertyValue("padding-bottom")):e.currentStyle&&(t=e.currentStyle.paddingLeft,n=e.currentStyle.paddingTop,r=e.currentStyle.paddingRight,i=e.currentStyle.paddingBottom),{left:parseInt(t,10)||0,top:parseInt(n,10)||0,right:parseInt(r,10)||0,bottom:parseInt(i,10)||0}}function p(e){var t,n,r,i,s=e._trim;if(!s){var s=h(e),o=e.ownerDocument.defaultView||e.ownerDocument.parentWindow;o.getComputedStyle?(i=o.getComputedStyle(e,null),t=i.getPropertyValue("border-left-width"),n=i.getPropertyValue("border-top-width"),r=i.getPropertyValue("border-right-width"),i=i.getPropertyValue("border-bottom-width")):e.currentStyle&&(t=e.currentStyle.borderLeftWidth,n=e.currentStyle.borderTopWidth,r=e.currentStyle.borderRightWidth,i=e.currentStyle.borderBottomWidth),t=parseInt(t,10)||0,n=parseInt(n,10)||0,r=parseInt(r,10)||0,i=parseInt(i,10)||0,s.left+=t,s.top+=n,s.right+=r,s.bottom+=i,e._trim=s}return s}function d(e,t,n){this.start=e,this.end=t,this.caret=n}function v(e){this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom}function m(e,t,n){this.view=e,this.lineIndex=t,this._lineDiv=n}function g(e){this._init(e||{})}var y=s.addEventListener,b=s.removeEventListener,w=function(){function e(e){this.options=e}return e.prototype.play=function(){var e=typeof this.options.duration=="number"?this.options.duration:350,t=this.options.easing||this.defaultEasing,n=this.options.onAnimate||function(){},r=this.options.curve[0],i=this.options.curve[1],s=i-r,o=-1,u,a=this;this.interval=this.options.window.setInterval(function(){o=o===-1?(new Date).getTime():o;var f=((new Date).getTime()-o)/e;f<1?(f=t(f),u=r+f*s,n(u)):(n(i),a.stop())},typeof this.options.rate=="number"?this.options.rate:20)},e.prototype.stop=function(){this.options.window.clearInterval(this.interval),(this.options.onEnd||function(){})()},e.prototype.defaultEasing=function(e){return Math.sin(e*(Math.PI/2))},e}();return d.prototype={clone:function(){return new d(this.start,this.end,this.caret)},collapse:function(){this.caret?this.end=this.start:this.start=this.end},extend:function(e){this.caret?this.start=e:this.end=e,this.start>this.end&&(e=this.start,this.start=this.end,this.end=e,this.caret=!this.caret)},setCaret:function(e){this.end=this.start=e,this.caret=!1},getCaret:function(){return this.caret?this.start:this.end},toString:function(){return"start="+this.start+" end="+this.end+(this.caret?" caret is at start":" caret is at end")},isEmpty:function(){return this.start===this.end},equals:function(e){return this.caret===e.caret&&this.start===e.start&&this.end===e.end}},v.prototype={toString:function(){return"{l="+this.left+", t="+this.top+", r="+this.right+", b="+this.bottom+"}"}},m.prototype={create:function(e,t){if(!this._lineDiv){var n=this._lineDiv=this._createLine(e,t,this.lineIndex);return n._line=this,n}},_createLine:function(e,t,n){var r=this.view,i=r._model,s=i.getLine(n),a=i.getLineStart(n),f={type:"LineStyle",textView:r,lineIndex:n,lineText:s,lineStart:a};s.length<2e3&&r.onLineStyle(f),i=t||o.createElement(e.ownerDocument,"div");if(!t||!l(t.viewStyle,f.style))u(f.style,i,t),t&&(t._trim=null),i.viewStyle=f.style,i.setAttribute("role","presentation");i.lineIndex=n,n=[],this._createRanges(f.ranges,s,0,s.length,a,{tabOffset:0,ranges:n}),s=" ",!r._fullSelection&&o.isIE<9&&(s=""),f={text:s,style:r._metrics.largestFontStyle,ignoreChars:1},n.length===0||!n[n.length-1].style||n[n.length-1].style.tagName!=="div"?n.push(f):n.splice(n.length-1,0,f);var c,h,p,d,v,s=r=0,m,g;if(t){if(h=t.modelChangedEvent)h.removedLineCount===0&&h.addedLineCount===0?(g=h.start-a,m=h.addedCharCount-h.removedCharCount):g=-1,t.modelChangedEvent=void 0;h=t.firstChild}for(a=0;a<n.length;a++){f=n[a],d=f.text,r+=d.length,c=f.style;if(h){if(v=h.firstChild.data,p=h.viewStyle,v===d&&l(c,p)){s+=v.length,h._rectsCache=void 0,c=h=h.nextSibling;continue}for(;h;){if(g!==-1){p=r,p>=g&&(p-=m),v=(v=h.firstChild.data)?v.length:0;if(s+v>p)break;s+=v}p=h.nextSibling,i.removeChild(h),h=p}}c=this._createSpan(i,d,c,f.ignoreChars),h?i.insertBefore(c,h):i.appendChild(c),t&&(t.lineWidth=void 0)}if(t)for(e=c?c.nextSibling:null;e;)p=e.nextSibling,t.removeChild(e),e=p;else e.appendChild(i);return i},_createRanges:function(e,t,n,r,i,s){if(!(n>r)){if(e)for(var o=0;o<e.length;o++){var u=e[o];if(!(u.end<i+n)){var a=Math.max(i+n,u.start)-i;if(a>r)break;var f=Math.min(i+r,u.end)-i;if(a<=f){a=Math.max(n,a),f=Math.min(r,f),n<a&&this._createRange(t,n,a,null,s);if(!u.style||!u.style.unmergeable)for(;o+1<e.length&&e[o+1].start-i===f&&l(u.style,e[o+1].style);)u=e[o+1],f=Math.min(i+r,u.end)-i,o++;this._createRange(t,a,f,u.style,s),n=f}}}n<r&&this._createRange(t,n,r,null,s)}},_createRange:function(e,t,n,r,i){if(!(t>n)){var s=this.view._customTabSize;if(s&&s!==8)for(var o=e.indexOf("	",t);o!==-1&&o<n;){t<o&&(t={text:e.substring(t,o),style:r},i.ranges.push(t),i.tabOffset+=t.text.length),t=s-i.tabOffset%s;if(t>0){for(var u="",a=1;a<t;a++)u+=" ";t={text:u,style:r,ignoreChars:t-1},i.ranges.push(t),i.tabOffset+=t.text.length}t=o+1;if(t===n)return;o=e.indexOf("	",t)}t<=n&&(t={text:e.substring(t,n),style:r},i.ranges.push(t),i.tabOffset+=t.text.length)}},_createSpan:function(e,t,n,r){var i=this.view,s="span";n&&n.tagName&&(s=n.tagName.toLowerCase());var a=s==="a";a&&(e.hasLink=!0),a&&!i._linksVisible&&(s="span"),a=e.ownerDocument,e=o.createElement(e.ownerDocument,s),n&&n.html?(e.innerHTML=n.html,e.ignore=!0):n&&n.node?(e.appendChild(n.node),e.ignore=!0):e.appendChild(a.createTextNode(n&&n.text?n.text:t)),u(n,e);if(s==="a"){var f=i._getWindow();y(e,"click",function(e){return i._handleLinkClick(e?e:f.event)},!1)}return e.viewStyle=n,r&&(e.ignoreChars=r),e},_ensureCreated:function(){return this._lineDiv?this._lineDiv:this._createdDiv=this.create(this.view._clientDiv,null)},getBoundingClientRect:function(e,t){var n=this._ensureCreated(),r=this.view;if(e===void 0)return this._getLineBoundingClientRect(n,!0);var i=r._model,s=n.ownerDocument,u=this.lineIndex,a=null;if(e<i.getLineEnd(u)){u=i.getLineStart(u);for(i=n.firstChild;i;){if(!i.ignore){var f=i.firstChild,l=f.length;i.ignoreChars&&(l-=i.ignoreChars);if(u+l>e){a=e-u;if(f.length===1)a=new v(i.getBoundingClientRect());else if(r._isRangeRects)s=s.createRange(),s.setStart(f,a),s.setEnd(f,a+1),a=new v(s.getBoundingClientRect());else if(o.isIE){if(s=s.body.createTextRange(),s.moveToElementText(i),s.collapse(),(u=a===0&&o.isIE===8)&&(a=1),s.moveEnd("character",a+1),s.moveStart("character",a),a=new v(s.getBoundingClientRect()),u)a.left=i.getClientRects()[0].left}else{var c=f.data;i.removeChild(f),i.appendChild(s.createTextNode(c.substring(0,a)));var h=o.createElement(s,"span");h.appendChild(s.createTextNode(c.substring(a,a+1))),i.appendChild(h),i.appendChild(s.createTextNode(c.substring(a+1))),a=new v(h.getBoundingClientRect()),i.innerHTML="",i.appendChild(f),this._createdDiv||(s=r._getSelection(),(u<=s.start&&s.start<u+l||u<=s.end&&s.end<u+l)&&r._updateDOMSelection())}o.isIE&&(s=n.ownerDocument.defaultView||n.ownerDocument.parentWindow,n=s.screen.logicalXDPI/s.screen.deviceXDPI,s=s.screen.logicalYDPI/s.screen.deviceYDPI,a.left*=n,a.right*=n,a.top*=s,a.bottom*=s);break}u+=l}i=i.nextSibling}}n=this.getBoundingClientRect(),a||(r._wrapMode?(r=this.getClientRects(),a=r[r.length-1],a.left=a.right,a.left+=n.left,a.top+=n.top,a.right+=n.left,a.bottom+=n.top):(a=new v(n),a.left=a.right));if(t||t===void 0)a.left-=n.left,a.top-=n.top,a.right-=n.left,a.bottom-=n.top;return a},_getClientRects:function(e,t){var n,r,i,s;if(!e._rectsCache){n=e.getClientRects(),r=Array(n.length);for(s=0;s<n.length;s++)i=r[s]=new v(n[s]),i.left-=t.left,i.top-=t.top,i.right-=t.left,i.bottom-=t.top;e._rectsCache=r}n=e._rectsCache,r=[n.length];for(s=0;s<n.length;s++)r[s]=new v(n[s]);return r},getClientRects:function(e){if(!this.view._wrapMode)return[this.getBoundingClientRect()];for(var t=this._ensureCreated(),n=[],r=t.firstChild,i,s=t.getBoundingClientRect();r;){if(!r.ignore)for(var o=this._getClientRects(r,s),t=0;t<o.length;t++){var u=o[t],a;if(u.top!==u.bottom){var f=u.top+(u.bottom-u.top)/2;for(a=0;a<n.length;a++)if(i=n[a],i.top<=f&&f<i.bottom)break;a===n.length?n.push(u):(u.left<i.left&&(i.left=u.left),u.top<i.top&&(i.top=u.top),u.right>i.right&&(i.right=u.right),u.bottom>i.bottom&&(i.bottom=u.bottom))}}r=r.nextSibling}return e!==void 0?n[e]:n},_getLineBoundingClientRect:function(e,t){var n=new v(e.getBoundingClientRect());if(!this.view._wrapMode){n.right=n.left;for(var r=e.lastChild;r&&r.ignoreChars===r.firstChild.length;)r=r.previousSibling;r&&(r=r.getBoundingClientRect(),n.right=r.right+p(e).right)}return t&&(r=p(e),n.left+=r.left,n.right-=r.right),n},getLineCount:function(){return this.view._wrapMode?this.getClientRects().length:1},getLineIndex:function(e){if(!this.view._wrapMode)return 0;for(var t=this.getClientRects(),e=this.getBoundingClientRect(e),e=e.top+(e.bottom-e.top)/2,n=0;n<t.length;n++)if(t[n].top<=e&&e<t[n].bottom)return n;return t.length-1},getLineStart:function(e){if(!this.view._wrapMode||e===0)return this.view._model.getLineStart(e);var t=this.getClientRects();return this.getOffset(t[e].left+1,t[e].top+1)},getOffset:function(e,t){var n=this.view,r=n._model,i=this.lineIndex,s=r.getLineStart(i),u=r.getLineEnd(i);if(s===u)return s;var a=this._ensureCreated(),f=this.getBoundingClientRect(),l,c;if(n._wrapMode){l=this.getClientRects(),t<l[0].top&&(t=l[0].top);for(var h=0;h<l.length;h++)if(c=l[h],c.top<=t&&t<c.bottom)break;e<c.left&&(e=c.left),e>c.right&&(e=c.right-1)}else e<0&&(e=0),e>f.right-f.left&&(e=f.right-f.left);var p=a.ownerDocument,h=p.defaultView||p.parentWindow,d=o.isIE?h.screen.logicalXDPI/h.screen.deviceXDPI:1,v=o.isIE?h.screen.logicalYDPI/h.screen.deviceYDPI:1,h=s,m=a.firstChild;e:for(;m;){if(!m.ignore){var g=m.firstChild,a=g.length;m.ignoreChars&&(a-=m.ignoreChars);var y,b,w;l=this._getClientRects(m,f);for(var E=0;E<l.length;E++)if(c=l[E],c.left<=e&&e<c.right&&(!n._wrapMode||c.top<=t&&t<c.bottom)){var E=c.left+f.left,S;if(o.isIE||n._isRangeRects){for(var p=n._isRangeRects?p.createRange():p.body.createTextRange(),x=a,T=-1;x-T>1;){var N=Math.floor((x+T)/2);l=T+1,c=N===a-1&&m.ignoreChars?g.length:N+1,S=l===0&&o.isIE===8,n._isRangeRects?(p.setStart(g,l),p.setEnd(g,c)):(S&&(l=1),p.moveToElementText(m),p.move("character",l),p.moveEnd("character",c-l)),l=p.getClientRects();for(var C=!1,k=0;k<l.length;k++)if(c=l[k],y=(S?E:c.left)*d-f.left,w=c.right*d-f.left,b=c.top*v-f.top,c=c.bottom*v-f.top,y<=e&&e<w&&(!n._wrapMode||b<=t&&t<c)){C=!0;break}C?x=N:T=N}h+=x,l=x,c=x===a-1&&m.ignoreChars?g.length:Math.min(x+1,g.length),n._isRangeRects?(p.setStart(g,l),p.setEnd(g,c)):(p.moveToElementText(m),p.move("character",l),p.moveEnd("character",c-l)),l=p.getClientRects(),n=!1,l.length>0&&(c=l[0],y=(S?E:c.left)*d-f.left,w=c.right*d-f.left,n=e>y+(w-y)/2),f=h-s,r=r.getLine(i),i=r.charCodeAt(f),55296<=i&&i<=56319&&n?f<r.length&&(i=r.charCodeAt(f+1),56320<=i&&i<=57343&&(h+=1)):56320<=i&&i<=57343&&!n&&f>0&&(i=r.charCodeAt(f-1),55296<=i&&i<=56319&&(h-=1)),n&&h++}else{r=[];for(i=0;i<a;i++)r.push("<span>"),i===a-1?r.push(g.data.substring(i)):r.push(g.data.substring(i,i+1)),r.push("</span>");m.innerHTML=r.join("");for(r=m.firstChild;r;){c=r.getBoundingClientRect(),y=c.left-f.left,w=c.right-f.left;if(y<=e&&e<w){e>y+(w-y)/2&&h++;break}h++,r=r.nextSibling}this._createdDiv||(m.innerHTML="",m.appendChild(g),f=n._getSelection(),(h<=f.start&&f.start<h+a||h<=f.end&&f.end<h+a)&&n._updateDOMSelection())}break e}h+=a}m=m.nextSibling}return Math.min(u,Math.max(s,h))},getNextOffset:function(e,t){if(t.unit==="line"){var n=this.view._model,r=n.getLineAtOffset(e);return t.count>0?(t.count--,n.getLineEnd(r)):(t.count++,n.getLineStart(r))}return t.unit==="wordend"||t.unit==="wordWS"||t.unit==="wordendWS"?this._getNextOffset_W3C(e,t):o.isIE?this._getNextOffset_IE(e,t):this._getNextOffset_W3C(e,t)},_getNextOffset_W3C:function(e,t){function n(e){return 33<=e&&e<=47||58<=e&&e<=64||91<=e&&e<=94||e===96||123<=e&&e<=126}function r(e){return e===32||e===9}var i=this.view._model,s=i.getLineAtOffset(e),o=i.getLine(s),u=i.getLineStart(s),i=i.getLineEnd(s),s=o.length,a=e-u,f,l=t.count<0?-1:1;if(t.unit==="word"||t.unit==="wordend"||t.unit==="wordWS"||t.unit==="wordendWS")for(var c,h,p;t.count!==0;){if(t.count>0){if(a===s)return i;f=o.charCodeAt(a),c=n(f),h=!c&&!r(f);for(a++;a<s;){f=o.charCodeAt(a);if(t.unit!=="wordWS"&&t.unit!=="wordendWS"){p=n(f);if(t.unit==="wordend"){if(!p&&c)break}else if(p&&!c)break;f=!p&&!r(f)}else f=!r(f);if(t.unit==="wordend"||t.unit==="wordendWS"){if(!f&&h)break}else if(f&&!h)break;h=f,c=p,a++}}else{if(a===0)return u;a--,f=o.charCodeAt(a),c=n(f);for(h=!c&&!r(f);0<a;){f=o.charCodeAt(a-1);if(t.unit!=="wordWS"&&t.unit!=="wordendWS"){p=n(f);if(t.unit==="wordend"){if(p&&!c)break}else if(!p&&c)break;f=!p&&!r(f)}else f=!r(f);if(t.unit==="wordend"||t.unit==="wordendWS"){if(f&&!h)break}else if(!f&&h)break;h=f,c=p,a--}}t.count-=l}else for(;t.count!==0&&0<=a+l&&a+l<=s;)a+=l,f=o.charCodeAt(a),56320<=f&&f<=57343&&a>0&&(f=o.charCodeAt(a-1),55296<=f&&f<=56319&&(a+=l)),t.count-=l;return u+a},_getNextOffset_IE:function(e,t){var n=this._ensureCreated(),r=this.view._model,i=this.lineIndex,s=0,o;o=r.getLineStart(i);var u=n.ownerDocument,a=t.count<0?-1:1;if(e===r.getLineEnd(i)){for(n=n.lastChild;n&&n.ignoreChars===n.firstChild.length;)n=n.previousSibling;if(!n)return o;s=u.body.createTextRange(),s.moveToElementText(n),o=s.text.length,s.moveEnd(t.unit,a),s=e+s.text.length-o}else if(e===o&&t.count<0)s=o;else for(n=n.firstChild;n;){r=n.firstChild.length,n.ignoreChars&&(r-=n.ignoreChars);if(o+r>e){s=u.body.createTextRange();if(e===o&&t.count<0){for(o=n.previousSibling;o;){if(o.firstChild&&o.firstChild.length)break;o=o.previousSibling}s.moveToElementText(o?o:n.previousSibling)}else s.moveToElementText(n),s.collapse(),s.moveEnd("character",e-o);o=s.text.length,s.moveEnd(t.unit,a),s=e+s.text.length-o;break}o=r+o,n=n.nextSibling}return t.count-=a,s},destroy:function(){var e=this._createdDiv;e&&(e.parentNode.removeChild(e),this._createdDiv=null)}},g.prototype={addKeyMode:function(e,t){var n=this._keyModes;t!==void 0?n.splice(t,0,e):n.push(e),e._modeAdded&&e._modeAdded()},addRuler:function(e,t){e.setView(this);var n=this._rulers;if(t!==void 0){var r,i;for(r=0,i=0;r<n.length&&i<t;r++)e.getLocation()===n[r].getLocation()&&i++;n.splice(i,0,e),t=i}else n.push(e);this._createRuler(e,t),this._update()},computeSize:function(){var e=0,t=0,n=this._model,r=this._clientDiv;if(!r)return{width:e,height:t};var i=r.style.width;o.isWebkit&&(r.style.width="0x7fffffffpx");for(var n=n.getLineCount(),s=0;s<n;s++){var u=this._getLine(s),a=u.getBoundingClientRect(),e=Math.max(e,a.right-a.left);t+=a.bottom-a.top,u.destroy()}return o.isWebkit&&(r.style.width=i),r=this._getViewPadding(),e+=r.right+r.left+this._metrics.scrollWidth,t+=r.bottom+r.top+this._metrics.scrollWidth,{width:e,height:t}},convert:function(e,t,n){if(this._clientDiv){var r=this._getScroll(),i=this._getViewPadding(),s=this._viewDiv.getBoundingClientRect();return t==="document"&&(e.x!==void 0&&(e.x+=-r.x+s.left+i.left),e.y!==void 0&&(e.y+=-r.y+s.top+i.top)),n==="document"&&(e.x!==void 0&&(e.x+=r.x-s.left-i.left),e.y!==void 0&&(e.y+=r.y-s.top-i.top)),e}},destroy:function(){for(var e=0;e<this._rulers.length;e++)this._rulers[e].setView(null);this.rulers=null,this._destroyView(),this.onDestroy({type:"Destroy"}),this._parent=null,this._model&&this._model.destroy&&this._model.destroy(),this._actions=this._keyModes=this._doubleClickSelection=this._selection=this._theme=this._model=null},focus:function(){this._clientDiv&&(this._updateDOMSelection(),this._clientDiv.focus(),this._updateDOMSelection())},hasFocus:function(){return this._hasFocus},getActionDescription:function(e){if(e=this._actions[e])return e.actionDescription},getActions:function(e){var t=[],n=this._actions,r;for(r in n)n.hasOwnProperty(r)&&(e||!n[r].defaultHandler)&&t.push(r);return t},getBottomIndex:function(e){return this._clientDiv?this._getBottomIndex(e):0},getBottomPixel:function(){return this._clientDiv?this._getScroll().y+this._getClientHeight():0},getCaretOffset:function(){return this._getSelection().getCaret()},getClientArea:function(){if(!this._clientDiv)return{x:0,y:0,width:0,height:0};var e=this._getScroll();return{x:e.x,y:e.y,width:this._getClientWidth(),height:this._getClientHeight()}},getHorizontalPixel:function(){return this._clientDiv?this._getScroll().x:0},getKeyBindings:function(e){for(var t=[],n=this._keyModes,r=0;r<n.length;r++)t=t.concat(n[r].getKeyBindings(e));return t},getKeyModes:function(){return this._keyModes.slice(0)},getLineHeight:function(e){return this._clientDiv?this._getLineHeight(e):0},getLineIndex:function(e){return this._clientDiv?this._getLineIndex(e):0},getLinePixel:function(e){return this._clientDiv?this._getLinePixel(e):0},getLocationAtOffset:function(e){if(!this._clientDiv)return{x:0,y:0};var t=this._model,e=Math.min(Math.max(0,e),t.getCharCount()),t=t.getLineAtOffset(e),n=this._getLine(t),e=n.getBoundingClientRect(e);return n.destroy(),n=e.left,t=this._getLinePixel(t)+e.top,{x:n,y:t}},getNextOffset:function(e,t){var n=new d(e,e,!1);return this._doMove(t,n),n.getCaret()},getOptions:function(){var e;if(arguments.length===0)e=this._defaultOptions();else if(arguments.length===1){if(e=arguments[0],typeof e=="string")return a(this["_"+e])}else{e={};for(var t in arguments)arguments.hasOwnProperty(t)&&(e[arguments[t]]=void 0)}for(var n in e)e.hasOwnProperty(n)&&(e[n]=a(this["_"+n]));return e},getModel:function(){return this._model},getOffsetAtLocation:function(e,t){if(!this._clientDiv)return 0;var n=this._getLineIndex(t),r=this._getLine(n),n=r.getOffset(e,t-this._getLinePixel(n));return r.destroy(),n},getLineAtOffset:function(e){this.getModel().getLineAtOffset(e)},getLineStart:function(e){this.getModel().getLineStart(e)},getRulers:function(){return this._rulers.slice(0)},getSelection:function(){var e=this._getSelection();return{start:e.start,end:e.end}},getText:function(e,t){return this._model.getText(e,t)},getTopIndex:function(e){return this._clientDiv?this._getTopIndex(e):0},getTopPixel:function(){return this._clientDiv?this._getScroll().y:0},invokeAction:function(e,t,n){if(this._clientDiv){if(e=this._actions[e]){if(!t&&e.handler&&e.handler(n))return!0;if(e.defaultHandler)return typeof e.defaultHandler(n)=="boolean"}return!1}},isDestroyed:function(){return!this._clientDiv},onContextMenu:function(e){return this.dispatchEvent(e)},onDragStart:function(e){return this.dispatchEvent(e)},onDrag:function(e){return this.dispatchEvent(e)},onDragEnd:function(e){return this.dispatchEvent(e)},onDragEnter:function(e){return this.dispatchEvent(e)},onDragOver:function(e){return this.dispatchEvent(e)},onDragLeave:function(e){return this.dispatchEvent(e)},onDrop:function(e){return this.dispatchEvent(e)},onDestroy:function(e){return this.dispatchEvent(e)},onLineStyle:function(e){return this.dispatchEvent(e)},onKeyDown:function(e){return this.dispatchEvent(e)},onKeyPress:function(e){return this.dispatchEvent(e)},onKeyUp:function(e){return this.dispatchEvent(e)},onModelChanged:function(e){return this.dispatchEvent(e)},onModelChanging:function(e){return this.dispatchEvent(e)},onModify:function(e){return this.dispatchEvent(e)},onMouseDown:function(e){return this.dispatchEvent(e)},onMouseUp:function(e){return this.dispatchEvent(e)},onMouseMove:function(e){return this.dispatchEvent(e)},onMouseOver:function(e){return this.dispatchEvent(e)},onMouseOut:function(e){return this.dispatchEvent(e)},onSelection:function(e){return this.dispatchEvent(e)},onScroll:function(e){return this.dispatchEvent(e)},onVerify:function(e){return this.dispatchEvent(e)},onFocus:function(e){return this.dispatchEvent(e)},onBlur:function(e){return this.dispatchEvent(e)},redraw:function(){if(!(this._redrawCount>0)){var e=this._model.getLineCount();this.redrawRulers(0,e),this.redrawLines(0,e)}},redrawRulers:function(e,t){if(!(this._redrawCount>0))for(var n=this.getRulers(),r=0;r<n.length;r++)this.redrawLines(e,t,n[r])},redrawLines:function(e,t,n){if(!(this._redrawCount>0)&&(e===void 0&&(e=0),t===void 0&&(t=this._model.getLineCount()),e!==t)){var r=this._clientDiv;if(r){if(n)for(r=this._getRulerParent(n).firstChild;r;){if(r._ruler===n)break;r=r.nextSibling}n?r.rulerChanged=!0:this._lineHeight&&this._resetLineHeight(e,t);if(!n||n.getOverview()==="page")for(r=r.firstChild;r;){var i=r.lineIndex;e<=i&&i<t&&(r.lineChanged=!0),r=r.nextSibling}!n&&!this._wrapMode&&e<=this._maxLineIndex&&this._maxLineIndex<t&&(this._checkMaxLineIndex=this._maxLineIndex,this._maxLineIndex=-1,this._maxLineWidth=0),this._queueUpdate()}}},redrawRange:function(e,t){if(!(this._redrawCount>0)){var n=this._model;e===void 0&&(e=0),t===void 0&&(t=n.getCharCount());var r=n.getLineAtOffset(e),n=n.getLineAtOffset(Math.max(e,t-1))+1;this.redrawLines(r,n)}},removeKeyMode:function(e){for(var t=this._keyModes,n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}e._modeRemoved&&e._modeRemoved()},removeRuler:function(e){for(var t=this._rulers,n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1),e.setView(null),this._destroyRuler(e),this._update();break}},resize:function(){this._clientDiv&&this._handleResize(null)},setAction:function(e,t,n){if(e){var r=this._actions,i=r[e];i||(i=r[e]={}),i.handler=t,n!==void 0&&(i.actionDescription=n)}},setKeyBinding:function(e,t){this._keyModes[0].setKeyBinding(e,t)},setCaretOffset:function(e,t,n){var r=this._model.getCharCount(),e=Math.max(0,Math.min(e,r));this._setSelection(new d(e,e,!1),t===void 0||t,!0,n)},setHorizontalPixel:function(e){this._clientDiv&&(e=Math.max(0,e),this._scrollView(e-this._getScroll().x,0))},setRedraw:function(e){e?--this._redrawCount===0&&this.redraw():this._redrawCount++},setModel:function(e){if(e&&e!==this._model){this._model.removeEventListener("preChanging",this._modelListener.onChanging),this._model.removeEventListener("postChanged",this._modelListener.onChanged);var t=this._model.getLineCount(),n=this._model.getCharCount(),r=e.getLineCount(),i=e.getCharCount(),s={type:"ModelChanging",text:e.getText(),start:0,removedCharCount:n,addedCharCount:i,removedLineCount:t,addedLineCount:r};this.onModelChanging(s),this._model=e,s={type:"ModelChanged",start:0,removedCharCount:n,addedCharCount:i,removedLineCount:t,addedLineCount:r},this.onModelChanged(s),this._model.addEventListener("preChanging",this._modelListener.onChanging),this._model.addEventListener("postChanged",this._modelListener.onChanged),this._reset(),this._update()}},setOptions:function(e){var t=this._defaultOptions(),n;for(n in e)if(e.hasOwnProperty(n)){var r=e[n];if(!l(this["_"+n],r)){var i=t[n]?t[n].update:null;i?i.call(this,r):this["_"+n]=a(r)}}},setSelection:function(e,t,n,r){var i=e>t;if(i)var s=e,e=t,t=s;s=this._model.getCharCount(),e=Math.max(0,Math.min(e,s)),t=Math.max(0,Math.min(t,s)),this._setSelection(new d(e,t,i),n===void 0||n,!0,r)},setText:function(e,t,n){var r=t===void 0&&n===void 0;t===void 0&&(t=0),n===void 0&&(n=this._model.getCharCount()),r&&(this._variableLineHeight=!1),this._modifyContent({text:e,start:t,end:n,_code:!0},!r),r&&(this._columnX=-1,this._setSelection(new d(0,0,!1),!0),o.isFirefox&&this._fixCaret())},setTopIndex:function(e){this._clientDiv&&this._scrollView(0,this._getLinePixel(Math.max(0,e))-this._getScroll().y)},setTopPixel:function(e){this._clientDiv&&this._scrollView(0,Math.max(0,e)-this._getScroll().y)},showSelection:function(){return this._showCaret(!0)},update:function(e,t){this._clientDiv&&(e&&this._updateStyle(),t===void 0||t?this._update():this._queueUpdate())},_handleRootMouseDown:function(e){if(!this._ignoreEvent(e)){o.isFirefox&&e.which===1&&(this._clientDiv.contentEditable=!1,this._ignoreBlur=(this._overlayDiv||this._clientDiv).draggable=!0);var t=this._overlayDiv||this._clientDiv;o.isIE<9&&(t=this._viewDiv);for(var n=e.target?e.target:e.srcElement;n;){if(t===n)return;n=n.parentNode}e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation();if(!this._isW3CEvents){var r=this;this._getWindow().setTimeout(function(){r._clientDiv.focus()},0)}}},_handleRootMouseUp:function(e){!this._ignoreEvent(e)&&o.isFirefox&&e.which===1&&(this._clientDiv.contentEditable=!0,(this._overlayDiv||this._clientDiv).draggable=!1,this._fixCaret(),this._ignoreBlur=!1)},_handleBlur:function(){if(!this._ignoreBlur){this._hasFocus=!1;if(o.isIE<9&&!this._getSelection().isEmpty()){var e=this._rootDiv,t=o.createElement(e.ownerDocument,"div");e.appendChild(t),e.removeChild(t)}this._cursorDiv&&(this._cursorDiv.style.display="none");if(this._selDiv1)if(this._selDiv1.style.background="lightgray",this._selDiv2.style.background="lightgray",this._selDiv3.style.background="lightgray",e=this._getWindow(),t=this._selDiv1.ownerDocument,e.getSelection){t=e.getSelection();for(e=t.anchorNode;e;){if(e===this._clientDiv){t.rangeCount>0&&t.removeAllRanges();break}e=e.parentNode}}else if(t.selection){this._ignoreSelect=!1;for(e=t.selection.createRange().parentElement();e;){if(e===this._clientDiv){t.selection.empty();break}e=e.parentNode}this._ignoreSelect=!0}this._ignoreFocus||this.onBlur({type:"Blur"})}},_handleContextMenu:function(e){if(!this._ignoreEvent(e)){o.isIE&&this._lastMouseButton===3&&this._updateDOMSelection();var t=!1;this.isListening("ContextMenu")?(t=this._createMouseEvent("ContextMenu",e),t.screenX=e.screenX,t.screenY=e.screenY,this.onContextMenu(t),t=t.defaultPrevented):o.isMac&&o.isFirefox&&e.button===0&&(t=!0);if(t)return e.preventDefault&&e.preventDefault(),!1}},_handleCopy:function(e){if(!this._ignoreEvent(e)&&!this._ignoreCopy&&this._doCopy(e))return e.preventDefault&&e.preventDefault(),!1},_handleCut:function(e){if(!this._ignoreEvent(e)&&this._doCut(e))return e.preventDefault&&e.preventDefault(),!1},_handleDataModified:function(e){this._ignoreEvent(e)||this._startIME()},_handleDblclick:function(e){!this._ignoreEvent(e)&&(this._lastMouseTime=e.timeStamp?e.timeStamp:(new Date).getTime(),this._clickCount!==2)&&(this._clickCount=2,this._handleMouse(e))},_handleDragStart:function(e){if(!this._ignoreEvent(e)){if(o.isFirefox){var t=this;this._getWindow().setTimeout(function(){t._clientDiv.contentEditable=!0,t._clientDiv.draggable=!1,t._ignoreBlur=!1},0)}if(!this.isListening("DragStart")||this._dragOffset===-1)return e.preventDefault&&e.preventDefault(),!1;this._isMouseDown=!1,this.onDragStart(this._createMouseEvent("DragStart",e)),this._dragOffset=-1}},_handleDrag:function(e){!this._ignoreEvent(e)&&this.isListening("Drag")&&this.onDrag(this._createMouseEvent("Drag",e))},_handleDragEnd:function(e){this._ignoreEvent(e)||(this._dropTarget=!1,this._dragOffset=-1,this.isListening("DragEnd")&&this.onDragEnd(this._createMouseEvent("DragEnd",e)),o.isFirefox&&(this._fixCaret(),e.dataTransfer.dropEffect==="none"&&!e.dataTransfer.mozUserCancelled&&this._fixCaret()))},_handleDragEnter:function(e){if(!this._ignoreEvent(e)){var t=!0;this._dropTarget=!0,this.isListening("DragEnter")&&(t=!1,this.onDragEnter(this._createMouseEvent("DragEnter",e)));if(o.isWebkit||t)return e.preventDefault&&e.preventDefault(),!1}},_handleDragOver:function(e){if(!this._ignoreEvent(e)){var t=!0;this.isListening("DragOver")&&(t=!1,this.onDragOver(this._createMouseEvent("DragOver",e)));if(o.isWebkit||t)return t&&(e.dataTransfer.dropEffect="none"),e.preventDefault&&e.preventDefault(),!1}},_handleDragLeave:function(e){!this._ignoreEvent(e)&&(this._dropTarget=!1,this.isListening("DragLeave"))&&this.onDragLeave(this._createMouseEvent("DragLeave",e))},_handleDrop:function(e){if(!this._ignoreEvent(e))return this._dropTarget=!1,this.isListening("Drop")&&this.onDrop(this._createMouseEvent("Drop",e)),e.preventDefault&&e.preventDefault(),!1},_handleFocus:function(){this._hasFocus=!0,o.isIOS&&this._lastTouchOffset!==void 0?(this.setCaretOffset(this._lastTouchOffset,!0),this._lastTouchOffset=void 0):this._updateDOMSelection(),this._cursorDiv&&(this._cursorDiv.style.display="block");if(this._selDiv1){var e=this._highlightRGB;this._selDiv1.style.background=e,this._selDiv2.style.background=e,this._selDiv3.style.background=e}this._ignoreFocus||this.onFocus({type:"Focus"})},_handleKeyDown:function(e){if(!this._ignoreEvent(e)){if(this.isListening("KeyDown")){var t=this._createKeyEvent("KeyDown",e);this.onKeyDown(t);if(t.defaultPrevented){o.isFirefox&&(this._keyDownPrevented=!0),e.preventDefault();return}}t=!1;switch(e.keyCode){case 16:case 17:case 18:case 91:t=!0;break;default:this._setLinksVisible(!1)}if(e.keyCode===229){if(this._readonly)return e.preventDefault&&e.preventDefault(),!1;t=!0,o.isSafari&&o.isMac&&e.ctrlKey&&(t=!1,e.keyCode=129),t&&this._startIME()}else t||this._commitIME();if((o.isMac||o.isLinux)&&o.isFirefox<4||o.isOpera<12.16)return this._keyDownEvent=e,!0;if(this._doAction(e))return e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1,e.keyCode=0),!1}},_handleKeyPress:function(e){if(!this._ignoreEvent(e))if(this._keyDownPrevented)e.preventDefault&&(e.preventDefault(),e.stopPropagation()),this._keyDownPrevented=void 0;else{if(o.isMac&&o.isWebkit&&(63232<=e.keyCode&&e.keyCode<=63487||e.keyCode===13||e.keyCode===8))return e.preventDefault&&e.preventDefault(),!1;if(((o.isMac||o.isLinux)&&o.isFirefox<4||o.isOpera<12.16)&&this._doAction(this._keyDownEvent))return e.preventDefault&&e.preventDefault(),!1;var t=o.isMac?e.metaKey:e.ctrlKey;if(e.charCode!==void 0&&t)switch(e.charCode){case 99:case 118:case 120:return!0}if(this.isListening("KeyPress")&&(t=this._createKeyEvent("KeyPress",e),this.onKeyPress(t),t.defaultPrevented)){e.preventDefault();return}if(this._doAction(e))return e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1,e.keyCode=0),!1;t=!1;if(o.isMac){if(e.ctrlKey||e.metaKey)t=!0}else if(o.isFirefox){if(e.ctrlKey||e.altKey)t=!0}else e.ctrlKey^e.altKey&&(t=!0);if(!t&&(t=o.isOpera?e.which:e.charCode!==void 0?e.charCode:e.keyCode,t>31))return this._doContent(String.fromCharCode(t)),e.preventDefault&&e.preventDefault(),!1}},_handleDocKeyUp:function(e){(o.isMac?e.metaKey:e.ctrlKey)||this._setLinksVisible(!1)},_handleKeyUp:function(e){if(!this._ignoreEvent(e)){if(this.isListening("KeyUp")){var t=this._createKeyEvent("KeyUp",e);this.onKeyUp(t);if(t.defaultPrevented){e.preventDefault();return}}this._handleDocKeyUp(e),e.keyCode===13&&this._commitIME()}},_handleLinkClick:function(e){if(o.isMac?!e.metaKey:!e.ctrlKey)return e.preventDefault&&e.preventDefault(),!1},_handleMouse:function(e){var t=this._getWindow(),n=!0,r=t;if(o.isIE||o.isFirefox&&!this._overlayDiv)r=this._clientDiv;if(this._overlayDiv){this._hasFocus&&(this._ignoreFocus=!0);var i=this;t.setTimeout(function(){i.focus(),i._ignoreFocus=!1},0)}return this._clickCount===1?(n=this._setSelectionTo(e.clientX,e.clientY,e.shiftKey,(!o.isOpera||o.isOpera>=12.16)&&this._hasFocus&&this.isListening("DragStart")))&&this._setGrab(r):(this._isW3CEvents&&this._setGrab(r),this._doubleClickSelection=null,this._setSelectionTo(e.clientX,e.clientY,e.shiftKey),this._doubleClickSelection=this._getSelection()),n},_handleMouseDown:function(e){if(!this._ignoreEvent(e)){if(this._linksVisible){if((e.target||e.srcElement).tagName==="A")return;this._setLinksVisible(!1)}this._commitIME();var t=e.which;t||(e.button===4&&(t=2),e.button===2&&(t=3),e.button===1&&(t=1));var n=t!==2&&e.timeStamp?e.timeStamp:(new Date).getTime(),r=n-this._lastMouseTime,i=Math.abs(this._lastMouseX-e.clientX),s=Math.abs(this._lastMouseY-e.clientY),u=this._lastMouseButton===t;this._lastMouseX=e.clientX,this._lastMouseY=e.clientY,this._lastMouseTime=n,this._lastMouseButton=t,t===1&&(this._isMouseDown=!0,u&&r<=this._clickTime&&i<=this._clickDist&&s<=this._clickDist?this._clickCount++:this._clickCount=1);if(this.isListening("MouseDown")&&(n=this._createMouseEvent("MouseDown",e),this.onMouseDown(n),n.defaultPrevented)){e.preventDefault();return}t===1&&this._handleMouse(e)&&(o.isIE>=9||o.isOpera||o.isChrome||o.isSafari||o.isFirefox&&!this._overlayDiv)&&(this._hasFocus||this.focus(),e.preventDefault()),o.isFirefox&&this._lastMouseButton===3&&this._updateDOMSelection()}},_handleMouseOver:function(e){!this._ignoreEvent(e)&&!this._animation&&this.isListening("MouseOver")&&this.onMouseOver(this._createMouseEvent("MouseOver",e))},_handleMouseOut:function(e){!this._ignoreEvent(e)&&!this._animation&&this.isListening("MouseOut")&&this.onMouseOut(this._createMouseEvent("MouseOut",e))},_handleMouseMove:function(e){if(!this._animation){var t=this._isClientDiv(e);this.isListening("MouseMove")&&t&&this.onMouseMove(this._createMouseEvent("MouseMove",e));if(!this._dropTarget){var n=this._linksVisible||this._lastMouseMoveX!==e.clientX||this._lastMouseMoveY!==e.clientY;this._lastMouseMoveX=e.clientX,this._lastMouseMoveY=e.clientY,this._setLinksVisible(n&&!this._isMouseDown&&(o.isMac?e.metaKey:e.ctrlKey));if(!this._isW3CEvents){if(e.button===0)return this._setGrab(null),!0;if(!this._isMouseDown&&e.button===1&&(this._clickCount&1)!==0&&t)return this._clickCount=2,this._handleMouse(e,this._clickCount)}if(this._isMouseDown&&this._dragOffset===-1){var t=e.clientX,e=e.clientY,r=this._getViewPadding(),i=this._viewDiv.getBoundingClientRect(),s=this._getClientWidth(),u=this._getClientHeight(),n=i.left+r.left,a=i.top+r.top,s=i.left+r.left+s,r=i.top+r.top+u;e<a?this._doAutoScroll("up",t,e-a):e>r?this._doAutoScroll("down",t,e-r):t<n&&!this._wrapMode?this._doAutoScroll("left",t-n,e):t>s&&!this._wrapMode?this._doAutoScroll("right",t-s,e):(this._endAutoScroll(),this._setSelectionTo(t,e,!0))}}}},_isClientDiv:function(e){for(var t=this._overlayDiv||this._clientDiv,e=e.target?e.target:e.srcElement;e;){if(t===e)return!0;e=e.parentNode}return!1},_createKeyEvent:function(e,t){return{type:e,event:t,preventDefault:function(){this.defaultPrevented=!0}}},_createMouseEvent:function(e,t){var n=this.convert({x:t.clientX,y:t.clientY},"page","document");return{type:e,event:t,clickCount:this._clickCount,x:n.x,y:n.y,preventDefault:function(){this.defaultPrevented=!0}}},_handleMouseUp:function(e){var t=e.which?e.button===0:e.button===1;this.isListening("MouseUp")&&(this._isClientDiv(e)||t&&this._isMouseDown)&&this.onMouseUp(this._createMouseEvent("MouseUp",e)),!this._linksVisible&&t&&this._isMouseDown&&(this._dragOffset!==-1&&(t=this._getSelection(),t.extend(this._dragOffset),t.collapse(),this._setSelection(t,!0,!0),this._dragOffset=-1),this._isMouseDown=!1,this._endAutoScroll(),this._isW3CEvents&&this._setGrab(null),o.isFirefox&&e.preventDefault())},_handleMouseWheel:function(e){var t=this._getLineHeight(),n=0,r=0;o.isIE||o.isOpera?r=-e.wheelDelta/40*t:o.isFirefox?e.type==="wheel"?e.deltaMode?(n=Math.max(-256,Math.min(256,e.deltaX))*t,r=Math.max(-256,Math.min(256,e.deltaY))*t):(n=e.deltaX,r=e.deltaY):(t=o.isMac?e.detail*3:Math.max(-256,Math.min(256,e.detail))*t,e.axis===e.HORIZONTAL_AXIS?n=t:r=t):o.isMac?(r=e.timeStamp-this._wheelTimeStamp,this._wheelTimeStamp=e.timeStamp,n=e.wheelDeltaX%120!==0?1:r<40?40/(40-r):40,r=e.wheelDeltaY%120!==0?1:r<40?40/(40-r):40,n=Math.ceil(-e.wheelDeltaX/n),-1<n&&n<0&&(n=-1),0<n&&n<1&&(n=1),r=Math.ceil(-e.wheelDeltaY/r),-1<r&&r<0&&(r=-1),0<r&&r<1&&(r=1)):(n=-e.wheelDeltaX,r=-e.wheelDeltaY/120*8*t);if(o.isSafari||o.isChrome&&o.isMac){for(t=e.target;t&&t.lineIndex===void 0;)t=t.parentNode;this._mouseWheelLine=t}t=this._getScroll(),this._scrollView(n,r),n=this._getScroll();if(t.x!==n.x||t.y!==n.y)return e.preventDefault&&e.preventDefault(),!1},_handlePaste:function(e){if(!this._ignoreEvent(e)&&!this._ignorePaste&&this._doPaste(e)){if(o.isIE){var t=this;this._ignoreFocus=!0,this._getWindow().setTimeout(function(){t._updateDOMSelection(),t._ignoreFocus=!1},0)}return e.preventDefault&&e.preventDefault(),!1}},_handleResize:function(){var e=this._rootDiv.clientWidth,t=this._rootDiv.clientHeight;if(this._rootWidth!==e||this._rootHeight!==t)this._rootWidth!==e&&this._wrapMode&&this._resetLineHeight(),this._rootWidth=e,this._rootHeight=t,e=o.isIE<9,t=this._calculateMetrics(),l(t,this._metrics)||(this._variableLineHeight&&(this._variableLineHeight=!1,this._resetLineHeight()),this._metrics=t,e=!0),e?this._queueUpdate():this._update()},_handleRulerEvent:function(e){for(var t=e.target?e.target:e.srcElement,n=t.lineIndex;t&&!t._ruler;)n===void 0&&t.lineIndex!==void 0&&(n=t.lineIndex),t=t.parentNode;var r=t?t._ruler:null;if(n===void 0&&r&&r.getOverview()==="document"){var n=this._getClientHeight(),i=this._model.getLineCount(),s=this._getViewPadding(),o=this._viewDiv.getBoundingClientRect(),n=Math.floor((e.clientY-o.top-this._metrics.scrollWidth)*i/(n+s.top+s.bottom-2*this._metrics.scrollWidth));0<=n&&n<i||(n=void 0)}if(r)switch(e.type){case"click":r.onClick&&r.onClick(n,e);break;case"dblclick":r.onDblClick&&r.onDblClick(n,e);break;case"mousemove":r.onMouseMove&&r.onMouseMove(n,e);break;case"mouseover":r.onMouseOver&&r.onMouseOver(n,e);break;case"mouseout":if(r.onMouseOut){for(i=e.relatedTarget;i&&i!==this._rootDiv;){if(i===t)return;i=i.parentNode}r.onMouseOut(n,e)}}},_handleScroll:function(){var e=this._getScroll(!1),t=this._hScroll,n=this._vScroll;if(t!==e.x||n!==e.y)this._hScroll=e.x,this._vScroll=e.y,this._commitIME(),this._update(n===e.y),this.onScroll({type:"Scroll",oldValue:{x:t,y:n},newValue:e})},_handleSelectStart:function(e){if(this._ignoreSelect)return e&&e.preventDefault&&e.preventDefault(),!1},_getModelOffset:function(e,t){if(e){var n;n=e.tagName==="DIV"?e:e.parentNode.parentNode;var r=0,i=n.lineIndex;if(e.tagName!=="DIV")for(n=n.firstChild;n;){var s=n.firstChild;if(s===e){n.ignoreChars&&(r-=n.ignoreChars),r+=t;break}n.ignoreChars&&(r-=n.ignoreChars),r+=s.data.length,n=n.nextSibling}return Math.max(0,r)+this._model.getLineStart(i)}},_updateSelectionFromDOM:function(){var e=this._getWindow().getSelection(),t=this._getModelOffset(e.anchorNode,e.anchorOffset),e=this._getModelOffset(e.focusNode,e.focusOffset);t===void 0||e===void 0||this._setSelection(new d(t,e),!1,!1)},_handleSelectionChange:function(){if(this._imeOffset===-1)if(o.isAndroid){var e=this._getWindow();this._selTimer&&e.clearTimeout(this._selTimer);var t=this;this._selTimer=e.setTimeout(function(){t._clientDiv&&(t._selTimer=null,t._updateSelectionFromDOM())},250)}else this._updateSelectionFromDOM()},_handleTextInput:function(e){if(!this._ignoreEvent(e)){this._imeOffset=-1;var t=this._getWindow().getSelection();if(t.anchorNode!==this._anchorNode||t.focusNode!==this._focusNode||t.anchorOffset!==this._anchorOffset||t.focusOffset!==this._focusOffset){for(var n=t.anchorNode;n;){if(n.lineIndex!==void 0)break;n=n.parentNode}if(n){var r=this._model,i=n.lineIndex,s=r.getLine(i),o=s,u=0,r=r.getLineStart(i);t.rangeCount>0&&(t.getRangeAt(0).deleteContents(),i=n.ownerDocument.createTextNode(e.data),t.getRangeAt(0).insertNode(i),u=this._getDOMText(n,i),o=u.text,u=u.offset,i.parentNode.removeChild(i)),n.lineRemoved=!0;for(n=0;s.charCodeAt(n)===o.charCodeAt(n)&&n<u;)n++;t=s.length-1;for(i=o.length-s.length;s.charCodeAt(t)===o.charCodeAt(t+i)&&t+i>=u+e.data.length;)t--;t++,s=o.substring(n,t+i),n+=r,t+=r,this._modifyContent({text:s,start:n,end:t,_ignoreDOMSelection:!0},!0)}}else this._doContent(e.data);e.preventDefault()}},_handleTouchStart:function(e){this._commitIME();var t=this._getWindow();this._touchScrollTimer&&(this._vScrollDiv.style.display="none",this._hScrollDiv.style.display="none",t.clearInterval(this._touchScrollTimer),this._touchScrollTimer=null);var n=e.touches;if(n.length===1){var n=n[0],r=n.clientX,i=n.clientY;this._touchStartX=r,this._touchStartY=i,o.isAndroid&&(i<n.pageY-t.pageYOffset||r<n.pageX-t.pageXOffset)&&(r=n.pageX-t.pageXOffset,i=n.pageY-t.pageYOffset),t=this.convert({x:r,y:i},"page","document"),this._lastTouchOffset=this.getOffsetAtLocation(t.x,t.y),this._touchStartTime=e.timeStamp,this._touching=!0}},_handleTouchMove:function(e){var t=e.touches;if(t.length===1){t=t[0],this._touchCurrentX=t.clientX,this._touchCurrentY=t.clientY;if(!this._touchScrollTimer&&e.timeStamp-this._touchStartTime<200){this._vScrollDiv.style.display="block",this._wrapMode||(this._hScrollDiv.style.display="block");var n=this,r=this._getWindow();this._touchScrollTimer=r.setInterval(function(){var e=0,t=0;if(n._touching)e=n._touchStartX-n._touchCurrentX,t=n._touchStartY-n._touchCurrentY,n._touchSpeedX=e/10,n._touchSpeedY=t/10,n._touchStartX=n._touchCurrentX,n._touchStartY=n._touchCurrentY;else{if(Math.abs(n._touchSpeedX)<.1&&Math.abs(n._touchSpeedY)<.1){n._vScrollDiv.style.display="none",n._hScrollDiv.style.display="none",r.clearInterval(n._touchScrollTimer),n._touchScrollTimer=null;return}e=n._touchSpeedX*10,t=n._touchSpeedY*10,n._touchSpeedX*=.95,n._touchSpeedY*=.95}n._scrollView(e,t)},10)}this._touchScrollTimer&&e.preventDefault()}},_handleTouchEnd:function(e){e.touches.length===0&&(this._touching=!1)},_doAction:function(e){var t,n,r=this._keyModes;for(n=r.length-1;n>=0;n--)if(t=r[n],typeof t.match=="function"&&(t=t.match(e),t!==void 0))return this.invokeAction(t);return!1},_doMove:function(e,t){var n=this._model,r=t.getCaret(),i=n.getLineAtOffset(r);e.count||(e.count=1);for(;e.count!==0;){var s=n.getLineStart(i);if(e.count<0&&r===s){if(!(i>0))break;e.unit==="character"&&e.count++,i--,t.extend(n.getLineEnd(i))}else if(e.count>0&&r===n.getLineEnd(i)){if(!(i+1<n.getLineCount()))break;e.unit==="character"&&e.count--,i++,t.extend(n.getLineStart(i))}else{var o=!1;e.expandTab&&e.unit==="character"&&(r-s)%this._tabSize===0&&(o=!/[^ ]/.test(n.getText(s,r))),o?(t.extend(r-this._tabSize),e.count+=e.count<0?1:-1):(s=this._getLine(i),t.extend(s.getNextOffset(r,e)),s.destroy())}r=t.getCaret()}return t},_doBackspace:function(e){var t=this._getSelection();return t.isEmpty()&&(e.count||(e.count=1),e.count*=-1,e.expandTab=this._expandTab,this._doMove(e,t)),this._modifyContent({text:"",start:t.start,end:t.end},!0),!0},_doCase:function(e){var t=this._getSelection();this._doMove(e,t);var n=this.getText(t.start,t.end);this._setSelection(t,!0);switch(e.type){case"lower":n=n.toLowerCase();break;case"capitalize":n=n.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()});break;case"reverse":e="";for(t=0;t<n.length;t++){var r=n[t],i=r.toLowerCase(),r=i!==r?i:r.toUpperCase();e+=r}n=e;break;default:n=n.toUpperCase()}return this._doContent(n),!0},_doContent:function(e){var t=this._getSelection();if(this._overwriteMode&&t.isEmpty()){var n=this._model,r=n.getLineAtOffset(t.end);t.end<n.getLineEnd(r)&&(n=this._getLine(r),t.extend(n.getNextOffset(t.getCaret(),{unit:"character",count:1})),n.destroy())}this._modifyContent({text:e,start:t.start,end:t.end,_ignoreDOMSelection:!0},!0)},_doCopy:function(e){var t=this._getSelection();return t.isEmpty()?!0:this._setClipboardText(this._getBaseText(t.start,t.end),e)},_doCursorNext:function(e){var t=this._getSelection();return!t.isEmpty()&&!e.select?t.start=t.end:this._doMove(e,t),e.select||t.collapse(),this._setSelection(t,!0),!0},_doCursorPrevious:function(e){var t=this._getSelection();return!t.isEmpty()&&!e.select?t.end=t.start:(e.count||(e.count=1),e.count*=-1,this._doMove(e,t)),e.select||t.collapse(),this._setSelection(t,!0),!0},_doCut:function(e){var t=this._getSelection();return t.isEmpty()?!0:(t=this._getBaseText(t.start,t.end),this._doContent(""),this._setClipboardText(t,e))},_doDelete:function(e){var t=this._getSelection();return t.isEmpty()&&this._doMove(e,t),this._modifyContent({text:"",start:t.start,end:t.end},!0),!0},_doEnd:function(e){var t=this._getSelection(),n=this._model,r;if(e.ctrl)t.extend(n.getCharCount()),r=function(){};else{var i=t.getCaret(),s=n.getLineAtOffset(i);if(this._wrapMode){var o=this._getLine(s),i=o.getLineIndex(i),i=i===o.getLineCount()-1?n.getLineEnd(s):o.getLineStart(i+1)-1;o.destroy()}else e.count&&e.count>0&&(s=Math.min(s+e.count-1,n.getLineCount()-1)),i=n.getLineEnd(s);t.extend(i)}return e.select||t.collapse(),this._setSelection(t,!0,!0,r),!0},_doEnter:function(e){var t=this._model,n=this._getSelection();return this._doContent(t.getLineDelimiter()),e&&e.noCursor&&(n.end=n.start,this._setSelection(n,!0)),!0},_doHome:function(e){var t=this._getSelection(),n=this._model,r;if(e.ctrl)t.extend(0),r=function(){};else{var i=t.getCaret(),s=n.getLineAtOffset(i);this._wrapMode?(n=this._getLine(s),i=n.getLineIndex(i),i=n.getLineStart(i),n.destroy()):i=n.getLineStart(s),t.extend(i)}return e.select||t.collapse(),this._setSelection(t,!0,!0,r),!0},_doLineDown:function(e){var t=this._model,n=this._getSelection(),r=n.getCaret(),i=t.getLineAtOffset(r),s=this._getLine(i),u=this._columnX,a=1,f=!1;if(u===-1||e.wholeLine||e.select&&o.isIE)u=e.wholeLine?t.getLineEnd(i+1):r,u=s.getBoundingClientRect(u).left;(r=s.getLineIndex(r))<s.getLineCount()-1?a=s.getClientRects(r+1).top+1:(r=t.getLineCount()-1,f=i===r,e.count&&e.count>0?i=Math.min(i+e.count,r):i++),r=!1;if(f){if(e.select||o.isMac||o.isLinux)n.extend(t.getCharCount()),r=!0}else s.lineIndex!==i&&(s.destroy(),s=this._getLine(i)),n.extend(s.getOffset(u,a)),r=!0;return r&&(e.select||n.collapse(),this._setSelection(n,!0,!0)),this._columnX=u,s.destroy(),!0},_doLineUp:function(e){var t=this._model,n=this._getSelection(),r=n.getCaret(),i=t.getLineAtOffset(r),s=this._getLine(i),u=this._columnX,a=!1,f;if(u===-1||e.wholeLine||e.select&&o.isIE)u=e.wholeLine?t.getLineStart(i-1):r,u=s.getBoundingClientRect(u).left;(r=s.getLineIndex(r))>0?f=s.getClientRects(r-1).top+1:(a=i===0,a||(e.count&&e.count>0?i=Math.max(i-e.count,0):i--,f=this._getLineHeight(i)-1)),r=!1;if(a){if(e.select||o.isMac||o.isLinux)n.extend(0),r=!0}else s.lineIndex!==i&&(s.destroy(),s=this._getLine(i)),n.extend(s.getOffset(u,f)),r=!0;return r&&(e.select||n.collapse(),this._setSelection(n,!0,!0)),this._columnX=u,s.destroy(),!0},_doNoop:function(){return!0},_doPageDown:function(e){var t=this,n=this._model,r=this._getSelection(),i=r.getCaret(),s=n.getLineAtOffset(i),u=n.getLineCount(),a=this._getScroll(),n=this._getClientHeight(),f,l;if(this._lineHeight){f=this._columnX,a=this._getBoundsAtOffset(i);if(f===-1||e.select&&o.isIE)f=a.left;return i=this._getLineIndex(a.top+n),l=this._getLine(i),s=this._getLinePixel(i),i=l.getOffset(f,a.top+n-s),n=l.getBoundingClientRect(i),l.destroy(),r.extend(i),e.select||r.collapse(),this._setSelection(r,!0,!0,function(){t._columnX=f},n.top+s-a.top),!0}if(s<u-1){var c=this._getLineHeight(),h=Math.min(u-s-1,Math.floor(n/c)),h=Math.max(1,h);f=this._columnX;if(f===-1||e.select&&o.isIE)l=this._getLine(s),f=l.getBoundingClientRect(i).left,l.destroy();l=this._getLine(s+h),r.extend(l.getOffset(f,0)),l.destroy(),e.select||r.collapse(),e=u*c,i=a.y+h*c,i+n>e&&(i=e-n),this._setSelection(r,!0,!0,function(){t._columnX=f},i-a.y)}return!0},_doPageUp:function(e){var t=this,n=this._model,r=this._getSelection(),i=r.getCaret(),s=n.getLineAtOffset(i),u=this._getScroll(),a=this._getClientHeight(),f;if(this._lineHeight){f=this._columnX,u=this._getBoundsAtOffset(i);if(f===-1||e.select&&o.isIE)f=u.left;return i=this._getLineIndex(u.bottom-a),n=this._getLine(i),s=this._getLinePixel(i),i=n.getOffset(f,u.bottom-a-s),a=n.getBoundingClientRect(i),n.destroy(),r.extend(i),e.select||r.collapse(),this._setSelection(r,!0,!0,function(){t._columnX=f},a.top+s-u.top),!0}if(s>0){var l=this._getLineHeight(),a=Math.max(1,Math.min(s,Math.floor(a/l)));f=this._columnX;if(f===-1||e.select&&o.isIE)n=this._getLine(s),f=n.getBoundingClientRect(i).left,n.destroy();n=this._getLine(s-a),r.extend(n.getOffset(f,this._getLineHeight(s-a)-1)),n.destroy(),e.select||r.collapse(),e=Math.max(0,u.y-a*l),this._setSelection(r,!0,!0,function(){t._columnX=f},e-u.y)}return!0},_doPaste:function(e){var t=this;return this._getClipboardText(e,function(e){e&&(o.isLinux&&t._lastMouseButton===2&&(new Date).getTime()-t._lastMouseTime<=t._clickTime&&t._setSelectionTo(t._lastMouseX,t._lastMouseY),t._doContent(e))})!==null},_doScroll:function(e){var t=e.type,n=this._model,r=n.getLineCount(),e=this._getClientHeight(),i=this._getLineHeight();r*=i;var s=this._getScroll().y,o;switch(t){case"textStart":o=0;break;case"textEnd":o=r-e;break;case"pageDown":o=s+e;break;case"pageUp":o=s-e;break;case"lineDown":o=s+i;break;case"lineUp":o=s-i;break;case"centerLine":t=this._getSelection(),o=n.getLineAtOffset(t.start),n=(n.getLineAtOffset(t.end)-o+1)*i,o=o*i-e/2+n/2}return o!==void 0&&(o=Math.min(Math.max(0,o),r-e),this._scrollViewAnimated(0,o-s,function(){})),!0},_doSelectAll:function(){var e=this._model,t=this._getSelection();return t.setCaret(0),t.extend(e.getCharCount()),this._setSelection(t,!1),!0},_doTab:function(){if(this._tabMode&&!this._readonly){var e="	";if(this._expandTab)var t=this._model,e=this._getSelection().getCaret(),n=t.getLineAtOffset(e),t=t.getLineStart(n),e=Array(this._tabSize-(e-t)%this._tabSize+1).join(" ");return this._doContent(e),!0}},_doShiftTab:function(){return!this._tabMode||this._readonly?void 0:!0},_doOverwriteMode:function(){if(!this._readonly)return this.setOptions({overwriteMode:!this.getOptions("overwriteMode")}),!0},_doTabMode:function(){return this._tabMode=!this._tabMode,!0},_doWrapMode:function(){return this.setOptions({wrapMode:!this.getOptions("wrapMode")}),!0},_autoScroll:function(){var e=this._model,t=this._getSelection(),n=this.convert({x:this._autoScrollX,y:this._autoScrollY},"page","document"),r=t.getCaret(),i=e.getLineCount(),s=e.getLineAtOffset(r),u;if(this._autoScrollDir==="up"||this._autoScrollDir==="down")r=this._autoScrollY/this._getLineHeight(),r=r<0?Math.floor(r):Math.ceil(r),u=Math.max(0,Math.min(i-1,s+r));else if(this._autoScrollDir==="left"||this._autoScrollDir==="right")u=this._getLineIndex(n.y),s=this._getLine(s),n.x+=s.getBoundingClientRect(r,!1).left,s.destroy();u===0&&(o.isMac||o.isLinux)?t.extend(0):u===i-1&&(o.isMac||o.isLinux)?t.extend(e.getCharCount()):(s=this._getLine(u),t.extend(s.getOffset(n.x,n.y-this._getLinePixel(u))),s.destroy()),this._setSelection(t,!0)},_autoScrollTimer:function(){this._autoScroll();var e=this;this._autoScrollTimerID=this._getWindow().setTimeout(function(){e._autoScrollTimer()},this._AUTO_SCROLL_RATE)},_calculateLineHeightTimer:function(e){if(this._lineHeight&&!this._calculateLHTimer){var t=this._model.getLineCount(),n=0;if(e){for(var e=0,r=(new Date).getTime(),i=0;n<t;)if(this._lineHeight[n]||(e++,i||(i=n),this._lineHeight[n]=this._calculateLineHeight(n)),n++,(new Date).getTime()-r>100)break;this.redrawRulers(0,t),this._queueUpdate()}e=this._getWindow();if(n!==t){var s=this;this._calculateLHTimer=e.setTimeout(function(){s._calculateLHTimer=null,s._calculateLineHeightTimer(!0)},0)}else this._calculateLHTimer&&(e.clearTimeout(this._calculateLHTimer),this._calculateLHTimer=void 0)}},_calculateLineHeight:function(e){var e=this._getLine(e),t=e.getBoundingClientRect();return e.destroy(),Math.max(1,t.bottom-t.top)},_calculateMetrics:function(){var e=this._clientDiv,t=e.ownerDocument,n=o.createElement(t,"div");n.style.lineHeight="normal";var r={type:"LineStyle",textView:this,0:0,lineText:this._model.getLine(0),lineStart:0};this.onLineStyle(r),u(r.style,n),n.style.position="fixed",n.style.left="-1000px";var i=o.createElement(t,"span");i.appendChild(t.createTextNode(" ")),n.appendChild(i);var s=o.createElement(t,"span");s.style.fontStyle="italic",s.appendChild(t.createTextNode(" ")),n.appendChild(s);var a=o.createElement(t,"span");a.style.fontWeight="bold",a.appendChild(t.createTextNode(" ")),n.appendChild(a),r=o.createElement(t,"span"),r.style.fontWeight="bold",r.style.fontStyle="italic",r.appendChild(t.createTextNode(" ")),n.appendChild(r),e.appendChild(n);var f=n.getBoundingClientRect(),i=i.getBoundingClientRect(),s=s.getBoundingClientRect(),a=a.getBoundingClientRect(),r=r.getBoundingClientRect(),i=i.bottom-i.top,s=s.bottom-s.top,a=a.bottom-a.top,l=r.bottom-r.top,c=0,r=f.bottom-f.top<=0,f=Math.max(1,f.bottom-f.top);s>i&&(c=1),a>s&&(c=2),l>a&&(c=3);var d;return c!==0&&(d={style:{}},(c&1)!==0&&(d.style.fontStyle="italic"),(c&2)!==0&&(d.style.fontWeight="bold")),i=p(n),e.removeChild(n),l=h(this._viewDiv),n=o.createElement(t,"div"),n.style.position="fixed",n.style.left="-1000px",n.style.paddingLeft=l.left+"px",n.style.paddingTop=l.top+"px",n.style.paddingRight=l.right+"px",n.style.paddingBottom=l.bottom+"px",n.style.width="100px",n.style.height="100px",l=o.createElement(t,"div"),l.style.width="100%",l.style.height="100%",n.appendChild(l),e.appendChild(n),c=n.getBoundingClientRect(),s=l.getBoundingClientRect(),a=0,this._singleMode||(n.style.overflow="hidden",l.style.height="200px",a=n.clientWidth,n.style.overflow="scroll",a-=n.clientWidth),e.removeChild(n),l={left:s.left-c.left,top:s.top-c.top,right:c.right-s.right,bottom:c.bottom-s.bottom},s=c=0,!r&&(this._wrapOffset||this._marginOffset)&&(n=o.createElement(t,"div"),n.style.position="fixed",n.style.left="-1000px",n.innerHTML=Array(this._wrapOffset+1).join(" "),e.appendChild(n),c=n.getBoundingClientRect(),c=Math.ceil(c.right-c.left),n.innerHTML=Array(this._marginOffset+1).join(" "),s=n.getBoundingClientRect(),s=Math.ceil(s.right-s.left),e.removeChild(n)),{lineHeight:f,largestFontStyle:d,lineTrim:i,viewPadding:l,scrollWidth:a,wrapWidth:c,marginWidth:s,invalid:r}},_cancelAnimation:function(){this._animation&&(this._animation.stop(),this._animation=null)},_clearSelection:function(e){var t=this._getSelection();return t.isEmpty()?!1:(e==="next"?t.start=t.end:t.end=t.start,this._setSelection(t,!0),!0)},_commitIME:function(){if(this._imeOffset!==-1){this._scrollDiv.focus(),this._clientDiv.focus();var e=this._model,t=e.getLineAtOffset(this._imeOffset),n=e.getLineStart(t),r=this._getDOMText(this._getLineNode(t)).text,e=e.getLine(t),n=this._imeOffset-n,e=n+r.length-e.length;n!==e&&this._doContent(r.substring(n,e)),this._imeOffset=-1}},_createActions:function(){this.addKeyMode(new n.DefaultKeyMode(this));var t=this;this._actions={noop:{defaultHandler:function(){return t._doNoop()}},lineUp:{defaultHandler:function(e){return t._doLineUp(f(e,{select:!1}))},actionDescription:{name:e.lineUp}},lineDown:{defaultHandler:function(e){return t._doLineDown(f(e,{select:!1}))},actionDescription:{name:e.lineDown}},lineStart:{defaultHandler:function(e){return t._doHome(f(e,{select:!1,ctrl:!1}))},actionDescription:{name:e.lineStart}},lineEnd:{defaultHandler:function(e){return t._doEnd(f(e,{select:!1,ctrl:!1}))},actionDescription:{name:e.lineEnd}},charPrevious:{defaultHandler:function(e){return t._doCursorPrevious(f(e,{select:!1,unit:"character"}))},actionDescription:{name:e.charPrevious}},charNext:{defaultHandler:function(e){return t._doCursorNext(f(e,{select:!1,unit:"character"}))},actionDescription:{name:e.charNext}},pageUp:{defaultHandler:function(e){return t._doPageUp(f(e,{select:!1}))},actionDescription:{name:e.pageUp}},pageDown:{defaultHandler:function(e){return t._doPageDown(f(e,{select:!1}))},actionDescription:{name:e.pageDown}},scrollPageUp:{defaultHandler:function(e){return t._doScroll(f(e,{type:"pageUp"}))},actionDescription:{name:e.scrollPageUp}},scrollPageDown:{defaultHandler:function(e){return t._doScroll(f(e,{type:"pageDown"}))},actionDescription:{name:e.scrollPageDown}},scrollLineUp:{defaultHandler:function(e){return t._doScroll(f(e,{type:"lineUp"}))},actionDescription:{name:e.scrollLineUp}},scrollLineDown:{defaultHandler:function(e){return t._doScroll(f(e,{type:"lineDown"}))},actionDescription:{name:e.scrollLineDown}},wordPrevious:{defaultHandler:function(e){return t._doCursorPrevious(f(e,{select:!1,unit:"word"}))},actionDescription:{name:e.wordPrevious}},wordNext:{defaultHandler:function(e){return t._doCursorNext(f(e,{select:!1,unit:"word"}))},actionDescription:{name:e.wordNext}},textStart:{defaultHandler:function(e){return t._doHome(f(e,{select:!1,ctrl:!0}))},actionDescription:{name:e.textStart}},textEnd:{defaultHandler:function(e){return t._doEnd(f(e,{select:!1,ctrl:!0}))},actionDescription:{name:e.textEnd}},scrollTextStart:{defaultHandler:function(e){return t._doScroll(f(e,{type:"textStart"}))},actionDescription:{name:e.scrollTextStart}},scrollTextEnd:{defaultHandler:function(e){return t._doScroll(f(e,{type:"textEnd"}))},actionDescription:{name:e.scrollTextEnd}},centerLine:{defaultHandler:function(e){return t._doScroll(f(e,{type:"centerLine"}))},actionDescription:{name:e.centerLine}},selectLineUp:{defaultHandler:function(e){return t._doLineUp(f(e,{select:!0}))},actionDescription:{name:e.selectLineUp}},selectLineDown:{defaultHandler:function(e){return t._doLineDown(f(e,{select:!0}))},actionDescription:{name:e.selectLineDown}},selectWholeLineUp:{defaultHandler:function(e){return t._doLineUp(f(e,{select:!0,wholeLine:!0}))},actionDescription:{name:e.selectWholeLineUp}},selectWholeLineDown:{defaultHandler:function(e){return t._doLineDown(f(e,{select:!0,wholeLine:!0}))},actionDescription:{name:e.selectWholeLineDown}},selectLineStart:{defaultHandler:function(e){return t._doHome(f(e,{select:!0,ctrl:!1}))},actionDescription:{name:e.selectLineStart}},selectLineEnd:{defaultHandler:function(e){return t._doEnd(f(e,{select:!0,ctrl:!1}))},actionDescription:{name:e.selectLineEnd}},selectCharPrevious:{defaultHandler:function(e){return t._doCursorPrevious(f(e,{select:!0,unit:"character"}))},actionDescription:{name:e.selectCharPrevious}},selectCharNext:{defaultHandler:function(e){return t._doCursorNext(f(e,{select:!0,unit:"character"}))},actionDescription:{name:e.selectCharNext}},selectPageUp:{defaultHandler:function(e){return t._doPageUp(f(e,{select:!0}))},actionDescription:{name:e.selectPageUp}},selectPageDown:{defaultHandler:function(e){return t._doPageDown(f(e,{select:!0}))},actionDescription:{name:e.selectPageDown}},selectWordPrevious:{defaultHandler:function(e){return t._doCursorPrevious(f(e,{select:!0,unit:"word"}))},actionDescription:{name:e.selectWordPrevious}},selectWordNext:{defaultHandler:function(e){return t._doCursorNext(f(e,{select:!0,unit:"word"}))},actionDescription:{name:e.selectWordNext}},selectTextStart:{defaultHandler:function(e){return t._doHome(f(e,{select:!0,ctrl:!0}))},actionDescription:{name:e.selectTextStart}},selectTextEnd:{defaultHandler:function(e){return t._doEnd(f(e,{select:!0,ctrl:!0}))},actionDescription:{name:e.selectTextEnd}},deletePrevious:{defaultHandler:function(e){return t._doBackspace(f(e,{unit:"character"}))},actionDescription:{name:e.deletePrevious}},deleteNext:{defaultHandler:function(e){return t._doDelete(f(e,{unit:"character"}))},actionDescription:{name:e.deleteNext}},deleteWordPrevious:{defaultHandler:function(e){return t._doBackspace(f(e,{unit:"word"}))},actionDescription:{name:e.deleteWordPrevious}},deleteWordNext:{defaultHandler:function(e){return t._doDelete(f(e,{unit:"word"}))},actionDescription:{name:e.deleteWordNext}},deleteLineStart:{defaultHandler:function(e){return t._doBackspace(f(e,{unit:"line"}))},actionDescription:{name:e.deleteLineStart}},deleteLineEnd:{defaultHandler:function(e){return t._doDelete(f(e,{unit:"line"}))},actionDescription:{name:e.deleteLineEnd}},tab:{defaultHandler:function(){return t._doTab()},actionDescription:{name:e.tab}},shiftTab:{defaultHandler:function(){return t._doShiftTab()},actionDescription:{name:e.shiftTab}},enter:{defaultHandler:function(){return t._doEnter()},actionDescription:{name:e.enter}},enterNoCursor:{defaultHandler:function(e){return t._doEnter(f(e,{noCursor:!0}))},actionDescription:{name:e.enterNoCursor}},selectAll:{defaultHandler:function(){return t._doSelectAll()},actionDescription:{name:e.selectAll}},copy:{defaultHandler:function(){return t._doCopy()},actionDescription:{name:e.copy}},cut:{defaultHandler:function(){return t._doCut()},actionDescription:{name:e.cut}},paste:{defaultHandler:function(){return t._doPaste()},actionDescription:{name:e.paste}},uppercase:{defaultHandler:function(e){return t._doCase(f(e,{type:"upper"}))},actionDescription:{name:e.uppercase}},lowercase:{defaultHandler:function(e){return t._doCase(f(e,{type:"lower"}))},actionDescription:{name:e.lowercase}},capitalize:{defaultHandler:function(e){return t._doCase(f(e,{unit:"word",type:"capitalize"}))},actionDescription:{name:e.capitalize}},reversecase:{defaultHandler:function(e){return t._doCase(f(e,{type:"reverse"}))},actionDescription:{name:e.reversecase}},toggleOverwriteMode:{defaultHandler:function(){return t._doOverwriteMode()},actionDescription:{name:e.toggleOverwriteMode}},toggleTabMode:{defaultHandler:function(){return t._doTabMode()},actionDescription:{name:e.toggleTabMode}},toggleWrapMode:{defaultHandler:function(){return t._doWrapMode()},actionDescription:{name:e.toggleWrapMode}}}},_createRulerParent:function(e){var t=o.createElement(document,"div");return t.className=e,t.tabIndex=-1,t.style.overflow="hidden",t.style.MozUserSelect="none",t.style.WebkitUserSelect="none",t.style.position="absolute",t.style.top="0px",t.style.bottom="0px",t.style.cursor="default",t.style.display="none",t.setAttribute("aria-hidden","true"),this._rootDiv.appendChild(t),t},_createRuler:function(e,t){if(this._clientDiv){var n=this._getRulerParent(e);if(n){if(n!==this._marginDiv||this._marginOffset)n.style.display="block";var r=o.createElement(n.ownerDocument,"div");r._ruler=e,r.rulerChanged=!0,r.style.position="relative",r.style.cssFloat="left",r.style.styleFloat="left",r.style.outline="none";if(t===void 0||t<0||t>=n.children.length)n.appendChild(r);else{for(var i=n.firstChild;i&&t-->0;)i=i.nextSibling;n.insertBefore(r,i)}}}},_createView:function(){if(!this._clientDiv){for(var e=this._parent;e.hasChildNodes();)e.removeChild(e.lastChild);var t=e.ownerDocument,n=o.createElement(t,"div");this._rootDiv=n,n.tabIndex=-1,n.style.position="relative",n.style.overflow="hidden",n.style.width="100%",n.style.height="100%",n.style.overflow="hidden",n.style.WebkitTextSizeAdjust="100%",n.setAttribute("role","application"),e.appendChild(n),this._leftDiv=this._createRulerParent("textviewLeftRuler"),e=o.createElement(t,"div"),e.className="textviewScroll",this._viewDiv=e,e.tabIndex=-1,e.style.position="absolute",e.style.top="0px",e.style.bottom="0px",e.style.borderWidth="0px",e.style.margin="0px",e.style.outline="none",e.style.background="transparent",o.isMac&&o.isWebkit&&(e.style.pointerEvents="none",e.style.zIndex="2"),n.appendChild(e);var r=this._createRulerParent("textviewRightRuler");this._rightDiv=r,r.style.right="0px",this._scrollDiv=r=o.createElement(t,"div"),r.style.margin="0px",r.style.borderWidth="0px",r.style.padding="0px",e.appendChild(r),(this._marginDiv=this._createRulerParent("textviewMarginRuler")).style.zIndex="4",!o.isIE&&!o.isIOS&&(this._clipDiv=e=o.createElement(t,"div"),e.style.position="absolute",e.style.overflow="hidden",e.style.margin="0px",e.style.borderWidth="0px",e.style.padding="0px",e.style.background="transparent",n.appendChild(e),this._clipScrollDiv=r=o.createElement(t,"div"),r.style.position="absolute",r.style.height="1px",r.style.top="-1000px",r.style.background="transparent",e.appendChild(r)),this._setFullSelection(this._fullSelection,!0),e=o.createElement(t,"div"),e.className="textviewContent",this._clientDiv=e,e.tabIndex=0,e.style.position="absolute",e.style.borderWidth="0px",e.style.margin="0px",e.style.padding="0px",e.style.outline="none",e.style.zIndex="1",e.style.WebkitUserSelect="text",e.setAttribute("spellcheck","false");if(o.isIOS||o.isAndroid)e.style.WebkitTapHighlightColor="transparent";(this._clipDiv||n).appendChild(e);if(o.isIOS||o.isAndroid)this._vScrollDiv=r=o.createElement(t,"div"),r.style.position="absolute",r.style.borderWidth="1px",r.style.borderColor="white",r.style.borderStyle="solid",r.style.borderRadius="4px",r.style.backgroundColor="black",r.style.opacity="0.5",r.style.margin="0px",r.style.padding="0px",r.style.outline="none",r.style.zIndex="3",r.style.width="8px",r.style.display="none",n.appendChild(r),this._hScrollDiv=r=o.createElement(t,"div"),r.style.position="absolute",r.style.borderWidth="1px",r.style.borderColor="white",r.style.borderStyle="solid",r.style.borderRadius="4px",r.style.backgroundColor="black",r.style.opacity="0.5",r.style.margin="0px",r.style.padding="0px",r.style.outline="none",r.style.zIndex="3",r.style.height="8px",r.style.display="none",n.appendChild(r);o.isFirefox&&!e.setCapture&&(this._overlayDiv=t=o.createElement(t,"div"),t.style.position=e.style.position,t.style.borderWidth=e.style.borderWidth,t.style.margin=e.style.margin,t.style.padding=e.style.padding,t.style.cursor="text",t.style.zIndex="2",(this._clipDiv||n).appendChild(t)),e.contentEditable="true",e.setAttribute("role","textbox"),e.setAttribute("aria-multiline","true"),this._setWrapMode(this._wrapMode,!0),this._setReadOnly(this._readonly),this._setThemeClass(this._themeClass,!0),this._setTabSize(this._tabSize,!0),this._setMarginOffset(this._marginOffset,!0),this._hookEvents(),n=this._rulers;for(t=0;t<n.length;t++)this._createRuler(n[t]);this._update()}},_defaultOptions:function(){return{parent:{value:void 0,update:null},model:{value:void 0,update:this.setModel},scrollAnimation:{value:0,update:null},readonly:{value:!1,update:this._setReadOnly},fullSelection:{value:!0,update:this._setFullSelection},tabMode:{value:!0,update:null},tabSize:{value:8,update:this._setTabSize},expandTab:{value:!1,update:null},singleMode:{value:!1,update:this._setSingleMode},overwriteMode:{value:!1,update:this._setOverwriteMode},blockCursorVisible:{value:!1,update:this._setBlockCursor},marginOffset:{value:0,update:this._setMarginOffset},wrapOffset:{value:0,update:this._setWrapOffset},wrapMode:{value:!1,update:this._setWrapMode},wrappable:{value:!1,update:null},theme:{value:i.TextTheme.getTheme(),update:this._setTheme},themeClass:{value:void 0,update:this._setThemeClass}}},_destroyRuler:function(e){var t=this._getRulerParent(e);if(t)for(var n=t.firstChild;n;){if(n._ruler===e){n._ruler=void 0,t.removeChild(n),t.children.length===0&&(t!==this._marginDiv||!this._marginOffset)&&(t.style.display="none");break}n=n.nextSibling}},_destroyView:function(){if(this._clientDiv){this._setGrab(null),this._unhookEvents();var e=this._getWindow();this._autoScrollTimerID&&(e.clearTimeout(this._autoScrollTimerID),this._autoScrollTimerID=null),this._updateTimer&&(e.clearTimeout(this._updateTimer),this._updateTimer=null),e=this._rootDiv,e.parentNode.removeChild(e),this._hScrollDiv=this._vScrollDiv=this._cursorDiv=this._marginDiv=this._rightDiv=this._leftDiv=this._overlayDiv=this._clientDiv=this._clipScrollDiv=this._clipDiv=this._viewDiv=this._scrollDiv=this._rootDiv=this._clipboardDiv=this._selDiv3=this._selDiv2=this._selDiv1=null}},_doAutoScroll:function(e,t,n){this._autoScrollDir=e,this._autoScrollX=t,this._autoScrollY=n,this._autoScrollTimerID||this._autoScrollTimer()},_endAutoScroll:function(){this._autoScrollTimerID&&this._getWindow().clearTimeout(this._autoScrollTimerID),this._autoScrollTimerID=this._autoScrollDir=void 0},_fixCaret:function(){var e=this._clientDiv;if(e){var t=this._hasFocus;this._ignoreFocus=!0,t&&e.blur(),e.contentEditable=!1,e.contentEditable=!0,t&&e.focus(),this._ignoreFocus=!1}},_getBaseText:function(e,t){var n=this._model;return n.getBaseModel&&(e=n.mapOffset(e),t=n.mapOffset(t),n=n.getBaseModel()),n.getText(e,t)},_getBottomIndex:function(e){var t=this._bottomChild;if(e&&this._getClientHeight()>this._getLineHeight()){var e=t.getBoundingClientRect(),n=this._clientDiv.getBoundingClientRect();e.bottom>n.bottom&&(t=this._getLinePrevious(t)||t)}return t.lineIndex},_getBoundsAtOffset:function(e){var t=this._getLine(this._model.getLineAtOffset(e)),e=t.getBoundingClientRect(e),n=this._getLinePixel(t.lineIndex);return e.top+=n,e.bottom+=n,t.destroy(),e},_getClientHeight:function(){var e=this._getViewPadding();return Math.max(0,this._viewDiv.clientHeight-e.top-e.bottom)},_getClientWidth:function(){var e=this._getViewPadding();return Math.max(0,this._viewDiv.clientWidth-e.left-e.right)},_getClipboardText:function(e,t){var n=this._model.getLineDelimiter(),r,i,s=this._getWindow(),u=s.clipboardData;!u&&e&&(u=e.clipboardData);if(u)return r=[],i=u.getData(o.isIE?"Text":"text/plain"),c(i,function(e){r.push(e)},function(){r.push(n)}),i=r.join(""),t&&t(i),i;if(o.isFirefox){this._ignoreFocus=!0;var a=this._clipboardDiv,u=this._rootDiv.ownerDocument;a||(this._clipboardDiv=a=o.createElement(u,"div"),a.style.position="fixed",a.style.whiteSpace="pre",a.style.left="-1000px",this._rootDiv.appendChild(a)),a.innerHTML="<pre contenteditable=''></pre>",a.firstChild.focus();var f=this,l=function(){var e=f._getTextFromElement(a);return a.innerHTML="",r=[],c(e,function(e){r.push(e)},function(){r.push(n)}),r.join("")},h=!1;this._ignorePaste=!0;if(!o.isLinux||this._lastMouseButton!==2)try{h=u.execCommand("paste",!1,null)}catch(p){h=a.childNodes.length>1||a.firstChild&&a.firstChild.childNodes.length>0}return this._ignorePaste=!1,h?(this.focus(),this._ignoreFocus=!1,(i=l())&&t&&t(i),i):e?(s.setTimeout(function(){f.focus(),(i=l())&&t&&t(i),f._ignoreFocus=!1},0),null):(this.focus(),this._ignoreFocus=!1,"")}return""},_getDOMText:function(e,t){for(var n=e.firstChild,r="",i=0;n;){var s;if(!n.ignore)if(n.ignoreChars){s=n.lastChild;for(var o=0,u=[],a=-1;s;){var f=s.data;if(f)for(var l=f.length-1;l>=0;l--){var c=f.substring(l,l+1);o<n.ignoreChars&&(c===" "||c===""||c==="")?o++:u.push(c===""?"	":c)}t===s&&(a=u.length),s=s.previousSibling}u=u.reverse().join(""),a!==-1&&(i=r.length+u.length-a),r+=u}else for(s=n.firstChild;s;)t===s&&(i=r.length),r+=s.data,s=s.nextSibling;n=n.nextSibling}return{text:r,offset:i}},_getTextFromElement:function(e){var t=e.ownerDocument,n=t.defaultView;if(!n.getSelection)return e.innerText||e.textContent;t=t.createRange(),t.selectNode(e);var e=n.getSelection(),n=[],r;for(r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));this._ignoreSelect=!0,e.removeAllRanges(),e.addRange(t),t=e.toString(),e.removeAllRanges();for(r=0;r<n.length;r++)e.addRange(n[r]);return this._ignoreSelect=!1,t},_getViewPadding:function(){return this._metrics.viewPadding},_getLine:function(e){var t=this._getLineNode(e);return t&&!t.lineChanged&&!t.lineRemoved?t._line:new m(this,e)},_getLineHeight:function(e,t){if(e!==void 0&&this._lineHeight){var n=this._lineHeight[e];if(n)return n;if(t||t===void 0)return this._lineHeight[e]=this._calculateLineHeight(e)}return this._metrics.lineHeight},_getLineNode:function(e){for(var t=this._clientDiv.firstChild;t;){if(e===t.lineIndex)return t;t=t.nextSibling}},_getLineNext:function(e){for(e=e?e.nextSibling:this._clientDiv.firstChild;e&&e.lineIndex===-1;)e=e.nextSibling;return e},_getLinePrevious:function(e){for(e=e?e.previousSibling:this._clientDiv.lastChild;e&&e.lineIndex===-1;)e=e.previousSibling;return e},_getLinePixel:function(e){e=Math.min(Math.max(0,e),this._model.getLineCount());if(this._lineHeight){var t=this._getTopIndex(),n=-this._topIndexY+this._getScroll().y;if(e>t)for(;t<e;t++)n+=this._getLineHeight(t);else for(t-=1;t>=e;t--)n-=this._getLineHeight(t);return n}return this._getLineHeight()*e},_getLineIndex:function(e){var t,n=0,r=this._model.getLineCount();if(this._lineHeight){var n=this._getTopIndex(),i=-this._topIndexY+this._getScroll().y;if(e!==i)if(e<i)for(;e<i&&n>0;)e+=this._getLineHeight(--n);else for(t=this._getLineHeight(n);e-t>=i&&n<r-1;)e-=t,t=this._getLineHeight(++n)}else t=this._getLineHeight(),n=Math.floor(e/t);return Math.max(0,Math.min(r-1,n))},_getRulerParent:function(e){switch(e.getLocation()){case"left":return this._leftDiv;case"right":return this._rightDiv;case"margin":return this._marginDiv}return null},_getScroll:function(e){return(e===void 0||e)&&this._cancelAnimation(),e=this._viewDiv,{x:e.scrollLeft,y:e.scrollTop}},_getSelection:function(){return this._selection.clone()},_getTopIndex:function(e){var t=this._topChild;if(e&&this._getClientHeight()>this._getLineHeight()){var e=t.getBoundingClientRect(),n=this._getViewPadding(),r=this._viewDiv.getBoundingClientRect();e.top<r.top+n.top&&(t=this._getLineNext(t)||t)}return t.lineIndex},_hookEvents:function(){var e=this;this._modelListener={onChanging:function(t){e._onModelChanging(t)},onChanged:function(t){e._onModelChanged(t)}},this._model.addEventListener("preChanging",this._modelListener.onChanging),this._model.addEventListener("postChanged",this._modelListener.onChanged),this._themeListener={onChanged:function(){e._setThemeClass(e._themeClass)}},this._theme.addEventListener("ThemeChanged",this._themeListener.onChanged);var t=this._handlers=[],n=this._clientDiv,r=this._viewDiv,i=this._rootDiv,s=this._overlayDiv||n,u=n.ownerDocument,a=this._getWindow(),f=o.isIE?u:a;t.push({target:a,type:"resize",handler:function(t){return e._handleResize(t?t:a.event)}}),t.push({target:n,type:"blur",handler:function(t){return e._handleBlur(t?t:a.event)}}),t.push({target:n,type:"focus",handler:function(t){return e._handleFocus(t?t:a.event)}}),t.push({target:r,type:"focus",handler:function(){n.focus()}}),t.push({target:r,type:"scroll",handler:function(t){return e._handleScroll(t?t:a.event)}}),t.push({target:n,type:"textInput",handler:function(t){return e._handleTextInput(t?t:a.event)}}),t.push({target:n,type:"keydown",handler:function(t){return e._handleKeyDown(t?t:a.event)}}),t.push({target:n,type:"keypress",handler:function(t){return e._handleKeyPress(t?t:a.event)}}),t.push({target:n,type:"keyup",handler:function(t){return e._handleKeyUp(t?t:a.event)}}),o.isIE&&t.push({target:u,type:"keyup",handler:function(t){return e._handleDocKeyUp(t?t:a.event)}}),t.push({target:n,type:"contextmenu",handler:function(t){return e._handleContextMenu(t?t:a.event)}}),t.push({target:n,type:"copy",handler:function(t){return e._handleCopy(t?t:a.event)}}),t.push({target:n,type:"cut",handler:function(t){return e._handleCut(t?t:a.event)}}),t.push({target:n,type:"paste",handler:function(t){return e._handlePaste(t?t:a.event)}}),o.isIOS||o.isAndroid?(t.push({target:u,type:"selectionchange",handler:function(t){return e._handleSelectionChange(t?t:a.event)}}),t.push({target:n,type:"touchstart",handler:function(t){return e._handleTouchStart(t?t:a.event)}}),t.push({target:n,type:"touchmove",handler:function(t){return e._handleTouchMove(t?t:a.event)}}),t.push({target:n,type:"touchend",handler:function(t){return e._handleTouchEnd(t?t:a.event)}})):(t.push({target:n,type:"selectstart",handler:function(t){return e._handleSelectStart(t?t:a.event)}}),t.push({target:n,type:"mousedown",handler:function(t){return e._handleMouseDown(t?t:a.event)}}),t.push({target:n,type:"mouseover",handler:function(t){return e._handleMouseOver(t?t:a.event)}}),t.push({target:n,type:"mouseout",handler:function(t){return e._handleMouseOut(t?t:a.event)}}),t.push({target:f,type:"mouseup",handler:function(t){return e._handleMouseUp(t?t:a.event)}}),t.push({target:f,type:"mousemove",handler:function(t){return e._handleMouseMove(t?t:a.event)}}),t.push({target:i,type:"mousedown",handler:function(t){return e._handleRootMouseDown(t?t:a.event)}}),t.push({target:i,type:"mouseup",handler:function(t){return e._handleRootMouseUp(t?t:a.event)}}),t.push({target:s,type:"dragstart",handler:function(t){return e._handleDragStart(t?t:a.event)}}),t.push({target:s,type:"drag",handler:function(t){return e._handleDrag(t?t:a.event)}}),t.push({target:s,type:"dragend",handler:function(t){return e._handleDragEnd(t?t:a.event)}}),t.push({target:s,type:"dragenter",handler:function(t){return e._handleDragEnter(t?t:a.event)}}),t.push({target:s,type:"dragover",handler:function(t){return e._handleDragOver(t?t:a.event)}}),t.push({target:s,type:"dragleave",handler:function(t){return e._handleDragLeave(t?t:a.event)}}),t.push({target:s,type:"drop",handler:function(t){return e._handleDrop(t?t:a.event)}}),t.push({target:this._clientDiv,type:o.isFirefox>26?"wheel":o.isFirefox?"DOMMouseScroll":"mousewheel",handler:function(t){return e._handleMouseWheel(t?t:a.event)}}),this._clipDiv&&t.push({target:this._clipDiv,type:o.isFirefox>26?"wheel":o.isFirefox?"DOMMouseScroll":"mousewheel",handler:function(t){return e._handleMouseWheel(t?t:a.event)}}),o.isFirefox&&(!o.isWindows||o.isFirefox>=15)&&((r=a.MutationObserver||a.MozMutationObserver)?(this._mutationObserver=new r(function(t){e._handleDataModified(t)}),this._mutationObserver.observe(n,{subtree:!0,characterData:!0})):t.push({target:this._clientDiv,type:"DOMCharacterDataModified",handler:function(t){return e._handleDataModified(t?t:a.event)}})),this._overlayDiv&&(t.push({target:this._overlayDiv,type:"mousedown",handler:function(t){return e._handleMouseDown(t?t:a.event)}}),t.push({target:this._overlayDiv,type:"mouseover",handler:function(t){return e._handleMouseOver(t?t:a.event)}}),t.push({target:this._overlayDiv,type:"mouseout",handler:function(t){return e._handleMouseOut(t?t:a.event)}}),t.push({target:this._overlayDiv,type:"contextmenu",handler:function(t){return e._handleContextMenu(t?t:a.event)}})),this._isW3CEvents||t.push({target:this._clientDiv,type:"dblclick",handler:function(t){return e._handleDblclick(t?t:a.event)}})),this._hookRulerEvents(this._leftDiv,t),this._hookRulerEvents(this._rightDiv,t),this._hookRulerEvents(this._marginDiv,t);for(r=0;r<t.length;r++)i=t[r],y(i.target,i.type,i.handler,i.capture)},_hookRulerEvents:function(e,t){if(e){var n=this,r=this._getWindow();o.isIE&&t.push({target:e,type:"selectstart",handler:function(){return!1}}),t.push({target:e,type:o.isFirefox>26?"wheel":o.isFirefox?"DOMMouseScroll":"mousewheel",handler:function(e){return n._handleMouseWheel(e?e:r.event)}}),t.push({target:e,type:"click",handler:function(e){n._handleRulerEvent(e?e:r.event)}}),t.push({target:e,type:"dblclick",handler:function(e){n._handleRulerEvent(e?e:r.event)}}),t.push({target:e,type:"mousemove",handler:function(e){n._handleRulerEvent(e?e:r.event)}}),t.push({target:e,type:"mouseover",handler:function(e){n._handleRulerEvent(e?e:r.event)}}),t.push({target:e,type:"mouseout",handler:function(e){n._handleRulerEvent(e?e:r.event)}})}},_getWindow:function(){return this._parent.ownerDocument.defaultView||this._parent.ownerDocument.parentWindow},_ignoreEvent:function(e){for(e=e.target;e&&e!==this._clientDiv;){if(e.ignore)return!0;e=e.parentNode}return!1},_init:function(e){var n=e.parent;typeof n=="string"&&(n=(e.document||document).getElementById(n));if(!n)throw"no parent";e.parent=n,e.model=e.model||new t.TextModel;var r=this._defaultOptions(),i;for(i in r)r.hasOwnProperty(i)&&(this["_"+i]=e[i]!==void 0?e[i]:r[i].value);this._keyModes=[],this._rulers=[],this._selection=new d(0,0,!1),this._linksVisible=!1,this._maxLineWidth=this._redrawCount=0,this._maxLineIndex=-1,this._ignoreSelect=!0,this._hasFocus=this._ignoreFocus=!1,this._dragOffset=this._columnX=-1,this._isRangeRects=(!o.isIE||o.isIE>=9)&&typeof n.ownerDocument.createRange().getBoundingClientRect=="function",this._isW3CEvents=n.addEventListener,this._autoScrollTimerID=this._autoScrollY=this._autoScrollX=null,this._AUTO_SCROLL_RATE=50,this._mouseUpClosure=this._moseMoveClosure=this._grabControl=null,this._clickCount=this._lastMouseTime=this._lastMouseY=this._lastMouseX=0,this._clickTime=250,this._clickDist=5,this._isMouseDown=!1,this._doubleClickSelection=null,this._vScroll=this._hScroll=0,this._imeOffset=-1,this._createActions(),this._createView()},_modifyContent:function(e,t){if(!this._readonly||e._code)if(e.type="Verify",this.onVerify(e),e.text!==null&&e.text!==void 0){var n=this._model;try{e._ignoreDOMSelection&&(this._ignoreDOMSelection=!0),n.setText(e.text,e.start,e.end)}finally{e._ignoreDOMSelection&&(this._ignoreDOMSelection=!1)}t&&(n=this._getSelection(),n.setCaret(e.start+e.text.length),this._setSelection(n,!0)),this.onModify({type:"Modify"})}},_onModelChanged:function(e){e.type="ModelChanged",this.onModelChanged(e),e.type="Changed";var t=e.start,n=e.addedCharCount,r=e.removedCharCount,i=e.addedLineCount,s=e.removedLineCount,o=this._getSelection();o.end>t&&(o.end>t&&o.start<t+r?o.setCaret(t+n):(o.start+=n-r,o.end+=n-r),this._setSelection(o,!1,!1)),t=this._model.getLineAtOffset(t);for(n=this._getLineNext();n;)r=n.lineIndex,t<=r&&r<=t+s&&(t===r&&!n.modelChangedEvent&&!n.lineRemoved?(n.modelChangedEvent=e,n.lineChanged=!0):(n.lineRemoved=!0,n.lineChanged=!1,n.modelChangedEvent=null)),r>t+s&&(n.lineIndex=r+i-s,n._line.lineIndex=n.lineIndex),n=this._getLineNext(n);this._lineHeight&&(e=[t,s].concat(Array(i)),Array.prototype.splice.apply(this._lineHeight,e)),!this._wrapMode&&t<=this._maxLineIndex&&this._maxLineIndex<=t+s&&(this._checkMaxLineIndex=this._maxLineIndex,this._maxLineIndex=-1,this._maxLineWidth=0),this._update()},_onModelChanging:function(e){e.type="ModelChanging",this.onModelChanging(e),e.type="Changing"},_queueUpdate:function(){if(!this._updateTimer&&!this._ignoreQueueUpdate){var e=this;this._updateTimer=this._getWindow().setTimeout(function(){e._updateTimer=null,e._update()},0)}},_resetLineHeight:function(e,t){if(this._wrapMode||this._variableLineHeight){if(e!==void 0&&t!==void 0)for(var n=e;n<t;n++)this._lineHeight[n]=void 0;else this._lineHeight=Array(this._model.getLineCount());this._calculateLineHeightTimer()}else this._lineHeight=null},_resetLineWidth:function(){var e=this._clientDiv;if(e)for(e=e.firstChild;e;)e.lineWidth=void 0,e=e.nextSibling},_reset:function(){this._maxLineIndex=-1,this._maxLineWidth=0,this._columnX=-1,this._bottomChild=this._topChild=null,this._topIndexY=0,this._variableLineHeight=!1,this._resetLineHeight(),this._setSelection(new d(0,0,!1),!1,!1),this._viewDiv&&(this._viewDiv.scrollLeft=0,this._viewDiv.scrollTop=0);var e=this._clientDiv;if(e){for(var t=e.firstChild;t;)t.lineRemoved=!0,t=t.nextSibling;o.isFirefox&&(this._ignoreFocus=!1,(t=this._hasFocus)&&e.blur(),e.contentEditable=!1,e.contentEditable=!0,t&&e.focus(),this._ignoreFocus=!1)}},_scrollViewAnimated:function(e,t,n){var r=this._getWindow();if(n&&this._scrollAnimation){var i=this;this._animation=new w({window:r,duration:this._scrollAnimation,curve:[t,0],onAnimate:function(e){e=t-Math.floor(e),i._scrollView(0,e),t-=e},onEnd:function(){i._animation=null,i._scrollView(e,t),n&&r.setTimeout(n,0)}}),this._animation.play()}else this._scrollView(e,t),n&&r.setTimeout(n,0)},_scrollView:function(e,t){this._ensureCaretVisible=!1;var n=this._viewDiv;e&&(n.scrollLeft+=e),t&&(n.scrollTop+=t)},_setClipboardText:function(e,t){var n,r=this._getWindow(),i=r.clipboardData;!i&&t&&(i=t.clipboardData);if(i&&(n=[],c(e,function(e){n.push(e)},function(){n.push(o.platformDelimiter)}),i.setData(o.isIE?"Text":"text/plain",n.join(""))))return!0;var s=this._parent.ownerDocument,u=o.createElement(s,"pre");u.style.position="fixed",u.style.left="-1000px",c(e,function(e){u.appendChild(s.createTextNode(e))},function(){u.appendChild(o.createElement(s,"br"))}),u.appendChild(s.createTextNode(" ")),this._clientDiv.appendChild(u),i=s.createRange(),i.setStart(u.firstChild,0),i.setEndBefore(u.lastChild);var a=r.getSelection();a.rangeCount>0&&a.removeAllRanges(),a.addRange(i);var f=this,i=function(){u&&u.parentNode===f._clientDiv&&f._clientDiv.removeChild(u),f._updateDOMSelection()},a=!1;this._ignoreCopy=!0;try{a=s.execCommand("copy",!1,null)}catch(l){}return this._ignoreCopy=!1,!a&&t?(r.setTimeout(i,0),!1):(i(),!0)},_setDOMSelection:function(e,t,n,r,i){for(var s,u,a,f,l=0,c=e.firstChild,h,p,d=this._model.getLine(e.lineIndex).length;c;){if(!c.ignore){h=c.firstChild,p=h.length,c.ignoreChars&&(p-=c.ignoreChars);if(l+p>t||l+p>=d){s=h,u=t-l,c.ignoreChars&&p>0&&u===p&&(u+=c.ignoreChars);break}l+=p}c=c.nextSibling}for(var l=0,c=n.firstChild,v=this._model.getLine(n.lineIndex).length;c;){if(!c.ignore){h=c.firstChild,p=h.length,c.ignoreChars&&(p-=c.ignoreChars);if(p+l>r||l+p>=v){a=h,f=r-l,c.ignoreChars&&p>0&&f===p&&(f+=c.ignoreChars);break}l+=p}c=c.nextSibling}this._setDOMFullSelection(e,t,d,n,r,v),e=this._getWindow(),t=this._parent.ownerDocument,e.getSelection?(n=e.getSelection(),e=t.createRange(),e.setStart(s,u),e.setEnd(a,f),this._hasFocus&&(n.anchorNode!==s||n.anchorOffset!==u||n.focusNode!==a||n.focusOffset!==f||n.anchorNode!==a||n.anchorOffset!==f||n.focusNode!==s||n.focusOffset!==u)&&(this._anchorNode=s,this._anchorOffset=u,this._focusNode=a,this._focusOffset=f,this._ignoreSelect=!1,n.rangeCount>0&&n.removeAllRanges(),n.addRange(e),this._ignoreSelect=!0),this._cursorDiv&&(e=t.createRange(),i?(e.setStart(s,u),e.setEnd(s,u)):(e.setStart(a,f),e.setEnd(a,f)),a=e.getClientRects()[0],f=this._cursorDiv.parentNode,s=f.getBoundingClientRect(),a&&s)&&(this._cursorDiv.style.top=a.top-s.top+f.scrollTop+"px",this._cursorDiv.style.left=a.left-s.left+f.scrollLeft+"px")):t.selection&&this._hasFocus&&(i=t.body,e=o.createElement(t,"div"),i.appendChild(e),i.removeChild(e),e=i.createTextRange(),e.moveToElementText(s.parentNode),e.moveStart("character",u),s=i.createTextRange(),s.moveToElementText(a.parentNode),s.moveStart("character",f),e.setEndPoint("EndToStart",s),this._ignoreSelect=!1,e.select(),this._ignoreSelect=!0)},_setDOMFullSelection:function(e,t,n,r,i){if(this._selDiv1&&(n=this._selDiv1,n.style.width="0px",n.style.height="0px",n=this._selDiv2,n.style.width="0px",n.style.height="0px",n=this._selDiv3,n.style.width="0px",n.style.height="0px",e!==r||t!==i)){var s=this._model,o=this._getViewPadding(),u=this._clientDiv.getBoundingClientRect(),a=this._viewDiv.getBoundingClientRect(),n=a.left+o.left,f=u.right,o=a.top+o.top,l=u.bottom,a=u=0;this._clipDiv?(a=this._clipDiv.getBoundingClientRect(),u=a.left-this._clipDiv.scrollLeft):(a=this._rootDiv.getBoundingClientRect(),u=a.left),a=a.top,this._ignoreDOMSelection=!0;var c=(new m(this,e.lineIndex,e)).getBoundingClientRect(s.getLineStart(e.lineIndex)+t,!1),h=c.left,t=(new m(this,r.lineIndex,r)).getBoundingClientRect(s.getLineStart(r.lineIndex)+i,!1),s=t.left;this._ignoreDOMSelection=!1;var p=this._selDiv1,h=Math.min(f,Math.max(n,h)),d=Math.min(l,Math.max(o,c.top)),v=f,i=Math.min(l,Math.max(o,c.bottom));p.style.left=h-u+"px",p.style.top=d-a+"px",p.style.width=Math.max(0,v-h)+"px",p.style.height=Math.max(0,i-d)+"px";if(e.lineIndex===r.lineIndex)v=Math.min(s,f),p.style.width=Math.max(0,v-h)+"px";else if(c=Math.min(l,Math.max(o,t.top)),s=Math.min(f,Math.max(n,s)),o=Math.min(l,Math.max(o,t.bottom)),l=this._selDiv3,l.style.left=n-u+"px",l.style.top=c-a+"px",l.style.width=Math.max(0,s-n)+"px",l.style.height=Math.max(0,o-c)+"px",Math.abs(e.lineIndex-r.lineIndex)>1)e=this._selDiv2,e.style.left=n-u+"px",e.style.top=i-a+"px",e.style.width=Math.max(0,f-n)+"px",e.style.height=Math.max(0,c-i)+"px"}},_setGrab:function(e){e!==this._grabControl&&(e?(e.setCapture&&e.setCapture(),this._grabControl=e):(this._grabControl.releaseCapture&&this._grabControl.releaseCapture(),this._grabControl=null))},_setLinksVisible:function(e){if(this._linksVisible!==e){this._linksVisible=e,o.isIE&&e&&(this._hadFocus=this._hasFocus);var t=this._clientDiv;t.contentEditable=!e,this._hadFocus&&!e&&t.focus(),this._overlayDiv&&(this._overlayDiv.style.zIndex=e?"-1":"1");for(e=this._getLineNext();e;){if(e.hasLink)for(t=e.firstChild;t;)if(t.ignore)t=t.nextSibling;else{var n=t.nextSibling,r=t.viewStyle;r&&r.tagName&&r.tagName.toLowerCase()==="a"&&e.replaceChild(e._line._createSpan(e,t.firstChild.data,r),t),t=n}e=this._getLineNext(e)}this._updateDOMSelection()}},_setSelection:function(e,t,n,r,i){if(e){this._columnX=-1,n===void 0&&(n=!0);var s=this._selection;this._selection=e,t!==!1&&this._showCaret(!1,r,t,i),n&&this._updateDOMSelection(),s.equals(e)||this.onSelection({type:"Selection",oldValue:{start:s.start,end:s.end},newValue:{start:e.start,end:e.end}})}},_setSelectionTo:function(e,t,n,r){var i=this._model,s=this._getSelection(),t=this.convert({x:e,y:t},"page","document"),e=this._getLineIndex(t.y);if(this._clickCount===1){i=this._getLine(e),e=i.getOffset(t.x,t.y-this._getLinePixel(e)),i.destroy();if(r&&!n&&s.start<=e&&e<s.end)return this._dragOffset=e,!1;s.extend(e),n||s.collapse()}else(this._clickCount&1)===0?(i=this._getLine(e),e=i.getOffset(t.x,t.y-this._getLinePixel(e)),this._doubleClickSelection?e>=this._doubleClickSelection.start?(n=this._doubleClickSelection.start,r=i.getNextOffset(e,{unit:"wordend",count:1})):(n=i.getNextOffset(e,{unit:"word",count:-1}),r=this._doubleClickSelection.end):(n=i.getNextOffset(e,{unit:"word",count:-1}),r=i.getNextOffset(n,{unit:"wordend",count:1})),i.destroy()):this._doubleClickSelection?(r=i.getLineAtOffset(this._doubleClickSelection.start),e>=r?(n=i.getLineStart(r),r=i.getLineEnd(e)):(n=i.getLineStart(e),r=i.getLineEnd(r))):(n=i.getLineStart(e),r=i.getLineEnd(e)),s.setCaret(n),s.extend(r);return this._setSelection(s,!0,!0),!0},_setFullSelection:function(e,t){this._fullSelection=e,o.isWebkit&&(this._fullSelection=!0);var n=this._clipDiv||this._rootDiv;if(n)if(this._fullSelection){if(!this._selDiv1&&this._fullSelection&&!o.isIOS){var r=n.ownerDocument;this._highlightRGB=o.isWebkit?"transparent":"Highlight";var i=o.createElement(r,"div");this._selDiv1=i,i.style.position="absolute",i.style.borderWidth="0px",i.style.margin="0px",i.style.padding="0px",i.style.outline="none",i.style.background=this._highlightRGB,i.style.width="0px",i.style.height="0px",i.style.zIndex="0",n.appendChild(i);var s=o.createElement(r,"div");this._selDiv2=s,s.style.position="absolute",s.style.borderWidth="0px",s.style.margin="0px",s.style.padding="0px",s.style.outline="none",s.style.background=this._highlightRGB,s.style.width="0px",s.style.height="0px",s.style.zIndex="0",n.appendChild(s),this._selDiv3=r=o.createElement(r,"div"),r.style.position="absolute",r.style.borderWidth="0px",r.style.margin="0px",r.style.padding="0px",r.style.outline="none",r.style.background=this._highlightRGB,r.style.width="0px",r.style.height="0px",r.style.zIndex="0",n.appendChild(r);if(o.isFirefox&&o.isMac){n=this._getWindow().getComputedStyle(r,null).getPropertyValue("background-color");switch(n){case"rgb(119, 141, 168)":n="rgb(199, 208, 218)";break;case"rgb(127, 127, 127)":n="rgb(198, 198, 198)";break;case"rgb(255, 193, 31)":n="rgb(250, 236, 115)";break;case"rgb(243, 70, 72)":n="rgb(255, 176, 139)";break;case"rgb(255, 138, 34)":n="rgb(255, 209, 129)";break;case"rgb(102, 197, 71)":n="rgb(194, 249, 144)";break;case"rgb(140, 78, 184)":n="rgb(232, 184, 255)";break;default:n="rgb(180, 213, 255)"}this._highlightRGB=n,i.style.background=n,s.style.background=n,r.style.background=n}t||this._updateDOMSelection()}}else this._selDiv1&&(n.removeChild(this._selDiv1),this._selDiv1=null),this._selDiv2&&(n.removeChild(this._selDiv2),this._selDiv2=null),this._selDiv3&&(n.removeChild(this._selDiv3),this._selDiv3=null)},_setBlockCursor:function(e){this._blockCursorVisible=e,this._updateBlockCursorVisible()},_setOverwriteMode:function(e){this._overwriteMode=e,this._updateBlockCursorVisible()},_updateBlockCursorVisible:function(){if(this._blockCursorVisible||this._overwriteMode){if(!this._cursorDiv){var e=o.createElement(document,"div");e.className="textviewBlockCursor",this._cursorDiv=e,e.tabIndex=-1,e.style.zIndex="2",e.style.color="transparent",e.style.position="absolute",e.style.pointerEvents="none",e.innerHTML="&nbsp;",this._viewDiv.appendChild(e),this._updateDOMSelection()}}else this._cursorDiv&&(this._cursorDiv.parentNode.removeChild(this._cursorDiv),this._cursorDiv=null)},_setMarginOffset:function(e,t){this._marginOffset=e,this._marginDiv.style.display=e?"block":"none",t||(this._metrics=this._calculateMetrics(),this._queueUpdate())},_setWrapOffset:function(e,t){this._wrapOffset=e,t||(this._metrics=this._calculateMetrics(),this._queueUpdate())},_setReadOnly:function(e){this._readonly=e,this._clientDiv.setAttribute("aria-readonly",e?"true":"false")},_setSingleMode:function(e,t){this._singleMode=e,this._updateOverflow(),this._updateStyle(t)},_setTabSize:function(e,t){this._tabSize=e,this._customTabSize=void 0;var n=this._clientDiv;o.isOpera?n&&(n.style.OTabSize=this._tabSize+""):o.isWebkit>=537.1?n&&(n.style.tabSize=this._tabSize+""):o.isFirefox>=4?n&&(n.style.MozTabSize=this._tabSize+""):this._tabSize!==8&&(this._customTabSize=this._tabSize),t||(this.redrawLines(),this._resetLineWidth())},_setTheme:function(e){this._theme&&this._theme.removeEventListener("ThemeChanged",this._themeListener.onChanged),(this._theme=e)&&this._theme.addEventListener("ThemeChanged",this._themeListener.onChanged),this._setThemeClass(this._themeClass)},_setThemeClass:function(e,t){this._themeClass=e;var n="textview",r=this._theme.getThemeClass();r&&(n+=" "+r),this._themeClass&&r!==this._themeClass&&(n+=" "+this._themeClass),this._rootDiv.className=n,this._updateStyle(t)},_setWrapMode:function(e,t){this._wrapMode=e&&this._wrappable;var n=this._clientDiv;this._wrapMode?(n.style.whiteSpace="pre-wrap",n.style.wordWrap="break-word"):(n.style.whiteSpace="pre",n.style.wordWrap="normal"),this._updateOverflow(),t||(this.redraw(),this._resetLineWidth()),this._resetLineHeight()},_showCaret:function(e,t,n,r){if(this._clientDiv){var i=this._model,s=this._getSelection(),o=this._getScroll(),u=s.getCaret(),a=s.start,f=s.end,l=i.getLineAtOffset(f),c=Math.max(Math.max(a,i.getLineStart(l)),f-1),i=this._getClientWidth(),l=this._getClientHeight(),h=i/4,p=this._getBoundsAtOffset(u===a?a:c),d=p.left,v=p.right,m=p.top,g=p.bottom;return e&&!s.isEmpty()&&(p=this._getBoundsAtOffset(u===f?a:c),p.top===m?u===a?v=d+Math.min(p.right-d,i):d=v-Math.min(v-p.left,i):u===a?g=m+Math.min(p.bottom-m,l):m=g-Math.min(g-p.top,l)),e=0,d<o.x&&(e=Math.min(d-o.x,-h)),v>o.x+i&&(e=Math.max(v-o.x-i,h)),s=0,m<o.y?s=m-o.y:g>o.y+l&&(s=g-o.y-l),r&&(r>0?s>0&&(s=Math.max(s,r)):s<0&&(s=Math.min(s,r))),e!==0||s!==0?(s!==0&&typeof n=="number"&&(n<0&&(n=0),n>1&&(n=1),s+=Math.floor(s>0?n*l:-n*l)),this._scrollViewAnimated(e,s,t),l!==this._getClientHeight()||i!==this._getClientWidth()?this._showCaret():this._ensureCaretVisible=!0,!0):(t&&t(),!1)}},_startIME:function(){if(this._imeOffset===-1){var e=this._getSelection();e.isEmpty()||this._modifyContent({text:"",start:e.start,end:e.end},!0),this._imeOffset=e.start}},_unhookEvents:function(){this._model.removeEventListener("preChanging",this._modelListener.onChanging),this._model.removeEventListener("postChanged",this._modelListener.onChanged),this._theme.removeEventListener("ThemeChanged",this._themeListener.onChanged),this._modelListener=null;for(var e=0;e<this._handlers.length;e++){var t=this._handlers[e];b(t.target,t.type,t.handler)}this._handlers=null,this._mutationObserver&&(this._mutationObserver.disconnect(),this._mutationObserver=null)},_updateDOMSelection:function(){if(!(this._redrawCount>0)&&!this._ignoreDOMSelection&&this._clientDiv){var e=this._getSelection(),t=this._model,n=t.getLineAtOffset(e.start),r=t.getLineAtOffset(e.end),i=this._getLineNext();if(i){var s=this._getLinePrevious(),o;n<i.lineIndex?(o=i,n=0):n>s.lineIndex?(o=s,n=0):(o=this._getLineNode(n),n=e.start-t.getLineStart(n)),r<i.lineIndex?t=0:r>s.lineIndex?(i=s,t=0):(i=this._getLineNode(r),t=e.end-t.getLineStart(r)),this._setDOMSelection(o,n,i,t,e.caret)}}},_update:function(e){if(!(this._redrawCount>0)){this._updateTimer&&(this._getWindow().clearTimeout(this._updateTimer),this._updateTimer=null,e=!1);var t=this._clientDiv,n=this._viewDiv;if(t){this._metrics.invalid&&(this._ignoreQueueUpdate=!0,this._updateStyle(),this._ignoreQueueUpdate=!1);var r=this._model,i=this._getScroll(!1),s=this._getViewPadding(),u=r.getLineCount(),a=this._getLineHeight(),f=!1,l=!1,c=!1,h=this._metrics.scrollWidth;this._wrapMode&&(t.style.width=(this._metrics.wrapWidth||this._getClientWidth())+"px");var p,d,v,g,y=0,b=0,w;if(this._lineHeight){for(;b<u;){w=this._getLineHeight(b);if(y+w>i.y)break;y+=w,b++}p=b,d=Math.max(0,p-1),v=r=i.y-y,p>0&&(r+=this._getLineHeight(p-1))}else g=Math.max(0,i.y)/a,p=Math.floor(g),d=Math.max(0,p-1),r=Math.round((g-d)*a),v=Math.round((g-p)*a);this._topIndexY=v,g=this._rootDiv;var E=g.clientWidth,S=g.clientHeight;if(e){a=0,this._leftDiv&&(p=this._leftDiv.getBoundingClientRect(),a=p.right-p.left),p=this._getClientWidth(),g=this._getClientHeight(),l=p,this._wrapMode?this._metrics.wrapWidth&&(l=this._metrics.wrapWidth):l=Math.max(this._maxLineWidth,l);for(;b<u;)w=this._getLineHeight(b,!1),y+=w,b++;u=y}else{g=this._getClientHeight(),v=Math.min(p+Math.floor((g+v)/a),u-1);var i=Math.min(v+1,u-1),x;for(w=t.firstChild;w;){x=w.lineIndex;var T=w.nextSibling;if(!(d<=x&&x<=i)||w.lineRemoved||w.lineIndex===-1)this._mouseWheelLine===w?(w.style.display="none",w.lineIndex=-1):t.removeChild(w);w=T}w=this._getLineNext();var T=n.ownerDocument,N=T.createDocumentFragment();for(x=d;x<=i;x++)!w||w.lineIndex>x?(new m(this,x)).create(N,null):(N.firstChild&&(t.insertBefore(N,w),N=T.createDocumentFragment()),w&&w.lineChanged&&(w=(new m(this,x)).create(N,w),w.lineChanged=!1),w=this._getLineNext(w));N.firstChild&&t.insertBefore(N,w),o.isWebkit&&!this._wrapMode&&(t.style.width="0x7fffffffpx"),w=this._getLineNext(),x=g+r;for(N=!1;w;)d=w.lineWidth,d===void 0&&((T=w._line.getBoundingClientRect(),d=w.lineWidth=Math.ceil(T.right-T.left),T=T.bottom-T.top,this._lineHeight)?this._lineHeight[w.lineIndex]=T:a!==0&&T!==0&&Math.ceil(a)!==Math.ceil(T)&&(this._variableLineHeight=!0,this._lineHeight=[],this._lineHeight[w.lineIndex]=T)),this._lineHeight&&!N&&(x-=this._lineHeight[w.lineIndex],x<0)&&(v=w.lineIndex,N=!0),this._wrapMode||(d>=this._maxLineWidth&&(this._maxLineWidth=d,this._maxLineIndex=w.lineIndex),this._checkMaxLineIndex===w.lineIndex&&(this._checkMaxLineIndex=-1)),w.lineIndex===p&&(this._topChild=w),w.lineIndex===v&&(this._bottomChild=w),w=this._getLineNext(w);this._checkMaxLineIndex!==-1&&(x=this._checkMaxLineIndex,this._checkMaxLineIndex=-1,0<=x&&x<u)&&(a=new m(this,x),T=a.getBoundingClientRect(),d=T.right-T.left,d>=this._maxLineWidth&&(this._maxLineWidth=d,this._maxLineIndex=x),a.destroy());for(;b<u;)w=this._getLineHeight(b,b<=v),y+=w,b++;u=y,this._updateRuler(this._leftDiv,p,i,S),this._updateRuler(this._rightDiv,p,i,S),this._updateRuler(this._marginDiv,p,i,S),a=0,this._leftDiv&&(p=this._leftDiv.getBoundingClientRect(),a=p.right-p.left),i=0,this._rightDiv&&(i=this._rightDiv.getBoundingClientRect(),i=i.right-i.left),n.style.left=a+"px",n.style.right=i+"px",i=this._scrollDiv,i.style.height=u+"px",p=this._getClientWidth(),!this._singleMode&&!this._wrapMode&&(y=f=g,(b=n.style.overflowX==="scroll")?f+=h:y-=h,w=v=p,(d=n.style.overflowY==="scroll")?v+=h:w-=h,g=f,p=v,u>g&&(c=!0,p=w),this._maxLineWidth>p&&(l=!0,g=y,u>g&&(c=!0,p=w)),b!==l&&(n.style.overflowX=l?"scroll":"hidden"),d!==c&&(n.style.overflowY=c?"scroll":"hidden"),f=b!==l||d!==c),c=p,this._wrapMode?this._metrics.wrapWidth&&(c=this._metrics.wrapWidth):c=Math.max(this._maxLineWidth,c),l=c,(!o.isIE||o.isIE>=9)&&this._maxLineWidth>p&&(c+=s.right+s.left),i.style.width=c+"px",this._clipScrollDiv&&(this._clipScrollDiv.style.width=c+"px"),i=this._getScroll(!1)}this._vScrollDiv&&(c=g-8,y=Math.max(15,Math.ceil(Math.min(1,c/(u+s.top+s.bottom))*c)),this._vScrollDiv.style.left=a+p-8+"px",this._vScrollDiv.style.top=Math.floor(Math.max(0,i.y*c/u))+"px",this._vScrollDiv.style.height=y+"px"),!this._wrapMode&&this._hScrollDiv&&(c=p-8,y=Math.max(15,Math.ceil(Math.min(1,c/(this._maxLineWidth+s.left+s.right))*c)),this._hScrollDiv.style.left=a+Math.floor(Math.max(0,Math.floor(i.x*c/this._maxLineWidth)))+"px",this._hScrollDiv.style.top=g-9+"px",this._hScrollDiv.style.width=y+"px"),b=i.x,y=this._clipDiv,c=this._overlayDiv;if(v=this._marginDiv)v.style.left=-b+a+this._metrics.marginWidth+s.left+"px",v.style.bottom=(n.style.overflowX==="scroll"?h:0)+"px";y?(y.scrollLeft=b,y.scrollTop=0,n=a+s.left,h=s.top,e=p,a=g,b=0,v=-r,i.x===0&&(n-=s.left,e+=s.left,b=s.left),i.x+p===l&&(e+=s.right),i.y===0&&(h-=s.top,a+=s.top,v+=s.top),i.y+g===u&&(a+=s.bottom),y.style.left=n+"px",y.style.top=h+"px",y.style.right=E-e-n+"px",y.style.bottom=S-a-h+"px",t.style.left=b+"px",t.style.top=v+"px",t.style.width=l+"px",t.style.height=g+r+"px",c&&(c.style.left=t.style.left,c.style.top=t.style.top,c.style.width=t.style.width,c.style.height=t.style.height)):(n=b,h=r,E=b+p,S=r+g,n===0&&(n-=s.left),h===0&&(h-=s.top),E===l&&(E+=s.right),i.y+g===u&&(S+=s.bottom),t.style.clip="rect("+h+"px,"+E+"px,"+S+"px,"+n+"px)",t.style.left=-b+a+s.left+"px",t.style.width=(this._wrapMode||o.isWebkit?l:p+b)+"px",e||(t.style.top=-r+s.top+"px",t.style.height=g+r+"px"),c&&(c.style.clip=t.style.clip,c.style.left=t.style.left,c.style.width=t.style.width,!e)&&(c.style.top=t.style.top,c.style.height=t.style.height)),this._updateDOMSelection(),f&&(t=this._ensureCaretVisible,this._ensureCaretVisible=!1,t&&this._showCaret(),this._queueUpdate())}}},_updateOverflow:function(){var e=this._viewDiv;this._wrapMode?(e.style.overflowX="hidden",e.style.overflowY="scroll"):e.style.overflow="hidden"},_updateRuler:function(e,t,n,r){if(e)for(var i=this._parent.ownerDocument,s=this._getLineHeight(),a=this._getViewPadding(),e=e.firstChild;e;){var f=e._ruler,l=s,c=f.getOverview();c==="page"&&(l+=this._topIndexY),e.style.top=-l+"px",e.style.height=r+l+"px",e.rulerChanged&&u(f.getRulerStyle(),e);var h,p=e.firstChild;p?(h=p,p=p.nextSibling):(h=o.createElement(i,"div"),h.style.visibility="hidden",e.appendChild(h));var d;if(e.rulerChanged&&h){l=-1;if(d=f.getWidestAnnotation())if(u(d.style,h),d.html)h.innerHTML=d.html;h.lineIndex=l,h.style.height=s+a.top+"px"}var v;if(c==="page"){for(f=f.getAnnotations(t,n+1);p;)l=p.lineIndex,d=p.nextSibling,(!(t<=l&&l<=n)||p.lineChanged)&&e.removeChild(p),p=d;p=e.firstChild.nextSibling,v=i.createDocumentFragment();for(l=t;l<=n;l++)if(!p||p.lineIndex>l){h=o.createElement(i,"div");if(d=f[l])u(d.style,h),d.html&&(h.innerHTML=d.html),h.annotation=d;h.lineIndex=l,h.style.height=this._getLineHeight(l)+"px",v.appendChild(h)}else if(v.firstChild&&(e.insertBefore(v,p),v=i.createDocumentFragment()),p)p=p.nextSibling;v.firstChild&&e.insertBefore(v,p)}else{d=this._getClientHeight(),l=this._model.getLineCount(),p=d+a.top+a.bottom-2*this._metrics.scrollWidth,c=s*l<p?s:p/l;if(e.rulerChanged){for(d=e.childNodes.length;d>1;)e.removeChild(e.lastChild),d--;f=f.getAnnotations(0,l),v=i.createDocumentFragment();for(var m in f)if(l=m>>>0,!(l<0))h=o.createElement(i,"div"),d=f[m],u(d.style,h),h.style.position="absolute",h.style.top=this._metrics.scrollWidth+s+Math.floor(l*c)+"px",d.html&&(h.innerHTML=d.html),h.annotation=d,h.lineIndex=l,v.appendChild(h);e.appendChild(v)}else if(e._oldTrackHeight!==p)for(h=e.firstChild?e.firstChild.nextSibling:null;h;)h.style.top=this._metrics.scrollWidth+s+Math.floor(h.lineIndex*c)+"px",h=h.nextSibling;e._oldTrackHeight=p}e.rulerChanged=!1,e=e.nextSibling}},_updateStyleSheet:function(){var e="";o.isWebkit&&this._metrics.scrollWidth>0&&(e+="\n.textview ::-webkit-scrollbar-corner {background: #eeeeee;}"),o.isFirefox&&o.isMac&&this._highlightRGB&&this._highlightRGB!=="Highlight"&&(e+="\n.textview ::-moz-selection {background: "+this._highlightRGB+";}");if(e){var t=document.getElementById("_textviewStyle");if(t)t.removeChild(t.firstChild),t.appendChild(document.createTextNode(e));else{t=o.createElement(document,"style"),t.id="_textviewStyle";var n=document.getElementsByTagName("head")[0]||document.documentElement;t.appendChild(document.createTextNode(e)),n.insertBefore(t,n.firstChild)}}},_updateStyle:function(e){!e&&o.isIE&&(this._rootDiv.style.lineHeight="normal");var t=this._metrics=this._calculateMetrics();this._rootDiv.style.lineHeight=o.isIE?t.lineHeight-(t.lineTrim.top+t.lineTrim.bottom)+"px":"normal",this._updateStyleSheet(),e||(this.redraw(),this._resetLineWidth())}},r.EventTarget.addMixin(g.prototype),{TextView:g}}),define("orion/editor/projectionTextModel",["orion/editor/textModel","orion/editor/eventTarget"],function(e,t){function n(e){this._model=e,this._projections=[];var t=this;this._listener={onChanged:function(e){t._onChanged(e)},onChanging:function(e){t._onChanging(e)}},e.addEventListener("postChanged",this._listener.onChanged),e.addEventListener("preChanging",this._listener.onChanging)}return n.prototype={destroy:function(){this._model&&(this._model.removeEventListener("postChanged",this._listener.onChanged),this._model.removeEventListener("preChanging",this._listener.onChanging),this._model=null)},addProjection:function(t){if(t){var n=this._model,r=this._projections;t._lineIndex=n.getLineAtOffset(t.start),t._lineCount=n.getLineAtOffset(t.end)-t._lineIndex;var i=t.text;i||(i=""),t._model=typeof i=="string"?new e.TextModel(i,n.getLineDelimiter()):i;var n=this.mapOffset(t.start,!0),i=t.end-t.start,s=t._lineCount,o=t._model.getCharCount(),u=t._model.getLineCount()-1;this.onChanging({type:"Changing",text:t._model.getText(),start:n,removedCharCount:i,addedCharCount:o,removedLineCount:s,addedLineCount:u});var a=this._binarySearch(r,t.start);r.splice(a,0,t),this.onChanged({type:"Changed",start:n,removedCharCount:i,addedCharCount:o,removedLineCount:s,addedLineCount:u})}},getProjections:function(){return this._projections.slice(0)},getBaseModel:function(){return this._model},mapOffset:function(e,t){var n=this._projections,r=0,i,s;if(t){for(i=0;i<n.length;i++){s=n[i];if(s.start>e)break;if(s.end>e)return-1;r+=s._model.getCharCount()-(s.end-s.start)}return e+r}for(i=0;i<n.length;i++){s=n[i];if(s.start>e-r)break;var o=s._model.getCharCount();if(s.start+o>e-r)return-1;r+=o-(s.end-s.start)}return e-r},removeProjection:function(e){var t,n=0;for(t=0;t<this._projections.length;t++){var r=this._projections[t];if(r===e){e=r;break}n+=r._model.getCharCount()-(r.end-r.start)}if(t<this._projections.length){var r=this._model,n=e.start+n,i=e.end-e.start,s=e._lineCount,o=e._model.getCharCount(),u=e._model.getLineCount()-1;this.onChanging({type:"Changing",text:r.getText(e.start,e.end),start:n,removedCharCount:o,addedCharCount:i,removedLineCount:u,addedLineCount:s}),this._projections.splice(t,1),this.onChanged({type:"Changed",start:n,removedCharCount:o,addedCharCount:i,removedLineCount:u,addedLineCount:s})}},_binarySearch:function(e,t){for(var n=e.length,r=-1,i;n-r>1;)i=Math.floor((n+r)/2),t<=e[i].start?n=i:r=i;return n},getCharCount:function(){for(var e=this._model.getCharCount(),t=this._projections,n=0;n<t.length;n++){var r=t[n];e+=r._model.getCharCount()-(r.end-r.start)}return e},getLine:function(e,t){if(e<0)return null;var n=this._model,r=this._projections,i=0,s=[],o=0,u,a,f;for(u=0;u<r.length;u++){f=r[u];if(f._lineIndex>=e-i)break;a=f._model.getLineCount()-1;if(f._lineIndex+a>=e-i){if(o=e-(f._lineIndex+i),o<a)return f._model.getLine(o,t);s.push(f._model.getLine(a))}o=f.end,i+=a-f._lineCount}for(o=Math.max(o,n.getLineStart(e-i));u<r.length;u++){f=r[u];if(f._lineIndex>e-i)break;s.push(n.getText(o,f.start)),a=f._model.getLineCount()-1;if(f._lineIndex+a>e-i)return s.push(f._model.getLine(0,t)),s.join("");s.push(f._model.getText()),o=f.end,i+=a-f._lineCount}return r=n.getLineEnd(e-i,t),o<r&&s.push(n.getText(o,r)),s.join("")},getLineAtOffset:function(e){for(var t=this._model,n=this._projections,r=0,i=0,s=0;s<n.length;s++){var o=n[s];if(o.start>e-r)break;var u=o._model.getCharCount();if(o.start+u>e-r){n=e-(o.start+r),i+=o._model.getLineAtOffset(n),r+=n;break}i+=o._model.getLineCount()-1-o._lineCount,r+=u-(o.end-o.start)}return t.getLineAtOffset(e-r)+i},getLineCount:function(){for(var e=this._projections,t=this._model.getLineCount(),n=0;n<e.length;n++){var r=e[n];t+=r._model.getLineCount()-1-r._lineCount}return t},getLineDelimiter:function(){return this._model.getLineDelimiter()},getLineEnd:function(e,t){if(e<0)return-1;for(var n=this._model,r=this._projections,i=0,s=0,o=0;o<r.length;o++){var u=r[o];if(u._lineIndex>e-i)break;var a=u._model.getLineCount()-1;if(u._lineIndex+a>e-i)return u._model.getLineEnd(e-(u._lineIndex+i),t)+u.start+s;s+=u._model.getCharCount()-(u.end-u.start),i+=a-u._lineCount}return n.getLineEnd(e-i,t)+s},getLineStart:function(e){if(e<0)return-1;for(var t=this._model,n=this._projections,r=0,i=0,s=0;s<n.length;s++){var o=n[s];if(o._lineIndex>=e-r)break;var u=o._model.getLineCount()-1;if(o._lineIndex+u>=e-r)return o._model.getLineStart(e-(o._lineIndex+r))+o.start+i;i+=o._model.getCharCount()-(o.end-o.start),r+=u-o._lineCount}return t.getLineStart(e-r)+i},getText:function(e,t){e===void 0&&(e=0);var n=this._model,r=this._projections,i=0,s=[],o,u,a;for(o=0;o<r.length;o++){u=r[o];if(u.start>e-i)break;a=u._model.getCharCount();if(u.start+a>e-i){if(t!==void 0&&u.start+a>t-i)return u._model.getText(e-(u.start+i),t-(u.start+i));s.push(u._model.getText(e-(u.start+i))),e=u.end+i+a-(u.end-u.start)}i+=a-(u.end-u.start)}var f=e-i;if(t!==void 0){for(;o<r.length;o++){u=r[o];if(u.start>t-i)break;s.push(n.getText(f,u.start)),a=u._model.getCharCount();if(u.start+a>t-i)return s.push(u._model.getText(0,t-(u.start+i))),s.join("");s.push(u._model.getText()),f=u.end,i+=a-(u.end-u.start)}s.push(n.getText(f,t-i))}else{for(;o<r.length;o++)u=r[o],s.push(n.getText(f,u.start)),s.push(u._model.getText()),f=u.end;s.push(n.getText(f))}return s.join("")},_onChanged:function(){var e=this._change,t=e.baseStart,n=e.baseEnd,r,i,s=this._projections;for(r=0;r<s.length;r++)if(i=s[r],i.end>t)break;var o=r;for(r=0;r<s.length;r++)if(i=s[r],i.start>=n)break;var u=r,a=this._model,t=e.baseText.length-(n-t);for(r=u;r<s.length;r++)i=s[r],i.start+=t,i.end+=t,i._lineIndex=a.getLineAtOffset(i.start);i=s.splice(o,u-o);for(r=0;r<i.length;r++)i[r].annotation&&i[r].annotation._expand();this.onChanged({type:"Changed",start:e.start,removedCharCount:e.removedCharCount,addedCharCount:e.addedCharCount,removedLineCount:e.removedLineCount,addedLineCount:e.addedLineCount}),this._change=void 0},_onChanging:function(e){var t=!!this._change,n=this._change||{},r=e.start,i=r+e.removedCharCount;n.baseStart=r,n.baseEnd=i,n.baseText=e.text,n.addedLineCount=e.addedLineCount;if(!t){this._change=n,n.text=e.text;var s=this._projections,o,u,a,e=function(e){for(u=0,o=0;u<s.length;u++){a=s[u];if(a.start>e)break;if(a.end>e)return-1;o+=a._model.getCharCount()-(a.end-a.start)}return e+o};n.start=e(r),n.start===-1&&(n.text=this._model.getText(a.start,r)+n.text,n.addedLineCount+=this._model.getLineAtOffset(r)-this._model.getLineAtOffset(a.start),n.start=a.start+o),n.end=e(i),n.end===-1&&(n.text+=this._model.getText(i,a.end),n.addedLineCount+=this._model.getLineAtOffset(a.end)-this._model.getLineAtOffset(i),n.end=a.start+o)}n.addedCharCount=n.text.length,n.removedCharCount=n.end-n.start,n.removedLineCount=this.getLineAtOffset(n.end)-this.getLineAtOffset(n.start),this.onChanging({type:"Changing",text:n.text,start:n.start,removedCharCount:n.removedCharCount,addedCharCount:n.addedCharCount,removedLineCount:n.removedLineCount,addedLineCount:n.addedLineCount})},onChanging:function(e){return this.dispatchEvent(e)},onChanged:function(e){return this.dispatchEvent(e)},setLineDelimiter:function(e){this._model.setLineDelimiter(e)},setText:function(e,t,n){function r(e){for(o=0,s=0;o<i.length;o++){u=i[o];if(u.start>e-s)break;var t=u._model.getCharCount();if(u.start+t>e-s)return-1;s+=t-(u.end-u.start)}return e-s}this._change={text:e||"",start:t||0,end:n===void 0?this.getCharCount():n};var i=this._projections,s,o,u,a,f,e=r(this._change.start);e===-1&&(a={projection:u,start:this._change.start-(u.start+s)},e=u.end),t=r(this._change.end),t===-1&&(f={projection:u,end:this._change.end-(u.start+s)},t=u.start),a&&f&&a.projection===f.projection?u._model.setText(this._change.text,a.start,f.end):(this._model.setText(this._change.text,e,t),a&&(u=a.projection,u._model.setText("",a.start)),f&&(u=f.projection,u._model.setText("",0,f.end),u.start=u.end,u._lineCount=0)),this._change=void 0}},t.EventTarget.addMixin(n.prototype),{ProjectionTextModel:n}}),define("orion/editor/annotations",["i18n!orion/editor/nls/messages","orion/editor/eventTarget"],function(e,t){function n(e,t,n){this.start=e,this.end=t,this._projectionModel=n,this.html=this._expandedHTML,this.style=this._expandedStyle,this.expanded=!0}function r(){}function i(t,n){var i=t.lastIndexOf("."),i=t.substring(i+1),s={title:e[i],style:{styleClass:"annotation "+i},html:"<div class='annotationHTML "+i+"'></div>",overviewStyle:{styleClass:"annotationOverview "+i}};n?s.lineStyle={styleClass:"annotationLine "+i}:s.rangeStyle={styleClass:"annotationRange "+i},r.registerType(t,s)}function s(){}function o(e){this._annotations=[];var t=this;this._listener={onChanged:function(e){t._onChanged(e)}},this.setTextModel(e)}function u(e,t){this._view=e,this._annotationModel=t;var n=this;this._listener={onDestroy:function(e){n._onDestroy(e)},onLineStyle:function(e){n._onLineStyle(e)},onChanged:function(e){n._onAnnotationModelChanged(e)}},e.addEventListener("Destroy",this._listener.onDestroy),e.addEventListener("postLineStyle",this._listener.onLineStyle),t.addEventListener("Changed",this._listener.onChanged)}n.prototype={_expandedHTML:"<div class='annotationHTML expanded'></div>",_expandedStyle:{styleClass:"annotation expanded"},_collapsedHTML:"<div class='annotationHTML collapsed'></div>",_collapsedStyle:{styleClass:"annotation collapsed"},_collapse:function(){return this.expanded?(this.expanded=!1,this.html=this._collapsedHTML,this.style=this._collapsedStyle,this._annotationModel&&this._annotationModel.modifyAnnotation(this),!0):!1},_expand:function(){return this.expanded?!1:(this.expanded=!0,this.html=this._expandedHTML,this.style=this._expandedStyle,this._annotationModel&&this._annotationModel.modifyAnnotation(this),!0)},collapse:function(){if(this._collapse()){var e=this._projectionModel,t=e.getBaseModel();this._projection={annotation:this,start:t.getLineStart(t.getLineAtOffset(this.start)+1),end:t.getLineEnd(t.getLineAtOffset(this.end),!0)},e.addProjection(this._projection)}},expand:function(){this._expand()&&this._projectionModel.removeProjection(this._projection)}},r.ANNOTATION_ERROR="orion.annotation.error",r.ANNOTATION_WARNING="orion.annotation.warning",r.ANNOTATION_TASK="orion.annotation.task",r.ANNOTATION_BREAKPOINT="orion.annotation.breakpoint",r.ANNOTATION_BOOKMARK="orion.annotation.bookmark",r.ANNOTATION_FOLDING="orion.annotation.folding",r.ANNOTATION_CURRENT_BRACKET="orion.annotation.currentBracket",r.ANNOTATION_MATCHING_BRACKET="orion.annotation.matchingBracket",r.ANNOTATION_CURRENT_LINE="orion.annotation.currentLine",r.ANNOTATION_CURRENT_SEARCH="orion.annotation.currentSearch",r.ANNOTATION_MATCHING_SEARCH="orion.annotation.matchingSearch",r.ANNOTATION_READ_OCCURRENCE="orion.annotation.readOccurrence",r.ANNOTATION_WRITE_OCCURRENCE="orion.annotation.writeOccurrence",r.ANNOTATION_SELECTED_LINKED_GROUP="orion.annotation.selectedLinkedGroup",r.ANNOTATION_CURRENT_LINKED_GROUP="orion.annotation.currentLinkedGroup",r.ANNOTATION_LINKED_GROUP="orion.annotation.linkedGroup",r.ANNOTATION_BLAME="orion.annotation.blame",r.ANNOTATION_CURRENT_BLAME="orion.annotation.currentBlame";var a={};return r.registerType=function(e,t){var n=t;return typeof n!="function"&&(n=function(e,t,n){this.start=e,this.end=t,n!==void 0&&(this.title=n)},n.prototype=t),n.prototype.type=e,a[e]=n,e},r.createAnnotation=function(e,t,n,r){return new(this.getType(e))(t,n,r)},r.getType=function(e){return a[e]},i(r.ANNOTATION_ERROR),i(r.ANNOTATION_WARNING),i(r.ANNOTATION_TASK),i(r.ANNOTATION_BREAKPOINT),i(r.ANNOTATION_BOOKMARK),i(r.ANNOTATION_CURRENT_BRACKET),i(r.ANNOTATION_MATCHING_BRACKET),i(r.ANNOTATION_CURRENT_SEARCH),i(r.ANNOTATION_MATCHING_SEARCH),i(r.ANNOTATION_READ_OCCURRENCE),i(r.ANNOTATION_WRITE_OCCURRENCE),i(r.ANNOTATION_SELECTED_LINKED_GROUP),i(r.ANNOTATION_CURRENT_LINKED_GROUP),i(r.ANNOTATION_LINKED_GROUP),i(r.ANNOTATION_CURRENT_LINE,!0),i(r.ANNOTATION_BLAME,!0),i(r.ANNOTATION_CURRENT_BLAME,!0),r.registerType(r.ANNOTATION_FOLDING,n),s.addMixin=function(e){var t=s.prototype,n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},s.prototype={addAnnotationType:function(e){this._annotationTypes||(this._annotationTypes=[]),this._annotationTypes.push(e)},getAnnotationTypePriority:function(e){if(this._annotationTypes)for(var t=0;t<this._annotationTypes.length;t++)if(this._annotationTypes[t]===e)return t+1;return 0},getAnnotationsByType:function(e,t,n){e=e.getAnnotations(t,n);for(n=[];e.hasNext();)t=e.next(),this.getAnnotationTypePriority(t.type)!==0&&n.push(t);var r=this;return n.sort(function(e,t){return r.getAnnotationTypePriority(e.type)-r.getAnnotationTypePriority(t.type)}),n},isAnnotationTypeVisible:function(e){return this.getAnnotationTypePriority(e)!==0},removeAnnotationType:function(e){if(this._annotationTypes)for(var t=0;t<this._annotationTypes.length;t++)if(this._annotationTypes[t]===e){this._annotationTypes.splice(t,1);break}}},o.prototype={addAnnotation:function(e){if(e){var t=this._annotations,n=this._binarySearch(t,e.start);t.splice(n,0,e),e._annotationModel=this,this.onChanged({type:"Changed",added:[e],removed:[],changed:[]})}},getTextModel:function(){return this._model},getAnnotations:function(e,t){var n=this._annotations,r,i=0,s;return s=e===void 0&&t===void 0?function(){return i<n.length?n[i++]:null}:function(){for(;i<n.length;){var r=n[i++];if(e===r.start||(e>r.start?e<r.end:r.start<t))return r;if(r.start>=t)break}return null},r=s(),{next:function(){var e=r;return e&&(r=s()),e},hasNext:function(){return r!==null}}},modifyAnnotation:function(e){e&&!(this._getAnnotationIndex(e)<0)&&this.onChanged({type:"Changed",added:[],removed:[],changed:[e]})},onChanged:function(e){return this.dispatchEvent(e)},removeAnnotations:function(e){var t=this._annotations,n,r;if(e){n=[];for(r=t.length-1;r>=0;r--){var i=t[r];i.type===e&&(t.splice(r,1),n.splice(0,0,i),i._annotationModel=null)}}else n=t;this.onChanged({type:"Changed",removed:n,added:[],changed:[]})},removeAnnotation:function(e){if(e){var t=this._getAnnotationIndex(e);t<0||(e._annotationModel=null,this.onChanged({type:"Changed",removed:this._annotations.splice(t,1),added:[],changed:[]}))}},replaceAnnotations:function(e,t){var n=this._annotations,r,i,s,o=[];if(e)for(r=e.length-1;r>=0;r--)if(s=e[r],i=this._getAnnotationIndex(s),!(i<0))s._annotationModel=null,n.splice(i,1),o.splice(0,0,s);t||(t=[]);for(r=0;r<t.length;r++)s=t[r],i=this._binarySearch(n,s.start),s._annotationModel=this,n.splice(i,0,s);this.onChanged({type:"Changed",removed:o,added:t,changed:[]})},setTextModel:function(e){this._model&&this._model.removeEventListener("Changed",this._listener.onChanged),(this._model=e)&&this._model.addEventListener("Changed",this._listener.onChanged)},_binarySearch:function(e,t){for(var n=e.length,r=-1,i;n-r>1;)i=Math.floor((n+r)/2),t<=e[i].start?n=i:r=i;return n},_getAnnotationIndex:function(e){for(var t=this._annotations,n=this._binarySearch(t,e.start);n<t.length&&t[n].start===e.start;){if(t[n]===e)return n;n++}return-1},_onChanged:function(e){var t=e.start,n=e.removedCharCount,r=this._annotations,i=t+n;if(0<r.length){for(var s={type:"Changed",added:[],removed:[],changed:[],textModelChangedEvent:e},e=e.addedCharCount-n,n=0;n<r.length;n++){var o=r[n];o.start>=i?(o._oldStart=o.start,o._oldEnd=o.end,o.start+=e,o.end+=e,s.changed.push(o)):o.end<=t||(o.start<t&&i<o.end?(o._oldStart=o.start,o._oldEnd=o.end,o.end+=e,s.changed.push(o)):(r.splice(n,1),s.removed.push(o),o._annotationModel=null,o.expand&&o.expand(),n--))}(s.added.length>0||s.removed.length>0||s.changed.length>0)&&this.onChanged(s)}}},t.EventTarget.addMixin(o.prototype),u.prototype={destroy:function(){var e=this._view;e&&(e.removeEventListener("Destroy",this._listener.onDestroy),e.removeEventListener("LineStyle",this._listener.onLineStyle),this.view=null),(e=this._annotationModel)&&e.removeEventListener("Changed",this._listener.onChanged)},_mergeStyle:function(e,t){if(t){e||(e={}),e.styleClass&&t.styleClass&&e.styleClass!==t.styleClass?e.styleClass+=" "+t.styleClass:e.styleClass=t.styleClass;var n;t.tagName&&!e.tagName&&(e.tagName=t.tagName);if(t.style){e.style||(e.style={});for(n in t.style)e.style[n]||(e.style[n]=t.style[n])}if(t.attributes){e.attributes||(e.attributes={});for(n in t.attributes)e.attributes[n]||(e.attributes[n]=t.attributes[n])}}return e},_mergeStyleRanges:function(e,t){e||(e=[]);var n,r;for(r=0;r<e.length&&t;r++){var i=e[r];if(t.end<=i.start)break;if(!(t.start>=i.end)){n=this._mergeStyle({},i.style),n=this._mergeStyle(n,t.style);var s=[];s.push(r,1),t.start<i.start&&s.push({start:t.start,end:i.start,style:t.style}),t.start>i.start&&s.push({start:i.start,end:t.start,style:i.style}),s.push({start:Math.max(i.start,t.start),end:Math.min(i.end,t.end),style:n}),t.end<i.end&&s.push({start:t.end,end:i.end,style:i.style}),t=t.end>i.end?{start:i.end,end:t.end,style:t.style}:null,Array.prototype.splice.apply(e,s)}}return t&&(n=this._mergeStyle({},t.style),e.splice(r,0,{start:t.start,end:t.end,style:n})),e},_onAnnotationModelChanged:function(e){function t(e,t){s.getBaseModel&&(e=s.mapOffset(e,!0),t=s.mapOffset(t,!0)),e!==-1&&t!==-1&&r.redrawRange(e,t)}function n(e,n){for(var r=0;r<e.length;r++)if(i.isAnnotationTypeVisible(e[r].type)){var s=e[r];t(s.start,s.end),n&&s._oldStart!==void 0&&s._oldEnd&&t(s._oldStart,s._oldEnd)}}var r=this._view;if(r){var i=this,s=r.getModel();n(e.added),n(e.removed),n(e.changed,!0)}},_onDestroy:function(){this.destroy()},_onLineStyle:function(e){var t=this._annotationModel,n=e.textView.getModel(),r=t.getTextModel(),i=e.lineStart,s=e.lineStart+e.lineText.length;r!==n&&(i=n.mapOffset(i),s=n.mapOffset(s));for(t=t.getAnnotations(i,s);t.hasNext();)if(i=t.next(),this.isAnnotationTypeVisible(i.type)){if(i.rangeStyle){var s=i.start,o=i.end;r!==n&&(s=n.mapOffset(s,!0),o=n.mapOffset(o,!0)),e.ranges=this._mergeStyleRanges(e.ranges,{start:s,end:o,style:i.rangeStyle})}i.lineStyle&&(e.style=this._mergeStyle({},e.style),e.style=this._mergeStyle(e.style,i.lineStyle))}}},s.addMixin(u.prototype),{FoldingAnnotation:n,AnnotationType:r,AnnotationTypeList:s,AnnotationModel:o,AnnotationStyler:u}}),define("orion/editor/tooltip","i18n!orion/editor/nls/messages,orion/editor/textView,orion/editor/textModel,orion/editor/projectionTextModel,orion/editor/util,orion/util".split(","),function(e,t,n,r,i,s){function o(e){this._view=e,this._fadeDelay=500,this._hideDelay=200,this._showDelay=500,this._autoHideDelay=5e3,this._create(e.getOptions("parent").ownerDocument)}return o.getTooltip=function(e){return e._tooltip||(e._tooltip=new o(e)),e._tooltip},o.prototype={_create:function(e){if(!this._tooltipDiv){var t=this._tooltipDiv=s.createElement(e,"div");t.tabIndex=0,t.className="textviewTooltip",t.setAttribute("aria-live","assertive"),t.setAttribute("aria-atomic","true");var n=this._tooltipContents=s.createElement(e,"div");t.appendChild(n),e.body.appendChild(t);var r=this;i.addEventListener(t,"mouseover",function(){if(r._hideDelay){var e=r._getWindow();r._delayedHideTimeout&&(e.clearTimeout(r._delayedHideTimeout),r._delayedHideTimeout=null),r._hideTimeout&&(e.clearTimeout(r._hideTimeout),r._hideTimeout=null),r._nextTarget=null}},!1),i.addEventListener(t,"mouseout",function(e){e=e.relatedTarget||e.toElement,e===t||r._hasFocus()||(!e||!i.contains(t,e))&&r._hide()},!1),i.addEventListener(t,"keydown",function(e){e.keyCode===27&&r._hide()},!1),i.addEventListener(e,"mousedown",this._mouseDownHandler=function(e){r.isVisible()&&(i.contains(t,e.target||e.srcElement)||r._hide())},!0),this._view.addEventListener("Destroy",function(){r.destroy()}),this._hide()}},_getWindow:function(){var e=this._tooltipDiv.ownerDocument;return e.defaultView||e.parentWindow},destroy:function(){if(this._tooltipDiv){this._hide();var e=this._tooltipDiv.parentNode;e&&e.removeChild(this._tooltipDiv),i.removeEventListener(this._tooltipDiv.ownerDocument,"mousedown",this._mouseDownHandler,!0),this._tooltipDiv=null}},_hasFocus:function(){var e=this._tooltipDiv;return e?i.contains(e,e.ownerDocument.activeElement):!1},hide:function(e){e===void 0&&(e=this._hideDelay);var t=this._getWindow();this._delayedHideTimeout&&(t.clearTimeout(this._delayedHideTimeout),this._delayedHideTimeout=null);var n=this;e?n._delayedHideTimeout=t.setTimeout(function(){n._delayedHideTimeout=null,n._hide(),n.setTarget(n._nextTarget,0)},e):(n._hide(),n.setTarget(n._nextTarget,0))},_hide:function(){var e=this._tooltipDiv;e&&(this._hasFocus()&&this._view.focus(),this._contentsView&&(this._contentsView.destroy(),this._contentsView=null),this._tooltipContents&&(this._tooltipContents.innerHTML=""),e.style.visibility="hidden",e=this._getWindow(),this._showTimeout&&(e.clearTimeout(this._showTimeout),this._showTimeout=null),this._delayedHideTimeout&&(e.clearTimeout(this._delayedHideTimeout),this._delayedHideTimeout=null),this._hideTimeout&&(e.clearTimeout(this._hideTimeout),this._hideTimeout=null),this._fadeTimeout&&(e.clearInterval(this._fadeTimeout),this._fadeTimeout=null))},isVisible:function(){return this._tooltipDiv&&this._tooltipDiv.style.visibility==="visible"},setTarget:function(e,t,n){if(this.isVisible())this._hasFocus()||(this._nextTarget=e,this.hide(n));else if(this._target=e){var r=this,e=r._getWindow();r._showTimeout&&(e.clearTimeout(r._showTimeout),r._showTimeout=null),t===0?r.show(!0):r._showTimeout=e.setTimeout(function(){r._showTimeout=null,r.show(!0)},t?t:r._showDelay)}},show:function(e){if(this._target){var n=this._target.getTooltipInfo();if(n){var i=this._tooltipDiv,s=this._tooltipContents;i.style.left=i.style.right=i.style.width=i.style.height=s.style.width=s.style.height="auto";var o=n.contents;o instanceof Array&&(o=this._getAnnotationContents(o));if(typeof o=="string")s.innerHTML=o;else if(this._isNode(o))s.appendChild(o);else{if(!(o instanceof r.ProjectionTextModel))return;var u=this._view,a=u.getOptions();a.wrapMode=!1,a.parent=s;var f=a.themeClass;f?((f=f.replace("tooltipTheme",""))&&(f=" "+f),f="tooltipTheme"+f):f="tooltipTheme",a.themeClass=f,a=this._contentsView=new t.TextView(a),a.addEventListener("LineStyle",function(e){u.onLineStyle(e)}),a.setModel(o),o=a.computeSize(),s.style.width=o.width+"px",s.style.height=o.height+"px",a.resize()}s=i.ownerDocument.documentElement,n.anchor==="right"?(o=s.clientWidth-n.x,i.style.right=o+"px"):(o=parseInt(this._getNodeStyle(i,"padding-left","0"),10),o+=parseInt(this._getNodeStyle(i,"border-left-width","0"),10),o=n.x-o,i.style.left=o+"px"),i.style.maxWidth=s.clientWidth-o-10+"px",o=parseInt(this._getNodeStyle(i,"padding-top","0"),10),o+=parseInt(this._getNodeStyle(i,"border-top-width","0"),10),o=n.y-o,i.style.top=o+"px",i.style.maxHeight=s.clientHeight-o-10+"px",i.style.opacity="1",i.style.visibility="visible";if(e){var l=this,c=this._getWindow();l._hideTimeout=c.setTimeout(function(){l._hideTimeout=null;var e=parseFloat(l._getNodeStyle(i,"opacity","1"));l._fadeTimeout=c.setInterval(function(){i.style.visibility==="visible"&&e>0?(e-=.1,i.style.opacity=e):l._hide()},l._fadeDelay/10)},l._autoHideDelay)}}}},_getAnnotationContents:function(t){function n(e,t){var n=m.getLineStart(m.getLineAtOffset(e)),r=m.getLineEnd(m.getLineAtOffset(t),!0);return m.getText(n,r)}function o(e){var t=e.title,r=s.createElement(h,"div");r.className="tooltipRow",e.html&&(r.innerHTML=e.html,r.lastChild&&i.addEventListener(r.lastChild,"click",function(){var t=e.start,n=e.end;v.getBaseModel&&(t=v.mapOffset(t,!0),n=v.mapOffset(n,!0)),p.setSelection(t,n,1/3,function(){l._hide()})},!1),r.appendChild(h.createTextNode(""))),t||(t=n(e.start,e.end)),typeof t=="function"&&(t=e.title());if(typeof t=="string"){var o=s.createElement(h,"span");o.appendChild(h.createTextNode(t)),t=o}return r.appendChild(t),r}for(var u,a=[],f=0;f<t.length;f++)u=t[f],u.title!==""&&!u.groupAnnotation&&a.push(u);t=a;if(t.length===0)return null;var l=this,h=this._tooltipDiv.ownerDocument,p=this._view,v=p.getModel(),m=v.getBaseModel?v.getBaseModel():v;if(t.length===1)return(u=t[0],u.title!==void 0)?(u=o(u),u.firstChild&&((t=u.firstChild.className)&&(t+=" "),t+="single",u.firstChild.className=t),u):(t=new r.ProjectionTextModel(m),a=m.getLineStart(m.getLineAtOffset(u.start)),f=m.getCharCount(),u.end!==f&&t.addProjection({start:u.end,end:f}),a>0&&t.addProjection({start:0,end:a}),t);a=s.createElement(h,"div"),u=s.createElement(h,"em"),u.appendChild(h.createTextNode(e.multipleAnnotations)),a.appendChild(u);for(f=0;f<t.length;f++)u=t[f],(u=o(u))&&a.appendChild(u);return a},_getNodeStyle:function(e,t,n){var r;if(e&&(r=e.style[t],!r))if(e.currentStyle){for(r=0;(r=t.indexOf("-",r))!==-1;)t=t.substring(0,r)+t.substring(r+1,r+2).toUpperCase()+t.substring(r+2);r=e.currentStyle[t]}else r=(e=e.ownerDocument.defaultView.getComputedStyle(e,null))?e.getPropertyValue(t):null;return r||n},_isNode:function(e){return typeof Node=="object"?e instanceof Node:e&&typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.nodeName=="string"}},{Tooltip:o}}),define("orion/editor/rulers",["i18n!orion/editor/nls/messages","orion/editor/annotations","orion/editor/tooltip","orion/util"],function(e,t,n,r){function i(e,t,n,r){this._location=t||"left",this._overview=n||"page",this._rulerStyle=r,this._view=null;var i=this;this._listener={onTextModelChanged:function(e){i._onTextModelChanged(e)},onAnnotationModelChanged:function(e){i._onAnnotationModelChanged(e)}},this.setAnnotationModel(e)}function s(e,t,n,r,s){i.call(this,e,t,"page",n),this._oddStyle=r||{style:{backgroundColor:"white"}},this._evenStyle=s||{style:{backgroundColor:"white"}},this._numOfDigits=0,this._firstLine=1}function o(e,t,n){i.call(this,e,t,"page",n)}function u(e,t,n){i.call(this,e,t,"document",n)}function a(e,t,n){o.call(this,e,t,n)}return i.prototype={getAnnotations:function(e,t){var n=this._annotationModel;if(!n)return[];var r=this._view.getModel(),i=r.getLineStart(e),s=r.getLineEnd(t-1),o=r;r.getBaseModel&&(o=r.getBaseModel(),i=r.mapOffset(i),s=r.mapOffset(s));for(var u=[],n=this.getAnnotationsByType(n,i,s),i=0;i<n.length;i++)for(var s=n[i],a=o.getLineAtOffset(s.start),f=o.getLineAtOffset(Math.max(s.start,s.end-1)),l=a;l<=f;l++){var c=l;if(r!==o){c=o.getLineStart(l),c=r.mapOffset(c,!0);if(c===-1)continue;c=r.getLineAtOffset(c)}if(e<=c&&c<t){var h=this._mergeAnnotation(u[c],s,l-a,f-a+1);h&&(u[c]=h)}}if(!this._multiAnnotation&&this._multiAnnotationOverlay)for(var p in u)u[p]._multiple&&(u[p].html+=this._multiAnnotationOverlay.html);return u},getAnnotationModel:function(){return this._annotationModel},getLocation:function(){return this._location},getOverview:function(){return this._overview},getRulerStyle:function(){return this._rulerStyle},getView:function(){return this._view},getWidestAnnotation:function(){return null},setAnnotationModel:function(e){this._annotationModel&&this._annotationModel.removEventListener("Changed",this._listener.onAnnotationModelChanged),(this._annotationModel=e)&&this._annotationModel.addEventListener("Changed",this._listener.onAnnotationModelChanged)},setMultiAnnotation:function(e){this._multiAnnotation=e},setMultiAnnotationOverlay:function(e){this._multiAnnotationOverlay=e},setView:function(e){this._onTextModelChanged&&this._view&&this._view.removeEventListener("ModelChanged",this._listener.onTextModelChanged),this._view=e,this._onTextModelChanged&&this._view&&this._view.addEventListener("ModelChanged",this._listener.onTextModelChanged)},onClick:function(e){if(e!==void 0){var t=this._view,r=t.getModel(),i=r,s=r.getLineStart(e),o=s,u=s,a=this._annotationModel;if(a){t=t.getSelection(),u=r.getLineEnd(e,!0),s<=t.start&&t.start<u&&(s=t.start),r.getBaseModel&&(s=r.mapOffset(s),u=r.mapOffset(u),i=r.getBaseModel());for(var f,u=a.getAnnotations(s,u),a=null;!f&&u.hasNext();)t=u.next(),this.isAnnotationTypeVisible(t.type)&&(a=t,t.start<=s||(f=t));a&&a.groupId!==void 0&&(this._currentClickGroup=this._currentClickGroup===a.groupId?null:a.groupId,this._setCurrentGroup(e)),f&&i.getLineAtOffset(f.start)===i.getLineAtOffset(s)?(s=f.start,u=f.end):u=s=o,r.getBaseModel&&(s=r.mapOffset(s,!0),u=r.mapOffset(u,!0))}(e=n.Tooltip.getTooltip(this._view))&&e.setTarget(null),this._view.setSelection(u,s,1/3,function(){})}},onDblClick:function(){},onMouseMove:function(e,t){var r=n.Tooltip.getTooltip(this._view);if(r&&(!r.isVisible()||this._tooltipLineIndex!==e)){this._tooltipLineIndex=e;var i=this;r.setTarget({y:t.clientY,getTooltipInfo:function(){return i._getTooltipInfo(i._tooltipLineIndex,this.y)}})}},onMouseOver:function(e,t){this.onMouseMove(e,t),this._currentClickGroup||this._setCurrentGroup(e)},onMouseOut:function(){this._currentClickGroup||this._setCurrentGroup(-1);var e=n.Tooltip.getTooltip(this._view);e&&e.setTarget(null)},_getTooltipInfo:function(e,t){if(e!==void 0){var n=this._view,r=n.getModel(),i=this._annotationModel,s=[];if(i){var s=r.getLineStart(e),o=r.getLineEnd(e);r.getBaseModel&&(s=r.mapOffset(s),o=r.mapOffset(o)),s=this.getAnnotationsByType(i,s,o)}return i=this._getTooltipContents(e,s),i?(i={contents:i,anchor:this.getLocation()},s=n.getClientArea(),s.y=this.getOverview()==="document"?n.convert({y:t},"view","document").y:n.getLocationAtOffset(r.getLineStart(e)).y,n.convert(s,"document","page"),i.x=s.x,i.y=s.y,i.anchor==="right"&&(i.x+=s.width),i):null}},_getTooltipContents:function(e,t){return t},_onAnnotationModelChanged:function(e){function t(e){for(var t=0;t<e.length;t++)if(i.isAnnotationTypeVisible(e[t].type)){var s=e[t].start,o=e[t].end;r.getBaseModel&&(s=r.mapOffset(s,!0),o=r.mapOffset(o,!0)),s!==-1&&o!==-1&&n.redrawLines(r.getLineAtOffset(s),r.getLineAtOffset(Math.max(s,o-1))+1,i)}}var n=this._view;if(n){var r=n.getModel(),i=this,s=r.getLineCount();e.textModelChangedEvent?(e=e.textModelChangedEvent.start,r.getBaseModel&&(e=r.mapOffset(e,!0)),e=r.getLineAtOffset(e),n.redrawLines(e,s,i)):(t(e.added),t(e.removed),t(e.changed))}},_mergeAnnotation:function(e,t,n){return e||(e={}),n===0&&(e.html&&t.html?(t.html!==e.html&&!e._multiple&&this._multiAnnotation&&(e.html=this._multiAnnotation.html),e._multiple=!0):e.html=t.html),e.style=this._mergeStyle(e.style,t.style),e},_mergeStyle:function(e,t){if(t){e||(e={}),e.styleClass&&t.styleClass&&e.styleClass!==t.styleClass?e.styleClass+=" "+t.styleClass:e.styleClass=t.styleClass;var n;if(t.style){e.style||(e.style={});for(n in t.style)e.style[n]===void 0&&(e.style[n]=t.style[n])}if(t.attributes){e.attributes||(e.attributes={});for(n in t.attributes)e.attributes[n]===void 0&&(e.attributes[n]=t.attributes[n])}}return e},_setCurrentGroup:function(e){var t=this._annotationModel,n=null,r=t.getTextModel(),i,s=this._currentGroupAnnotation;if(e!==-1){var o=r.getLineStart(e),u=r.getLineEnd(e);r.getBaseModel&&(o=r.mapOffset(o),u=r.mapOffset(u));for(i=t.getAnnotations(o,u);i.hasNext();)if(r=i.next(),this.isAnnotationTypeVisible(r.type)&&r.start<=o&&r.end>=u&&r.groupId!==void 0){n=r;break}if(s&&n&&s.groupId===n.groupId)return}this._currentGroupAnnotation=null,s&&t.removeAnnotations(s.groupType);if(n&&e!==-1){this._currentGroupAnnotation=n,i=t.getAnnotations();for(e=[];i.hasNext();)r=i.next(),delete r.groupAnnotation,r.groupId===n.groupId&&(r=r.createGroupAnnotation(),e.push(r));t.replaceAnnotations(null,e)}}},t.AnnotationTypeList.addMixin(i.prototype),s.prototype=new i,s.prototype.getAnnotations=function(e,t){for(var n=i.prototype.getAnnotations.call(this,e,t),r=this._view.getModel(),s=e;s<t;s++){var o=s&1?this._oddStyle:this._evenStyle,u=s;r.getBaseModel&&(u=r.getLineStart(u),u=r.getBaseModel().getLineAtOffset(r.mapOffset(u))),n[s]||(n[s]={}),n[s].html=this._firstLine+u+"",n[s].style||(n[s].style=o)}return n},s.prototype.getWidestAnnotation=function(){var e=this._view.getModel().getLineCount();return this.getAnnotations(e-1,e)[e-1]},s.prototype.setFirstLine=function(e){this._firstLine=e!==void 0?e:1},s.prototype._onTextModelChanged=function(e){var e=e.start,t=this._view.getModel(),n=(this._firstLine+(t.getBaseModel?t.getBaseModel().getLineCount():t.getLineCount())-1+"").length;this._numOfDigits!==n&&(this._numOfDigits=n,this._view.redrawLines(t.getLineAtOffset(e),t.getLineCount(),this))},o.prototype=new i,u.prototype=new i,u.prototype.getRulerStyle=function(){var e={style:{lineHeight:"1px",fontSize:"1px"}};return e=this._mergeStyle(e,this._rulerStyle)},u.prototype._getTooltipContents=function(t,n){if(n.length===0){var s=this._view.getModel(),o=t;return s.getBaseModel&&(o=s.getLineStart(o),o=s.getBaseModel().getLineAtOffset(s.mapOffset(o))),r.formatMessage(e.line,o+1)}return i.prototype._getTooltipContents.call(this,t,n)},u.prototype._mergeAnnotation=function(e,t,n,r){if(n===0)return e||(e={html:"&nbsp;",style:{style:{height:3*r+"px"}}},e.style=this._mergeStyle(e.style,t.overviewStyle)),e},a.prototype=new o,a.prototype.onClick=function(e){if(e!==void 0){var t=this._annotationModel;if(t){var r=this._view.getModel(),i=r.getLineStart(e),e=r.getLineEnd(e,!0);r.getBaseModel&&(i=r.mapOffset(i),e=r.mapOffset(e),r=r.getBaseModel());for(var s,t=t.getAnnotations(i,e);!s&&t.hasNext();)e=t.next(),this.isAnnotationTypeVisible(e.type)&&(s=e);s&&r.getLineAtOffset(s.start)===r.getLineAtOffset(i)&&((r=n.Tooltip.getTooltip(this._view))&&r.setTarget(null),s.expanded?s.collapse():s.expand())}}},a.prototype._getTooltipContents=function(e,t){return t.length===1&&t[0].expanded?null:o.prototype._getTooltipContents.call(this,e,t)},a.prototype._onAnnotationModelChanged=function(e){function t(e){for(s=0;s<e.length;s++)if(i.isAnnotationTypeVisible(e[s].type)){var t=e[s].start;r.getBaseModel&&(t=r.mapOffset(t,!0)),t!==-1&&(a=Math.min(a,r.getLineAtOffset(t)))}}if(e.textModelChangedEvent)o.prototype._onAnnotationModelChanged.call(this,e);else{var n=this._view;if(n){var r=n.getModel(),i=this,s,u=r.getLineCount(),a=u;t(e.added),t(e.removed),t(e.changed),e=n.getRulers();for(s=0;s<e.length;s++)n.redrawLines(a,u,e[s])}}},{Ruler:i,AnnotationRuler:o,LineNumberRuler:s,OverviewRuler:u,FoldingRuler:a}}),define("orion/editor/undoStack",[],function(){function e(e,t,n,r,i){this.model=e,this.offset=t,this.text=n,this.previousText=r,this.type=i}function t(e){this.owner=e,this.changes=[]}function n(e,t){this.size=t!==void 0?t:100,this.reset();var n=this;this._listener={onChanging:function(e){n._onChanging(e)},onDestroy:function(e){n._onDestroy(e)}};if(e.getModel){var r=e.getModel();r.getBaseModel&&(r=r.getBaseModel()),this.model=r,this.setView(e)}else this.shared=!0,this.model=e;this.model.addEventListener("Changing",this._listener.onChanging)}return e.prototype={getRedoChanges:function(){return[{start:this.offset,end:this.offset+this.previousText.length,text:this.text}]},getUndoChanges:function(){return[{start:this.offset,end:this.offset+this.text.length,text:this.previousText}]},undo:function(e,t){return this._doUndoRedo(this.offset,this.previousText,this.text,e,t),!0},redo:function(e,t){return this._doUndoRedo(this.offset,this.text,this.previousText,e,t),!0},merge:function(e,t,n,r,i){if(r===this.type){if(r===1&&e===this.offset+this.text.length)return this.text+=t,!0;if(r===-1&&i===this.offset)return this.offset=e,this.previousText=n+this.previousText,!0;if(r===-1&&e===this.offset)return this.previousText+=n,!0}return!1},_doUndoRedo:function(e,t,n,r,i){this.model.setText(t,e,e+n.length),i&&r&&(n=r.getModel(),n!==this.model&&(e=n.mapOffset(e,!0)),r.setSelection(e,e+t.length))}},t.prototype={getRedoChanges:function(){for(var e=[],t=0;t<this.changes.length;t++)e=e.concat(this.changes[t].getRedoChanges());return e},getUndoChanges:function(){for(var e=[],t=this.changes.length-1;t>=0;t--)e=e.concat(this.changes[t].getUndoChanges());return e},add:function(e){this.changes.push(e)},end:function(e){e&&(this.endSelection=e.getSelection(),this.endCaret=e.getCaretOffset()),(e=this.owner)&&e.end&&e.end()},undo:function(e,t){this.changes.length>1&&e&&e.setRedraw(!1);for(var n=this.changes.length-1;n>=0;n--)this.changes[n].undo(e,!1);this.changes.length>1&&e&&e.setRedraw(!0);if(t&&e){var n=this.startSelection.start,r=this.startSelection.end;e.setSelection(this.startCaret?n:r,this.startCaret?r:n)}return(n=this.owner)&&n.undo&&n.undo(),this.changes.length>0},redo:function(e,t){this.changes.length>1&&e&&e.setRedraw(!1);for(var n=0;n<this.changes.length;n++)this.changes[n].redo(e,!1);e&&e.setRedraw(!0);if(t&&e){var n=this.endSelection.start,r=this.endSelection.end;e.setSelection(this.endCaret?n:r,this.endCaret?r:n)}return(n=this.owner)&&n.redo&&n.redo(),this.changes.length>0},merge:function(e,t,n,r,i){var s=this.changes.length;return s>0?this.changes[s-1].merge(e,t,n,r,i):!1},start:function(e){e&&(this.startSelection=e.getSelection(),this.startCaret=e.getCaretOffset()),(e=this.owner)&&e.start&&e.start()}},n.prototype={destroy:function(){this._onDestroy()},add:function(e){this.compoundChange?this.compoundChange.add(e):(this.stack.splice(this.index,this.stack.length-this.index,e),this.index++,this.stack.length>this.size&&(this.stack.shift(),this.index--))},markClean:function(){this._commitUndo();if(this.cleanChange=this.stack[this.index-1])this.cleanChange.type=2},isClean:function(){return this.cleanChange===this.stack[this.index-1]},canUndo:function(){return this.index>0},canRedo:function(){return this.stack.length-this.index>0},endCompoundChange:function(){this.compoundChange&&this.compoundChange.end(this.view),this.compoundChange=void 0},getSize:function(){return{undo:this.index,redo:this.stack.length-this.index}},getRedoChanges:function(){this._commitUndo();for(var e=[],t=this.index;t<this.stack.length;t++)e=e.concat(this.stack[t].getRedoChanges());return e},getUndoChanges:function(){this._commitUndo();for(var e=[],t=this.index;t>=0;t--)e=e.concat(this.stack[t].getUndoChanges());return e},undo:function(){this._commitUndo();var e;e=!1,this._ignoreUndo=!0;do{if(this.index<=0)break;e=this.stack[--this.index]}while(!(e=e.undo(this.view,!0)));return this._ignoreUndo=!1,e},redo:function(){this._commitUndo();var e;this._ignoreUndo=!0;do{if(this.index>=this.stack.length)break;e=this.stack[this.index++]}while(!e.redo(this.view,!0));return this._ignoreUndo=!1,!0},reset:function(){this.index=0,this.cleanChange=void 0,this.stack=[],this._ignoreUndo=!1,this._compoundChange=void 0},setView:function(e){this.view!==e&&(this.view&&e.removeEventListener("Destroy",this._listener.onDestroy),(this.view=e)&&e.addEventListener("Destroy",this._listener.onDestroy))},startCompoundChange:function(e){return this._commitUndo(),e=new t(e),this.add(e),this.compoundChange=e,this.compoundChange.start(this.view),this.compoundChange},_commitUndo:function(){this.endCompoundChange()},_onDestroy:function(e){(!e||!this.shared)&&this.model.removeEventListener("Changing",this._listener.onChanging),this.view&&(this.view.removeEventListener("Destroy",this._listener.onDestroy),this.view=null)},_onChanging:function(t){if(!this._ignoreUndo){var n=t.text,r=t.start,i=t.addedCharCount,s=t.removedCharCount,t=r+s,o=0;i===0&&s===1?o=-1:i===1&&s===0&&(o=1),i=this.stack.length,s=this.model.getText(r,t),(!(i>0&&this.index===i)||!this.stack[i-1].merge(r,n,s,o,t))&&this.add(new e(this.model,r,n,s,o))}}},{UndoStack:n}}),define("orion/editor/textDND",["orion/util"],function(e){function t(e,t){this._view=e,this._undoStack=t,this._dragSelection=null,this._dropOffset=-1,this._dropText=null;var n=this;this._listener={onDragStart:function(e){n._onDragStart(e)},onDragEnd:function(e){n._onDragEnd(e)},onDragEnter:function(e){n._onDragEnter(e)},onDragOver:function(e){n._onDragOver(e)},onDrop:function(e){n._onDrop(e)},onDestroy:function(e){n._onDestroy(e)}},e.addEventListener("DragStart",this._listener.onDragStart),e.addEventListener("DragEnd",this._listener.onDragEnd),e.addEventListener("DragEnter",this._listener.onDragEnter),e.addEventListener("DragOver",this._listener.onDragOver),e.addEventListener("Drop",this._listener.onDrop),e.addEventListener("Destroy",this._listener.onDestroy)}return t.prototype={destroy:function(){var e=this._view;e&&(e.removeEventListener("DragStart",this._listener.onDragStart),e.removeEventListener("DragEnd",this._listener.onDragEnd),e.removeEventListener("DragEnter",this._listener.onDragEnter),e.removeEventListener("DragOver",this._listener.onDragOver),e.removeEventListener("Drop",this._listener.onDrop),e.removeEventListener("Destroy",this._listener.onDestroy),this._view=null)},_onDestroy:function(){this.destroy()},_onDragStart:function(e){var t=this._view,n=t.getSelection(),t=t.getModel();t.getBaseModel&&(n.start=t.mapOffset(n.start),n.end=t.mapOffset(n.end),t=t.getBaseModel());if(t=t.getText(n.start,n.end))this._dragSelection=n,e.event.dataTransfer.effectAllowed="copyMove",e.event.dataTransfer.setData("Text",t)},_onDragEnd:function(t){if(this._dragSelection){var n=this._view,r=t.event.dataTransfer.dropEffect;!e.isFirefox&&(r!=="none"||this._dropText)&&(r=t.event.dataTransfer.dropEffect=this._dropEffect),this._undoStack&&this._undoStack.startCompoundChange(),(t=r==="move")&&n.setText("",this._dragSelection.start,this._dragSelection.end);if(this._dropText){var r=this._dropText,i=this._dropOffset;t&&(i>=this._dragSelection.end?i-=this._dragSelection.end-this._dragSelection.start:i>=this._dragSelection.start&&(i=this._dragSelection.start)),n.setText(r,i,i),n.setSelection(i,i+r.length),this._dropText=null,this._dropOffset=-1}this._undoStack&&this._undoStack.endCompoundChange()}this._dragSelection=null},_onDragEnter:function(e){this._onDragOver(e)},_onDragOver:function(t){var n=t.event.dataTransfer.types,r=!this._view.getOptions("readonly");r&&n&&(r=n.contains?n.contains("text/plain")||n.contains("Text"):n.indexOf("text/plain")!==-1||n.indexOf("Text")!==-1),r?e.isFirefox||(this._dropEffect=t.event.dataTransfer.dropEffect=(e.isMac?t.event.altKey:t.event.ctrlKey)?"copy":"move"):t.event.dataTransfer.dropEffect="none"},_onDrop:function(t){var n=this._view,r=t.event.dataTransfer.getData("Text");r&&(e.isFirefox||(t.event.dataTransfer.dropEffect=this._dropEffect),t=n.getOffsetAtLocation(t.x,t.y),this._dragSelection?(this._dropOffset=t,this._dropText=r):(n.setText(r,t,t),n.setSelection(t,t+r.length)))}},{TextDND:t}}),define("orion/objects",[],function(){function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t],r;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}return{clone:function(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var n=Object.create(Object.getPrototypeOf(t));return e(n,t),n},mixin:e,toArray:function(e){return Array.isArray(e)?e:[e]}}}),define("orion/editor/editor","i18n!orion/editor/nls/messages,orion/editor/eventTarget,orion/editor/tooltip,orion/editor/annotations,orion/objects,orion/util".split(","),function(e,t,n,r,i,s){function o(e){e=e||{},this._domNode=e.domNode,this._model=e.model,this._undoStack=e.undoStack,this._statusReporter=e.statusReporter,this._title=null;var t=this;this._listener={onChanged:function(e){t.onChanged(e)}},this._model&&this._model.addEventListener("Changed",this._listener.onChanged),this.checkDirty()}function u(e){e=e||{},o.call(this,e),this._textViewFactory=e.textViewFactory,this._undoStackFactory=e.undoStackFactory,this._textDNDFactory=e.textDNDFactory,this._annotationFactory=e.annotationFactory,this._foldingRulerFactory=e.foldingRulerFactory,this._lineNumberRulerFactory=e.lineNumberRulerFactory,this._contentAssistFactory=e.contentAssistFactory,this._keyBindingFactory=e.keyBindingFactory,this._contentAssist=this._foldingRuler=this._overviewRuler=this._lineNumberRuler=this._annotationRuler=this._annotationModel=this._annotationStyler=null}var a=r.AnnotationType;return o.prototype={destroy:function(){this.uninstall(),this._statusReporter=this._domNode=null,this._model&&this._model.removeEventListener("Changed",this._listener.onChanged)},checkDirty:function(){this.setDirty(this._undoStack&&!this._undoStack.isClean())},focus:function(){},getModel:function(){return this._model},getText:function(e,t){return this.getModel().getText(e,t)},getTitle:function(){return this._title},getUndoStack:function(){return this._undoStack},install:function(){this.installed=!0},isDirty:function(){return this._dirty},markClean:function(){this.getUndoStack().markClean(),this.setDirty(!1)},onDirtyChanged:function(e){return this.dispatchEvent(e)},onInputChanged:function(e){return this.dispatchEvent(e)},onChanged:function(){this.checkDirty()},reportStatus:function(e,t,n){this._statusReporter&&this._statusReporter(e,t,n)},resize:function(){},setDirty:function(e){this._dirty!==e&&(this._dirty=e,this.onDirtyChanged({type:"DirtyChanged"}))},_setModelText:function(e){this._model&&this._model.setText(e)},setInput:function(e,t,n,r){this._title=e,r||(t?this.reportStatus(t,"error"):n!==null&&n!==void 0&&typeof n=="string"&&this._setModelText(n),this._undoStack&&this._undoStack.reset()),this.checkDirty(),this.onInputChanged({type:"InputChanged",title:e,message:t,contents:n,contentsSaved:r})},setText:function(e,t,n){this.getModel().setText(e,t,n)},uninstall:function(){this.installed=!1}},t.EventTarget.addMixin(o.prototype),u.prototype=new o,i.mixin(u.prototype,{destroy:function(){o.prototype.destroy.call(this),this._textViewFactory=this._undoStackFactory=this._textDNDFactory=this._annotationFactory=this._foldingRulerFactory=this._lineNumberRulerFactory=this._contentAssistFactory=this._keyBindingFactory=null},getAnnotationModel:function(){return this._annotationModel},getAnnotationRuler:function(){return this._annotationRuler},getAnnotationStyler:function(){return this._annotationStyler},getContentAssist:function(){return this._contentAssist},getFoldingRuler:function(){return this._foldingRuler},getLineNumberRuler:function(){return this._lineNumberRuler},getModel:function(){if(!this._textView)return null;var e=this._textView.getModel();return e.getBaseModel&&(e=e.getBaseModel()),e},getOverviewRuler:function(){return this._overviewRuler},getTextView:function(){return this._textView},getKeyModes:function(){return this._textView.getKeyModes()},getSourceCodeActions:function(){return this._sourceCodeActions},getLinkedMode:function(){return this._linkedMode},getTextActions:function(){return this._textActions},focus:function(){this._textView&&this._textView.focus()},resize:function(){this._textView&&this._textView.resize()},setAnnotationRulerVisible:function(e,t){if(this._annotationRulerVisible!==e||t)if(this._annotationRulerVisible=e,this._annotationRuler){var n=this._textView;e?n.addRuler(this._annotationRuler,0):n.removeRuler(this._annotationRuler)}},setFoldingRulerVisible:function(e,t){if(this._foldingRulerVisible!==e||t)if(this._foldingRulerVisible=e,this._foldingRuler){var n=this._textView;n.getModel().getBaseModel&&(e?n.addRuler(this._foldingRuler):n.removeRuler(this._foldingRuler))}},setLineNumberRulerVisible:function(e,t){if(this._lineNumberRulerVisible!==e||t)if(this._lineNumberRulerVisible=e,this._lineNumberRuler){var n=this._textView;e?n.addRuler(this._lineNumberRuler,this._annotationRulerVisible?1:0):n.removeRuler(this._lineNumberRuler)}},setOverviewRulerVisible:function(e,t){if(this._overviewRulerVisible!==e||t)if(this._overviewRulerVisible=e,this._overviewRuler){var n=this._textView;e?n.addRuler(this._overviewRuler):n.removeRuler(this._overviewRuler)}},mapOffset:function(e,t){var n=this._textView.getModel();return n.getBaseModel&&(e=n.mapOffset(e,t)),e},getLineAtOffset:function(e){return this.getModel().getLineAtOffset(this.mapOffset(e))},getLineStart:function(e){return this.getModel().getLineStart(e)},getCaretOffset:function(){return this.mapOffset(this._textView.getCaretOffset())},getSelection:function(){var e=this._textView,t=e.getSelection(),e=e.getModel();return e.getBaseModel&&(t.start=e.mapOffset(t.start),t.end=e.mapOffset(t.end)),t},_expandOffset:function(e){var t=this._textView.getModel(),n=this._annotationModel;if(n&&t.getBaseModel)for(e=n.getAnnotations(e,e+1);e.hasNext();)t=e.next(),t.type===a.ANNOTATION_FOLDING&&t.expand&&t.expand()},setCaretOffset:function(e,t,n){var r=this._textView,i=r.getModel();i.getBaseModel&&(this._expandOffset(e),e=i.mapOffset(e,!0)),r.setCaretOffset(e,t,n)},setText:function(e,t,n){var r=this._textView,i=r.getModel();i.getBaseModel&&(t!==void 0&&(this._expandOffset(t),t=i.mapOffset(t,!0)),n!==void 0&&(this._expandOffset(n),n=i.mapOffset(n,!0))),r.setText(e,t,n)},setSelection:function(e,t,n,r){var i=this._textView,s=i.getModel();s.getBaseModel&&(this._expandOffset(e),this._expandOffset(t),e=s.mapOffset(e,!0),t=s.mapOffset(t,!0)),i.setSelection(e,t,n,r)},moveSelection:function(e,t,n,r){var i=this._textView;this.setSelection(e,t||e,1/3,function(){(r===void 0||r)&&i.focus(),n&&n()})},_getTooltipInfo:function(e,t){var n=this._textView,r=this.getAnnotationModel();if(!r)return null;var i=this._annotationStyler;if(!i)return null;var s=n.getOffsetAtLocation(e,t);if(s===-1)return null;s=this.mapOffset(s),i=i.getAnnotationsByType(r,s,s+1),r=[];for(s=0;s<i.length;s++)i[s].rangeStyle&&r.push(i[s]);return r.length===0?null:(n=n.convert({x:e,y:t},"document","page"),{contents:r,anchor:"left",x:n.x+10,y:n.y+20})},_highlightCurrentLine:function(e,t){var n=this._annotationModel;if(n){var r=this._textView;if(!r.getOptions("singleMode")){var i=r.getModel(),s=t?i.getLineAtOffset(t.start):-1,o=i.getLineAtOffset(e.start),r=e.start===e.end,u=!t||t.start===t.end,f=i.getLineStart(o),l=i.getLineEnd(o);i.getBaseModel&&(f=i.mapOffset(f),l=i.mapOffset(l)),i=this._currentLineAnnotation;if(!(s===o&&u&&r&&i&&i.start===f&&i.end===l)){var s=i?[i]:null,c;r&&(i=a.createAnnotation(a.ANNOTATION_CURRENT_LINE,f,l),c=[i]),this._currentLineAnnotation=i,n.replaceAnnotations(s,c)}}}},installTextView:function(){this.install()},install:function(){if(!this._textView){this._textView=this._textViewFactory(),this._undoStackFactory&&(this._undoStack=this._undoStackFactory.createUndoStack(this),this.checkDirty()),this._textDNDFactory&&(this._textDND=this._textDNDFactory.createTextDND(this,this._undoStack)),this._contentAssistFactory&&(this._contentAssist=this._contentAssistFactory.createContentAssistMode(this).getContentAssist());var e=this,t=this._textView,r=this;this._listener={onModelChanged:function(){r.checkDirty()},onMouseOver:function(e){r._listener.onMouseMove(e)},onMouseMove:function(e){var i=n.Tooltip.getTooltip(t);i&&(r._listener.lastMouseX!==e.event.clientX||r._listener.lastMouseY!==e.event.clientY)&&(r._listener.lastMouseX=e.event.clientX,r._listener.lastMouseY=e.event.clientY,i.setTarget({x:e.x,y:e.y,getTooltipInfo:function(){return r._getTooltipInfo(this.x,this.y)}}))},onMouseOut:function(e){var i=n.Tooltip.getTooltip(t);i&&(r._listener.lastMouseX!==e.event.clientX||r._listener.lastMouseY!==e.event.clientY)&&(r._listener.lastMouseX=e.event.clientX,r._listener.lastMouseY=e.event.clientY,i.setTarget(null))},onScroll:function(){var e=n.Tooltip.getTooltip(t);e&&e.setTarget(null,0,0)},onSelection:function(e){r._updateCursorStatus(),r._highlightCurrentLine(e.newValue,e.oldValue)}},t.addEventListener("ModelChanged",this._listener.onModelChanged),t.addEventListener("Selection",this._listener.onSelection),t.addEventListener("MouseOver",this._listener.onMouseOver),t.addEventListener("MouseOut",this._listener.onMouseOut),t.addEventListener("MouseMove",this._listener.onMouseMove),t.addEventListener("Scroll",this._listener.onScroll);if(this._keyBindingFactory){var i;if(i=typeof this._keyBindingFactory=="function"?this._keyBindingFactory(this,this.getKeyModes(),this._undoStack,this._contentAssist):this._keyBindingFactory.createKeyBindings(e,this._undoStack,this._contentAssist))this._textActions=i.textActions,this._linkedMode=i.linkedMode,this._sourceCodeActions=i.sourceCodeActions}i=function(t){if(t!==void 0&&t!==-1){for(var n=this.getView().getModel(),r=this.getAnnotationModel(),i=e.mapOffset(n.getLineStart(t)),t=e.mapOffset(n.getLineEnd(t)),n=r.getAnnotations(i,t),s=null;n.hasNext();){var o=n.next();if(o.type===a.ANNOTATION_BOOKMARK){s=o;break}}s?r.removeAnnotation(s):(s=a.createAnnotation(a.ANNOTATION_BOOKMARK,i,t),s.title=void 0,r.addAnnotation(s))}};if(this._annotationFactory){var s=t.getModel();s.getBaseModel&&(s=s.getBaseModel());if(this._annotationModel=this._annotationFactory.createAnnotationModel(s))if(s=this._annotationStyler=this._annotationFactory.createAnnotationStyler(t,this._annotationModel))s.addAnnotationType(a.ANNOTATION_CURRENT_SEARCH),s.addAnnotationType(a.ANNOTATION_MATCHING_SEARCH),s.addAnnotationType(a.ANNOTATION_ERROR),s.addAnnotationType(a.ANNOTATION_WARNING),s.addAnnotationType(a.ANNOTATION_MATCHING_BRACKET),s.addAnnotationType(a.ANNOTATION_CURRENT_BRACKET),s.addAnnotationType(a.ANNOTATION_CURRENT_LINE),s.addAnnotationType(a.ANNOTATION_READ_OCCURRENCE),s.addAnnotationType(a.ANNOTATION_WRITE_OCCURRENCE),s.addAnnotationType(a.ANNOTATION_SELECTED_LINKED_GROUP),s.addAnnotationType(a.ANNOTATION_CURRENT_LINKED_GROUP),s.addAnnotationType(a.ANNOTATION_LINKED_GROUP),s.addAnnotationType("orion.annotation.highlightError");var s=this._annotationFactory.createAnnotationRulers(this._annotationModel),u=this._annotationRuler=s.annotationRuler;u&&(u.onDblClick=i,u.setMultiAnnotationOverlay({html:"<div class='annotationHTML overlay'></div>"}),u.addAnnotationType(a.ANNOTATION_ERROR),u.addAnnotationType(a.ANNOTATION_WARNING),u.addAnnotationType(a.ANNOTATION_TASK),u.addAnnotationType(a.ANNOTATION_BOOKMARK)),this.setAnnotationRulerVisible(this._annotationRulerVisible||this._annotationRulerVisible===void 0,!0);if(u=this._overviewRuler=s.overviewRuler)u.addAnnotationType(a.ANNOTATION_CURRENT_SEARCH),u.addAnnotationType(a.ANNOTATION_MATCHING_SEARCH),u.addAnnotationType(a.ANNOTATION_READ_OCCURRENCE),u.addAnnotationType(a.ANNOTATION_WRITE_OCCURRENCE),u.addAnnotationType(a.ANNOTATION_CURRENT_BLAME),u.addAnnotationType(a.ANNOTATION_ERROR),u.addAnnotationType(a.ANNOTATION_WARNING),u.addAnnotationType(a.ANNOTATION_TASK),u.addAnnotationType(a.ANNOTATION_BOOKMARK),u.addAnnotationType(a.ANNOTATION_MATCHING_BRACKET),u.addAnnotationType(a.ANNOTATION_CURRENT_BRACKET),u.addAnnotationType(a.ANNOTATION_CURRENT_LINE);this.setOverviewRulerVisible(this._overviewRulerVisible||this._overviewRulerVisible===void 0,!0)}this._lineNumberRulerFactory&&(this._lineNumberRuler=this._lineNumberRulerFactory.createLineNumberRuler(this._annotationModel),this._lineNumberRuler.addAnnotationType(a.ANNOTATION_CURRENT_BLAME),this._lineNumberRuler.addAnnotationType(a.ANNOTATION_BLAME),this._lineNumberRuler.onDblClick=i,this.setLineNumberRulerVisible(this._lineNumberRulerVisible||this._lineNumberRulerVisible===void 0,!0)),this._foldingRulerFactory&&(this._foldingRuler=this._foldingRulerFactory.createFoldingRuler(this._annotationModel),this._foldingRuler.addAnnotationType(a.ANNOTATION_FOLDING),this.setFoldingRulerVisible(this._foldingRulerVisible||this._foldingRulerVisible===void 0,!0)),this.dispatchEvent({type:"TextViewInstalled",textView:t}),o.prototype.install.call(this)}},uninstallTextView:function(){this.uninstall()},uninstall:function(){var e=this._textView;e&&(e.destroy(),this._textView=this._undoStack=this._textDND=this._contentAssist=this._listener=this._annotationModel=this._annotationStyler=this._annotationRuler=this._overviewRuler=this._lineNumberRuler=this._foldingRuler=this._currentLineAnnotation=this._title=null,this._dirty=!1,this._foldingRulerVisible=this._overviewRulerVisible=this._lineNumberRulerVisible=this._annotationRulerVisible=void 0,this.dispatchEvent({type:"TextViewUninstalled",textView:e}),o.prototype.uninstall.call(this))},_updateCursorStatus:function(){var t=this.getModel(),n=this.getCaretOffset(),r=t.getLineAtOffset(n),t=t.getLineStart(r);n-=t;for(var t=this.getKeyModes(),i=0;i<t.length;i++){var o=t[i];if(o.isActive()&&o.isStatusActive&&o.isStatusActive())return}this.reportStatus(s.formatMessage(e.lineColumn,r+1,n+1))},showAnnotations:function(e,t,n,r){var i=this._annotationModel;if(i){for(var s=[],o=[],u=i.getTextModel(),f=i.getAnnotations(),l;f.hasNext();)l=f.next(),t.indexOf(l.type)!==-1&&l.creatorID===this&&s.push(l);if(e)for(t=0;t<e.length;t++)if(l=e[t]){if(n)l=n(l);else{var c;typeof l.line=="number"?(c=u.getLineStart(l.line-1),f=c+l.start-1,c=c+l.end-1):(f=l.start,c=l.end);var p=r(l);if(!p)continue;l=a.createAnnotation(p,f,c,l.description)}l.creatorID=this,o.push(l)}i.replaceAnnotations(s,o)}},showProblems:function(e){this.showAnnotations(e,[a.ANNOTATION_ERROR,a.ANNOTATION_WARNING,a.ANNOTATION_TASK],null,function(e){switch(e.severity){case"error":return a.ANNOTATION_ERROR;case"warning":return a.ANNOTATION_WARNING;case"task":return a.ANNOTATION_TASK}return null})},showOccurrences:function(e){this.showAnnotations(e,[a.ANNOTATION_READ_OCCURRENCE,a.ANNOTATION_WRITE_OCCURRENCE],null,function(e){return e.readAccess?a.ANNOTATION_READ_OCCURRENCE:a.ANNOTATION_WRITE_OCCURRENCE})},showBlame:function(t){var n=this._blameRGB,o=this.getTextView().getOptions("parent").ownerDocument;if(!n){var u=s.createElement(o,"div");u.className="annotation blame",o.body.appendChild(u);var f=(o.defaultView||o.parentWindow).getComputedStyle(u).getPropertyValue("background-color");u.parentNode.removeChild(u);var u=f.indexOf("("),l=f.indexOf(")"),f=f.substring(u+1,l);this._blameRGB=n=f.split(",").slice(0,3)}var p=function(){var e=r.AnnotationType.createAnnotation(this.groupType,this.start,this.end,this.title);return e.style=i.mixin({},e.style),e.style.style=i.mixin({},e.style.style),e.style.style.backgroundColor="",this.groupAnnotation=e,e.blame=this.blame,e.html=this.html,e.creatorID=this.creatorID,e},v=function(){var t=s.createElement(o,"div");t.className="tooltipTitle";var n=this.blame.Message.indexOf("\n");n===-1&&(n=this.blame.Message.length);var r=s.createElement(o,"a");return r.href=this.blame.CommitLink,r.appendChild(o.createTextNode(this.blame.Message.substring(0,n))),t.appendChild(r),t.appendChild(s.createElement(o,"br")),t.appendChild(o.createTextNode(s.formatMessage(e.committerOnTime,this.blame.AuthorName,this.blame.Time))),t},m=this.getModel();this.showAnnotations(t,[a.ANNOTATION_BLAME,a.ANNOTATION_CURRENT_BLAME],function(e){var t=m.getLineStart(e.Start-1),s=m.getLineEnd(e.End-1,!0),t=r.AnnotationType.createAnnotation(a.ANNOTATION_BLAME,t,s,v),s=n.slice(0);return s.push(e.Shade),t.style=i.mixin({},t.style),t.style.style=i.mixin({},t.style.style),t.style.style.backgroundColor="rgba("+s.join()+")",t.groupId=e.Name,t.groupType=a.ANNOTATION_CURRENT_BLAME,t.createGroupAnnotation=p,t.html='<img class="annotationHTML blame" src="'+e.AuthorImage+'"/>',t.blame=e,t})},showSelection:function(e,t,n,r,i){typeof e=="number"?(typeof t!="number"&&(t=e),this.moveSelection(e,t)):typeof n=="number"&&(e=this.getModel().getLineStart(n-1),typeof r=="number"&&(e+=r),typeof i!="number"&&(i=0),this.moveSelection(e,e+i))},_setModelText:function(e){this._textView&&(this._textView.setText(e),this._textView.getModel().setLineDelimiter("auto"),this._highlightCurrentLine(this._textView.getSelection()))},setInput:function(e,t,n,r,i){o.prototype.setInput.call(this,e,t,n,r),this._textView&&!r&&!i&&this._textView.focus()},onGotoLine:function(e,t,n,r){if(this._textView){var i=this.getModel(),e=Math.max(0,Math.min(e,i.getLineCount()-1)),s=i.getLineStart(e),o=0;n===void 0&&(n=0),typeof t=="string"?(e=i.getLine(e).indexOf(t),e!==-1&&(o=e,n=o+t.length)):(o=t,t=i.getLineEnd(e)-s,o=Math.min(o,t),n=Math.min(n,t)),this.moveSelection(s+o,s+n,r)}}}),{BaseEditor:o,Editor:u}}),define("orion/editor/find","i18n!orion/editor/nls/messages,orion/keyBinding,orion/editor/keyModes,orion/editor/annotations,orion/regex,orion/objects,orion/util".split(","),function(e,t,n,r,i,s,o){function u(e){var t=e.getTextView();n.KeyMode.call(this,t),this.editor=e,this._active=!1,this._success=!0,this._ignoreSelection=!1,this._prefix="",t.setAction("incrementalFindCancel",function(){return this.setActive(!1),!0}.bind(this)),t.setAction("incrementalFindBackspace",function(){return this._backspace()}.bind(this));var r=this;this._listener={onVerify:function(e){var t=r.editor,n=t.getModel(),s=t.mapOffset(e.start),t=t.mapOffset(e.end),n=n.getText(s,t);(n=r._prefix.match(RegExp("^"+i.escape(n),"i")))&&n.length>0&&(r._prefix+=e.text,r._success=!0,r._status(),r.find(r._forward,!0),e.text=null)},onSelection:function(){r._ignoreSelection||r.setActive(!1)}}}function a(e,t,n){if(e){this._editor=e,this._undoStack=t,this._showAll=!0,this._visible=!1,this._wrap=this._caseInsensitive=!0,this._wholeWord=!1,this._incremental=!0,this._regex=!1,this._findAfterReplace=!0,this._reverse=this._hideAfterFind=!1,this._timer=this._end=this._start=void 0,this._lastString="";var r=this;this._listeners={onEditorFocus:function(e){r._removeCurrentAnnotation(e)}},this.setOptions(n)}}var f={};return u.prototype=new n.KeyMode,s.mixin(u.prototype,{createKeyBindings:function(){var e=t.KeyBinding,n=[];return n.push({actionID:"incrementalFindBackspace",keyBinding:new e(8)}),n.push({actionID:"incrementalFindCancel",keyBinding:new e(13)}),n.push({actionID:"incrementalFindCancel",keyBinding:new e(27)}),n.push({actionID:"incrementalFindReverse",keyBinding:new e(38)}),n.push({actionID:"incrementalFind",keyBinding:new e(40)}),n.push({actionID:"incrementalFindReverse",keyBinding:new e("k",!0,!0)}),n.push({actionID:"incrementalFind",keyBinding:new e("k",!0)}),n},find:function(e,t){this._forward=e;if(!this.isActive())return this.setActive(!0),!1;var n=this._prefix;if(n.length===0)return!1;var r=this.editor,i=r.getModel(),i=e?this._success?t?this._start:r.getCaretOffset()+1:0:this._success?t?this._start:r.getCaretOffset():i.getCharCount()-1;return(n=r.getModel().find({string:n,start:i,reverse:!e,caseInsensitive:n.toLowerCase()===n}).next())?(t||(this._start=i),this._ignoreSelection=this._success=!0,r.moveSelection(e?n.start:n.end,e?n.end:n.start),this._ignoreSelection=!1):this._success=!1,this._status(),!0},isActive:function(){return this._active},isStatusActive:function(){return this.isActive()},setActive:function(e){this._active!==e&&(this._active=e,this._prefix="",this._success=!0,e=this.editor.getTextView(),this._start=this.editor.getCaretOffset(),this.editor.setCaretOffset(this._start),this._active?(e.addEventListener("Verify",this._listener.onVerify),e.addEventListener("Selection",this._listener.onSelection),e.addKeyMode(this)):(e.removeEventListener("Verify",this._listener.onVerify),e.removeEventListener("Selection",this._listener.onSelection),e.removeKeyMode(this)),this._status())},_backspace:function(){var e=this._prefix,e=this._prefix=e.substring(0,e.length-1);return e.length===0?(this._ignoreSelection=this._success=!0,this.editor.setCaretOffset(this.editor.getSelection().start),this._ignoreSelection=!1,this._status(),!0):this.find(this._forward,!0)},_status:function(){if(this.isActive()){var t;t=this._forward?this._success?e.incrementalFindStr:e.incrementalFindStrNotFound:this._success?e.incrementalFindReverseStr:e.incrementalFindReverseStrNotFound,t=o.formatMessage(t,this._prefix),this.editor.reportStatus(t,this._success?"":"error")}else this.editor.reportStatus("")}}),f.IncrementalFind=u,a.prototype={find:function(e,t,n){this.setOptions({reverse:!e});var r=this.getFindString(),i;return t&&(r=t.findString||r,i=t.count),e=this.getOptions(),this.setOptions(t),t=n?this._startOffset:this.getStartOffset(),(i=this._doFind(r,t,i))&&!n&&(this._startOffset=i.start),this.setOptions(e),this._hideAfterFind&&this.hide(),i},getStartOffset:function(){return this._start!==void 0?this._start:this._reverse?this._editor.getSelection().start-1:this._editor.getCaretOffset()},getFindString:function(){var e=this._editor.getSelection(),e=this._editor.getText(e.start,e.end);return this._regex&&(e=i.escape(e)),e||this._lastString},getOptions:function(){return{showAll:this._showAll,caseInsensitive:this._caseInsensitive,wrap:this._wrap,wholeWord:this._wholeWord,incremental:this._incremental,regex:this._regex,findAfterReplace:this._findAfterReplace,hideAfterFind:this._hideAfterFind,reverse:this._reverse,findCallback:this._findCallback,start:this._start,end:this._end}},getReplaceString:function(){return""},hide:function(){this._visible=!1,this._savedOptions&&(this.setOptions(this._savedOptions.pop()),this._savedOptions.length===0)&&(this._savedOptions=null),this._removeAllAnnotations();var e=this._editor.getTextView();e&&(e.removeEventListener("Focus",this._listeners.onEditorFocus),e.focus())},_processReplaceString:function(e){var t=e;if(this._regex){for(var t="",n=!1,r=this._editor.getModel().getLineDelimiter(),i=0;i<e.length;i++){var s=e.substring(i,i+1);if(n){switch(s){case"R":t+=r;break;case"r":t+="\r";break;case"n":t+="\n";break;case"t":t+="	";break;case"\\":t+="\\";break;default:t+="\\"+s}n=!1}else s==="\\"?n=!0:t+=s}n&&(t+="\\")}return t},isVisible:function(){return this._visible},replace:function(){var e=this.getFindString();if(e){var t=this._editor,n=this._processReplaceString(this.getReplaceString()),r=t.getSelection().start;if(t=t.getModel().find({string:e,start:r,reverse:!1,wrap:this._wrap,regex:this._regex,wholeWord:this._wholeWord,caseInsensitive:this._caseInsensitive}).next())this.startUndo(),this._doReplace(t.start,t.end,e,n),this.endUndo()}this._findAfterReplace&&e&&this._doFind(e,this.getStartOffset())},replaceAll:function(){var t=this.getFindString();if(t){this._replacingAll=!0;var n=this._editor,r=n.getTextView();n.reportStatus(e.replaceAll);var i=this._processReplaceString(this.getReplaceString()),s=this;window.setTimeout(function(){for(var u=0,a=0;;){var f=s._doFind(t,u,null,!0);if(!f)break;a++,a===1&&(r.setRedraw(!1),s.startUndo()),s._doReplace(f.start,f.end,t,i),u=s.getStartOffset()}a>0&&(s.endUndo(),r.setRedraw(!0)),u>0?n.reportStatus(o.formatMessage(e.replacedMatches,a)):n.reportStatus(e.nothingReplaced,"error"),s._replacingAll=!1},100)}},setOptions:function(e){if(e){if((e.showAll===!0||e.showAll===!1)&&this._showAll!==e.showAll)if(this._showAll=e.showAll,this.isVisible())if(this._showAll)this._markAllOccurrences();else{var t=this._editor.getAnnotationModel();t&&t.removeAnnotations(r.AnnotationType.ANNOTATION_MATCHING_SEARCH)}if(e.caseInsensitive===!0||e.caseInsensitive===!1)this._caseInsensitive=e.caseInsensitive;if(e.wrap===!0||e.wrap===!1)this._wrap=e.wrap;if(e.wholeWord===!0||e.wholeWord===!1)this._wholeWord=e.wholeWord;if(e.incremental===!0||e.incremental===!1)this._incremental=e.incremental;if(e.regex===!0||e.regex===!1)this._regex=e.regex;if(e.findAfterReplace===!0||e.findAfterReplace===!1)this._findAfterReplace=e.findAfterReplace;if(e.hideAfterFind===!0||e.hideAfterFind===!1)this._hideAfterFind=e.hideAfterFind;if(e.reverse===!0||e.reverse===!1)this._reverse=e.reverse;e.hasOwnProperty("findCallback")&&(this._findCallback=e.findCallback),e.hasOwnProperty("start")&&(this._start=e.start),e.hasOwnProperty("end")&&(this._end=e.end)}},show:function(e){this._visible=!0,e&&(this._savedOptions||(this._savedOptions=[]),this._savedOptions.push(this.getOptions()),this.setOptions(e)),this._startOffset=this._editor.getSelection().start,this._editor.getTextView().addEventListener("Focus",this._listeners.onEditorFocus);var t=this;window.setTimeout(function(){t._incremental&&t.find(!0,null,!0)},0)},startUndo:function(){this._undoStack&&this._undoStack.startCompoundChange()},endUndo:function(){this._undoStack&&this._undoStack.endCompoundChange()},_find:function(e,t,n){return this._editor.getModel().find({string:e,start:t,end:this._end,reverse:this._reverse,wrap:n?!1:this._wrap,regex:this._regex,wholeWord:this._wholeWord,caseInsensitive:this._caseInsensitive})},_doFind:function(t,n,i,s){var i=i||1,o=this._editor;if(!t)return this._removeAllAnnotations(),null;this._lastString=t;var u,a;if(this._regex)try{a=this._find(t,n,s)}catch(f){o.reportStatus(f.message,"error");return}else a=this._find(t,n,s);for(t=0;t<i&&a.hasNext();t++)u=a.next();if(!this._replacingAll){u?this._editor.reportStatus(""):this._editor.reportStatus(e.notFound,"error");if(this.isVisible()){i=r.AnnotationType.ANNOTATION_CURRENT_SEARCH;if(a=o.getAnnotationModel())a.removeAnnotations(i),u&&a.addAnnotation(r.AnnotationType.createAnnotation(i,u.start,u.end));if(this._showAll){this._timer&&window.clearTimeout(this._timer);var l=this;this._timer=window.setTimeout(function(){l._markAllOccurrences(),l._timer=null},500)}}this._findCallback?this._findCallback(u):u&&o.moveSelection(u.start,u.end,null,!1)}return u},_doReplace:function(e,t,n,r){var i=this._editor;if(this._regex&&(r=i.getText(e,t).replace(RegExp(n,this._caseInsensitive?"i":""),r),!r))return;i.setText(r,e,t),i.setSelection(e,e+r.length,!0)},_markAllOccurrences:function(){var e=this._editor.getAnnotationModel();if(e){for(var t=r.AnnotationType.ANNOTATION_MATCHING_SEARCH,n=e.getAnnotations(),i=[],s;n.hasNext();){var o=n.next();o.type===t&&i.push(o)}if(this.isVisible()){n=this.getFindString(),n=this._editor.getModel().find({string:n,regex:this._regex,wholeWord:this._wholeWord,caseInsensitive:this._caseInsensitive});for(s=[];n.hasNext();)o=n.next(),s.push(r.AnnotationType.createAnnotation(t,o.start,o.end))}e.replaceAnnotations(i,s)}},_removeAllAnnotations:function(){var e=this._editor.getAnnotationModel();e&&(e.removeAnnotations(r.AnnotationType.ANNOTATION_CURRENT_SEARCH),e.removeAnnotations(r.AnnotationType.ANNOTATION_MATCHING_SEARCH))},_removeCurrentAnnotation:function(){var e=this._editor.getAnnotationModel();e&&e.removeAnnotations(r.AnnotationType.ANNOTATION_CURRENT_SEARCH)}},f.Find=a,f}),define("orion/editor/actions","i18n!orion/editor/nls/messages,orion/keyBinding,orion/editor/annotations,orion/editor/tooltip,orion/editor/find,orion/util".split(","),function(e,t,n,r,i,s){function o(e,t,n){this.editor=e,this.undoStack=t,this._incrementalFind=new i.IncrementalFind(e),this._find=n?n:new i.Find(e,t),this._lastEditLocation=null,this.init()}function u(e,t,n,r){this.editor=e,this.undoStack=t,this.contentAssist=n,this.linkedMode=r,this.contentAssist&&this.contentAssist.addEventListener("ProposalApplied",this.contentAssistProposalApplied.bind(this)),this.init()}var a=n.AnnotationType,f={};return o.prototype={init:function(){var n=this.editor.getTextView();this._lastEditListener={onModelChanged:function(e){this.editor.isDirty()&&(this._lastEditLocation=e.start+e.addedCharCount)}.bind(this)},n.addEventListener("ModelChanged",this._lastEditListener.onModelChanged),n.setAction("undo",function(e){if(this.undoStack){var t=1;e&&e.count&&(t=e.count);for(;t>0;)this.undoStack.undo(),--t;return!0}return!1}.bind(this),{name:e.undo}),n.setAction("redo",function(e){if(this.undoStack){var t=1;e&&e.count&&(t=e.count);for(;t>0;)this.undoStack.redo(),--t;return!0}return!1}.bind(this),{name:e.redo}),n.setKeyBinding(new t.KeyBinding("f",!0),"find"),n.setAction("find",function(){if(this._find){var t=this.editor.getSelection();(t=prompt(e.find,this.editor.getText(t.start,t.end)))&&this._find.find(!0,{findString:t})}}.bind(this),{name:e.find}),n.setKeyBinding(new t.KeyBinding("k",!0),"findNext"),n.setAction("findNext",function(e){return this._find?(this._find.find(!0,e),!0):!1}.bind(this),{name:e.findNext}),n.setKeyBinding(new t.KeyBinding("k",!0,!0),"findPrevious"),n.setAction("findPrevious",function(e){return this._find?(this._find.find(!1,e),!0):!1}.bind(this),{name:e.findPrevious}),n.setKeyBinding(new t.KeyBinding("j",!0),"incrementalFind"),n.setAction("incrementalFind",function(){return this._incrementalFind&&this._incrementalFind.find(!0),!0}.bind(this),{name:e.incrementalFind}),n.setKeyBinding(new t.KeyBinding("j",!0,!0),"incrementalFindReverse"),n.setAction("incrementalFindReverse",function(){return this._incrementalFind&&this._incrementalFind.find(!1),!0}.bind(this),{name:e.incrementalFindReverse}),n.setAction("tab",function(){return this.indentLines()}.bind(this)),n.setAction("shiftTab",function(){return this.unindentLines()}.bind(this),{name:e.unindentLines}),n.setKeyBinding(new t.KeyBinding(38,!1,!1,!0),"moveLinesUp"),n.setAction("moveLinesUp",function(){return this.moveLinesUp()}.bind(this),{name:e.moveLinesUp}),n.setKeyBinding(new t.KeyBinding(40,!1,!1,!0),"moveLinesDown"),n.setAction("moveLinesDown",function(){return this.moveLinesDown()}.bind(this),{name:e.moveLinesDown}),n.setKeyBinding(new t.KeyBinding(38,!0,!1,!0),"copyLinesUp"),n.setAction("copyLinesUp",function(){return this.copyLinesUp()}.bind(this),{name:e.copyLinesUp}),n.setKeyBinding(new t.KeyBinding(40,!0,!1,!0),"copyLinesDown"),n.setAction("copyLinesDown",function(){return this.copyLinesDown()}.bind(this),{name:e.copyLinesDown}),n.setKeyBinding(new t.KeyBinding("d",!0,!1,!1),"deleteLines"),n.setAction("deleteLines",function(e){return this.deleteLines(e)}.bind(this),{name:e.deleteLines}),n.setKeyBinding(new t.KeyBinding("l",!s.isMac,!1,!1,s.isMac),"gotoLine"),n.setAction("gotoLine",function(){return this.gotoLine()}.bind(this),{name:e.gotoLine}),n.setKeyBinding(new t.KeyBinding(190,!0),"nextAnnotation"),n.setAction("nextAnnotation",function(){return this.nextAnnotation(!0)}.bind(this),{name:e.nextAnnotation}),n.setKeyBinding(new t.KeyBinding(188,!0),"previousAnnotation"),n.setAction("previousAnnotation",function(){return this.nextAnnotation(!1)}.bind(this),{name:e.prevAnnotation}),n.setKeyBinding(new t.KeyBinding("e",!0,!1,!0,!1),"expand"),n.setAction("expand",function(){return this.expandAnnotation(!0)}.bind(this),{name:e.expand}),n.setKeyBinding(new t.KeyBinding("c",!0,!1,!0,!1),"collapse"),n.setAction("collapse",function(){return this.expandAnnotation(!1)}.bind(this),{name:e.collapse}),n.setKeyBinding(new t.KeyBinding("e",!0,!0,!0,!1),"expandAll"),n.setAction("expandAll",function(){return this.expandAnnotations(!0)}.bind(this),{name:e.expandAll}),n.setKeyBinding(new t.KeyBinding("c",!0,!0,!0,!1),"collapseAll"),n.setAction("collapseAll",function(){return this.expandAnnotations(!1)}.bind(this),{name:e.collapseAll}),n.setKeyBinding(new t.KeyBinding("q",!s.isMac,!1,!1,s.isMac),"lastEdit"),n.setAction("lastEdit",function(){return this.gotoLastEdit()}.bind(this),{name:e.lastEdit})},copyLinesDown:function(){var e=this.editor;if(e.getTextView().getOptions("readonly"))return!1;var t=e.getModel(),n=e.getSelection(),r=t.getLineAtOffset(n.start),n=t.getLineAtOffset(n.end>n.start?n.end-1:n.end),i=t.getLineStart(r),r=t.getLineEnd(n,!0),s=t.getLineCount(),o="",i=t.getText(i,r);return n===s-1&&(i=(o=t.getLineDelimiter())+i),e.setText(i,r,r),e.setSelection(r+o.length,r+i.length),!0},copyLinesUp:function(){var e=this.editor;if(e.getTextView().getOptions("readonly"))return!1;var t=e.getModel(),n=e.getSelection(),r=t.getLineAtOffset(n.start),n=t.getLineAtOffset(n.end>n.start?n.end-1:n.end),r=t.getLineStart(r),i=t.getLineEnd(n,!0),s=t.getLineCount(),o="",i=t.getText(r,i);return n===s-1&&(i+=o=t.getLineDelimiter()),e.setText(i,r,r),e.setSelection(r,r+i.length-o.length),!0},deleteLines:function(e){var t=this.editor;if(t.getTextView().getOptions("readonly"))return!1;var n=1;e&&e.count&&(n=e.count);var r=t.getSelection(),i=t.getModel(),s=i.getLineAtOffset(r.start),e=i.getLineStart(s),n=r.start!==r.end||n===1?i.getLineAtOffset(r.end>r.start?r.end-1:r.end):Math.min(s+n-1,i.getLineCount()-1),n=i.getLineEnd(n,!0);return t.setText("",e,n),!0},expandAnnotation:function(e){var t=this.editor,r=t.getAnnotationModel();if(!r)return!0;var i=t.getModel(),s=t.getCaretOffset(),o=i.getLineAtOffset(s),s=i.getLineStart(o),o=i.getLineEnd(o,!0);i.getBaseModel&&(s=i.mapOffset(s),o=i.mapOffset(o),i.getBaseModel());for(var u,r=r.getAnnotations(s,o);!u&&r.hasNext();)i=r.next(),i.type===n.AnnotationType.ANNOTATION_FOLDING&&(u=i);return u&&e!==u.expanded&&(e?u.expand():(t.setCaretOffset(u.start),u.collapse())),!0},expandAnnotations:function(e){var t=this.editor,r=t.getTextView(),i=t.getAnnotationModel();if(!i)return!0;t.getModel(),i=i.getAnnotations();for(r.setRedraw(!1);i.hasNext();)t=i.next(),t.type===n.AnnotationType.ANNOTATION_FOLDING&&e!==t.expanded&&(e?t.expand():t.collapse());return r.setRedraw(!0),!0},indentLines:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;if(t.getOptions("tabMode")){var n=e.getModel(),r=e.getSelection(),i=n.getLineAtOffset(r.start),s=n.getLineAtOffset(r.end>r.start?r.end-1:r.end);if(i!==s){var o=[];o.push("");for(var u=i;u<=s;u++)o.push(n.getLine(u,!0));return u=n.getLineStart(i),n=n.getLineEnd(s,!0),t=t.getOptions("tabSize","expandTab"),t=t.expandTab?Array(t.tabSize+1).join(" "):"	",e.setText(o.join(t),u,n),e.setSelection(u===r.start?r.start:r.start+t.length,r.end+(s-i+1)*t.length),!0}return!1}},gotoLastEdit:function(){return typeof this._lastEditLocation=="number"&&this.editor.showSelection(this._lastEditLocation),!0},gotoLine:function(){var t=this.editor,n=t.getModel().getLineAtOffset(t.getCaretOffset());if(n=prompt(e.gotoLinePrompty,n+1))n=parseInt(n,10),t.onGotoLine(n-1,0);return!0},moveLinesDown:function(){var e=this.editor;if(e.getTextView().getOptions("readonly"))return!1;var t=e.getModel(),n=e.getSelection(),r=t.getLineAtOffset(n.start),i=t.getLineAtOffset(n.end>n.start?n.end-1:n.end),s=t.getLineCount();if(i===s-1)return!0;var r=t.getLineStart(r),n=t.getLineEnd(i,!0),o=t.getLineEnd(i+1,!0)-(n-r),u=0;return i!==s-2?t=t.getText(r,n):(i=t.getLineEnd(i),t=t.getText(i,n)+t.getText(r,i),u+=n-i),this.startUndo(),e.setText("",r,n),e.setText(t,o,o),e.setSelection(o+u,o+u+t.length),this.endUndo(),!0},moveLinesUp:function(){var e=this.editor;if(e.getTextView().getOptions("readonly"))return!1;var t=e.getModel(),n=e.getSelection(),r=t.getLineAtOffset(n.start);if(r===0)return!0;var i=t.getLineAtOffset(n.end>n.start?n.end-1:n.end),s=t.getLineCount(),n=t.getLineStart(r-1),o=t.getLineStart(r),u=t.getLineEnd(i,!0),a=t.getText(o,u),f=0;return i===s-1&&(i=t.getLineEnd(r-1),r=t.getLineEnd(r-1,!0),a+=t.getText(i,r),o=i,f=r-i),this.startUndo(),e.setText("",o,u),e.setText(a,n,n),e.setSelection(n,n+a.length-f),this.endUndo(),!0},nextAnnotation:function(e){function t(e){return!!e.lineStyle||e.type===a.ANNOTATION_MATCHING_BRACKET||e.type===a.ANNOTATION_CURRENT_BRACKET||!s.isAnnotationTypeVisible(e.type)}var n=this.editor,i=n.getAnnotationModel();if(!i)return!0;var s=n.getOverviewRuler()||n.getAnnotationStyler();if(!s)return!0;for(var o=n.getModel(),u=n.getCaretOffset(),f=i.getAnnotations(e?u:0,e?o.getCharCount():u),l=null;f.hasNext();){var c=f.next();if(e){if(c.start<=u)continue}else if(c.start>=u)continue;if(!t(c)&&(l=c,e))break}if(l){for(var p=[l],f=i.getAnnotations(l.start,l.start);f.hasNext();)c=f.next(),c!==l&&!t(c)&&p.push(c);var d=n.getTextView(),v=o.getLineAtOffset(l.start),m=r.Tooltip.getTooltip(d);if(!m)return n.moveSelection(l.start),!0;n.moveSelection(l.start,l.start,function(){m.setTarget({getTooltipInfo:function(){var e=d.convert({x:d.getLocationAtOffset(l.start).x,y:d.getLocationAtOffset(o.getLineStart(v)).y},"document","page");return{contents:p,x:e.x,y:e.y+Math.floor(d.getLineHeight(v)*1.33)}}},0)})}return!0},unindentLines:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;if(t.getOptions("tabMode")){for(var n=e.getModel(),r=e.getSelection(),i=n.getLineAtOffset(r.start),s=n.getLineAtOffset(r.end>r.start?r.end-1:r.end),o=t.getOptions("tabSize"),u=Array(o+1).join(" "),a=[],f=t=0,l=i;l<=s;l++){var c=n.getLine(l,!0);if(n.getLineStart(l)!==n.getLineEnd(l))if(c.indexOf("	")===0)c=c.substring(1),t++;else{if(c.indexOf(u)!==0)return!0;c=c.substring(o),t+=o}l===i&&(f=t),a.push(c)}return i=n.getLineStart(i),o=n.getLineEnd(s,!0),n=n.getLineStart(s),e.setText(a.join(""),i,o),s=i===r.start?r.start:r.start-f,r=Math.max(s,r.end-t+(r.end===n+1&&r.start!==r.end?1:0)),e.setSelection(s,r),!0}},startUndo:function(){this.undoStack&&this.undoStack.startCompoundChange()},endUndo:function(){this.undoStack&&this.undoStack.endCompoundChange()}},f.TextActions=o,u.prototype={init:function(){var n=this.editor.getTextView();n.setAction("lineStart",function(){return this.lineStart()}.bind(this)),n.setAction("enter",function(){return this.autoIndent()}.bind(this)),n.setKeyBinding(new t.KeyBinding("t",!0,!1,!0),"trimTrailingWhitespaces"),n.setAction("trimTrailingWhitespaces",function(){return this.trimTrailingWhitespaces()}.bind(this),{name:e.trimTrailingWhitespaces}),n.setKeyBinding(new t.KeyBinding(191,!0),"toggleLineComment"),n.setAction("toggleLineComment",function(){return this.toggleLineComment()}.bind(this),{name:e.toggleLineComment}),n.setKeyBinding(new t.KeyBinding(191,!0,!s.isMac,!1,s.isMac),"addBlockComment"),n.setAction("addBlockComment",function(){return this.addBlockComment()}.bind(this),{name:e.addBlockComment}),n.setKeyBinding(new t.KeyBinding(220,!0,!s.isMac,!1,s.isMac),"removeBlockComment"),n.setAction("removeBlockComment",function(){return this.removeBlockComment()}.bind(this),{name:e.removeBlockComment}),n.setKeyBinding(new t.KeyBinding("[",!1,!1,!1,!1,"keypress"),"autoPairSquareBracket"),n.setAction("autoPairSquareBracket",function(){return this.autoPairBrackets("[","]")}.bind(this)),n.setKeyBinding(new t.KeyBinding("]",!1,!1,!1,!1,"keypress"),"skipClosingSquareBracket"),n.setAction("skipClosingSquareBracket",function(){return this.skipClosingBracket("]")}.bind(this)),n.setKeyBinding(new t.KeyBinding("<",!1,!1,!1,!1,"keypress"),"autoPairAngleBracket"),n.setAction("autoPairAngleBracket",function(){return this.autoPairBrackets("<",">")}.bind(this)),n.setKeyBinding(new t.KeyBinding(">",!1,!1,!1,!1,"keypress"),"skipClosingAngleBracket"),n.setAction("skipClosingAngleBracket",function(){return this.skipClosingBracket(">")}.bind(this)),n.setKeyBinding(new t.KeyBinding("(",!1,!1,!1,!1,"keypress"),"autoPairParentheses"),n.setAction("autoPairParentheses",function(){return this.autoPairBrackets("(",")")}.bind(this)),n.setKeyBinding(new t.KeyBinding(")",!1,!1,!1,!1,"keypress"),"skipClosingParenthesis"),n.setAction("skipClosingParenthesis",function(){return this.skipClosingBracket(")")}.bind(this)),n.setKeyBinding(new t.KeyBinding("{",!1,!1,!1,!1,"keypress"),"autoPairBraces"),n.setAction("autoPairBraces",function(){return this.autoPairBrackets("{","}")}.bind(this)),n.setKeyBinding(new t.KeyBinding("}",!1,!1,!1,!1,"keypress"),"skipClosingBrace"),n.setAction("skipClosingBrace",function(){return this.skipClosingBracket("}")}.bind(this)),n.setKeyBinding(new t.KeyBinding("'",!1,!1,!1,!1,"keypress"),"autoPairSingleQuotation"),n.setAction("autoPairSingleQuotation",function(){return this.autoPairQuotations("'")}.bind(this)),n.setKeyBinding(new t.KeyBinding('"',!1,!1,!1,!1,"keypress"),"autoPairDblQuotation"),n.setAction("autoPairDblQuotation",function(){return this.autoPairQuotations('"')}.bind(this)),n.setAction("deletePrevious",function(){return this.deletePrevious()}.bind(this))},autoIndent:function(){var e=this.editor,t=e.getTextView();if(t.getOptions("readonly"))return!1;var n=e.getSelection();if(n.start===n.end){for(var r=e.getModel(),i=r.getLineAtOffset(n.start),s=r.getLine(i,!1),o=r.getLineStart(i),u=0,a=n.start-o,f;u<a&&((f=s.charCodeAt(u))===32||f===9);)u++;var o=s.substring(0,u),t=t.getOptions("tabSize","expandTab"),l=t.expandTab?Array(t.tabSize+1).join(" "):"	",t=r.getLineDelimiter(),c=/^[\s]*\/\*[\*]*[\s]*$/,h=/^[\s]*\*/,p=/\*\/[\s]*$/,d=s.substring(0,a),v=s.substring(a),m;if(this.smartIndentation&&s.charCodeAt(m=d.trimRight().length-1)===123)return r=a-m-1,v=v.length-v.trimLeft().length,s=s.charCodeAt(a+v)===125?t+o+l+t+o:t+o+l,e.setText(s,n.start-r,n.end+v),e.setCaretOffset(n.start+t.length+o.length+l.length-r),!0;if(this.autoCompleteComments&&!p.test(d)&&(c.test(d)||h.test(d))){if(u=c.exec(d)){s=t+o+" * ",s+=p.test(v)?v.substring(0,v.length-2).trim():v.trim();if(r.getLineCount()===i+1||!h.test(r.getLine(i+1)))s+=t+o+" */";return e.setText(s,n.start,n.end+v.length),e.setCaretOffset(n.start+t.length+o.length+3),!0}if(u=h.exec(d))for(i-=1;i>=0;i--){if(u=r.getLine(i,!1),c.test(u))return p.test(v)||s.charCodeAt(a)===47?(s=t+o+"*"+v,o=n.start+t.length+o.length+1):(s=t+o+"* "+v,o=n.start+t.length+o.length+2),e.setText(s,n.start,n.end+v.length),e.setCaretOffset(o),!0;if(!h.test(u))break}}else{if(p.test(d)&&o.charCodeAt(o.length-1)===32)return s=t+o.substring(0,o.length-1),e.setText(s,n.start,n.end),e.setCaretOffset(n.start+s.length),!0;if(u>0){for(u=a;u<s.length&&((f=s.charCodeAt(u++))===32||f===9);)n.end++;return e.setText(r.getLineDelimiter()+o,n.start,n.end),!0}}}return!1},addBlockComment:function(){var e=this.editor;if(e.getTextView().getOptions("readonly"))return!1;var t=e.getModel(),n=e.getSelection(),r=this._findEnclosingComment(t,n.start,n.end);if(r.commentStart!==void 0&&r.commentEnd!==void 0)return!0;t=t.getText(n.start,n.end);if(t.length===0)return!0;var r=t.length,t=t.replace(/\/\*|\*\//g,""),i=t.length;return e.setText("/*"+t+"*/",n.start,n.end),e.setSelection(n.start+2,n.end+2+(i-r)),!0},autoPairBrackets:function(e,t){if(e==="["&&!this.autoPairSquareBrackets)return!1;if(e==="{"&&!this.autoPairBraces)return!1;if(e==="("&&!this.autoPairParentheses)return!1;if(e==="<"&&!this.autoPairAngleBrackets)return!1;var n=this.editor;if(n.getTextView().getOptions("readonly"))return!1;var r=n.getSelection(),i=n.getModel(),s=n.getCaretOffset()===i.getCharCount()?"":i.getText(r.start,r.start+1).trim(),o=/^$|[)}\]>]/;return r.start===r.end&&o.test(s)?(n.setText(e+t,r.start,r.start),n.setCaretOffset(r.start+1),!0):r.start!==r.end?(i=i.getText(r.start,r.end),n.setText(e+i+t,r.start,r.end),n.setSelection(r.start+1,r.end+1),!0):!1},autoPairQuotations:function(e){if(!this.autoPairQuotation)return!1;var t=this.editor;if(t.getTextView().getOptions("readonly"))return!1;var n=t.getSelection(),r=t.getModel(),i=t.getCaretOffset(),s=i===0?"":r.getText(n.start-1,n.start).trim(),o=i===r.getCharCount()?"":r.getText(n.start,n.start+1).trim(),i=/^"$|^'$/,u=/\w/,a=/^$|[)}\]>]/;if(n.start!==n.end){r=r.getText(n.start,n.end);if(i.test(r))return!1;t.setText(e+r+e,n.start,n.end),t.setSelection(n.start+1,n.end+1)}else if(o===e)t.setCaretOffset(n.start+1);else{if(s===e||i.test(o)||u.test(s)||!a.test(o))return!1;t.setText(e+e,n.start,n.start),t.setCaretOffset(n.start+1)}return!0},contentAssistProposalApplied:function(e){e=e.data.proposal;if(e.positions&&e.positions.length>0&&this.linkedMode){for(var t=[],n=0;n<e.positions.length;++n)t[n]={positions:[{offset:e.positions[n].offset,length:e.positions[n].length}]};this.linkedMode.enterLinkedMode({groups:t,escapePosition:e.escapePosition})}else e.groups&&e.groups.length>0&&this.linkedMode?this.linkedMode.enterLinkedMode({groups:e.groups,escapePosition:e.escapePosition}):e.escapePosition&&this.editor.getTextView().setCaretOffset(e.escapePosition);return!0},deletePrevious:function(){var e=this.editor;if(e.getTextView().getOptions("readonly"))return!1;var t=e.getSelection();if(t.start!==t.end)return!1;var n=e.getModel(),r=e.getCaretOffset(),i=r===0?"":n.getText(t.start-1,t.start),n=r===n.getCharCount()?"":n.getText(t.start,t.start+1);return(i==="("&&n===")"||i==="["&&n==="]"||i==="{"&&n==="}"||i==="<"&&n===">"||i==='"'&&n==='"'||i==="'"&&n==="'")&&e.setText("",t.start,t.start+1),!1},_findEnclosingComment:function(e,t,n){var r=e.getLineAtOffset(t),i=e.getLineAtOffset(n),s,o,u,a,f,l;for(s=r;s>=0;s--){if(o=e.getLine(s),u=s===r?t-e.getLineStart(r):o.length,a=o.lastIndexOf("/*",u),o=o.lastIndexOf("*/",u),o>a)break;if(a!==-1){f=e.getLineStart(s)+a;break}}for(s=i;s<e.getLineCount();s++){if(o=e.getLine(s),u=s===i?n-e.getLineStart(i):0,a=o.indexOf("/*",u),o=o.indexOf("*/",u),a!==-1&&a<o)break;if(o!==-1){l=e.getLineStart(s)+o;break}}return{commentStart:f,commentEnd:l}},lineStart:function(){for(var e=this.editor,t=e.getModel(),n=e.getCaretOffset(),r=t.getLineAtOffset(n),i=t.getLineStart(r),t=t.getLine(r),r=0;r<t.length;r++){var s=t.charCodeAt(r);if(s!==32&&s!==9)break}return r+=i,n!==r?(e.setSelection(r,r),!0):!1},removeBlockComment:function(){var e=this.editor;if(e.getTextView().getOptions("readonly"))return!1;var t=e.getModel(),n=e.getSelection(),r=t.getText(n.start,n.end),i,s,o;for(o=0;o<r.length;o++)if(r.substring(o,o+2)==="/*"){i=n.start+o;break}for(;o<r.length;o++)if(r.substring(o,o+2)==="*/"){s=n.start+o;break}if(i!==void 0&&s!==void 0)e.setText(t.getText(i+2,s),i,s+2),e.setSelection(i,s);else{r=this._findEnclosingComment(t,n.start,n.end);if(r.commentStart===void 0||r.commentEnd===void 0)return!0;t=t.getText(r.commentStart+2,r.commentEnd),e.setText(t,r.commentStart,r.commentEnd+2),e.setSelection(n.start-2,n.end-2)}return!0},toggleLineComment:function(){var e=this.editor;if(e.getTextView().getOptions("readonly"))return!1;for(var t=e.getModel(),n=e.getSelection(),r=t.getLineAtOffset(n.start),i=t.getLineAtOffset(n.end>n.start?n.end-1:n.end),s=!0,o=[],u,a,f=r;f<=i;f++)if(u=t.getLine(f,!0),o.push(u),!s||(a=u.indexOf("//"))===-1)s=!1;else if(a!==0){var l;for(l=0;l<a;l++)if(s=u.charCodeAt(l),s!==32&&s!==9)break;s=l===a}f=t.getLineStart(r),l=t.getLineEnd(i,!0);if(s){for(s=0;s<o.length;s++)u=o[s],a=u.indexOf("//"),o[s]=u.substring(0,a)+u.substring(a+2);o=o.join(""),u=t.getLineStart(i),t=f===n.start?n.start:n.start-2,n=n.end-2*(i-r+1)+(n.end===u+1?2:0)}else o.splice(0,0,""),o=o.join("//"),t=f===n.start?n.start:n.start+2,n=n.end+2*(i-r+1);return e.setText(o,f,l),e.setSelection(t,n),!0},trimTrailingWhitespaces:function(){var e=this.editor,t=e.getModel(),n=e.getSelection();e.getTextView().setRedraw(!1),e.getUndoStack().startCompoundChange();for(var r=/(\s+$)/,i=t.getLineCount(),s=0;s<i;s++){var o=t.getLine(s),u=r.exec(o);if(u){var a=t.getLineStart(s),o=u[0].length,u=a+u.index;t.setText("",u,u+o),n.start>u&&(n.start=Math.max(u,n.start-o)),n.start!==n.end&&n.end>u&&(n.end=Math.max(u,n.end-o))}}e.getUndoStack().endCompoundChange(),e.getTextView().setRedraw(!0),e.setSelection(n.start,n.end,!1)},startUndo:function(){this.undoStack&&this.undoStack.startCompoundChange()},skipClosingBracket:function(e){var t=this.editor;if(t.getTextView().getOptions("readonly"))return!1;var n=t.getSelection(),r=t.getModel();return(t.getCaretOffset()===r.getCharCount()?"":r.getText(n.start,n.start+1))===e?(t.setCaretOffset(n.start+1),!0):!1},endUndo:function(){this.undoStack&&this.undoStack.endCompoundChange()},setAutoPairParentheses:function(e){this.autoPairParentheses=e},setAutoPairBraces:function(e){this.autoPairBraces=e},setAutoPairSquareBrackets:function(e){this.autoPairSquareBrackets=e},setAutoPairAngleBrackets:function(e){this.autoPairAngleBrackets=e},setAutoPairQuotations:function(e){this.autoPairQuotation=e},setAutoCompleteComments:function(e){this.autoCompleteComments=e},setSmartIndentation:function(e){this.smartIndentation=e}},f.SourceCodeActions=u,String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")}),f}),define("orion/editor/templates",[],function(){function e(e,t,n,r){this.prefix=e,this.description=t,this.template=n,this.name=r,this._parse()}function t(e,t){this._keywords=e||[],this._templates=[],this.addTemplates(t||[])}return e.prototype={getProposal:function(e,t,n){var e=t-e.length,t={},r,i=n.delimiter!==void 0?n.delimiter:"\n";n.indentation&&(i+=n.indentation);for(var s=n.tab!==void 0?n.tab:"	",o=0,u=this.variables,a=this.segments,n=[],f=0;f<a.length;f++){var l=a[f],c=u[l];if(c!==void 0)switch(l){case"${tab}":l=s;break;case"${delimiter}":l=i;break;case"${cursor}":l="",r=o;break;default:var h=t[l];h||(h=t[l]={data:c.data,positions:[]}),l=c.substitution,h.data&&h.data.values&&(l=h.data.values[0]),h.positions.push({offset:e+o,length:l.length})}n.push(l),o+=l.length}var i=[],p;for(p in t)t.hasOwnProperty(p)&&i.push(t[p]);return n=n.join(""),r===void 0&&(r=n.length),{proposal:n,name:this.name,description:this.description,groups:i,escapePosition:e+r,style:"noemphasis"}},match:function(e){return this.prefix.indexOf(e)===0},_parse:function(){var e=this.template,t=[],n={},r,i=0,e=e.replace(/\n/g,"${delimiter}"),e=e.replace(/\t/g,"${tab}");e.replace(/\$\{((?:[^\\}]+|\\.))*\}/g,function(s,o,u){var a=s.substring(2,s.length-1),o=s,l=a,h=null,p=l.indexOf(":");return p!==-1&&(l=l.substring(0,p),o="${"+l+"}",h=JSON.parse(a.substring(p+1).replace("\\}","}").trim())),(a=n[o])||(a=n[o]={}),a.substitution=l,h&&(a.data=h),(r=e.substring(i,u))&&t.push(r),t.push(o),i=u+s.length,l}),(r=e.substring(i,e.length))&&t.push(r),this.segments=t,this.variables=n}},t.prototype={addTemplates:function(t){for(var n=this.getTemplates(),r=0;r<t.length;r++)n.push(new e(t[r].prefix,t[r].description,t[r].template,t[r].name))},computeProposals:function(e,t,n){var r=this.getPrefix(e,t,n),i=[];return this.isValid(r,e,t,n)&&(i=i.concat(this.getTemplateProposals(r,t,n)),i=i.concat(this.getKeywordProposals(r))),i},getKeywords:function(){return this._keywords},getKeywordProposals:function(e){var t=[],n=this.getKeywords();if(n){for(var r=0;r<n.length;r++)n[r].indexOf(e)===0&&t.push({proposal:n[r].substring(e.length),description:n[r],style:"noemphasis_keyword"});0<t.length&&t.splice(0,0,{proposal:"",description:"Keywords",style:"noemphasis_title_keywords",unselectable:!0})}return t},getPrefix:function(e,t,n){return n.prefix},getTemplates:function(){return this._templates},getTemplateProposals:function(e,t,n){for(var r=[],i=this.getTemplates(),s=0;s<i.length;s++){var o=i[s];o.match(e)&&(o=o.getProposal(e,t,n),this.removePrefix(e,o),r.push(o))}return 0<r.length&&(r.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),r.splice(0,0,{proposal:"",description:"Templates",style:"noemphasis_title",unselectable:!0})),r},removePrefix:function(e,t){(t.overwrite=t.proposal.substring(0,e.length)!==e)||(t.proposal=t.proposal.substring(e.length))},isValid:function(){return!0}},{Template:e,TemplateContentAssist:t}}),define("orion/editor/linkedMode","i18n!orion/editor/nls/messages,orion/keyBinding,orion/editor/keyModes,orion/editor/annotations,orion/editor/templates,orion/objects,orion/util".split(","),function(e,t,n,r,i,s){function o(e,t,r){var i=e.getTextView();n.KeyMode.call(this,i),this.editor=e,this.undoStack=t,this.contentAssist=r,this.linkedModeModel=null,i.setAction("linkedModeEnter",function(){return this.exitLinkedMode(!0),!0}.bind(this)),i.setAction("linkedModeCancel",function(){return this.exitLinkedMode(!1),!0}.bind(this)),i.setAction("linkedModeNextGroup",function(){var e=this.linkedModeModel;return this.selectLinkedGroup((e.selectedGroupIndex+1)%e.groups.length),!0}.bind(this)),i.setAction("linkedModePreviousGroup",function(){var e=this.linkedModeModel;return this.selectLinkedGroup(e.selectedGroupIndex>0?e.selectedGroupIndex-1:e.groups.length-1),!0}.bind(this)),this.linkedModeListener={onActivating:function(){this._groupContentAssistProvider&&(this.contentAssist.setProviders([this._groupContentAssistProvider]),this.contentAssist.setProgress(null))}.bind(this),onModelChanged:function(e){if(!this.ignoreVerify){for(var t=this.editor.mapOffset(e.start),n=this.linkedModeModel,r,i;n;){if(r=this._getPositionChanged(n,t,t+e.removedCharCount),i=r.position,i!==void 0&&i.model===n)break;this.exitLinkedMode(!1),n=this.linkedModeModel}if(n){n=0,e=e.addedCharCount-e.removedCharCount,r=r.positions;for(var s,o=0;o<r.length;++o){s=r[o],i=s.position;var u=i.offset<=t&&t<=i.offset+i.length;u&&!s.ansestor?(i.offset+=n,i.length+=e,n+=e):(i.offset+=n,s.ansestor&&u&&(i.length+=e)),s.escape&&(s.model.escapePosition=i.offset)}this._updateAnnotations(r)}}}.bind(this),onVerify:function(e){if(!this.ignoreVerify){for(var t=this.editor,n=t.mapOffset(e.start),r=this.editor.mapOffset(e.end),i=this.linkedModeModel,s,o;i;){if(s=this._getPositionChanged(i,n,r),o=s.position,o!==void 0&&o.model===i)break;this.exitLinkedMode(!1),i=this.linkedModeModel}if(i){var u=this._compoundChange;u?u.owner.model===i&&u.owner.group===o.group||(this.endUndo(),this.startUndo()):this.startUndo(),i.selectedGroupIndex=o.group;var u=0,a=e.text.length-(r-n);s=s.positions;var f;n-=o.position.offset;for(var l=r-o.position.offset,c=0;c<s.length;++c)if(f=s[c],r=f.position,f.oldOffset=r.offset,f.model===i&&f.group===o.group?(r.offset+=u,r.length+=a,u+=a):(r.offset+=u,f.ansestor&&(r.length+=o.count*a)),f.escape)f.model.escapePosition=r.offset;this.ignoreVerify=!0;for(c=s.length-1;c>=0;c--)f=s[c],f.model===i&&f.group===o.group&&t.setText(e.text,f.oldOffset+n,f.oldOffset+l);this.ignoreVerify=!1,e.text=null,this._updateAnnotations(s)}}}.bind(this)}}var u={};return o.prototype=new n.KeyMode,s.mixin(o.prototype,{createKeyBindings:function(){var e=t.KeyBinding,n=[];return n.push({actionID:"linkedModeEnter",keyBinding:new e(13)}),n.push({actionID:"linkedModeCancel",keyBinding:new e(27)}),n.push({actionID:"linkedModeNextGroup",keyBinding:new e(9)}),n.push({actionID:"linkedModePreviousGroup",keyBinding:new e(9,!1,!0)}),n},enterLinkedMode:function(t){if(!this.linkedModeModel){var n=this.editor.getTextView();n.addKeyMode(this),n.addEventListener("Verify",this.linkedModeListener.onVerify),n.addEventListener("ModelChanged",this.linkedModeListener.onModelChanged),this.contentAssist.addEventListener("Activating",this.linkedModeListener.onActivating),this.editor.reportStatus(e.linkedModeEntered,null,!0)}this._sortedPositions=null,this.linkedModeModel&&(t.previousModel=this.linkedModeModel,t.parentGroup=this.linkedModeModel.selectedGroupIndex,this.linkedModeModel.nextModel=t),this.linkedModeModel=t,this.selectLinkedGroup(0)},exitLinkedMode:function(t){if(this.isActive()){this._compoundChange&&(this.endUndo(),this._compoundChange=null),this._sortedPositions=null;var n=this.linkedModeModel;this.linkedModeModel=n.previousModel,n.parentGroup=n.previousModel=void 0,this.linkedModeModel&&(this.linkedModeModel.nextModel=void 0);if(!this.linkedModeModel){var r=this.editor,i=r.getTextView();i.removeKeyMode(this),i.removeEventListener("Verify",this.linkedModeListener.onVerify),i.removeEventListener("ModelChanged",this.linkedModeListener.onModelChanged),i=this.contentAssist,i.removeEventListener("Activating",this.linkedModeListener.onActivating),i.offset=void 0,this.editor.reportStatus(e.linkedModeExited,null,!0),t&&r.setCaretOffset(n.escapePosition,!1)}this.selectLinkedGroup(0)}},startUndo:function(){if(this.undoStack){var e=this,t=this.linkedModeModel;this._compoundChange=this.undoStack.startCompoundChange({model:t,group:t.selectedGroupIndex,end:function(){e._compoundChange=null}})}},endUndo:function(){this.undoStack&&this.undoStack.endCompoundChange()},isActive:function(){return!!this.linkedModeModel},isStatusActive:function(){return!!this.linkedModeModel},selectLinkedGroup:function(e){var t=this.linkedModeModel;if(t){t.selectedGroupIndex=e;var e=t.groups[e],n=e.positions[0],r=this.editor;r.setSelection(n.offset,n.offset+n.length);if(t=this.contentAssist)(t.offset=void 0,e.data&&e.data.type==="link"&&e.data.values)?((this._groupContentAssistProvider=new i.TemplateContentAssist(e.data.values)).getPrefix=function(){var e=r.getSelection();return e.start===e.end&&(e=r.getCaretOffset(),n.offset<=e&&e<=n.offset+n.length)?r.getText(n.offset,e):""},t.offset=n.offset,t.deactivate(),t.activate()):this._groupContentAssistProvider&&(this._groupContentAssistProvider=null,t.deactivate())}this._updateAnnotations()},_getModelPositions:function(e,t,n){for(var r=t.groups,i=0;i<r.length;i++)for(var s=r[i].positions,o=0;o<s.length;o++){var u=s[o];n&&(u={offset:u.offset+n,length:u.length}),u={index:o,group:i,count:s.length,model:t,position:u},e.push(u),t.nextModel&&t.nextModel.parentGroup===i&&(u.ansestor=!0,this._getModelPositions(e,t.nextModel,(n||0)+s[o].offset-s[0].offset))}},_getSortedPositions:function(e){var t=this._sortedPositions;if(!t){for(t=[];e.previousModel;)e=e.previousModel;for(this._getModelPositions(t,e);e;)e.escapePosition!==void 0&&t.push({escape:!0,model:e,position:{offset:e.escapePosition,length:0}}),e=e.nextModel;t.sort(function(e,t){return e.position.offset-t.position.offset}),this._sortedPositions=t}return t},_getPositionChanged:function(e,t,n){for(var r,e=this._getSortedPositions(e),i=e.length-1;i>=0;i--){var s=e[i].position;if(s.offset<=t&&n<=s.offset+s.length){r=e[i];break}}return{position:r,positions:e}},_updateAnnotations:function(e){var t=this.editor.getAnnotationModel();if(t){var n=[],i=[];t.getTextModel();for(var s=t.getAnnotations(),o;s.hasNext();)switch(o=s.next(),o.type){case r.AnnotationType.ANNOTATION_LINKED_GROUP:case r.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP:case r.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP:n.push(o)}if(s=this.linkedModeModel)for(var e=e||this._getSortedPositions(s),u=0;u<e.length;u++)if(o=e[u],o.model===s){var a=r.AnnotationType.ANNOTATION_LINKED_GROUP;o.group===s.selectedGroupIndex&&(a=o.index===0?r.AnnotationType.ANNOTATION_SELECTED_LINKED_GROUP:r.AnnotationType.ANNOTATION_CURRENT_LINKED_GROUP),o=o.position,o=r.AnnotationType.createAnnotation(a,o.offset,o.offset+o.length,""),i.push(o)}t.replaceAnnotations(n,i)}}}),u.LinkedMode=o,u}),define("orion/editor/factories","orion/editor/actions,orion/editor/undoStack,orion/editor/rulers,orion/editor/annotations,orion/editor/textDND,orion/editor/linkedMode".split(","),function(e,t,n,r,i,s){function o(){}function u(){}function a(){}function f(){}function l(){}function c(){}var h={};return o.prototype={createKeyBindings:function(t,n,r,i){var i=new e.TextActions(t,n,i),o=new s.LinkedMode(t,n,r),t=new e.SourceCodeActions(t,n,r,o);return{textActions:i,linkedMode:o,sourceCodeActions:t}}},h.KeyBindingsFactory=o,u.prototype={createUndoStack:function(e){return e=e.getTextView(),new t.UndoStack(e,200)}},h.UndoFactory=u,a.prototype={createLineNumberRuler:function(e){return new n.LineNumberRuler(e,"left",{styleClass:"ruler lines"},{styleClass:"rulerLines odd"},{styleClass:"rulerLines even"})}},h.LineNumberRulerFactory=a,f.prototype={createFoldingRuler:function(e){return new n.FoldingRuler(e,"left",{styleClass:"ruler folding"})}},h.FoldingRulerFactory=f,l.prototype={createAnnotationModel:function(e){return new r.AnnotationModel(e)},createAnnotationStyler:function(e,t){return new r.AnnotationStyler(e,t)},createAnnotationRulers:function(e){var t=new n.AnnotationRuler(e,"left",{styleClass:"ruler annotations"}),e=new n.OverviewRuler(e,"right",{styleClass:"ruler overview"});return{annotationRuler:t,overviewRuler:e}}},h.AnnotationFactory=l,c.prototype={createTextDND:function(e,t){return new i.TextDND(e.getTextView(),t)}},h.TextDNDFactory=c,h}),define("orion/editor/editorFeatures",["orion/editor/factories","orion/editor/actions","orion/editor/linkedMode","orion/objects"],function(e,t,n,r){return r.mixin({},e,t,n)}),function(e,t){typeof define=="function"&&define.amd?define("orion/Deferred",t):typeof exports=="object"?module.exports=t():(e.orion=e.orion||{},e.orion.Deferred=t())}(this,function(){function e(){for(var e;e=i.shift();)e();s=!1}function t(t){i.push(t),s||(s=!0,setTimeout(e,0))}function n(e){return function(){e.apply(void 0,arguments)}}function r(){function e(){for(var e;e=l.shift();){var t=e.deferred,r=f==="fulfilled"?"resolve":"reject";if(typeof e[r]=="function")try{var s=(0,e[r])(a),o=s&&(typeof s=="object"||typeof s=="function")&&s.then;if(typeof o=="function")if(s===t.promise)t.reject(new TypeError);else{var u=s.cancel;typeof u=="function"?t._protected(i).parentCancel=u.bind(s):delete t._protected(i).parentCancel,o.call(s,n(t.resolve),n(t.reject),n(t.progress))}else t.resolve(s)}catch(h){t.reject(h)}else t[r](a)}}function s(n){delete d.parentCancel,f="rejected",a=n,l.length&&t(e)}function o(n){function i(e){return function(t){u||(u=!0,e(t))}}var u=!1;delete d.parentCancel;try{var c=n&&(typeof n=="object"||typeof n=="function")&&n.then;if(typeof c=="function")if(n===h)s(new TypeError);else{f="assumed";var p=n&&n.cancel;if(typeof p!="function"){var v=new r,n=v.promise;try{c(v.resolve,v.reject,v.progress)}catch(y){v.reject(y)}p=n.cancel,c=n.then}a=n,c.call(n,i(o),i(s)),d.parentCancel=p.bind(n)}else f="fulfilled",a=n,l.length&&t(e)}catch(b){i(s)(b)}}function u(){var e=d.parentCancel;e?(delete d.parentCancel,e()):f||(e=Error("Cancel"),e.name="Cancel",s(e))}var a,f,l=[],h=this,d={};Object.defineProperty(this,"_protected",{value:function(e){if(e!==i)throw Error("protected");return d}}),this.resolve=function(e){return f||o(e),h},this.reject=function(e){return f||s(e),h},this.progress=function(e){return f||l.forEach(function(t){if(t.progress)try{t.progress(e)}catch(n){}}),h.promise},this.cancel=function(){return d.parentCancel?setTimeout(u,0):u(),h},this.then=function(n,s,o){return n={resolve:n,reject:s,progress:o,deferred:new r},l.push(n),n.deferred._protected(i).parentCancel=h.promise.cancel.bind(h),(f==="fulfilled"||f==="rejected")&&t(e),n.deferred.promise},this.promise={then:h.then,cancel:h.cancel}}var i=[],s=!1;return r.all=function(e,t){function n(e,t){u||(o[e]=t,--s===0&&a.resolve(o))}function i(e,r){if(!u){if(t)try{n(e,t(r));return}catch(i){r=i}a.reject(r)}}var s=e.length,o=[],u=!1,a=new r;return a.then(void 0,function(){u=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),s===0?a.resolve(o):e.forEach(function(e,t){e.then(n.bind(void 0,t),i.bind(void 0,t))}),a.promise},r.when=function(e,t,n,i){var s;if(!e||typeof e.then!="function")s=new r,s.resolve(e),e=s.promise;return e.then(t,n,i)},r}),define("orion/webui/littlelib",["orion/util"],function(e){function t(e,t){return t||(t=document),t.querySelectorAll(e)}function n(t){var n=t.tabIndex;return n===0&&e.isIE&&!{a:!0,body:!0,button:!0,frame:!0,iframe:!0,img:!0,input:!0,isindex:!0,object:!0,select:!0,textarea:!0}[t.nodeName.toLowerCase()]&&!t.attributes.tabIndex&&(n=-1),n}function r(e){if(n(e)>=0)return e;if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++){var i=r(e.childNodes[t]);if(i)return i}return null}function i(e){if(n(e)>=0)return e;if(e.hasChildNodes())for(var t=e.childNodes.length-1;t>=0;t--){var r=i(e.childNodes[t]);if(r)return r}return null}function s(e,t){if(e.nodeType===3){var n=o.exec(e.nodeValue);n&&n.length>1&&t(e,n)}if(e.hasChildNodes())for(n=0;n<e.childNodes.length;n++)s(e.childNodes[n],t)}var o=/\$\{([^\}]+)\}/,u=null;return{$:function(e,t){return t||(t=document),t.querySelector(e)},$$:t,$$array:function(e,n){return Array.prototype.slice.call(t(e,n))},node:function(e){var t=e;return typeof e=="string"&&(t=document.getElementById(e)),t},contains:function(e,t){if(!e||!t)return!1;if(e===t)return!0;var n=e.compareDocumentPosition(t);return Boolean(n&16)},bounds:function(e){return e=e.getBoundingClientRect(),{left:e.left+document.documentElement.scrollLeft,top:e.top+document.documentElement.scrollTop,width:e.width,height:e.height}},empty:function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)},firstTabbable:r,lastTabbable:i,stop:function(e){window.document.all&&(e.keyCode=0),e.preventDefault&&(e.preventDefault(),e.stopPropagation())},processTextNodes:function(e,t){s(e,function(e,n){e.parentNode.replaceChild(document.createTextNode(t[n[1]]||n[1]),e)})},processDOMNodes:function(e,t){s(e,function(e,n){var r=t[n[1]];if(r){var i=document.createRange(),s=n.index;i.setStart(e,s),i.setEnd(e,s+n[0].length),i.deleteContents(),i.insertNode(r)}})},addAutoDismiss:function(t,n){function r(e){u.forEach(function(t){var n=!1,r=t.excludeNodes.some(function(t){return document.body.contains(t)?(n=!0,t.contains(e.target)):!1});if(n&&!r)try{t.dismiss(e)}catch(i){typeof console!="undefined"&&console&&console.error(i&&i.message)}}),u=u.filter(function(e){return e.excludeNodes.some(function(e){return document.body.contains(e)})})}u===null&&(u=[],document.addEventListener("click",r,!0),e.isIOS&&document.addEventListener("touchend",function(e){function t(){e.target.removeEventListener("click",t)}e.touches.length===0&&e.target.addEventListener("click",t)},!1)),u.push({excludeNodes:t,dismiss:n})},setFramesEnabled:function(e){for(var t=document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].parentNode.style.pointerEvents=e?"":"none"},removeAutoDismiss:function(e){u=u.filter(function(t){return e!==t.dismiss})},KEY:{BKSPC:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DEL:46}}}),define("orion/editor/contentAssist","i18n!orion/editor/nls/messages,orion/keyBinding,orion/editor/keyModes,orion/editor/eventTarget,orion/Deferred,orion/objects,orion/editor/util,orion/util,orion/webui/littlelib".split(","),function(e,t,n,r,i,s,o,u,a){function h(n){this.textView=n,this.state=f,this.resetProviderInfoArray();var r=this;this.contentAssistListener={onModelChanging:function(e){this._latestModelChangingEvent=e}.bind(this),onSelection:function(e){this.isDeactivatingChange(this._latestModelChangingEvent,e)?this.setState(f):this.isActive()&&(this.state===l&&this.setState(c),this.filterProposals(e)),this._latestModelChangingEvent=null}.bind(this),onScroll:function(){this.setState(f)}.bind(this)},n.setKeyBinding(u.isMac?new t.KeyBinding(" ",!1,!1,!1,!0):new t.KeyBinding(" ",!0),"contentAssist"),n.setKeyBinding(u.isMac?new t.KeyBinding(" ",!1,!1,!0,!0):new t.KeyBinding(" ",!0,!1,!0),"contentAssist"),n.setAction("contentAssist",function(){return n.getOptions("readonly")||r.activate(),!0},{name:e.contentAssist})}function p(e,t){var r=e.textView;n.KeyMode.call(this,r),this.contentAssist=e,this.widget=t,this.proposals=[];var i=this;this.contentAssist.addEventListener("ProposalsComputed",function(e){i.proposals=e.data.proposals;if(i.proposals.length===0)i.selectedIndex=-1,i.cancel();else{for(i.selectedIndex=0;i.proposals[i.selectedIndex]&&i.proposals[i.selectedIndex].unselectable;)i.selectedIndex++;if(i.proposals[i.selectedIndex]){if(i.widget){var t=!0;if(e.autoApply){for(e=i.selectedIndex+1;i.proposals[e]&&i.proposals[e].unselectable;)e++;i.proposals[e]||(t=!1,i.contentAssist.apply(i.proposals[i.selectedIndex]))}t&&(i.widget.show(),i.widget.selectNode(i.selectedIndex))}}else i.selectedIndex=-1,i.cancel()}}),r.setAction("contentAssistApply",function(){return this.enter()}.bind(this)),r.setAction("contentAssistCancel",function(){return this.cancel()}.bind(this)),r.setAction("contentAssistNextProposal",function(){return this.lineDown()}.bind(this)),r.setAction("contentAssistPreviousProposal",function(){return this.lineUp()}.bind(this)),r.setAction("contentAssistNextPage",function(){return this.pageDown()}.bind(this)),r.setAction("contentAssistPreviousPage",function(){return this.pageUp()}.bind(this)),r.setAction("contentAssistHome",function(){return this.widget&&this.widget.scrollIndex(0,!0),this.lineDown(0)}.bind(this)),r.setAction("contentAssistEnd",function(){return this.lineUp(this.proposals.length-1)}.bind(this)),r.setAction("contentAssistTab",function(){return this.tab()}.bind(this)),this.widget&&(this.widget.setContentAssistMode(this),this.widget.createAccessible())}function d(e,t){this.contentAssist=e,this.textView=this.contentAssist.getTextView(),this.isShowing=this.textViewListenerAdded=!1;var n=this.textView.getOptions("parent").ownerDocument;this.parentNode=typeof t=="string"?n.getElementById(t):t;if(!this.parentNode){this.parentNode=u.createElement(n,"div"),this.parentNode.className="contentassist";var r=n.getElementsByTagName("body")[0];if(!r)throw Error("parentNode is required");r.appendChild(this.parentNode)}this.parentNode.addEventListener("scroll",this.onScroll.bind(this));var i=this;this.textViewListener={onMouseDown:function(e){(e.event.target||e.event.srcElement).parentElement!==i.parentNode&&i.contentAssist.deactivate()}},this.contentAssist.addEventListener("Deactivating",function(){i.hide()}),this.scrollListener=function(){i.isShowing&&i.position()},o.addEventListener(n,"scroll",this.scrollListener)}var f,l,c;f=1,l=2,c=3;var v={selected:"selected",hr:"proposal-hr",emphasis:"proposal-emphasis",noemphasis:"proposal-noemphasis",noemphasis_keyword:"proposal-noemphasis-keyword",noemphasis_title:"proposal-noemphasis-title",noemphasis_title_keywords:"proposal-noemphasis-title-keywords",dfault:"proposal-default"};return h.prototype={apply:function(e){if(!e)return!1;var t=this.textView,n=t.getSelection(),r=this._initialCaretOffset,i=r,s=n=Math.max(n.start,n.end),o=t.getModel();return o.getBaseModel&&(i=o.mapOffset(i),s=o.mapOffset(s),o=o.getBaseModel()),e.overwrite&&(r=this.getPrefixStart(o,i)),i={proposal:e,start:i,end:s},this.setState(f),t.setText(typeof e=="string"?e:e.proposal,r,n),this.dispatchEvent({type:"ProposalApplied",data:i}),!0},activate:function(e,t){this.state===f&&(this._autoTriggered=t?!0:!1,this.setState(l,e))},deactivate:function(){this.setState(f)},getTextView:function(){return this.textView},isActive:function(){return this.state===l||this.state===c},isDeactivatingChange:function(e,t){var n=!1;return t.newValue.start<this._initialCaretOffset?n=!0:e&&(n=e.removedLineCount>0||e.addedLineCount>0),n},setState:function(e,t){var n;e===l?(this._filterText="",n="Activating",this._mode&&this._mode.setActive(!0)):e===f&&(n="Deactivating",this._mode&&this._mode.setActive(!1),this._initialCaretOffset=-1,this._filterText=""),n&&this.dispatchEvent({type:n,providerInfoArray:t}),this.state=e,this.onStateChange(e)},setMode:function(e){this._mode=e},onStateChange:function(e){e===f?this.listenerAdded&&(this._latestModelChangingEvent=null,this.textView.removeEventListener("ModelChanging",this.contentAssistListener.onModelChanging),this.textView.removeEventListener("Scroll",this.contentAssistListener.onScroll),this.textView.removeEventListener("Selection",this.contentAssistListener.onSelection),this.listenerAdded=!1):e===l&&(this.listenerAdded||(this.textView.addEventListener("ModelChanging",this.contentAssistListener.onModelChanging),this.textView.addEventListener("Scroll",this.contentAssistListener.onScroll),this.textView.addEventListener("Selection",this.contentAssistListener.onSelection),this.listenerAdded=!0),this.computeProposals())},computeProposals:function(){var e=this,t=this.textView.getCaretOffset(),n=this.textView.getSelection(),n=Math.min(n.start,n.end);this._initialCaretOffset=Math.min(t,n),this._computeProposals(this._initialCaretOffset).then(function(t){e._computedProposals=t,e.isActive()&&(t=e._flatten(t),e.dispatchEvent({type:"ProposalsComputed",data:{proposals:t},autoApply:!e._autoTriggered}))})},getPrefixStart:function(e,t){for(var n=t;n>0&&/[A-Za-z0-9_]/.test(e.getText(n-1,n));)n--;return n},handleError:function(e){typeof console!="undefined"&&(console.log("Error retrieving content assist proposals"),console.log(e&&e.stack))},_computeProposals:function(e){var t=this._providerInfoArray,n=this.textView,r=n.getSelection(),o=n.getModel(),u=e;o.getBaseModel&&(u=o.mapOffset(u),r.start=o.mapOffset(r.start),r.end=o.mapOffset(r.end),o=o.getBaseModel());for(var e=o.getLine(o.getLineAtOffset(u)),a=0;a<e.length&&/\s/.test(e.charAt(a));)a++;var a=e.substring(0,a),n=n.getOptions("tabSize","expandTab"),n=n.expandTab?Array(n.tabSize+1).join(" "):"	",f={line:e,offset:u,prefix:o.getText(this.getPrefixStart(o,u),u),selection:r,delimiter:o.getLineDelimiter(),tab:n,indentation:a},l=this,t=t.map(function(e){var e=e.provider,t;try{var n,r;if(n=e.computeContentAssist){var a=l.editorContextProvider,c=a.getEditorContext();f=s.mixin(f,a.getOptions()),r=n.apply(e,[c,f])}else if(n=e.getProposals||e.computeProposals)r=n.apply(e,[o.getText(),u,f]);t=l.progress?l.progress.progress(r,"Generating content assist proposal"):r}catch(h){l.handleError(h)}return i.when(t)});return i.all(t,this.handleError)},filterProposals:function(){var e="",t=0;if(this._latestModelChangingEvent){e=this._latestModelChangingEvent.text;if(t=this._latestModelChangingEvent.removedCharCount)this._filterText=this._filterText.substring(0,this._filterText.length-t);e&&(this._filterText=this._filterText.concat(e)),e=this.textView.getModel(),e.getBaseModel&&(e=e.getBaseModel());var n=this.textView.getText(this.getPrefixStart(e,this._initialCaretOffset),this._initialCaretOffset),r=[];this._computedProposals.forEach(function(e){e=e.filter(function(e){if(v[e.style]===v.hr||v[e.style]===v.noemphasis_title)return!0;var t="";if(e.overwrite){if(e.name)t=e.name;else{if(!e.proposal)return!1;t=e.proposal}return 0===t.indexOf(n+this._filterText)}return e.name||e.proposal?(t=!1,e.name&&(t=0===e.name.indexOf(n+this._filterText)),!t&&e.proposal&&(t=0===e.proposal.indexOf(this._filterText)),t):typeof e=="string"?0===e.indexOf(this._filterText):!1},this),e.length>0&&r.push(e)},this),r=this._removeExtraUnselectableElements(r),this.dispatchEvent({type:"ProposalsComputed",data:{proposals:this._flatten(r)},autoApply:!1})}},_removeExtraUnselectableElements:function(e){return e.map(function(e){return e.filter(function(t,n){var r=!0;if(v[t.style]===v.hr)0===n||e.length-1===n?r=!1:v.hr===v[e[n-1].style]&&(r=!1);else if(v[t.style]===v.noemphasis_title){var i=e[n+1];i?v[i.style]===v.noemphasis_title&&(r=!1):r=!1}return r})})},setEditorContextProvider:function(e){this.editorContextProvider=e},_generateProviderId:function(){return this._uniqueProviderIdCounter?this._uniqueProviderIdCounter++:this._uniqueProviderIdCounter=0,"ContentAssistGeneratedID_"+this._uniqueProviderIdCounter},setAutoTriggerEnabled:function(e){this._autoTriggerEnabled=e,this._updateAutoTriggerListenerState()},setProviders:function(e){this.setProviderInfoArray(e.map(function(e){return{provider:e,id:this._generateProviderId()}},this))},setProviderInfoArray:function(e){this.resetProviderInfoArray(),this._providerInfoArray=e,this._charTriggersInstalled=e.some(function(e){return e.charTriggers}),this._updateAutoTriggerListenerState()},resetProviderInfoArray:function(){this._providerInfoArray=[],this._charTriggersInstalled=!1,this._updateAutoTriggerListenerState()},setProgress:function(e){this.progress=e},setStyleAccessor:function(e){this._styleAccessor=e},_flatten:function(e){return e.reduce(function(e,t){var n=e;if(Array.isArray(t)&&t.length>0){var n=t,r=e;t[0].style&&0===v[t[0].style].indexOf(v.noemphasis)&&(n=e,r=t),n.length>0&&n[n.length-1].style&&v.hr!==v[n[n.length-1].style]&&(n=n.concat({proposal:"",name:"",description:"---------------------------------",style:"hr",unselectable:!0})),n=n.concat(r)}return n},[])},_triggerListener:function(){if(this._styleAccessor){var e=this.textView.getCaretOffset(),t=null,n=[];if(this._charTriggersInstalled){var r=this.textView.getText(e-1,e);this._providerInfoArray.forEach(function(i){var s=i.charTriggers;if(s&&s.test(r)){var s=!1,o=i.excludedStyles;o&&(t||(t=this._styleAccessor.getStyles(e-1)),s=t.some(function(e){return o.test(e.style)})),s||n.push(i)}},this),n.length>0&&this.activate(n,!0)}}},_updateAutoTriggerListenerState:function(){this._boundTriggerListener||(this._boundTriggerListener=this._triggerListener.bind(this));if(this._triggerListenerInstalled){if(!this._autoTriggerEnabled||!this._charTriggersInstalled)this.textView.removeEventListener("Modify",this._boundTriggerListener),this._triggerListenerInstalled=!1}else this._autoTriggerEnabled&&this._charTriggersInstalled&&(this.textView.addEventListener("Modify",this._boundTriggerListener),this._triggerListenerInstalled=!0)}},r.EventTarget.addMixin(h.prototype),p.prototype=new n.KeyMode,s.mixin(p.prototype,{createKeyBindings:function(){var e=t.KeyBinding,n=[];return n.push({actionID:"contentAssistApply",keyBinding:new e(13)}),n.push({actionID:"contentAssistCancel",keyBinding:new e(27)}),n.push({actionID:"contentAssistNextProposal",keyBinding:new e(40)}),n.push({actionID:"contentAssistPreviousProposal",keyBinding:new e(38)}),n.push({actionID:"contentAssistNextPage",keyBinding:new e(34)}),n.push({actionID:"contentAssistPreviousPage",keyBinding:new e(33)}),n.push({actionID:"contentAssistHome",keyBinding:new e(a.KEY.HOME)}),n.push({actionID:"contentAssistEnd",keyBinding:new e(a.KEY.END)}),n.push({actionID:"contentAssistTab",keyBinding:new e(9)}),n},cancel:function(){this.getContentAssist().deactivate()},getContentAssist:function(){return this.contentAssist},getProposals:function(){return this.proposals},isActive:function(){return this.getContentAssist().isActive()},setActive:function(e){e?this.contentAssist.textView.addKeyMode(this):this.contentAssist.textView.removeKeyMode(this)},lineUp:function(e,t){return this.selectNew(e,t,!1)},lineDown:function(e,t){return this.selectNew(e,t,!0)},selectNew:function(e,t,n){if(n){if(void 0===e&&(e=this.selectedIndex+1),e>=this.proposals.length){if(t)return!0;e=0}}else if(void 0===e&&(e=this.selectedIndex-1),0>e){if(t)return!0;e=this.proposals.length-1}for(var r=e;this.proposals[e]&&this.proposals[e].unselectable;){if(n){if(e++,e>=this.proposals.length){if(t)return!0;e=0}}else if(e--,0>e){if(t)return!0;e=this.proposals.length-1}if(e===r){e=-1;break}}return this.selectedIndex=e,this.widget&&this.widget.selectNode(e),!0},pageUp:function(){if(this.widget){var e=this.widget.getTopIndex();return e===this.selectedIndex&&(this.widget.scrollIndex(e,!1),e=this.widget.getTopIndex()),0===e?this.lineDown(e,!0):this.lineUp(e,!0)}return this.lineUp()},pageDown:function(){if(this.widget){var e=this.widget.getBottomIndex();return e===this.selectedIndex&&(this.widget.scrollIndex(e,!0),e=this.widget.getBottomIndex()),this.lineDown(e,!0)}return this.lineDown()},enter:function(){return this.contentAssist.apply(this.proposals[this.selectedIndex]||null)},tab:function(){return this.widget?(this.widget.parentNode.focus(),!0):!1}}),d.prototype={onClick:function(e){e||(e=window.event),this.contentAssist.apply(this.getProposal(e.target||e.srcElement)),this.textView.focus()},onScroll:function(){this.previousCloneNode&&!this.preserveCloneThroughScroll&&(this._removeCloneNode(),this.previousSelectedNode.classList.add(v.selected)),this.preserveCloneThroughScroll=!1},createDiv:function(e,t,n){var r=t.ownerDocument,i=u.createElement(r,"div");i.id="contentoption"+n,i.setAttribute("role","option"),i.className=v[e.style]?v[e.style]:v.dfault,e.style==="hr"?e=u.createElement(r,"hr"):(e=this._createDisplayNode(i,e,n),i.contentAssistProposalIndex=n),i.appendChild(e),t.appendChild(i)},createAccessible:function(){var e=this._contentAssistMode,t=this;this.parentNode.addEventListener("keydown",function(n){return n||(n=window.event),n.preventDefault&&n.preventDefault(),n.keyCode===a.KEY.ESCAPE?e.cancel():n.keyCode===a.KEY.UP?e.lineUp():n.keyCode===a.KEY.DOWN?e.lineDown():n.keyCode===a.KEY.ENTER?e.enter():n.keyCode===a.KEY.PAGEDOWN?e.pageDown():n.keyCode===a.KEY.PAGEUP?e.pageUp():n.keyCode===a.KEY.HOME?(t.scrollIndex(0,!0),e.lineDown(0)):n.keyCode===a.KEY.END?e.lineUp(e.getProposals().length-1):!1})},_createDisplayNode:function(e,t,n){var r=null,i=null;if(typeof t=="string")i=t;else if(t.description&&typeof t.description=="string")if(t.name&&typeof t.name=="string"){var s=this._createNameNode(t.name);s.contentAssistProposalIndex=n,r=document.createElement("span"),r.appendChild(s),s=document.createTextNode(t.description),r.appendChild(s),e.setAttribute("title",t.name+t.description)}else i=t.description;else i=t.proposal;return i&&(r=this._createNameNode(i),e.setAttribute("title",i)),r.contentAssistProposalIndex=n,r},_createNameNode:function(e){var t=document.createElement("span");return t.classList.add("proposal-name"),t.appendChild(document.createTextNode(e)),t},getProposal:function(e){var t=null,e=e.contentAssistProposalIndex;return void 0!==e&&(t=this._contentAssistMode.getProposals()[e]||null),t},getTopIndex:function(){for(var e=this.parentNode.childNodes,t=0;t<e.length;t++)if(e[t].offsetTop>=this.parentNode.scrollTop)return t;return 0},getBottomIndex:function(){for(var e=this.parentNode.childNodes,t=0;t<e.length;t++){var n=e[t];if(n.offsetTop+n.offsetHeight>this.parentNode.scrollTop+this.parentNode.clientHeight)return Math.max(0,t-1)}return e.length-1},scrollIndex:function(e,t){this.parentNode.childNodes[e].scrollIntoView(t),this.preserveCloneThroughScroll=!0},selectNode:function(e){var t=null;this.previousSelectedNode&&(this.previousSelectedNode.classList.remove(v.selected),this.previousSelectedNode=null,this.previousCloneNode&&this._removeCloneNode());if(-1!==e){t=this.parentNode.childNodes[e],t.classList.add(v.selected),this.parentNode.setAttribute("aria-activedescendant",t.id),t.focus(),t.offsetTop<this.parentNode.scrollTop?(t.scrollIntoView(!0),this.preserveCloneThroughScroll=!0):t.offsetTop+t.offsetHeight>this.parentNode.scrollTop+this.parentNode.clientHeight&&(t.scrollIntoView(!1),this.preserveCloneThroughScroll=!0);var n=a.bounds(t.firstChild||t),r=a.bounds(this.parentNode),e=window.getComputedStyle(this.parentNode),i=window.getComputedStyle(t),i=parseInt(e.paddingLeft)+parseInt(e.paddingRight)+parseInt(i.paddingLeft)+parseInt(i.paddingRight);if(n.width>=r.width-i){i=parseInt(e.top),r=t.cloneNode(!0),r.classList.add("cloneProposal"),r.style.top=i+t.offsetTop-this.parentNode.scrollTop+"px",r.style.left=e.left,r.setAttribute("id",r.id+"_clone"),n=n.left+n.width-parseInt(document.documentElement.clientWidth),n>0&&(e=parseInt(e.left)-n,0>e&&(e=0),r.style.left=e+"px"),e=document.createElement("div"),e.id="clone_contentassist",e.classList.add("contentassist"),e.classList.add("cloneWrapper"),e.appendChild(r),e.onclick=this.parentNode.onclick,this.parentNode.parentNode.insertBefore(e,this.parentNode);var s=function(e){e.contentAssistProposalIndex=t.contentAssistProposalIndex;if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++)s(e.childNodes[n])};s(e),t.classList.remove(v.selected),this.previousCloneNode=e}}this.previousSelectedNode=t},setContentAssistMode:function(e){this._contentAssistMode=e},show:function(){var e=this._contentAssistMode.getProposals();if(e.length===0)this.hide();else{this.parentNode.innerHTML="";for(var t=0;t<e.length;t++)this.createDiv(e[t],this.parentNode,t);this.position(),this.parentNode.onclick=this.onClick.bind(this),this.isShowing=!0,this.textViewListenerAdded||(this.textView.addEventListener("MouseDown",this.textViewListener.onMouseDown),this.textViewListenerAdded=!0)}},hide:function(){this.parentNode.ownerDocument.activeElement===this.parentNode&&this.textView.focus(),this.parentNode.style.display="none",this.parentNode.onclick=null,this.isShowing=!1,this.textViewListenerAdded&&(this.textView.removeEventListener("MouseDown",this.textViewListener.onMouseDown),this.textViewListenerAdded=!1),this.previousSelectedNode&&(this.previousSelectedNode=null,this.previousCloneNode&&this._removeCloneNode())},position:function(){var e=this.contentAssist,t=this.textView;if(e.offset!==void 0){var e=e.offset,n=t.getModel();n.getBaseModel&&(e=n.mapOffset(e,!0))}else e=this.textView.getCaretOffset();e=t.getLocationAtOffset(e),e.y+=t.getLineHeight(),this.textView.convert(e,"document","page"),this.parentNode.style.position="fixed",this.parentNode.style.left=e.x+"px",this.parentNode.style.top=e.y+"px",this.parentNode.style.display="block",this.parentNode.scrollTop=0,t=this.parentNode.ownerDocument,n=t.documentElement.clientWidth,e.y+this.parentNode.offsetHeight>t.documentElement.clientHeight&&(this.parentNode.style.top=e.y-this.parentNode.offsetHeight-this.textView.getLineHeight()+"px"),e.x+this.parentNode.offsetWidth>n&&(this.parentNode.style.left=n-this.parentNode.offsetWidth+"px")},_removeCloneNode:function(){this.parentNode.parentNode.contains(this.previousCloneNode)&&this.parentNode.parentNode.removeChild(this.previousCloneNode),this.previousCloneNode=null}},{ContentAssist:h,ContentAssistMode:p,ContentAssistWidget:d}}),define("orion/editor/stylers/lib/syntax",[],function(){return{id:"orion.lib",grammars:[{id:"orion.lib",patterns:[{include:"#brace_open"},{include:"#brace_close"},{include:"#bracket_open"},{include:"#bracket_close"},{include:"#parenthesis_open"},{include:"#parenthesis_close"},{include:"#number_decimal"},{include:"#number_hex"},{include:"#string_doubleQuote"},{include:"#string_singleQuote"}],repository:{brace_open:{match:"{",name:"punctuation.section.block.begin"},brace_close:{match:"}",name:"punctuation.section.block.end"},bracket_open:{match:"\\[",name:"punctuation.section.bracket.begin"},bracket_close:{match:"\\]",name:"punctuation.section.bracket.end"},parenthesis_open:{match:"\\(",name:"punctuation.section.parens.begin"},parenthesis_close:{match:"\\)",name:"punctuation.section.parens.end"},doc_block:{begin:"/\\*\\*",end:"\\*/",name:"comment.block.documentation",patterns:[{match:"@(?:(?!\\*/)\\S)*",name:"keyword.other.documentation.tag"},{match:"\\<\\S*\\>",name:"keyword.other.documentation.markup"},{match:"(\\b)(TODO)(\\b)(((?!\\*/).)*)",name:"meta.annotation.task.todo",captures:{2:{name:"keyword.other.documentation.task"},4:{name:"comment.block"}}}]},number_decimal:{match:"\\b-?(?:\\.\\d+|\\d+\\.?\\d*)(?:[eE][+-]?\\d+)?\\b",name:"constant.numeric.number"},number_hex:{match:"\\b0[xX][0-9A-Fa-f]+\\b",name:"constant.numeric.hex"},string_doubleQuote:{match:'"(?:\\\\.|[^"])*"?',name:"string.quoted.double"},string_singleQuote:{match:"'(?:\\\\.|[^'])*'?",name:"string.quoted.single"},todo_comment_singleLine:{match:"(\\b)(TODO)(\\b)(.*)",name:"meta.annotation.task.todo",captures:{2:{name:"keyword.other.documentation.task"},4:{name:"comment.line"}}}}},{id:"orion.c-like",patterns:[{include:"orion.lib"},{include:"#comment_singleLine"},{include:"#comment_block"}],repository:{comment_singleLine:{match:"//.*",name:"comment.line.double-slash",patterns:[{include:"orion.lib#todo_comment_singleLine"}]},comment_block:{begin:"/\\*",end:"\\*/",name:"comment.block",patterns:[{match:"(\\b)(TODO)(\\b)(((?!\\*/).)*)",name:"meta.annotation.task.todo",captures:{2:{name:"keyword.other.documentation.task"},4:{name:"comment.block"}}}]}}}],keywords:[]}}),define("orion/editor/stylers/text_css/syntax",["orion/editor/stylers/lib/syntax"],function(e){var t="alignment-adjust,alignment-baseline,animation-delay,animation-direction,animation-duration,animation-iteration-count,animation-name,animation-play-state,animation-timing-function,animation,appearance,azimuth,backface-visibility,background-attachment,background-clip,background-color,background-image,background-origin,background-position,background-repeat,background-size,background,baseline-shift,binding,bleed,bookmark-label,bookmark-level,bookmark-state,bookmark-target,border-bottom-color,border-bottom-left-radius,border-bottom-right-radius,border-bottom-style,border-bottom-width,border-bottom,border-collapse,border-color,border-image-outset,border-image-repeat,border-image-slice,border-image-source,border-image-width,border-image,border-left-color,border-left-style,border-left-width,border-left,border-radius,border-right-color,border-right-style,border-right-width,border-right,border-spacing,border-style,border-top-color,border-top-left-radius,border-top-right-radius,border-top-style,border-top-width,border-top,border-width,border,bottom,box-align,box-decoration-break,box-direction,box-flex-group,box-flex,box-lines,box-ordinal-group,box-orient,box-pack,box-shadow,box-sizing,break-after,break-before,break-inside,caption-side,clear,clip,color-profile,color,column-count,column-fill,column-gap,column-rule-color,column-rule-style,column-rule-width,column-rule,column-span,column-width,columns,content,counter-increment,counter-reset,crop,cue-after,cue-before,cue,cursor,direction,display,dominant-baseline,drop-initial-after-adjust,drop-initial-after-align,drop-initial-before-adjust,drop-initial-before-align,drop-initial-size,drop-initial-value,elevation,empty-cells,fit-position,fit,flex-align,flex-flow,flex-inline-pack,flex-order,flex-pack,float-offset,float,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,font,grid-columns,grid-rows,hanging-punctuation,height,hyphenate-after,hyphenate-before,hyphenate-character,hyphenate-lines,hyphenate-resource,hyphens,icon,image-orientation,image-rendering,image-resolution,inline-box-align,left,letter-spacing,line-height,line-stacking-ruby,line-stacking-shift,line-stacking-strategy,line-stacking,list-style-image,list-style-position,list-style-type,list-style,margin-bottom,margin-left,margin-right,margin-top,margin,mark-after,mark-before,mark,marker-offset,marks,marquee-direction,marquee-loop,marquee-play-count,marquee-speed,marquee-style,max-height,max-width,min-height,min-width,move-to,nav-down,nav-index,nav-left,nav-right,nav-up,opacity,orphans,outline-color,outline-offset,outline-style,outline-width,outline,overflow-style,overflow-x,overflow-y,overflow,padding-bottom,padding-left,padding-right,padding-top,padding,page-break-after,page-break-before,page-break-inside,page-policy,page,pause-after,pause-before,pause,perspective-origin,perspective,phonemes,pitch-range,pitch,play-during,position,presentation-level,punctuation-trim,quotes,rendering-intent,resize,rest-after,rest-before,rest,richness,right,rotation-point,rotation,ruby-align,ruby-overhang,ruby-position,ruby-span,size,speak-header,speak-numeral,speak-punctuation,speak,speech-rate,stress,string-set,table-layout,target-name,target-new,target-position,target,text-align-last,text-align,text-decoration,text-emphasis,text-height,text-indent,text-justify,text-outline,text-shadow,text-transform,text-wrap,top,transform-origin,transform-style,transform,transition-delay,transition-duration,transition-property,transition-timing-function,transition,unicode-bidi,vertical-align,visibility,voice-balance,voice-duration,voice-family,voice-pitch-range,voice-pitch,voice-rate,voice-stress,voice-volume,volume,white-space-collapse,white-space,widows,width,word-break,word-spacing,word-wrap,z-index".split(","),e=e.grammars;return e.push({id:"orion.css",contentTypes:["text/css"],patterns:[{include:"orion.lib"},{include:"orion.c-like#comment_block"},{match:"(?:-webkit-|-moz-|-ms-|\\b)(?:"+t.join("|")+")\\b",name:"keyword.control.css"},{match:"(?i)\\b-?(?:\\.\\d+|\\d+\\.?\\d*)(?:%|em|ex|ch|rem|vw|vh|vmin|vmax|in|cm|mm|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?\\b",name:"constant.numeric.value.css"},{begin:"(['\"])(?:\\\\.|[^\\\\\\1])*\\\\$",end:"^(?:$|(?:\\\\.|[^\\\\\\1])*(\\1|[^\\\\]$))",name:"string.quoted.multiline.css"}],repository:{number_hex:{match:"#[0-9A-Fa-f]+\\b",name:"constant.numeric.hex.css"}}}),{id:e[e.length-1].id,grammars:e,keywords:t}}),define("orion/editor/cssContentAssist",["orion/editor/templates","orion/editor/stylers/text_css/syntax"],function(e,t){function n(e){return JSON.stringify(e).replace("}","\\}")}function r(){}for(var i={type:"link",values:"visible,hidden,scroll,auto,no-display,no-content".split(",")},s={type:"link",values:"solid,dashed,dotted,double,groove,ridge,inset,outset".split(",")},o={type:"link",values:[]},u=0;u<10;u++)o.values.push(u.toString());for(var a={type:"link",values:"black,white,red,green,blue,magenta,yellow,cyan,grey,darkred,darkgreen,darkblue,darkmagenta,darkcyan,darkyellow,darkgray,lightgray".split(",")},f=[{prefix:"rule",description:"rule - class selector rule",template:".${class} {\n	${cursor}\n}"},{prefix:"rule",description:"rule - id selector rule",template:"#${id} {\n	${cursor}\n}"},{prefix:"outline",description:"outline - outline style",template:"outline: ${color:"+n(a)+"} ${style:"+n(s)+"} ${width:"+n(o)+"}px;"},{prefix:"background-image",description:"background-image - image style",template:'background-image: url("${uri}");'},{prefix:"url",description:"url - url image",template:'url("${uri}");'},{prefix:"rgb",description:"rgb - rgb color",template:"rgb(${red},${green},${blue});"},{prefix:"@",description:"import - import style sheet",template:'@import "${uri}";'}],l=[{prop:"display",values:{type:"link",values:"none,block,box,flex,inline,inline-block,inline-flex,inline-table,list-item,table,table-caption,table-cell,table-column,table-column-group,table-footer-group,table-header-group,table-row,table-row-group,inherit".split(",")}},{prop:"overflow",values:i},{prop:"overflow-x",values:i},{prop:"overflow-y",values:i},{prop:"float",values:{type:"link",values:["left","right","none","inherit"]}},{prop:"position",values:{type:"link",values:["absolute","fixed","relative","static","inherit"]}},{prop:"cursor",values:{type:"link",values:"auto,crosshair,default,e-resize,help,move,n-resize,ne-resize,nw-resize,pointer,progress,s-resize,se-resize,sw-resize,text,w-resize,wait,inherit".split(",")}},{prop:"color",values:a},{prop:"border-top-color",values:a},{prop:"border-bottom-color",values:a},{prop:"border-right-color",values:a},{prop:"border-left-color",values:a},{prop:"background-color",values:a},{prop:"font-style",values:{type:"link",values:["italic","normal","oblique","inherit"]}},{prop:"font-weight",values:{type:"link",values:"bold,normal,bolder,lighter,100,200,300,400,500,600,700,800,900,inherit".split(",")}},{prop:"white-space",values:{type:"link",values:"pre,pre-line,pre-wrap,nowrap,normal,inherit".split(",")}},{prop:"word-wrap",values:{type:"link",values:["normal","break-word"]}},{prop:"visibility",values:{type:"link",values:["hidden","visible","collapse","inherit"]}}],u=0;u<l.length;u++)i=l[u],f.push({prefix:i.prop,description:i.prop+" - "+i.prop+" style",template:i.prop+": ${value:"+n(i.values)+"};"});l="width,height,top,bottom,left,right,min-width,min-height,max-width,max-height,margin,padding,padding-left,padding-right,padding-top,padding-bottom,margin-left,margin-top,margin-bottom,margin-right".split(",");for(u=0;u<l.length;u++)i=l[u],f.push({prefix:i,description:i+" - "+i+" pixel style",template:i+": ${value}px;"});l=["padding","margin"];for(u=0;u<l.length;u++)i=l[u],f.push({prefix:i,description:i+" - "+i+" top right bottom left style",template:i+": ${top}px ${left}px ${bottom}px ${right}px;"}),f.push({prefix:i,description:i+" - "+i+" top right,left bottom style",template:i+": ${top}px ${right_left}px ${bottom}px;"}),f.push({prefix:i,description:i+" - "+i+" top,bottom right,left style",template:i+": ${top_bottom}px ${right_left}px"});l=["border","border-top","border-bottom","border-left","border-right"];for(u=0;u<l.length;u++)i=l[u],f.push({prefix:i,description:i+" - "+i+" style",template:i+": ${width:"+n(o)+"}px ${style:"+n(s)+"} ${color:"+n(a)+"};"});return r.prototype=new e.TemplateContentAssist(t.keywords,f),r.prototype.getPrefix=function(e,t){for(var n=t;n&&/[A-Za-z\-\@]/.test(e.charAt(n-1));)n--;return n?e.substring(n,t):""},{CssContentAssistProvider:r}}),define("orion/editor/htmlContentAssist",["orion/editor/templates"],function(e){function t(){}var n=new e.Template("","Simple HTML document",'<!DOCTYPE html>\n<html lang="en">\n	<head>\n		<meta charset=utf-8>\n		<title>${title}</title>\n	</head>\n	<body>\n		<h1>${header}</h1>\n		<p>\n			${cursor}\n		</p>\n	</body>\n</html>'),r=[{prefix:"<img",name:"<img>",description:" - HTML image element",template:'<img src="${cursor}" alt="${Image}"/>'},{prefix:"<a",name:"<a>",description:" - HTML anchor element",template:'<a href="${cursor}"></a>'},{prefix:"<ul",name:"<ul>",description:" - HTML unordered list",template:"<ul>\n	<li>${cursor}</li>\n</ul>"},{prefix:"<ol",name:"<ol>",description:" - HTML ordered list",template:"<ol>\n	<li>${cursor}</li>\n</ol>"},{prefix:"<dl",name:"<dl>",description:" - HTML definition list",template:"<dl>\n	<dt>${cursor}</dt>\n	<dd></dd>\n</dl>"},{prefix:"<table",name:"<table>",description:" - basic HTML table",template:"<table>\n	<tr>\n		<td>${cursor}</td>\n	</tr>\n</table>"},{prefix:"<!--",name:"<!-- -->",description:" - HTML comment",template:"<!-- ${cursor} -->"}],i,s,o,u,a="abbr,b,button,canvas,cite,command,dd,del,dfn,dt,em,embed,font,h1,h2,h3,h4,h5,h6,i,ins,kbd,label,li,mark,meter,object,option,output,progress,q,rp,rt,samp,small,strong,sub,sup,td,time,title,tt,u,var".split(",");for(u=0;u<a.length;u++)i=a[u],o="<"+i+"></"+i+">",s="<"+i+">${cursor}</"+i+">",r.push({prefix:"<"+i,description:o,template:s});a="address,article,aside,audio,bdo,blockquote,body,caption,code,colgroup,datalist,details,div,fieldset,figure,footer,form,head,header,hgroup,iframe,legend,map,menu,nav,noframes,noscript,optgroup,p,pre,ruby,script,section,select,span,style,tbody,textarea,tfoot,th,thead,tr,video".split(",");for(u=0;u<a.length;u++)i=a[u],o="<"+i+"></"+i+">",s="<"+i+">\n	${cursor}\n</"+i+">",r.push({prefix:"<"+i,description:o,template:s});a="area,base,br,col,hr,input,link,meta,param,keygen,source".split(",");for(u=0;u<a.length;u++)i=a[u],s=o="<"+i+"/>",r.push({prefix:"<"+i,description:o,template:s});return t.prototype=new e.TemplateContentAssist([],r),t.prototype.getPrefix=function(e,t){for(var n="",r=t;r&&/[A-Za-z0-9<!-]/.test(e.charAt(r-1));)if(r--,e.charAt(r)==="<"){n=e.substring(r,t);break}return n},t.prototype.computeProposals=function(t,r,i){return t.length===0?[n.getProposal("",r,i)]:e.TemplateContentAssist.prototype.computeProposals.call(this,t,r,i).sort(function(e,t){var n=e.prefix||e.proposal,r=t.prefix||t.proposal;return n?r?n.toLowerCase().localeCompare(r.toLowerCase()):1:-1})},{HTMLContentAssistProvider:t}}),define("orion/editor/stylers/application_javascript/syntax",["orion/editor/stylers/lib/syntax"],function(e){var t="break,case,class,catch,continue,const,debugger,default,delete,do,else,enum,export,extends,false,finally,for,function,if,implements,import,in,instanceof,interface,let,new,null,package,private,protected,public,return,static,super,switch,this,throw,true,try,typeof,undefined,var,void,while,with,yield".split(","),e=e.grammars;return e.push({id:"orion.js",contentTypes:["application/javascript"],patterns:[{include:"orion.lib#doc_block"},{include:"orion.c-like"},{match:"\\b(?:"+t.join("|")+")\\b",name:"keyword.control.js"},{match:"/(?![\\s])(?:\\\\.|[^/])+/(?:[gim]{0,3})",name:"string.regexp.js"},{begin:"'(?:\\\\.|[^\\\\'])*\\\\$",end:"^(?:$|(?:\\\\.|[^\\\\'])*('|[^\\\\]$))",name:"string.quoted.single.js"},{begin:'"(?:\\\\.|[^\\\\"])*\\\\$',end:'^(?:$|(?:\\\\.|[^\\\\"])*("|[^\\\\]$))',name:"string.quoted.double.js"}]}),{id:e[e.length-1].id,grammars:e,keywords:t}}),define("orion/editor/jsTemplateContentAssist",["orion/editor/templates","orion/editor/stylers/application_javascript/syntax"],function(e,t){function n(){}var r=[{prefix:"if",name:"if",description:" - if statement",template:"if (${condition}) {\n	${cursor}\n}"},{prefix:"if",name:"if",description:" - if else statement",template:"if (${condition}) {\n	${cursor}\n} else {\n	\n}"},{prefix:"for",name:"for",description:" - iterate over array",template:"for (var ${i}=0; ${i}<${array}.length; ${i}++) {\n	${cursor}\n}"},{prefix:"for",name:"for",description:" - iterate over array with local var",template:"for (var ${i}=0; ${i}<${array}.length; ${i}++) {\n	var ${value} = ${array}[${i}];\n	${cursor}\n}"},{prefix:"for",name:"for..in",description:" - iterate over properties of an object",template:"for (var ${property} in ${object}) {\n	if (${object}.hasOwnProperty(${property})) {\n		${cursor}\n	}\n}"},{prefix:"while",name:"while",description:" - while loop with condition",template:"while (${condition}) {\n	${cursor}\n}"},{prefix:"do",name:"do",description:" - do while loop with condition",template:"do {\n	${cursor}\n} while (${condition});"},{prefix:"switch",name:"switch",description:" - switch case statement",template:"switch (${expression}) {\n	case ${value1}:\n		${cursor}\n		break;\n	default:\n}"},{prefix:"case",name:"case",description:" - case statement",template:"case ${value}:\n	${cursor}\n	break;"},{prefix:"try",name:"try",description:" - try..catch statement",template:"try {\n	${cursor}\n} catch (${err}) {\n}"},{prefix:"try",name:"try",description:" - try..catch statement with finally block",template:"try {\n	${cursor}\n} catch (${err}) {\n} finally {\n}"},{prefix:"typeof",name:"typeof",description:" - typeof statement",template:'typeof ${object} === "${type:'+JSON.stringify({type:"link",values:"undefined,object,boolean,number,string,function,xml".split(",")}).replace("}","\\}")+'}"'},{prefix:"instanceof",name:"instanceof",description:" - instanceof statement",template:"${object} instanceof ${type}"},{prefix:"with",name:"with",description:" - with statement",template:"with (${object}) {\n	${cursor}\n}"},{prefix:"function",name:"function",description:" - function declaration",template:"/**\n * @name ${name}\n * @param ${parameter}\n */\nfunction ${name} (${parameter}) {\n	${cursor}\n}"},{prefix:"function",name:"function",description:" - function expression",template:"/**\n * @name ${name}\n * @function\n * @param ${parameter}\n */\n${name}: function(${parameter}) {\n	${cursor}\n}"},{prefix:"define",name:"define",description:" - define function call",template:"/* global define */\ndefine('${name}',[\n'${import}'\n], function(${importname}) {\n	${cursor}\n});"},{prefix:"nls",name:"nls",description:" - non NLS string",template:"${cursor} //$NON-NLS-${0}$"},{prefix:"log",name:"log",description:" - console log",template:"console.log(${object});"},{prefix:"mongodb",name:"mongodb",description:" - Node.js require statement for MongoDB",template:"var ${name} = require('mongodb');\n"},{prefix:"mongodb",name:"mongodb client",description:" - create a new MongoDB client",template:"var MongoClient = require('mongodb').MongoClient;\nvar Server = require('mongodb').Server;\n${cursor}"},{prefix:"mongodb",name:"mongodb open",description:" - create a new MongoDB client and open a connection",template:"var MongoClient = require('mongodb').MongoClient;\nvar Server = require('mongodb').Server;\nvar ${client} = new MongoClient(new Server(${host}, ${port}));\ntry {\n	${client}.open(function(error, ${client}) {\n		var ${db} = ${client}.db(${name});\n		${cursor}\n	});\n} finally {\n	${client}.close();\n};"},{prefix:"mongodb",name:"mongodb connect",description:" - connect to an existing MongoDB database",template:"var MongoClient = require('mongodb').MongoClient;\nMongoClient.connect(${url}, function(error, db) {\n	${cursor}\n});\n"},{prefix:"mongodb",name:"mongodb connect (Cloud Foundry)",description:" - connect to an existing MongoDB database using Cloud Foundry",template:"if (${process}.env.VCAP_SERVICES) {\n	var env = JSON.parse(${process}.env.VCAP_SERVICES);\n	var mongo = env['${mongo-version}'][0].credentials;\n} else {\n	var mongo = {\n		username : 'username',\n		password : 'password',\n		url : 'mongodb://username:password@localhost:27017/database'\n	};\n}\nvar MongoClient = require('mongodb').MongoClient;\nMongoClient.connect(mongo.url, function(error, db) {\n	${cursor}\n});\n"},{prefix:"mongodb",name:"mongodb collection",description:" - create a MongoDB database collection",template:"${db}.collection(${id}, function(${error}, collection) {\n	${cursor}\n});"},{prefix:"mongodb",name:"mongodb strict collection",description:" - create a MongoDB database strict collection",template:"${db}.collection(${id}, {strict:true}, function(${error}, collection) {\n	${cursor}\n});"},{prefix:"redis",name:"redis",description:" - Node.js require statement for Redis",template:"var ${name} = require('redis');\n"},{prefix:"redis",name:"redis client",description:" - create a new Redis client",template:"var ${name} = require('redis');\nvar ${client} = ${name}.createClient(${port}, ${host}, ${options});\n"},{prefix:"redis",name:"redis connect",description:" - create a new Redis client and connect",template:"var ${name} = require('redis');\nvar ${client} = ${name}.createClient(${port}, ${host}, ${options});\ntry {\n	${cursor}\n} finally {\n	${client}.close();\n}\n"},{prefix:"redis",name:"redis set",description:" - create a new Redis client set call",template:"client.set(${key}, ${value});\n"},{prefix:"redis",name:"redis get",description:" - create a new Redis client get call",template:"client.get(${key}, function(${error}, ${reply}) {\n	${cursor}\n});\n"},{prefix:"redis",name:"redis on",description:" - create a new Redis client event handler",template:"client.on(${event}, function(${arg}) {\n	${cursor}});\n"},{prefix:"pg",name:"postgres",description:" - Node.js require statement for Postgres DB",template:"var pg = require('pg');\n"},{prefix:"pg",name:"postgres client",description:" - create a new Postgres DB client",template:"var pg = require('pg');\nvar url = \"postgres://postgres:${port}@${host}/${database}\";\nvar ${client} = new pg.Client(url);\n"},{prefix:"pg",name:"postgres connect",description:" - create a new Postgres DB client and connect",template:"var pg = require('pg');\nvar url = \"postgres://postgres:${port}@${host}/${database}\";\nvar ${client} = new pg.Client(url);\n${client}.connect(function(error) {\n	${cursor}\n});\n"},{prefix:"pg",name:"postgres query",description:" - create a new Postgres DB query statement",template:"${client}.query(${sql}, function(error, result) {\n	${cursor}\n});\n"},{prefix:"mysql",name:"mysql",description:" - Node.js require statement for MySQL DB",template:"var mysql = require('mysql');\n"},{prefix:"mysql",name:"mysql connection",description:" - create a new MySQL DB connection",template:"var mysql = require('mysql');\nvar ${connection} = mysql.createConnection({\n	host : ${host},\n	user : ${username},\n	password : ${password}\n});\ntry {\n	${connection}.connect();\n	${cursor}\n} finally {\n	${connection}.end();\n}"},{prefix:"mysql",name:"mysql query",description:" - create a new MySQL DB query statement",template:"${connection}.query(${sql}, function(error, rows, fields) {\n	${cursor}\n});\n"},{prefix:"express",name:"express",description:" - Node.js require statement for Express",template:"var ${name} = require('express');"},{prefix:"express",name:"express app",description:" - create a new Express app",template:"var express = require('express');\nvar ${app} = express();\n${cursor}\napp.listen(${timeout});\n"},{prefix:"express",name:"express configure",description:" - create an Express app configure statement",template:"app.configure(function() {\n	app.set(${id}, ${value});\n});"},{prefix:"express",name:"express specific configure",description:" - create a specific Express app configure statement",template:"app.configure(${name}, function() {\n	app.set(${id}, ${value});\n});"},{prefix:"express",name:"express app get",description:" - create a new Express app.get call",template:"var value = app.get(${id}, function(request, result){\n	${cursor}\n});\n"},{prefix:"express",name:"express app set",description:" - create a new Express app set call",template:"app.set(${id}, ${value});\n"},{prefix:"express",name:"express app use",description:" - create a new Express app use statement",template:"app.use(${fnOrObject});\n"},{prefix:"express",name:"express app engine",description:" - create a new Express app engine statement",template:"app.engine(${fnOrObject});\n"},{prefix:"express",name:"express app param",description:" - create a new Express app param statement",template:"app.param(${id}, ${value});\n"},{prefix:"express",name:"express app error use",description:" - create a new Express app error handling use statement",template:"app.use(function(error, request, result, next) {\n	result.send(${code}, ${message});\n});\n"},{prefix:"amqp",name:"amqp",description:" - Node.js require statement for AMQP framework",template:"var amqp = require('amqp');\n"},{prefix:"amqp",name:"amqp connection",description:" - create a new AMQP connection ",template:"var amqp = require('amqp');\nvar ${connection} = amqp.createConnection({\n	host: ${host},\n	port: ${port},\n	login: ${login},\n	password: ${password}\n});\n"},{prefix:"amqp",name:"amqp on",description:" - create a new AMQP connection on statement",template:"${connection}.on(${event}, function() {\n	${cursor}\n});\n"},{prefix:"amqp",name:"amqp queue",description:" - create a new AMQP connection queue statement",template:"${connection}.queue(${id}, function(queue) {\n	queue.bind('#'); //catch all messages\n	queue.subscribe(function (message, headers, deliveryInfo) {\n		// Receive messages\n	});\n	${cursor}\n});\n"},{prefix:"amqp",name:"amqp exchange",description:" - create a new AMQP connection exchange",template:"var exchange = ${connection}.exchange(${id}, {type: 'topic'}, function(exchange) {\n	${cursor}\n});\n"}];return n.prototype=new e.TemplateContentAssist(t.keywords,r),n.prototype.isValid=function(e,t,n){return e=t.charAt(n-e.length-1),!e||":!@#$^&*.?<>".indexOf(e)===-1},{JSTemplateContentAssistProvider:n}}),define("orion/editor/AsyncStyler",["i18n!orion/editor/nls/messages","orion/editor/annotations"],function(e,t){function n(e){return e.getProperty("objectClass").indexOf(i)!==-1&&e.getProperty("type")==="highlighter"}function r(e,t,n){this.initialize(e,t,n),this.lineStyles=[]}var i="orion.edit.highlighter",s=i+" service must be an event emitter";return t.AnnotationType.registerType("orion.annotation.highlightError",{title:e.syntaxError,html:"<div class='annotationHTML error'></div>",rangeStyle:{styleClass:"annotationRange error"}}),r.prototype={initialize:function(e,t,r){this.textView=e,this.serviceRegistry=t,this.annotationModel=r,this.services=[];var s=this;this.listener={onModelChanging:function(e){s.onModelChanging(e)},onModelChanged:function(e){s.onModelChanged(e)},onDestroy:function(e){s.onDestroy(e)},onLineStyle:function(e){s.onLineStyle(e)},onStyleReady:function(e){s.onStyleReady(e)},onServiceAdded:function(e){s.onServiceAdded(e.serviceReference,s.serviceRegistry.getService(e.serviceReference))},onServiceRemoved:function(e){s.onServiceRemoved(e.serviceReference,s.serviceRegistry.getService(e.serviceReference))}},e.addEventListener("ModelChanging",this.listener.onModelChanging),e.addEventListener("ModelChanged",this.listener.onModelChanged),e.addEventListener("Destroy",this.listener.onDestroy),e.addEventListener("LineStyle",this.listener.onLineStyle),t.addEventListener("registered",this.listener.onServiceAdded),t.addEventListener("unregistering",this.listener.onServiceRemoved),e=t.getServiceReferences(i);for(r=0;r<e.length;r++){var o=e[r];n(o)&&this.addServiceListener(t.getService(o))}},onDestroy:function(){this.destroy()},destroy:function(){this.textView&&(this.textView.removeEventListener("ModelChanging",this.listener.onModelChanging),this.textView.removeEventListener("ModelChanged",this.listener.onModelChanged),this.textView.removeEventListener("Destroy",this.listener.onDestroy),this.textView.removeEventListener("LineStyle",this.listener.onLineStyle),this.textView=null);if(this.services){for(var e=0;e<this.services.length;e++)this.removeServiceListener(this.services[e]);this.services=null}this.serviceRegistry&&(this.serviceRegistry.removeEventListener("registered",this.listener.onServiceAdded),this.serviceRegistry.removeEventListener("unregistering",this.listener.onServiceRemoved),this.serviceRegistry=null),this.lineStyles=this.listener=null},onModelChanging:function(e){this.startLine=this.textView.getModel().getLineAtOffset(e.start)},onModelChanged:function(e){var t=this.startLine;(e.addedLineCount||e.removedLineCount)&&Array.prototype.splice.apply(this.lineStyles,[t,e.removedLineCount].concat(this._getEmptyStyle(e.addedLineCount)))},onStyleReady:function(e){var n=e.lineStyles||e.style,e=Number.MAX_VALUE,r=-1,i=this.textView.getModel(),s;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(this.lineStyles[s]=n[s],e=Math.min(e,s),r=Math.max(r,s));e=Math.max(e,0),r=Math.min(r,i.getLineCount());if(n=this.annotationModel){for(var o=n.getAnnotations(i.getLineStart(e),i.getLineEnd(r)),u=[];o.hasNext();){var a=o.next();a.type==="orion.annotation.highlightError"&&u.push(a)}o=[];for(a=e;a<=r;a++){s=a;var f=this.lineStyles[s],f=f&&f.errors;s=i.getLineStart(s);if(f)for(var l=0;l<f.length;l++){var c=f[l];o.push(t.AnnotationType.createAnnotation("orion.annotation.highlightError",c.start+s,c.end+s))}}n.replaceAnnotations(u,o)}this.textView.redrawLines(e,r+1)},onLineStyle:function(e){function t(e,t){for(var n=e.length,r=[],i=0;i<n;i++){var s=e[i];r.push({start:s.start+t,end:s.end+t,style:s.style})}return r}var n=this.lineStyles[e.lineIndex];n&&(n.ranges?e.ranges=t(n.ranges,e.lineStart):n.style&&(e.style=n.style))},_getEmptyStyle:function(e){for(var t=[],n=0;n<e;n++)t.push(null);return t},setContentType:function(e){this.contentType=e;if(this.services)for(e=0;e<this.services.length;e++){var t=this.services[e];if(t.setContentType){var n=this.serviceRegistry.getService("orion.page.progress");n?n.progress(t.setContentType(this.contentType),"Styling content type: "+this.contentType.id?this.contentType.id:this.contentType):t.setContentType(this.contentType)}}},onServiceAdded:function(e,t){n(e)&&this.addServiceListener(t)},onServiceRemoved:function(e,t){this.services.indexOf(t)!==-1&&this.removeServiceListener(t)},addServiceListener:function(e){if(typeof e.addEventListener=="function"){if(e.addEventListener("orion.edit.highlighter.styleReady",this.listener.onStyleReady),this.services.push(e),e.setContentType&&this.contentType){var t=this.serviceRegistry.getService("orion.page.progress");t?t.progress(e.setContentType(this.contentType),"Styling content type: "+this.contentType.id?this.contentType.id:this.contentType):e.setContentType(this.contentType)}}else typeof console!="undefined"&&console.log(Error(s))},removeServiceListener:function(e){typeof e.removeEventListener=="function"?(e.removeEventListener("orion.edit.highlighter.styleReady",this.listener.onStyleReady),e=this.services.indexOf(e),e!==-1&&this.services.splice(e,1)):typeof console!="undefined"&&console.log(Error(s))}},r}),define("orion/editor/mirror",["i18n!orion/editor/nls/messages","orion/editor/eventTarget","orion/editor/annotations"],function(e,t,n){function r(e){this.string=e,this.tokenStart=this.pos=0}function i(){return{token:function(e){return e.skipToEnd()}}}function s(){this._modes={},this.mimeModes={},this.options={},this.StringStream=r,this.defineMode("null",i),this.defineMIME("text/plain","null")}function o(e){var t=[],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}function u(e,t,n){n=n||{},this.model=e,this.codeMirror=t,this.isWhitespaceVisible=typeof n.whitespacesVisible=="undefined"?!1:n.whitespacesVisible,this.mode=null,this.isModeLoaded=!1,this.lines=[],this.dirtyLines=[],this.startLine=Number.MAX_VALUE,this.endLine=-1,this.timer=null,this.initialize(e)}function a(e,t,n){this.init(e,t,n)}return r.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos===0},peek:function(){return this.string[this.pos]},next:function(){return this.string[this.pos++]},eat:function(e){var t=this.string[this.pos];return typeof t=="string"&&(t===e||e.test&&e.test(t)||typeof e=="function"&&e(t))?this.string[this.pos++]:void 0},eatWhile:function(e){for(var t=!1;this.eat(e)!==void 0;)t=!0;return t},eatSpace:function(){return this.eatWhile(/\s/)},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){return e=this.string.indexOf(e,this.pos),e!==-1?(this.pos=e,!0):!1},match:function(e,t,n){t=t===!0||typeof t=="undefined";if(typeof e=="string"){var r=n?this.string.toLowerCase():this.string,e=n?e.toLowerCase():e,n=r.indexOf(e,this.pos);return n!==-1&&t&&(this.pos=n+e.length),n!==-1}return(e=this.string.substring(this.pos).match(e))&&t&&typeof e[0]=="string"&&(this.pos+=e.index+e[0].length),e},backUp:function(e){this.pos-=e},column:function(){for(var e=0,t=0;t<this.tokenStart;)e+=this.string[t++]==="	"?4:1;return e},indentation:function(){for(var e=this.string.search(/\S/),t=0,n=0;n<e;)t+=this.string[n++]==="	"?4:1;return t},current:function(){return this.string.substring(this.tokenStart,this.pos)},advance:function(){this.tokenStart=this.pos}},s.prototype={options:{},setOption:function(e,t){this.options[e]=t},getOption:function(e){return this.options[e]},copyState:function(e,t){if(typeof e.copyState=="function")return e.copyState(t);var n={},r;for(r in t){var i=t[r];n[r]=i instanceof Array?i.slice():i}return n},startState:function(e,t){return e.startState(t)},defineMode:function(e,t){this._modes[e]=t},defineMIME:function(e,t){this.mimeModes[e]=t},getMode:function(e,t){var n={},r;return typeof t=="string"&&this.mimeModes[t]&&(t=this.mimeModes[t]),typeof t=="object"&&(n=t,r=this._modes[t.name]),r=r||this._modes[t],typeof r!="function"?(typeof console!="undefined"&&console&&console.log("Mode not found: "+t),this.getMode(e,"null")):r(e,n)},listModes:function(){return o(this._modes)},listMIMEs:function(){return o(this.mimeModes)},_getModeName:function(e){return e=this.mimeModes[e],typeof e=="object"&&(e=e.name),e}},u.prototype={initialize:function(){var e=this;this.listener={onModelChanging:function(t){e._onModelChanging(t)},onModelChanged:function(t){e._onModelChanged(t)},onDestroy:function(t){e._onDestroy(t)}},this.model.addEventListener("Changing",this.listener.onModelChanging),this.model.addEventListener("Changed",this.listener.onModelChanged),this.model.addEventListener("Destroy",this.listener.onDestroy)},destroy:function(){this.model&&(this.model.removeEventListener("Changing",this.listener.onModelChanging),this.model.removeEventListener("Changed",this.listener.onModelChanged),this.model.removeEventListener("Destroy",this.listener.onDestroy)),this.dirtyLines=this.lines=this.mode=this.codeMirror=this.model=null,clearTimeout(this.timer),this.timer=null},_onModelChanging:function(e){this.startLine=this.model.getLineAtOffset(e.start)},_onModelChanged:function(e){this._dbgEvent(e);var t=this.startLine;(e.removedLineCount||e.addedLineCount)&&Array.prototype.splice.apply(this.lines,[t+1,e.removedLineCount].concat(this._newLines(e.addedLineCount))),this.mode&&(e=Math.max(e.addedLineCount,e.removedLineCount),e=t+Math.min(e,500),this.highlight(t,e),this.highlightLater(e+1))},_onDestroy:function(){this.destroy()},setViewportIndex:function(e){this.viewportIndex=e},_dbgEvent:function(){},_dbgStyle:function(){},_newLines:function(e){for(var t=[],n=0;n<e;n++)t.push({style:null,eolState:null});return t},setMode:function(e,t){e&&(this.mode=this.codeMirror.getMode(this.codeMirror.options,e),this.lines=this._newLines(this.model.getLineCount()),t&&this.highlight())},highlight:function(e,t,n){if(this.mode){for(var r=this.model.getLineCount(),e=typeof e=="undefined"?0:e,t=typeof t=="undefined"?r-1:Math.min(t,r-1),r=this.mode,i=this.getState(e),s=e;s<=t;s++){var o=this.lines[s];this.highlightLine(s,o,i),o.eolState=this.codeMirror.copyState(r,i)}this._expandRange(e,t),n||this.onHighlightDone()}},highlightLater:function(e){this.dirtyLines.push(e);var t=this;this.timer=setTimeout(function(){t._highlightJob()},50)},_highlightJob:function(){for(var e=+(new Date)+30,t=this.mode.compareStates,n=this.model.getLineCount();this.dirtyLines.length;){var r=this.viewportIndex,i=this.lines[r],r=i&&!i.eolState?r:this.dirtyLines.pop();if(r>=n)break;this._expandRange(r,r);for(var i=this._getResumeLineIndex(r),r=i+1,i=(i=i>=0&&this.lines[i].eolState)?this.codeMirror.copyState(this.mode,i):this.mode.startState(),s=0,o=r;o<n;o++){var u=this.lines[o],a=u.eolState,f=this.highlightLine(o,u,i);u.eolState=this.codeMirror.copyState(this.mode,i),f&&this._expandRange(r,o+1);var u=t&&a&&t(a,u.eolState),l=!t&&!f&&s++>3;if(u||l)break;if(!a||f)s=0;a=o<n||this.dirtyLines.length;if(+(new Date)>e&&a){this.highlightLater(o+1),this.onHighlightDone();return}}}this.onHighlightDone()},onHighlightDone:function(){this.startLine!==Number.MAX_VALUE&&this.endLine!==-1&&this.dispatchEvent({type:"Highlight",start:this.startLine,end:this.endLine}),this.startLine=Number.MAX_VALUE,this.endLine=-1},_getResumeLineIndex:function(e){for(var t=this.lines,n=e-1;n>=0;n--)if(t[n].eolState||e-n>40)return n;return-1},getState:function(e){var t=this.mode,n=this.lines,r,i;for(r=e-1;r>=0;r--)if(i=n[r],i.eolState||e-r>40)break;var s=r>=0&&n[r].eolState;if(s){s=this.codeMirror.copyState(t,s);for(r=Math.max(0,r);r<e-1;r++)i=n[r],this.highlightLine(r,i,s),i.eolState=this.codeMirror.copyState(t,s);return s}return t.startState()},highlightLine:function(e,t,n){if(this.mode){var i=this.model;i.getLineStart(e)===i.getLineEnd(e)&&this.mode.blankLine&&this.mode.blankLine(n);for(var s=t.style||[],e=i.getLine(e),e=new r(e),i=!t.style,o=[],u=0;!e.eol();u++){var a=this.mode.token(e,n)||null,f=e.current();this._whitespaceStyle(a,f,e.tokenStart),a=[e.tokenStart,e.pos,a],f=s[u],o.push(a),i=i||!f||f[0]!==a[0]||f[1]!==a[1]||f[2]!==a[2],e.advance()}if(i=i||o.length!==s.length)t.style=o.length?o:null;return i}},_whitespaceStyle:function(e,t,n){if(!e&&this.isWhitespaceVisible&&/\s+/.test(t)){for(var e=[],r,i,s=0;s<t.length;s++){var o=t[s];o!==i&&(i&&e.push([n+r,n+s,i==="	"?"punctuation separator tab":"punctuation separator space"]),r=s,i=o)}return e.push([n+r,n+s,i==="	"?"punctuation separator tab":"punctuation separator space"]),e}return null},_expandRange:function(e,t){this.startLine=Math.min(this.startLine,e),this.endLine=Math.max(this.endLine,t)},toStyleRangesAndErrors:function(e,t){var n=e.style;if(!n)return null;for(var r=[],i=[],s=typeof t=="undefined"?0:this.model.getLineStart(t),o=0;o<n.length;o++){var u=n[o],a=u[2]?u[2]==="punctuation separator tab"||u[2]==="punctuation separator space"?u[2]:"cm-"+u[2]:null;a&&(u={start:s+u[0],end:s+u[1],style:{styleClass:a}},r.push(u),a==="cm-error"&&i.push(u))}return[r,i]},getLineStyle:function(e){return this.lines[e]},getLineStyles:function(){return this.lines}},t.EventTarget.addMixin(u.prototype),n.AnnotationType.registerType("orion.annotation.highlightError",{title:e.syntaxError,html:"<div class='annotationHTML error'></div>",rangeStyle:{styleClass:"annotationRange error"}}),a.prototype={init:function(e,t,n){this.textView=e,this.annotationModel=n,this.modeApplier=new u(e.getModel(),t);var r=this;this.listener={onLineStyle:function(e){r.onLineStyle(e)},onDestroy:function(e){r.onDestroy(e)},onHighlight:function(e){r.onHighlight(e)}},e.addEventListener("LineStyle",this.listener.onLineStyle),e.addEventListener("Destroy",this.listener.onDestroy),this.modeApplier.addEventListener("Highlight",this.listener.onHighlight)},destroy:function(){this.modeApplier&&(this.modeApplier.removeEventListener("Highlight",this.listener.onHighlight),this.modeApplier.destroy()),this.textView&&(this.textView.removeEventListener("LineStyle",this.listener.onLineStyle),this.textView.removeEventListener("Destroy",this.listener.onDestroy)),this.listener=this.modeApplier=this.annotationModel=this.textView=null},setMode:function(e){this.modeApplier.setMode(e)},onLineStyle:function(e){var t=e.lineIndex,r=this.modeApplier,i=r.getLineStyle(t);if(!i||!i.eolState){var s=this.textView.getModel().getLineCount();r.highlight(t,Math.min(t+20,s-1),!0),i=r.getLineStyle(t)}s=this.textView.getModel();if(i){var o=r.toStyleRangesAndErrors(i,t);if(o&&(e.ranges=o[0],e=this.annotationModel)){r=[],i=[];if(o=o[1])for(var u=0;u<o.length;u++){var a=o[u];a.style.styleClass==="cm-error"&&i.push(n.AnnotationType.createAnnotation("orion.annotation.highlightError",a.start,a.end))}for(t=e.getAnnotations(s.getLineStart(t),s.getLineEnd(t));t.hasNext();)s=t.next(),s.type==="orion.annotation.highlightError"&&r.push(s);e.replaceAnnotations(r,i)}}},onHighlight:function(e){this.textView.redrawLines(e.start,e.end)},onDestroy:function(){this.destroy()}},{Mirror:s,ModeApplier:u,CodeMirrorStyler:a}}),define("orion/editor/textMateStyler",["orion/regex"],function(e){function t(e){var n;if(e instanceof Array){n=Array(e.length);for(var r=0;r<e.length;r++)n[r]=t(e[r])}else for(r in n={},e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];n[r]=typeof i=="object"&&i!==null?t(i):i}return n}function n(e,n,r){this.initialize(e),this.grammar=t(n),this.externalGrammars=r?t(r):[],this._styles={},this._tree=null,this._allGrammars={},this.preprocess(this.grammar)}var r={unsupported:[{regex:/\(\?[ims\-]:/,func:function(){return"option on/off for subexp"}},{regex:/\(\?<([=!])/,func:function(e){return e[1]==="="?"lookbehind":"negative lookbehind"}},{regex:/\(\?>/,func:function(){return"atomic group"}}],toRegExp:function(e){function t(e,t){throw Error('Unsupported regex feature "'+e+'": "'+t[0]+'" at index: '+t.index+" in "+t.input)}var n="",i,e=r.processGlobalFlag("x",e,function(e){for(var t="",n=!1,r=e.length,i=0;i<r;){var s=e.charAt(i);if(!n&&s==="#")for(;i<r&&s!=="\r"&&s!=="\n";)s=e.charAt(++i);else if(!n&&/\s/.test(s))for(;i<r&&/\s/.test(s);)s=e.charAt(++i);else s==="\\"?(t+=s,/\s/.test(e.charAt(i+1))||(t+=e.charAt(i+1),i+=1)):(s==="["?n=!0:s==="]"&&(n=!1),t+=s),i+=1}return t}),e=r.processGlobalFlag("i",e,function(e){return n+="i",e});for(i=0;i<this.unsupported.length;i++){var s;(s=this.unsupported[i].regex.exec(e))&&t(this.unsupported[i].func(s),s)}return RegExp(e,n)},processGlobalFlag:function(e,t,n){function r(e,t){for(var n=0,r=e.length,i=-1,s=t;s<r&&i===-1;s++)switch(e.charAt(s)){case"\\":s++;break;case"(":n++;break;case")":n--,n===0&&(i=s)}return i}var i="(?"+e+")",e="(?"+e+":";if(t.substring(0,i.length)===i)return n(t.substring(i.length));if(t.substring(0,e.length)===e){i=r(t,0);if(i<t.length-1)throw Error("Only a "+e+") group that encloses the entire regex is supported in: "+t);return n(t.substring(e.length,i))}return t},hasBackReference:function(e){return/\\\d+/.test(e.source)},getSubstitutedRegex:function(t,n,r){for(var r=typeof r=="undefined"?!0:!1,t=t.source.split(/(\\\d+)/g),i=[],s=0;s<t.length;s++){var o=t[s],u=/\\(\d+)/.exec(o);u?(o=n[u[1]]||"",i.push(r?e.escape(o):o)):i.push(o)}return RegExp(i.join(""))},groupify:function(e,t){for(var n=e.source,r=n.length,i=[],s=0,o=[],u=1,a=1,f=[],l={},c={},h=0;h<r;h++){var p=i[i.length-1],d=n.charAt(h);switch(d){case"(":p===4&&(i.pop(),f.push(")"),o[o.length-1].end=h);var v=h+2<r?n.charAt(h+1)+""+n.charAt(h+2):null;if(v==="?:"||v==="?="||v==="?!"){var m;v==="?:"?m=1:(m=3,s++),i.push(m),o.push({start:h,end:-1,type:m}),f.push(d),f.push(v),h+=v.length}else i.push(2),o.push({start:h,end:-1,type:2,oldNum:u,num:a}),f.push(d),s===0&&(c[a]=null),l[u]=a,u++,a++;break;case")":p=i.pop(),p===3&&s--,o[o.length-1].end=h,f.push(d);break;case"*":case"+":case"?":case"}":var g=d,y=n.charAt(h-1),v=h-1;if(d==="}"){for(m=h-1;n.charAt(m)!=="{"&&m>=0;m--);y=n.charAt(m-1),v=m-1,g=n.substring(m,h+1)}m=o[o.length-1];if(y===")"&&(m.type===2||m.type===4)){f.splice(m.start,0,"("),f.push(g),f.push(")"),d={start:m.start,end:f.length-1,type:4,num:m.num};for(y=0;y<o.length;y++)if(p=o[y],(p.type===2||p.type===4)&&p.start>=m.start&&p.end<=v)if(p.start+=1,p.end+=1,p.num+=1,p.type===2)l[p.oldNum]=p.num;o.push(d),a++;break};default:d!=="|"&&p!==2&&p!==4&&s===0&&(i.push(4),o.push({start:h,end:-1,type:4,num:a}),f.push("("),c[a]=null,a++),f.push(d),d==="\\"&&(d=n.charAt(h+1),f.push(d),h+=1)}}for(;i.length;)i.pop(),f.push(")");var n=RegExp(f.join("")),r={},t=t||l,b;for(b in t)t.hasOwnProperty(b)&&(r[b]="\\"+t[b]);return n=this.getSubstitutedRegex(n,r,!1),[n,l,c]},complexCaptures:function(e){if(!e)return!1;for(var t in e)if(e.hasOwnProperty(t)&&t!=="0")return!0;return!1}};return n.prototype={initialize:function(e){this.textView=e,this.textView.stylerOptions=this;var t=this;this._listener={onModelChanged:function(e){t.onModelChanged(e)},onDestroy:function(e){t.onDestroy(e)},onLineStyle:function(e){t.onLineStyle(e)},onStorage:function(e){t.onStorage(e)}},e.addEventListener("ModelChanged",this._listener.onModelChanged),e.addEventListener("Destroy",this._listener.onDestroy),e.addEventListener("LineStyle",this._listener.onLineStyle),e.redrawLines()},onDestroy:function(){this.destroy()},destroy:function(){this.textView&&(this.textView.removeEventListener("ModelChanged",this._listener.onModelChanged),this.textView.removeEventListener("Destroy",this._listener.onDestroy),this.textView.removeEventListener("LineStyle",this._listener.onLineStyle),this.textView=null),this._listener=this._tree=this._styles=this.grammar=null},preprocess:function(e){for(e=[e];e.length!==0;){var t=e.pop();if(!t._resolvedRule||!t._typedRule)if(t._resolvedRule=this._resolve(t),t._typedRule=this._createTypedRule(t),this.addStyles(t.name),this.addStyles(t.contentName),this.addStylesForCaptures(t.captures),this.addStylesForCaptures(t.beginCaptures),this.addStylesForCaptures(t.endCaptures),t._resolvedRule!==t&&e.push(t._resolvedRule),t.patterns)for(var n=0;n<t.patterns.length;n++)e.push(t.patterns[n])}},addStyles:function(e){if(e&&!this._styles[e]){this._styles[e]=[];for(var t=e.split("."),n=0;n<t.length;n++)this._styles[e].push(t.slice(0,n+1).join("-"))}},addStylesForCaptures:function(e){for(var t in e)e.hasOwnProperty(t)&&this.addStyles(e[t].name)},ContainerRule:function(){function e(e){this.rule=e,this.subrules=e.patterns}return e.prototype.valueOf=function(){return"aa"},e}(),BeginEndRule:function(){function e(e){this.rule=e,this.beginRegex=r.toRegExp(e.begin),this.endRegex=r.toRegExp(e.end),this.subrules=e.patterns||[],this.endRegexHasBackRef=r.hasBackReference(this.endRegex);var t=r.complexCaptures(e.captures),e=r.complexCaptures(e.beginCaptures)||r.complexCaptures(e.endCaptures);if(this.isComplex=t||e)t=r.groupify(this.beginRegex),this.beginRegex=t[0],this.beginOld2New=t[1],this.beginConsuming=t[2],t=r.groupify(this.endRegex,this.beginOld2New),this.endRegex=t[0],this.endOld2New=t[1],this.endConsuming=t[2]}return e.prototype.valueOf=function(){return this.beginRegex},e}(),MatchRule:function(){function e(e){this.rule=e,this.matchRegex=r.toRegExp(e.match);if(this.isComplex=r.complexCaptures(e.captures))e=r.groupify(this.matchRegex),this.matchRegex=e[0],this.matchOld2New=e[1],this.matchConsuming=e[2]}return e.prototype.valueOf=function(){return this.matchRegex},e}(),_createTypedRule:function(e){return e.match?new this.MatchRule(e):e.begin?new this.BeginEndRule(e):new this.ContainerRule(e)},_resolve:function(e){var t=e;if(e.include){if(e.begin||e.end||e.match)throw Error('Unexpected regex pattern in "include" rule '+e.include);e=e.include;if(e.charAt(0)==="#"){if(t=this.grammar.repository&&this.grammar.repository[e.substring(1)],!t)throw Error("Couldn't find included rule "+e+" in grammar repository")}else if(e==="$self")t=this.grammar;else{if(e==="$base")throw Error('Include "$base" is not supported');if(t=this._allGrammars[e],!t)for(var n=0;n<this.externalGrammars.length;n++){var r=this.externalGrammars[n];if(r.scopeName===e){this.preprocess(r),t=this._allGrammars[e]=r;break}}}}return t},ContainerNode:function(){function e(e,t){this.parent=e,this.rule=t,this.children=[],this.end=this.start=null}return e.prototype.addChild=function(e){this.children.push(e)},e.prototype.valueOf=function(){var e=this.rule;return"ContainerNode { "+(e.include||"")+" "+(e.name||"")+(e.comment||"")+"}"},e}(),BeginEndNode:function(){function e(e,t,n){this.parent=e,this.rule=t,this.children=[],this.setStart(n),this.endMatch=this.end=null,this.endRegexSubstituted=t.endRegexHasBackRef?r.getSubstitutedRegex(t.endRegex,n):null}return e.prototype.addChild=function(e){this.children.push(e)},e.prototype.getIndexInParent=function(){return this.parent?this.parent.children.indexOf(this):-1},e.prototype.setStart=function(e){this.start=e.index,this.beginMatch=e},e.prototype.setEnd=function(e){e&&typeof e=="object"?(this.endMatch=e,this.end=e.index+e[0].length):(this.endMatch=null,this.end=e)},e.prototype.shiftStart=function(e){this.start+=e,this.beginMatch.index+=e},e.prototype.shiftEnd=function(e){this.end+=e,this.endMatch&&(this.endMatch.index+=e)},e.prototype.valueOf=function(){return"{"+this.rule.beginRegex+" range="+this.start+".."+this.end+"}"},e}(),push:function(e,t){if(t)for(var n=t.length;n>0;)e.push(t[--n])},exec:function(e,t,n){return(t=e.exec(t))&&(t.index+=n),e.lastIndex=0,t},afterMatch:function(e){return e.index+e[0].length},getEndMatch:function(e,t,n){if(e instanceof this.BeginEndNode){var r=e.rule,e=e.endRegexSubstituted||r.endRegex;return e?this.exec(e,t,n):null}return null},initialParse:function(){this.textView.getModel().getCharCount(),this._tree=new this.ContainerNode(null,this.grammar._typedRule),this.parse(this._tree,!1,0)},onModelChanged:function(e){var t=e.addedCharCount,n=e.removedCharCount,e=e.start;if(this._tree){var r=this.textView.getModel(),i=r.getCharCount(),r=r.getLineEnd(r.getLineAtOffset(e)-1),s=this.getFirstDamaged(r,r),r=r===-1?0:r,t=s?this.parse(s,!0,r,e,t,n):i;this.textView.redrawRange(r,t)}else this.initialParse()},getFirstDamaged:function(e,t){if(e<0)return this._tree;for(var n=[this._tree],r=null;n.length;){var i=n.pop();if(!i.parent||this.isDamaged(i,e,t)){i instanceof this.BeginEndNode&&(r=i);for(var s=0;s<i.children.length;s++)n.push(i.children[s])}}return r||this._tree},isDamaged:function(e,t,n){return e.start<=n&&e.end>t},parse:function(e,t,n,r,i,s){var o=this.textView.getModel(),u=o.getLineStart(o.getLineCount()-1),a=o.getCharCount(),f=this.getInitialExpected(e,n),l=-1;t&&(e.repaired=!0,e.endNeedsUpdate=!0,l=(l=e.children[e.children.length-1])?o.getLineEnd(o.getLineAtOffset(l.end+(i-s))):-1,r=o.getLineEnd(o.getLineAtOffset(r+s)),l=Math.max(l,r));for(var l=l===-1?a:l,r=f,c=e,h=!1,p=n,d=-1;c&&(!t||p<l);){var v=this.getNextMatch(o,c,p);v||(p=p>=u?a:o.getLineStart(o.getLineAtOffset(p)+1));var m=v&&v.match,g=v&&v.rule,y=v&&v.isEnd;if(v&&v.isSub){if(p=this.afterMatch(m),g instanceof this.BeginEndRule)h=!0,t&&g===r.rule&&c===r.parent?(c=r,c.setStart(m),c.repaired=!0,c.endNeedsUpdate=!0,r=this.getNextExpected(r,"begin")):(t&&(this.prune(c,r),t=!1),m=new this.BeginEndNode(c,g,m),c.addChild(m),c=m)}else if(y||p===a)c instanceof this.BeginEndNode&&(m?(h=!0,d=Math.max(d,c.end),c.setEnd(m),p=this.afterMatch(m),t&&c===r&&c.parent===r.parent?(c.repaired=!0,delete c.endNeedsUpdate,r=this.getNextExpected(r,"end")):t&&(this.prune(c,r),t=!1)):(c.setEnd(a),delete c.endNeedsUpdate)),c=c.parent;t&&p>=l&&!h&&(this.prune(e,f),t=!1)}return this.removeUnrepairedChildren(e,t,n),this.cleanup(t,e,n,l,a,i,s),t?Math.max(d,p):p},removeUnrepairedChildren:function(e,t,n){if(t){for(var t=e.children,r=-1,i=0;i<t.length;i++){var s=t[i];if(!s.repaired&&this.isDamaged(s,n,Number.MAX_VALUE)){r=i;break}}r!==-1&&(e.children.length=r)}},cleanup:function(e,t,n,r,i,s,o){if(e){e=s-o,i=this.getIntersecting(r-e+1,i),t=this.getIntersecting(n,r);for(n=0;n<i.length;n++)r=i[n],!r.repaired&&r instanceof this.BeginEndNode&&(r.shiftEnd(e),r.shiftStart(e));for(n=0;n<t.length;n++)r=t[n],r.repaired&&r.endNeedsUpdate&&r.shiftEnd(e),delete r.endNeedsUpdate,delete r.repaired}else{t=this.getIntersecting(n,r);for(n=0;n<t.length;n++)delete t[n].repaired}},getNextMatch:function(e,t,n,r){var i=e.getLineAtOffset(n),i=e.getLineEnd(i),s=e.getText(n,i),o=[],u=[],e=[],i=[];for(this.push(o,t.rule.subrules);o.length;){var a=o.length?o.pop():null,a=a&&a._resolvedRule._typedRule;if(a instanceof this.ContainerRule&&u.indexOf(a)===-1)u.push(a),this.push(o,a.subrules);else if(!a||!r||a.matchRegex){var f=a&&this.exec(a.matchRegex||a.beginRegex,s,n);f&&(e.push(f),i.push(a))}}o=Number.MAX_VALUE,u=-1;for(a=0;a<e.length;a++)if(f=e[a],f.index<o)o=f.index,u=a;if(!r&&(n=this.getEndMatch(t,s,n)))if(r=t.rule.applyEndPatternLast,u===-1||n.index<o||!r&&n.index===o)return{isEnd:!0,rule:t.rule,match:n};return u===-1?null:{isSub:!0,rule:i[u],match:e[u]}},getInitialExpected:function(e,t){var n,r;if(e===this._tree){for(n=0;n<e.children.length;n++)if(r=e.children[n],r.start>=t)return r}else if(e instanceof this.BeginEndNode&&e.endMatch){var i=e.endMatch.index;for(n=0;n<e.children.length;n++)if(r=e.children[n],r.start>=t)break;if(r&&r.start<i)return r}return e},getNextExpected:function(e,t){if(t==="begin"){var n=e.children[0];return n?n:e}if(t==="end"&&(n=e.parent)){var r=n.children[n.children.indexOf(e)+1];return r?r:n}return null},prune:function(e,t){t.parent===e?e.children.length=t.getIndexInParent():e instanceof this.BeginEndNode&&(e.endMatch=null,e.end=null),e.parent&&(e.parent.children.length=e.getIndexInParent()+1)},onLineStyle:function(e){this._tree||this.initialParse();var t=e.lineStart,n=this.textView.getModel(),r=n.getLineEnd(e.lineIndex),i=n.getLineEnd(n.getLineAtOffset(t)-1),i=this.getFirstDamaged(i,i),t=this.getLineScope(n,i,t,r);e.ranges=this.toStyleRanges(t),e.ranges.sort(function(e,t){return e.start-t.start})},getLineScope:function(e,t,n,r){for(var i=n,s=this.getInitialExpected(t,n),o=[],u=[];t&&i<r;){var a=this.getNextMatch(e,t,i);if(!a)break;var f=a&&a.match,l=a&&a.rule,c=a&&a.isSub,a=a&&a.isEnd;f.index!==i&&u.push({start:i,end:f.index,node:t}),c?(i=this.afterMatch(f),l instanceof this.BeginEndRule?(this.addBeginScope(o,f,l),t=s,s=this.getNextExpected(s,"begin")):this.addMatchScope(o,f,l)):a&&(i=this.afterMatch(f),this.addEndScope(o,f,l),s=this.getNextExpected(s,"end"),t=t.parent)}return i<r&&u.push({start:i,end:r,node:t}),e=this.getInheritedLineScope(u,n,r),o.concat(e)},getInheritedLineScope:function(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n],i=r.node;i;){var s=i.rule.rule,o=s.name;if(s=s.contentName||o){this.addScopeRange(t,r.start,r.end,s);break}i=i.parent}return t},addBeginScope:function(e,t,n){var r=n.rule;this.addCapturesScope(e,t,r.beginCaptures||r.captures,n.isComplex,n.beginOld2New,n.beginConsuming)},addEndScope:function(e,t,n){var r=n.rule;this.addCapturesScope(e,t,r.endCaptures||r.captures,n.isComplex,n.endOld2New,n.endConsuming)},addMatchScope:function(e,t,n){var r=n.rule,i=r.name;(r=r.captures)?this.addCapturesScope(e,t,r,n.isComplex,n.matchOld2New,n.matchConsuming):this.addScope(e,t,i)},addScope:function(e,t,n){n&&e.push({start:t.index,end:this.afterMatch(t),scope:n})},addScopeRange:function(e,t,n,r){r&&e.push({start:t,end:n,scope:r})},addCapturesScope:function(e,t,n,r,i,s){if(n)if(r){for(var r={1:0},o=0,u=1;t[u]!==void 0;u++)s[u]!==void 0&&(o+=t[u].length),t[u+1]!==void 0&&(r[u+1]=o);s=t.index;for(o=1;n[o];o++){var u=n[o].name,a=i[o],f=s+r[a];typeof t[a]!="undefined"&&this.addScopeRange(e,f,f+t[a].length,u)}}else this.addScope(e,t,n[0]&&n[0].name)},getIntersecting:function(e,t){for(var n=[],r=this._tree?[this._tree]:[];r.length;){var i=r.pop(),s=!1;i instanceof this.ContainerNode?s=!0:this.isDamaged(i,e,t)&&(s=!0,n.push(i));if(s)for(var s=i.children.length,o=0;o<s;o++)r.push(i.children[o])}return n.reverse()},toStyleRanges:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=this._styles[r.scope];if(!i)throw Error("styles not found for "+r.scope);i=i.join(" "),t.push({start:r.start,end:r.end,style:{styleClass:i}})}return t}},{RegexUtil:r,TextMateStyler:n}}),define("orion/editor/htmlGrammar",[],function(){return{HtmlGrammar:function(){return{scopeName:"source.html",uuid:"3B5C76FB-EBB5-D930-F40C-047D082CE99B",patterns:[{begin:"<!(doctype|DOCTYPE)",end:">",contentName:"entity.name.tag.doctype.html",beginCaptures:{0:{name:"entity.name.tag.doctype.html"}},endCaptures:{0:{name:"entity.name.tag.doctype.html"}}},{begin:"<!--",end:"-->",beginCaptures:{0:{name:"punctuation.definition.comment.html"}},endCaptures:{0:{name:"punctuation.definition.comment.html"}},patterns:[{match:"--",name:"invalid.illegal.badcomment.html"}],contentName:"comment.block.html"},{match:"<[A-Za-z0-9_\\-:]+(?= ?)",name:"entity.name.tag.html"},{include:"#attrName"},{include:"#qString"},{include:"#qqString"},{include:"#entity"},{match:"</[A-Za-z0-9_\\-:]+>",name:"entity.name.tag.html"},{match:">",name:"entity.name.tag.html"}],repository:{attrName:{match:"[A-Za-z\\-:]+(?=\\s*=\\s*['\"])",name:"entity.other.attribute.name.html"},qqString:{match:'(")[^"]+(")',name:"string.quoted.double.html"},qString:{match:"(')[^']+(')",name:"string.quoted.single.html"},entity:{match:"&[A-Za-z0-9]+;",name:"constant.character.entity.html"}}}}}}),define("orion/editor/textStyler",["orion/editor/annotations"],function(e){function t(e,t){this._unnamedCounter=0,this._patterns=[],this._rootId=t,e.forEach(function(e){this._addRepositoryPatterns(e.repository||{},e.id),this._addPatterns(e.patterns||[],e.id)}.bind(this))}function n(e,t,n,r,i){this.start=e.start,this.end=e.end,this.contentStart=e.contentStart,this.contentEnd=e.contentEnd,this.pattern=t,this._styler=n,this._parent=i,this._linePatterns=[],this._blockPatterns=[],this._enclosurePatterns={},r&&(this._initPatterns(),this._subBlocks=g(r,r.getText(this.start,this.end),this,this.start))}function r(e){this._styler=e}function i(e,i,s,o){this.highlightCaretLine=this.whitespacesVisible=this.spacesVisible=this.tabsVisible=!1,this.detectTasks=this.foldingEnabled=!0,this.view=e,this.annotationModel=i,this.patternManager=new t(s,o),this._accessor=new r(this),this._bracketAnnotations=void 0;var u=this;this._listener={onChanged:function(e){u._onModelChanged(e)},onDestroy:function(e){u._onDestroy(e)},onLineStyle:function(e){u._onLineStyle(e)},onMouseDown:function(e){u._onMouseDown(e)},onSelection:function(e){u._onSelection(e)}},s=e.getModel(),s.getBaseModel&&(s=s.getBaseModel()),s.addEventListener("Changed",this._listener.onChanged),e.addEventListener("MouseDown",this._listener.onMouseDown),e.addEventListener("Selection",this._listener.onSelection),e.addEventListener("Destroy",this._listener.onDestroy),e.addEventListener("LineStyle",this._listener.onLineStyle),o=s.getCharCount(),this._rootBlock=new n({start:0,contentStart:0,end:o,contentEnd:o},null,this,s),this._computeFolding(this._rootBlock.getBlocks()),i&&this.detectTasks&&(o=[],y(this._rootBlock,s,o),i.replaceAnnotations([],o)),e.redrawLines()}var s={styleClass:"meta annotation currentLine"},o=/$/,u=/\\(\d)/g,a=/(.*)(?:[\r\n]|$)/g,f={regex:/ /g,style:{styleClass:"punctuation separator space",unmergeable:!0}},l={regex:/\t/g,style:{styleClass:"punctuation separator tab",unmergeable:!0}},c=function(e,t,n,r){var i=n,s=e.lastIndex;a.lastIndex=n;var n=a.exec(t),o,u;e.lastIndex=0;if(n){for(u=n.index;0<=--u;)if(o=t.charAt(u),o==="\n"||o==="\r")break;o=t.substring(u+1,n.index+n[1].length),e.lastIndex=u=n.index-u-1}for(;n&&n.index<t.length;){var f;if(r){var l=e.lastIndex;e.test(o)&&(e.lastIndex=l,f=e.exec(o))}else f=e.exec(o);if(f)return f.index+=i,f.index-=u,e.lastIndex=s,f;u=0,i+=n[0].length;if(n=a.exec(t))o=n[1],e.lastIndex=0}return e.lastIndex=s,null},h=function(e,t){var n=e.toString();u.lastIndex=0;if(!u.test(n))return e;u.lastIndex=0;for(var r=u.exec(n);r;)n=n.replace(r[0],t[r[1]]||""),u.lastIndex=0,r=u.exec(n);return RegExp(n.substring(1,n.length-2),"g")},p=function(e,t,n,r){if(t=c(e.pattern.regex?e.pattern.regex:e.pattern.regexBegin,t,r,!0)){e.result=t;for(r=0;r<n.length;r++)if(t.index<n[r].result.index||t.index===n[r].result.index&&e.pattern.pattern.index<n[r].pattern.pattern.index){n.splice(r,0,e);return}n.push(e)}},d=function(e,t,n,r){if(t[0])r.push({start:n,end:n+e[0].length,style:t[0].name});else for(var i=0,s=1;s<e.length;s++)if(e[s]){var o=t[s];if(o){var u=n+i;r.push({start:u,end:u+e[s].length,style:o.name})}i+=e[s].length}},v=function(e,t,n){var r=e.start;t.forEach(function(t){r<=t.start&&n.push({start:r,end:t.start,style:e.style}),n.push(t),r=t.end}),r<e.end&&n.push({start:r,end:e.end,style:e.style})},m=function(e,t,n,r,i){if(n=n.getLinePatterns()){var s=[];n.forEach(function(t){var n=t.regex||t.regexBegin;n.oldLastIndex=n.lastIndex,(n=c(n,e,0))&&s.push({result:n,pattern:t})}),s.sort(function(e,t){return e.result.index<t.result.index?-1:e.result.index>t.result.index?1:e.pattern.pattern.index<t.pattern.pattern.index?-1:1});for(var u=0;s.length>0;){var a=s[0];s.splice(0,1);if(!(a.result.index<u)){var f=a.result.index,l,m=[];if(a.pattern.regex){u=a.result,l=f+u[0].length,l={start:t+f,end:t+l,style:a.pattern.pattern.name};if(!i){a.pattern.pattern.captures&&d(u,a.pattern.pattern.captures,t+f,m),m.sort(function(e,t){return e.start<t.start?-1:e.start>t.start?1:0});for(f=0;f<m.length-1;f++)if(m[f+1].start<m[f].end){var g={start:m[f+1].end,end:m[f].end,style:m[f].style};m[f].end=m[f+1].start,m.splice(f+2,0,g)}}v(l,m,r)}else u=a.pattern.regexEnd,u=h(u,a.result),u=c(u,e,a.result.index+a.result[0].length),u||(o.lastIndex=0,u=o.exec(e)),l=u.index+u[0].length,r.push({start:t+f,end:t+l,style:a.pattern.pattern.name});u=u.index+u[0].length}p(a,e,s,u)}n.forEach(function(e){e=e.regex||e.regexBegin,e.lastIndex=e.oldLastIndex})}},g=function(e,t,r,i){var s=[];r.getBlockPatterns().forEach(function(e){var n=c(e.regexBegin||e.regex,t,0);n&&s.push({result:n,pattern:e})}.bind(this));if(!s.length)return s;s.sort(function(e,t){return e.result.index<t.result.index?-1:e.result.index>t.result.index?1:e.pattern.pattern.index<t.pattern.pattern.index?-1:1});for(var u=0,a=[];s.length>0;){var f=s[0];s.splice(0,1);if(!(f.result.index<u)){var l=e.getLineAtOffset(i+f.result.index),d=e.getLine(l),v=[];m(d,e.getLineStart(l),r,v),l=i+f.result.index;for(d=0;d<v.length;d++)if(v[d].start===l){var u=f.result.index,g=null,y=f.pattern.regexEnd;if(y){u+=f.result[0].length;for(var y=h(y,f.result),b=u;!g;){b=c(y,t,b),b||(o.lastIndex=0,b=o.exec(t));var w=[],E=new n({start:l,end:i+b.index+b[0].length,contentStart:i+u,contentEnd:i+b.index},f.pattern,r.getStyler(),e,r);m(t.substring(u,b.index+b[0].length),u,E,w);if(!w.length||w[w.length-1].end<=b.index)g=E;b=b.index+b[0].length}}else g=new n({start:l,end:l+f.result[0].length,contentStart:l,contentEnd:l+f.result[0].length},f.pattern,r.getStyler(),e,r);a.push(g),u=g.end-i;break}d===v.length&&(u=f.result.index+1)}p(f,t,s,u)}return a},y=function(t,n,r){if(t.getAnnotationModel()){var i=e.AnnotationType.ANNOTATION_TASK;if(t.getLinePatterns().length&&t.pattern&&t.pattern.pattern.name&&t.pattern.pattern.name.indexOf("comment")===0){var s=[];m(n.getText(t.contentStart,t.end),t.contentStart,t,s,!0);for(var o=0;o<s.length;o++)s[o].style==="meta.annotation.task.todo"&&r.push(e.AnnotationType.createAnnotation(i,s[o].start,s[o].end,n.getText(s[o].start,s[o].end)))}t.getBlocks().forEach(function(e){y(e,n,r)}.bind(this))}};return t.prototype={getPatterns:function(e){var t=[0],n={},r=RegExp("^"+(e?typeof e=="string"?e:e.qualifiedId:this._rootId)+"#[^#]+$"),i=[];this._patterns.forEach(function(e){r.test(e.qualifiedId)&&(e.include?i.push(e):(e.index=t[0]++,n[e.id]=e))}.bind(this)),i.forEach(function(e){this._processInclude(e,t,n)}.bind(this));var s=[];return Object.keys(n).forEach(function(e){s.push(n[e])}),s},_addPatterns:function(e,t){e.forEach(function(e){this._addPattern(e,this._NO_ID+this._unnamedCounter++,t)}.bind(this))},_addRepositoryPatterns:function(e,t){Object.keys(e).forEach(function(n){this._addPattern(e[n],n,t)}.bind(this))},_addPattern:function(e,t,n){e.parentId=n,e.id=t,e.qualifiedId=e.parentId+"#"+e.id,this._patterns.push(e),e.patterns&&!e.include&&this._addPatterns(e.patterns,e.qualifiedId)},_processInclude:function(e,t,n){var r,i=e.include.indexOf("#");r=i===0?RegExp("^"+e.qualifiedId.substring(0,e.qualifiedId.indexOf("#"))+e.include+"$"):i===-1?RegExp("^"+e.include+"#"+this._NO_ID+"[^#]+$"):RegExp("^"+e.include+"$");var s=[];this._patterns.forEach(function(e){r.test(e.qualifiedId)&&(e.include?s.push(e):n[e.id]||(e.index=t[0]++,n[e.id]=e))}.bind(this)),s.forEach(function(e){this._processInclude(e,t,n)}.bind(this))},_NO_ID:"NoID"},n.prototype={adjustEnd:function(e){this.end+=e,this.contentEnd+=e,this._subBlocks.forEach(function(t){t.adjustEnd(e)})},adjustStart:function(e){this.start+=e,this.contentStart+=e,this._subBlocks.forEach(function(t){t.adjustStart(e)})},computeStyle:function(e,t){if(!!this.pattern&&this.start<=t&&t<this.end){var n={start:this.start,end:this.end,style:this.pattern.pattern.name};if(this.contentStart<=t&&t<this.contentEnd)return this.pattern.pattern.contentName?{start:this.contentStart,end:this.contentEnd,style:this.pattern.pattern.contentName}:n;var r,i,s,o;if(t<this.contentStart){i=this.pattern.pattern.beginCaptures||this.pattern.pattern.captures;if(!i)return n;r=this.pattern.regexBegin,s=e.getText(this.start,this.contentStart),o=this.start}else{i=this.pattern.pattern.endCaptures||this.pattern.pattern.captures;if(!i)return n;r=this.pattern.regexEnd,s=e.getText(this.contentEnd,this.end),o=this.contentEnd}r.lastIndex=0;if(s=r.exec(s)){r=[],d(s,i,o,r);for(i=0;i<r.length;i++)if(r[i].start<=t&&t<r[i].end)return r[i]}return n}return null},getAnnotationModel:function(){return this._styler._getAnnotationModel()},getBlockPatterns:function(){return this._blockPatterns},getBlocks:function(){return this._subBlocks},getEnclosurePatterns:function(){return this._enclosurePatterns},getLinePatterns:function(){return this._linePatterns},getParent:function(){return this._parent},getPatternManager:function(){return this._styler._getPatternManager()},getStyler:function(){return this._styler},isRenderingWhitespace:function(){return this._styler._isRenderingWhitespace()},_initPatterns:function(){var e=function(e){var t=/^\(\?i\)\s*/.exec(e);return t&&(e=e.substring(t[0].length)),e};this.getPatternManager().getPatterns(this.pattern?this.pattern.pattern:null).forEach(function(t){var n;if(t.match&&!t.begin&&!t.end){n="g";var r=e(t.match);r!==t.match&&(n+="i"),n={regex:RegExp(r,n),pattern:t},this._linePatterns.push(n),t.patterns?this._blockPatterns.push(n):t.name&&t.name.indexOf("punctuation.section")===0&&(t.name.indexOf(".begin")!==-1||t.name.indexOf(".end")!==-1)&&(this._enclosurePatterns[t.name]=n)}else if(!t.match&&t.begin&&t.end){n="g",r=e(t.begin),r!==t.begin&&(n+="i");var i="g",s=e(t.end);s!==t.end&&(i+="i"),n={regexBegin:RegExp(r,n),regexEnd:RegExp(s,i),pattern:t},this._linePatterns.push(n),this._blockPatterns.push(n)}}.bind(this))}},r.prototype={getStyles:function(e){return this._styler.getStyles(e)}},i.prototype={destroy:function(){var e=this.view;if(e){var t=e.getModel();t.getBaseModel&&(t=t.getBaseModel()),t.removeEventListener("Changed",this._listener.onChanged),e.removeEventListener("MouseDown",this._listener.onMouseDown),e.removeEventListener("Selection",this._listener.onSelection),e.removeEventListener("Destroy",this._listener.onDestroy),e.removeEventListener("LineStyle",this._listener.onLineStyle),this.view=null}},getStyleAccessor:function(){return this._accessor},getStyles:function(e){var t=[],n=this.view.getModel();n.getBaseModel&&(n=n.getBaseModel());var r=this._findBlock(this._rootBlock,e),i=n.getLineAtOffset(e),s=n.getLine(i),o=[];m(s,n.getLineStart(i),r,o);for(i=0;i<o.length;i++){if(e<o[i].start)break;if(o[i].start<=e&&e<o[i].end){t.push(o[i]);break}}for(;r;)(o=r.computeStyle(n,e))&&t.splice(0,0,o),r=r.getParent();return t},setHighlightCaretLine:function(e){this.highlightCaretLine=e},setWhitespacesVisible:function(e,t){this.whitespacesVisible!==e&&(this.whitespacesVisible=e,t&&this.view.redraw())},setTabsVisible:function(e){this.tabsVisible!==e&&(this.tabsVisible=e,this.setWhitespacesVisible(this.tabsVisible||this.spacesVisible,!1),this.view.redraw())},setSpacesVisible:function(e){this.spacesVisible!==e&&(this.spacesVisible=e,this.setWhitespacesVisible(this.tabsVisible||this.spacesVisible,!1),this.view.redraw())},setDetectHyperlinks:function(){},setFoldingEnabled:function(e){this.foldingEnabled=e},setDetectTasks:function(e){this.detectTasks=e},_binarySearch:function(e,t,n,r,i){var s;r===void 0&&(r=-1),i===void 0&&(i=e.length);for(;i-r>1;)if(s=Math.floor((i+r)/2),t<=e[s].start)i=s;else{if(n&&t<e[s].end){i=s;break}r=s}return i},_computeFolding:function(t){if(this.foldingEnabled){var n=this.view.getModel();if(n.getBaseModel){var r=this.annotationModel;if(r){r.removeAnnotations(e.AnnotationType.ANNOTATION_FOLDING);for(var i=[],s=n.getBaseModel(),o=0;o<t.length;o++){var u=t[o];(u=this._createFoldingAnnotation(n,s,u.start,u.end))&&i.push(u)}r.replaceAnnotations(null,i)}}}},_createFoldingAnnotation:function(t,n,r,i){var s=n.getLineAtOffset(r),n=n.getLineAtOffset(i);return s===n?null:new(e.AnnotationType.getType(e.AnnotationType.ANNOTATION_FOLDING))(r,i,t)},_findBlock:function(e,t){var n=e.getBlocks();if(!n.length)return e;var r=this._binarySearch(n,t,!0);return r<n.length&&n[r].start<=t&&t<n[r].end?this._findBlock(n[r],t):e},_findBrackets:function(e,t,n,r,i,s){for(var o=[],u=[],a=i,f=n.getBlocks(),l=this._binarySearch(f,i,!0);l<f.length;l++){if(f[l].start>=s)break;var c=f[l].start,h=f[l].end;a<c&&(m(r.substring(a-i,c-i),a,n,u),u.forEach(function(n){n.style.indexOf(e.pattern.name)===0?o.push(n.start+1):n.style.indexOf(t.pattern.name)===0&&o.push(-(n.start+1))}),u=[]),a=h}return a<s&&(m(r.substring(a-i,s-i),a,n,u),u.forEach(function(n){n.style.indexOf(e.pattern.name)===0?o.push(n.start+1):n.style.indexOf(t.pattern.name)===0&&o.push(-(n.start+1))})),o},_findMatchingBracket:function(e,t,n){for(var r=e.getLineAtOffset(n),i=e.getLineEnd(r),s=e.getText(n,i),o,u=t.getEnclosurePatterns(),a=Object.keys(u),f=0;f<a.length;f++){var l=u[a[f]],h=c(l.regex,s,0);if(h&&h.index===0){o=l;break}}if(!o)return-1;s=!1,o.pattern.name.indexOf(".begin")!==-1?(s=!0,f=o.pattern.name.replace(".begin",".end")):f=o.pattern.name.replace(".end",".begin"),u=u[f];if(!u)return-1;a=e.getLine(r),l=e.getLineStart(r),i=this._findBrackets(o,u,t,a,l,i);for(f=0;f<i.length;f++)if(a=i[f]>=0?1:-1,i[f]*a-1===n){n=1;if(s){for(f++;f<i.length;f++)if(a=i[f]>=0?1:-1,n+=a,n===0)return i[f]*a-1;r+=1;for(f=e.getLineCount();r<f;){a=e.getLine(r),l=e.getLineStart(r),i=e.getLineEnd(r),i=this._findBrackets(o,u,t,a,l,i);for(s=0;s<i.length;s++)if(a=i[s]>=0?1:-1,n+=a,n===0)return i[s]*a-1;r++}}else{for(f--;f>=0;f--)if(a=i[f]>=0?1:-1,n+=a,n===0)return i[f]*a-1;for(r-=1;r>=0;){a=e.getLine(r),l=e.getLineStart(r),i=e.getLineEnd(r),i=this._findBrackets(o,u,t,a,l,i);for(f=i.length-1;f>=0;f--)if(a=i[f]>=0?1:-1,n+=a,n===0)return i[f]*a-1;r--}}break}return-1},_getAnnotationModel:function(){return this.annotationModel},_getLineStyle:function(e){if(this.highlightCaretLine){var t=this.view,n=t.getModel(),t=t.getSelection();if(t.start===t.end&&n.getLineAtOffset(t.start)===e)return s}return null},_getPatternManager:function(){return this.patternManager},_getStyles:function(e,t,n,r){t.getBaseModel&&(r=t.mapOffset(r));for(var i=r+n.length,s=[],o=r,u=e.getBlocks(),a=this._binarySearch(u,r,!0);a<u.length;a++){if(u[a].start>=i)break;var f=u[a].start,l=u[a].end;o<f&&m(n.substring(o-r,f-r),o,e,s);var h=Math.max(o,f);if(h===f&&u[a].pattern.regexBegin){var p=c(u[a].pattern.regexBegin,n.substring(h-r),0);if(p){var v=u[a].pattern.pattern.beginCaptures||u[a].pattern.pattern.captures;v?d(p,v,h,s):s.push({start:h,end:h+p[0].length,style:u[a].pattern.pattern.name}),h+=p[0].length}}var f=Math.min(i,l),g=[];f===l&&u[a].pattern.regexEnd&&(o=n.substring(f-o-(u[a].end-u[a].contentEnd)),p=c(u[a].pattern.regexEnd,o,0))&&((v=u[a].pattern.pattern.endCaptures||u[a].pattern.pattern.captures)?d(p,v,f-p[0].length,g):u[a].pattern.pattern.name&&g.push({start:f-p[0].length,end:f,style:u[a].pattern.pattern.name}),f-=p[0].length);var o=this._getStyles(u[a],t,n.substring(h-r,f-r),h),y=u[a].pattern.pattern.contentName||u[a].pattern.pattern.name;if(y){var b=h;o.forEach(function(e){e.start-b&&s.push({start:b,end:e.start,style:y}),s.push(e),b=e.end}),f-b&&s.push({start:b,end:f,style:y})}else s=s.concat(o);s=s.concat(g),o=l}o<i&&m(n.substring(o-r,i-r),o,e,s);if(t.getBaseModel)for(e=0;e<s.length;e++)n=s[e].end-s[e].start,s[e].start=t.mapOffset(s[e].start,!0),s[e].end=s[e].start+n;return s},_isRenderingWhitespace:function(){return this.whitespacesVisible&&(this.tabsVisible||this.spacesVisible)},_onDestroy:function(){this.destroy()},_onLineStyle:function(e){e.textView===this.view&&(e.style=this._getLineStyle(e.lineIndex)),e.ranges=this._getStyles(this._rootBlock,e.textView.getModel(),e.lineText,e.lineStart),e.ranges.forEach(function(e){e.style&&(e.style={styleClass:e.style.replace(/\./g," ")})}),this._isRenderingWhitespace()&&(this.spacesVisible&&this._spliceStyles(f,e.ranges,e.lineText,e.lineStart),this.tabsVisible&&this._spliceStyles(l,e.ranges,e.lineText,e.lineStart))},_onSelection:function(t){var n=t.oldValue,r=t.newValue,i=this.view,t=i.getModel(),s;if(this.highlightCaretLine){var o=t.getLineAtOffset(n.start);s=t.getLineAtOffset(r.start);var u=r.start===r.end,n=n.start===n.end;o===s&&n&&u||(n&&i.redrawLines(o,o+1),(o!==s||!n)&&u&&i.redrawLines(s,s+1))}if(this.annotationModel){var n=this._bracketAnnotations,a,f;r.start===r.end&&(f=i.getCaretOffset())>0&&(f-=1,t.getBaseModel&&(f=t.mapOffset(f),t=t.getBaseModel()),r=this._findBlock(this._rootBlock,f),t=this._findMatchingBracket(t,r,f),t!==-1&&(a=[e.AnnotationType.createAnnotation(e.AnnotationType.ANNOTATION_MATCHING_BRACKET,t,t+1),e.AnnotationType.createAnnotation(e.AnnotationType.ANNOTATION_CURRENT_BRACKET,f,f+1)])),this._bracketAnnotations=a,this.annotationModel.replaceAnnotations(n,a)}},_onMouseDown:function(e){if(e.clickCount===2){var t=this.view,n=t.getModel(),r=t.getOffsetAtLocation(e.x,e.y);if(r>0){var i=r-1,s=n;n.getBaseModel&&(i=n.mapOffset(i),s=n.getBaseModel());var o=this._findBlock(this._rootBlock,i),i=this._findMatchingBracket(s,o,i);i!==-1&&(e.preventDefault(),e=i,n.getBaseModel&&(e=n.mapOffset(e,!0)),r>e&&(r--,e++),t.setSelection(e,r))}}},_onModelChanged:function(t){var n=t.start,r=t.removedCharCount,t=t.addedCharCount-r,i=this.view,s=i.getModel(),o=s.getBaseModel?s.getBaseModel():s,r=n+r,u=o.getCharCount(),a=this._rootBlock.getBlocks(),f=a.length,l=o.getLineStart(o.getLineAtOffset(n)),c=this._binarySearch(a,l,!0),h=this._binarySearch(a,r,!1,c-1,f),p;c<f&&a[c].start<=l&&l<a[c].end?(p=a[c].start,p>n&&(p+=t)):p=c===f&&f>0&&u-t===a[f-1].end?a[f-1].start:l;var d;do h<f?(d=a[h].end,d>n&&(d+=t),h+=1):(h=f,d=u),l=o.getText(p,d),l=g(o,l,this._rootBlock,p);while(l.length&&a.length&&h<f&&l[l.length-1].pattern.pattern.id!==a[h-1].pattern.pattern.id);for(u=c;u<a.length;u++)f=a[u],f.start>n&&f.adjustStart(t),f.start>n&&f.adjustEnd(t);var v=h-c!==l.length;if(!v)for(u=0;u<l.length;u++){var f=a[c+u],m=l[u];if(f.start!==m.start||f.end!==m.end||f.type!==m.type){v=!0;break}}u=[c,h-c].concat(l),Array.prototype.splice.apply(a,u),v&&(u=p,f=d,s!==o&&(u=s.mapOffset(u,!0),f=s.mapOffset(f,!0)),i.redrawRange(u,f));if(this.annotationModel){i=[],a=[],c=[],p=this.annotationModel.getAnnotations(p,d);for(d=this.foldingEnabled&&o!==s;p.hasNext();)if(f=p.next(),d&&f.type===e.AnnotationType.ANNOTATION_FOLDING){c.push(f);for(u=0;u<l.length;u++)if(f.start===l[u].start&&f.end===l[u].end)break;u===l.length?(i.push(f),f.expand()):(u=f.start,h=f.end,u>n&&(u-=t),h>n&&(h-=t),u<=n&&n<h&&u<=r&&r<h&&(u=o.getLineAtOffset(f.start),h=o.getLineAtOffset(f.end),u!==h?f.expanded||f.expand():this.annotationModel.removeAnnotation(f)));for(u=0;u<l.length;u++){f=l[u];for(h=0;h<c.length;h++)if(c[h].start===f.start&&c[h].end===f.end)break;h===c.length&&(f=this._createFoldingAnnotation(s,o,f.start,f.end))&&a.push(f)}}else f.type===e.AnnotationType.ANNOTATION_TASK&&i.push(f);if(this.detectTasks)for(u=0;u<l.length;u++)y(l[u],o,a);this.annotationModel.replaceAnnotations(i,a)}},_spliceStyles:function(e,t,n,r){for(var i=e.regex,s=i.lastIndex=0,o=i.exec(n);o;){for(o=r+o.index;s<t.length;){if(o<t[s].end)break;s++}var u={start:o,end:o+1,style:e.style};if(s<t.length&&t[s].start<=o){var a={start:o+1,end:t[s].end,style:t[s].style};t[s].end=o,t.splice(s+1,0,a),t.splice(s+1,0,u),s+=2}else t.splice(s,0,u),s++;o=i.exec(n)}}},{TextStyler:i}}),define("orion/editor/stylers/text_x-php/syntax",["orion/editor/stylers/lib/syntax"],function(e){var t="abstract,and,array,as,break,callable,case,catch,class,clone,const,continue,declare,default,die,do,echo,else,elseif,empty,enddeclare,endfor,endforeach,endif,endswitch,endwhile,eval,exit,extends,false,FALSE,final,finally,for,foreach,function,global,goto,if,implements,include,include_once,insteadof,interface,instanceof,isset,list,namespace,new,null,NULL,or,parent,print,private,protected,public,require,require_once,return,self,static,switch,throw,trait,try,true,TRUE,unset,use,var,while,xor,yield,__halt_compiler,__CLASS__,__DIR__,__FILE__,__FUNCTION__,__LINE__,__METHOD__,__NAMESPACE__,__TRAIT__".split(","),e=e.grammars;return e.push({id:"orion.php",contentTypes:["text/x-php"],patterns:[{include:"orion.lib#doc_block"},{include:"orion.c-like"},{match:"(?i)<\\?(?:=|php)?(?:\\s|$)",name:"entity.name.declaration.php"},{match:"<%=?(?:\\s|$)",name:"entity.name.declaration.php"},{match:"#.*",name:"comment.line.number-sign.php",patterns:[{include:"orion.lib#todo_comment_singleLine"}]},{begin:"<<<(\\w+)$",end:"^\\1;$",name:"string.unquoted.heredoc.php"},{begin:"<<<'(\\w+)'$",end:"^\\1;$",name:"string.unquoted.heredoc.nowdoc.php"},{match:"\\b0[bB][01]+\\b",name:"constant.numeric.binary.php"},{match:"\\b(?:"+t.join("|")+")\\b",name:"keyword.control.php"}]}),{id:"orion.php",grammars:e,keywords:t}}),define("orion/editor/stylers/application_xml/syntax",["orion/editor/stylers/lib/syntax"],function(e){return e=e.grammars,e.push({id:"orion.xml",contentTypes:["application/xml","application/xhtml+xml"],patterns:[{include:"#comment"},{include:"#doctype"},{include:"#xmlDeclaration"},{begin:"</?[A-Za-z0-9]+",end:"/?>",captures:{0:{name:"entity.name.tag.xml"}},name:"meta.tag.xml",patterns:[{include:"#comment"},{include:"orion.lib#string_doubleQuote"},{include:"orion.lib#string_singleQuote"}]},{match:"&lt;|&gt;|&amp;",name:"constant.character"}],repository:{comment:{begin:"<!--",end:"-->",name:"comment.block.xml",patterns:[{match:"(\\b)(TODO)(\\b)(((?!-->).)*)",name:"meta.annotation.task.todo",captures:{2:{name:"keyword.other.documentation.task"},4:{name:"comment.line"}}}]},doctype:{begin:"<!(?:doctype|DOCTYPE)",end:">",name:"meta.tag.doctype.xml",captures:{0:{name:"entity.name.tag.doctype.xml"}},patterns:[{include:"#comment"},{include:"orion.lib#string_doubleQuote"},{include:"orion.lib#string_singleQuote"}]},xmlDeclaration:{begin:"<\\?xml",end:"\\?>",captures:{0:{name:"entity.name.tag.declaration.xml"}},patterns:[{include:"#comment"},{include:"orion.lib#string_doubleQuote"},{include:"orion.lib#string_singleQuote"}],name:"meta.tag.declaration.xml"}}}),{id:e[e.length-1].id,grammars:e,keywords:[]}}),define("orion/editor/stylers/text_html/syntax",["orion/editor/stylers/lib/syntax","orion/editor/stylers/application_javascript/syntax","orion/editor/stylers/text_css/syntax","orion/editor/stylers/text_x-php/syntax","orion/editor/stylers/application_xml/syntax"],function(e,t,n,r,i){return e=e.grammars.concat(t.grammars).concat(n.grammars).concat(r.grammars).concat(i.grammars),e.push({id:"orion.html",contentTypes:["text/html"],patterns:[{include:"orion.xml"},{begin:"(?i)(<style)([^>]*)(>)",end:"(?i)(</style>)",captures:{1:{name:"entity.name.tag.html"},3:{name:"entity.name.tag.html"}},contentName:"source.css.embedded.html",patterns:[{include:"orion.css"}]},{begin:"(?i)<script\\s*>|<script\\s.*?(?:language\\s*=\\s*(['\"])javascript\\1|type\\s*=\\s*(['\"])(?:text|application)/(?:javascript|ecmascript)\\2).*?>",end:"(?i)</script>",captures:{0:{name:"entity.name.tag.html"}},contentName:"source.js.embedded.html",patterns:[{include:"orion.js"}]},{begin:"(?i)<script\\s.*?(?:language\\s*=\\s*(['\"])php\\1|type\\s*=\\s*(['\"])text/x-php\\2).*?>",end:"(?i)</script>",captures:{0:{name:"entity.name.tag.html"}},contentName:"source.php.embedded.html",patterns:[{include:"orion.php"}]},{begin:"(?i)<\\?(?:=|php)?(?:\\s|$)",end:"\\?>",captures:{0:{name:"entity.name.declaration.php"}},contentName:"source.php.embedded.html",patterns:[{include:"orion.php"}]},{begin:"<%=?(?:\\s|$)",end:"%>",captures:{0:{name:"entity.name.declaration.php"}},contentName:"source.php.embedded.html",patterns:[{include:"orion.php"}]}],repository:{xmlDeclaration:{}}}),{id:e[e.length-1].id,grammars:e,keywords:[]}}),define("orion/editor/edit","require,orion/editor/shim,orion/editor/textView,orion/editor/textModel,orion/editor/textTheme,orion/editor/projectionTextModel,orion/editor/eventTarget,orion/keyBinding,orion/editor/rulers,orion/editor/annotations,orion/editor/tooltip,orion/editor/undoStack,orion/editor/textDND,orion/editor/editor,orion/editor/editorFeatures,orion/editor/contentAssist,orion/editor/cssContentAssist,orion/editor/htmlContentAssist,orion/editor/jsTemplateContentAssist,orion/editor/AsyncStyler,orion/editor/mirror,orion/editor/textMateStyler,orion/editor/htmlGrammar,orion/editor/textStyler,orion/editor/stylers/application_javascript/syntax,orion/editor/stylers/text_css/syntax,orion/editor/stylers/text_html/syntax".split(","),function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){function k(e){var t=e.firstChild;if(t&&t.tagName==="TEXTAREA")return t.value;var n=e.ownerDocument,r=n.defaultView||n.parentWindow,i;if(!(i=!r.getSelection)){if(!(t=e.childNodes.length===1&&t.nodeType===Node.TEXT_NODE)){for(var s,t=e;t&&t!==n&&s!=="none";)s=r.getComputedStyle?r.getComputedStyle(t,null).getPropertyValue("display"):t.currentStyle.display,t=t.parentNode;t=s==="none"}i=t}if(i)return e.innerText||e.textContent;n=n.createRange(),n.selectNode(e),e=r.getSelection(),r=[];for(s=0;s<e.rangeCount;s++)r.push(e.getRangeAt(s));e.removeAllRanges(),e.addRange(n),n=e.toString(),e.removeAllRanges();for(s=0;s<r.length;s++)e.addRange(r[s]);return n}function L(e){if(e.substring(0,12)==="data-editor-")return e=e.substring(12),e=e.replace(/-([a-z])/ig,function(e,t){return t.toUpperCase()})}function A(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function O(e,t){var n={};A(n,t);for(var r,i=0,s=e.attributes,o=s.length;i<o;i++){r=s.item(i);var u=L(r.nodeName);if(u){r=r.nodeValue;if(r==="true"||r==="false")r=r==="true";n[u]=r}}return n}function M(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):(t=t.replace(/ *$/,""),e.querySelectorAll?e.querySelectorAll((" "+t).replace(/ +/g,".")):null)}function _(t){var o=t.document||document,u=t.parent;u||(u="editor"),typeof u=="string"&&(u=o.getElementById(u));if(!u&&t.className&&(o=M(o,t.className))){t.className=void 0,o.length>1&&t.noFocus===void 0&&(t.noFocus=!0);for(var a=[],f=o.length-1;f>=0;f--)t.parent=o[f],a.push(_(t));return a}if(!u)throw"no parent";t=O(u,t);if(typeof t.theme=="string"){var o=i.TextTheme.getTheme(t.theme),f=t.theme.lastIndexOf("/"),l=t.theme;f!==-1&&(l=l.substring(f+1)),l.substring(l.length-4)===".css"&&(l=l.substring(0,l.length-4)),o.setThemeClass(l,{href:t.theme}),t.theme=o}var c;t.readonly||(a={createContentAssistMode:function(e){return c=new v.ContentAssist(e.getTextView()),e=new v.ContentAssistWidget(c),e=new v.ContentAssistMode(c,e),c.setMode(e),e}});var h=new p.Editor({textViewFactory:function(){return new n.TextView({parent:u,model:new s.ProjectionTextModel(t.model?t.model:new r.TextModel("")),tabSize:t.tabSize?t.tabSize:4,readonly:t.readonly,fullSelection:t.fullSelection,tabMode:t.tabMode,expandTab:t.expandTab,singleMode:t.singleMode,themeClass:t.themeClass,theme:t.theme,wrapMode:t.wrapMode,wrappable:t.wrappable})},undoStackFactory:new d.UndoFactory,annotationFactory:new d.AnnotationFactory,lineNumberRulerFactory:new d.LineNumberRulerFactory,foldingRulerFactory:new d.FoldingRulerFactory,textDNDFactory:new d.TextDNDFactory,contentAssistFactory:a,keyBindingFactory:new d.KeyBindingsFactory,statusReporter:t.statusReporter,domNode:u});h.addEventListener("TextViewInstalled",function(){var e=h.getLineNumberRuler();e&&t.firstLineIndex!==void 0&&e.setFirstLine(t.firstLineIndex);if(e=h.getSourceCodeActions())e.setAutoPairParentheses(t.autoPairParentheses),e.setAutoPairBraces(t.autoPairBraces),e.setAutoPairSquareBrackets(t.autoPairSquareBrackets),e.setAutoPairAngleBrackets(t.autoPairAngleBrackets),e.setAutoPairQuotations(t.autoPairQuotations),e.setAutoCompleteComments(t.autoCompleteComments),e.setSmartIndentation(t.smartIndentation)}),a=t.contents,a===void 0&&(a=k(u)),a||(a=""),h.installTextView(),h.setLineNumberRulerVisible(t.showLinesRuler===void 0||t.showLinesRuler),h.setAnnotationRulerVisible(t.showAnnotationRuler===void 0||t.showFoldingRuler),h.setOverviewRulerVisible(t.showOverviewRuler===void 0||t.showOverviewRuler),h.setFoldingRulerVisible(t.showFoldingRuler===void 0||t.showFoldingRuler),h.setInput(t.title,null,a,!1,t.noFocus),{styler:null,highlight:function(n,r){this.styler&&this.styler.destroy&&this.styler.destroy(),this.styler=null,n==="js"?n="application/javascript":n==="css"?n="text/css":n==="html"?n="text/html":n==="java"&&(n="text/x-java-source");var i=r.getTextView(),s=r.getAnnotationModel();n&&(n=n.replace(/[*|:/".<>?+]/g,"_"),e(["./stylers/"+n+"/syntax"],function(e){this.styler=new x.TextStyler(i,s,e.grammars,e.id)})),n==="text/css"&&r.setFoldingRulerVisible(t.showFoldingRuler===void 0||t.showFoldingRuler)}}.highlight(t.contentType||t.lang,h);if(c){var b=new m.CssContentAssistProvider,w=new g.HTMLContentAssistProvider,E=new y.JSTemplateContentAssistProvider;c.addEventListener("Activating",function(){/css$/.test(t.lang)?c.setProviders([b]):/js$/.test(t.lang)?c.setProviders([E]):/html$/.test(t.lang)&&c.setProviders([w])})}return u.clientHeight<=50&&(a=h.getTextView().computeSize().height,u.style.height=a+"px"),h}var D=this.orion?this.orion.editor:void 0;if(D)for(var P=0;P<arguments.length;P++)A(D,arguments[P]);return _}),define("orion",["orion/editor/edit"],function(e){return e}),define("libs/server",["require","exports","module","underscore","jquery"],function(e,t){var n=e("underscore"),r=e("jquery"),i=r.ajax,s="/submissions",o="/achievements/recent",u=0,a=500,f=0,l=function(){f++;var e=n.bind(function(){i(this)},this);f<u&&setTimeout(e,a)};t.saveSubmission=function(e,t){f=0,i({url:s,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({exercise_id:e.getId(),section_id:e.getSectionId(),answer:e.getLatestSubmission()}),success:function(e){n.isFunction(t)&&t(e.submissions)},error:l})},t.loadRecentAchievements=function(e){f=0,i({url:o,type:"GET",success:function(t){n.isFunction(e)&&!!t&&e(t)},error:l})},t.loadUserBadge=function(e){f=0,i({url:"/users/badge",type:"GET",success:function(t){n.isFunction(e)&&!!t&&e(t)},error:l})},t.loadSource=function(e,t){f=0,i({url:e,type:"GET",success:function(e){n.isFunction(t)&&!!e&&t(e)},error:l})},t.persistNotificationHide=function(e,t){f=0,i({url:"/users/hide_notice",type:"POST",data:{name:e},success:function(e){n.isFunction(t)&&!!e&&t(e)},error:l})},t.showNotification=function(e,t){i({url:"/users/show_notification",type:"GET",data:{name:e},success:function(e){n.isFunction(t)&&!!e&&t(e)},error:l})};var c=n.template("/courses/<%= course_id %>/reorder_sections");t.moveSection=function(e,t){f=0,i({url:c({course_id:e}),type:"POST",data:{section_ids:t},error:l})};var h=n.template("/sections/<%= section_id %>/reorder_exercises");t.moveExercise=function(e,t){f=0,i({url:h({section_id:e}),type:"POST",data:{exercise_ids:t},error:l})};var p=[" /assets/jsrepl/langs/javascript/jsrepl_js.js","/assets/jsrepl/engines/javascript-default.js","/assets/jsrepl/engines/python-chrome.js","/assets/jsrepl/engines/python-default.js","/assets/jsrepl/engines/python-opera.js","/assets/jsrepl/extern/python/closured/lib/python2.7/encodings/ascii.py","/assets/jsrepl/extern/python/closured/lib/python2.7/encodings/aliases.py","/assets/jsrepl/extern/python/closured/lib/python2.7/encodings/__init__.py","/assets/jsrepl/extern/python/reloop-closured/lib/python2.7/encodings/ascii.py","/assets/jsrepl/extern/python/reloop-closured/lib/python2.7/encodings/aliases.py","/assets/jsrepl/extern/python/reloop-closured/lib/python2.7/encodings/__init__.py","/assets/jsrepl/engines/ruby-default.js","/assets/jsrepl/engines/ruby-firefox_3.js","/assets/jsrepl/engines/ruby-opera.js"];t.prefetch=function(){p.forEach(function(e){i({url:e,type:"GET",cache:!0,dataType:"text"})})},t.get=function(e,t){r.get(e,t)},t.forum={shared:{toggleFlag:function(e){var t=this.get("flagged"),i=this.url()+"/flag",s=CCDATA.current_user._id;if(t){var o=n.find(this.get("flags"),function(e){return e.user_id===s});i=this.url()+"/unflag/"+o._id}r.post(i,{id:this.id},e)}},answer:{mark:function(){var e=this;r.post(this.url()+"/mark",{id:this.id},function(t){e.set("accepted",t.accepted)})},vote:function(e){var t=this;r.post(this.url()+"/vote",{id:this.id,is_up:e},function(e){t.set("score",e.score)})}},question:{subscribe:function(e){var t=this.url(),n=this.get("is_subscribed"),i=this;t+=n?"/unsubscribe/":"/subscribe/",t+=CCDATA.current_user._id,r.getJSON(t,function(){i.set("is_subscribed",!n),e()})}}},t.getSubmission=function(e,t,n){return i({type:"get",url:e,error:n,dataType:"text",success:t})};var d="/markdown";t.markdown=function(e,t){return i({type:"post",url:d,error:l,data:e,success:t,contentType:"text/plain"})}}),define("libs/markdown",["require","exports","module","libs/server","underscore","jquery"],function(e,t,n){var r=e("libs/server").markdown,i=e("underscore"),s=e("jquery");window.markdown=n.exports=function(e,t){r(e,t)};var o=500;n.exports.wmdPreviewManager=function(e){return function(){var t=s(e.panels.input),n=s(e.panels.preview),u=i.debounce(function(){r(t.val(),function(e){n.html(e)})},o);t.keypress(u),this.refresh=u}}}),$.fn.selectRange=function(e,t){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(e,t);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}})},define("plugins/jquery.selectrange",function(){}),function(e){var t={};t.create=function(t){var r={};t=e.extend(r,t||{}),this.each(function(t,r){var i=e(r),s=e(".inline_edit_content",i),o=e(".inline_edit_form",i),u=e("span.inline_edit_loader"),a=o.find(".field"),f=function(e){e.click(function(){l(),e.hide(),o.show(),u.hide(),a.focus().selectRange(0,0)})},l=function(){a.width(s.width()-12);if(a.is("textarea")){var e=Math.max(50,s.height());a.width("100%"),a.height(e)}a.css({"font-size":s.css("font-size"),"font-weight":s.css("font-weight"),"font-style":s.css("font-style"),"font-family":s.css("font-family"),color:s.css("color")})};f(s),o.find("button").click(function(e){return!1}),o.find(".cancel").click(function(e){s.show(),o.hide()}),o.bind("ajax:before",function(e,t,n,r){u.show()}),o.bind("ajax:error",function(e,t,r,i){n()}),o.bind("ajax:complete",function(t,n,r,i){markdown(a.val(),function(t){s.is("h1, h2, h3, h4, h5, h6")&&(t=e(t).text()),s.html(t),o.hide(),u.hide(),s.show(),f(s)})})})};var n=function(){console.log("Load flash!!!")};e.fn.inlineEdit=function(n){n=n||{};var r=t[n.method||"create"];if(r)return r.apply(this,Array.prototype.slice.call(arguments,1));e.error("Method "+r+" does not exist on jQuery.inlineedit")}}(jQuery),define("plugins/jquery.inlineedit",function(){}),function(e,t){if(typeof exports=="object"&&exports)t(exports);else{var n={};t(n),typeof define=="function"&&define.amd?define("vendor/mustache",[],n):e.Mustache=n}}(this,function(e){function a(e,t){return u.call(e,t)}function f(e){return!a(r,e)}function h(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(e){return String(e).replace(/[&<>"'\/]/g,function(e){return p[e]})}function v(e){this.string=e,this.tail=e,this.pos=0}function m(e,t){this.view=e||{},this.parent=t,this._cache={}}function g(){this.clearCache()}function y(t,n,r,i){var s="",o,u,a;for(var f=0,l=t.length;f<l;++f){o=t[f],u=o[1];switch(o[0]){case"#":a=r.lookup(u);if(typeof a=="object")if(c(a))for(var h=0,p=a.length;h<p;++h)s+=y(o[4],n,r.push(a[h]),i);else a&&(s+=y(o[4],n,r.push(a),i));else if(typeof a=="function"){var d=i==null?null:i.slice(o[3],o[5]);a=a.call(r.view,d,function(e){return n.render(e,r)}),a!=null&&(s+=a)}else a&&(s+=y(o[4],n,r,i));break;case"^":a=r.lookup(u);if(!a||c(a)&&a.length===0)s+=y(o[4],n,r,i);break;case">":a=n.getPartial(u),typeof a=="function"&&(s+=a(r));break;case"&":a=r.lookup(u),a!=null&&(s+=a);break;case"name":a=r.lookup(u),a!=null&&(s+=e.escape(a));break;case"text":s+=u}}return s}function b(e){var t=[],n=t,r=[],i;for(var s=0,o=e.length;s<o;++s){i=e[s];switch(i[0]){case"#":case"^":r.push(i),n.push(i),n=i[4]=[];break;case"/":var u=r.pop();u[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}}return t}function w(e){var t=[],n,r;for(var i=0,s=e.length;i<s;++i)n=e[i],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(r=n,t.push(n)));return t}function E(e){return[new RegExp(h(e[0])+"\\s*"),new RegExp("\\s*"+h(e[1]))]}function S(r,u){function y(){if(m&&!g)while(d.length)delete p[d.pop()];else d=[];m=!1,g=!1}r=r||"",u=u||e.tags,typeof u=="string"&&(u=u.split(n));if(u.length!==2)throw new Error("Invalid tags: "+u.join(", "));var a=E(u),l=new v(r),c=[],p=[],d=[],m=!1,g=!1,S,x,T,N,C;while(!l.eos()){S=l.pos,T=l.scanUntil(a[0]);if(T)for(var k=0,L=T.length;k<L;++k)N=T.charAt(k),f(N)?d.push(p.length):g=!0,p.push(["text",N,S,S+1]),S+=1,N=="\n"&&y();if(!l.scan(a[0]))break;m=!0,x=l.scan(o)||"name",l.scan(t),x==="="?(T=l.scanUntil(i),l.scan(i),l.scanUntil(a[1])):x==="{"?(T=l.scanUntil(new RegExp("\\s*"+h("}"+u[1]))),l.scan(s),l.scanUntil(a[1]),x="&"):T=l.scanUntil(a[1]);if(!l.scan(a[1]))throw new Error("Unclosed tag at "+l.pos);C=[x,T,S,l.pos],p.push(C);if(x==="#"||x==="^")c.push(C);else if(x==="/"){if(c.length===0)throw new Error('Unopened section "'+T+'" at '+S);var A=c.pop();if(A[1]!==T)throw new Error('Unclosed section "'+A[1]+'" at '+S)}else if(x==="name"||x==="{"||x==="&")g=!0;else if(x==="="){u=T.split(n);if(u.length!==2)throw new Error("Invalid tags at "+S+": "+u.join(", "));a=E(u)}}var A=c.pop();if(A)throw new Error('Unclosed section "'+A[1]+'" at '+l.pos);return p=w(p),b(p)}var t=/\s*/,n=/\s+/,r=/\S/,i=/\s*=/,s=/\s*\}/,o=/#|\^|\/|>|\{|&|=|!/,u=RegExp.prototype.test,l=Object.prototype.toString,c=Array.isArray||function(e){return l.call(e)==="[object Array]"},p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};v.prototype.eos=function(){return this.tail===""},v.prototype.scan=function(e){var t=this.tail.match(e);return t&&t.index===0?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},v.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},m.make=function(e){return e instanceof m?e:new m(e)},m.prototype.push=function(e){return new m(e,this)},m.prototype.lookup=function(e){var t=this._cache[e];if(!t){if(e==".")t=this.view;else{var n=this;while(n){if(e.indexOf(".")>0){t=n.view;var r=e.split("."),i=0;while(t&&i<r.length)t=t[r[i++]]}else t=n.view[e];if(t!=null)break;n=n.parent}}this._cache[e]=t}return typeof t=="function"&&(t=t.call(this.view)),t},g.prototype.clearCache=function(){this._cache={},this._partialCache={}},g.prototype.compile=function(t,n){var r=this._cache[t];if(!r){var i=e.parse(t,n);r=this._cache[t]=this.compileTokens(i,t)}return r},g.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);return this._partialCache[e]=r,r},g.prototype.getPartial=function(e){return!(e in this._partialCache)&&this._loadPartial&&this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},g.prototype.compileTokens=function(e,t){var n=this;return function(r,i){if(i)if(typeof i=="function")n._loadPartial=i;else for(var s in i)n.compilePartial(s,i[s]);return y(e,n,m.make(r),t)}},g.prototype.render=function(e,t,n){return this.compile(e)(t,n)},e.name="mustache.js",e.version="0.7.2",e.tags=["{{","}}"],e.Scanner=v,e.Context=m,e.Writer=g,e.parse=S,e.escape=d;var x=new g;e.clearCache=function(){return x.clearCache()},e.compile=function(e,t){return x.compile(e,t)},e.compilePartial=function(e,t,n){return x.compilePartial(e,t,n)},e.compileTokens=function(e,t){return x.compileTokens(e,t)},e.render=function(e,t,n){return x.render(e,t,n)},e.to_html=function(t,n,r,i){var s=e.render(t,n,r);if(typeof i!="function")return s;i(s)}}),define("libs/utils",["require","exports","module","plugins/jquery.inlineedit","underscore","backbone","jquery","vendor/mustache"],function(e,t,n){e("plugins/jquery.inlineedit");var r=e("underscore"),i=e("backbone"),s=e("jquery"),o=e("vendor/mustache"),u={isMobile:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod|Android/i)||!!CCDATA.forceMobile},makeEventEmitter:function(e){return r.extend(e,i.Events),e.fire=function(e,t){this.trigger.apply(this,[e].concat(t))},e.once=function(e,t){Array.isArray(e)&&(e=e.join(" "));var n=this,r=function(){n.off(e,r),t.apply(n,arguments)};this.on(e,r)},e},isSet:function(e){return e!==undefined&&e!==null},getTimeString:function(e){var t=new Date(e*1e3),n=t.getHours(),r=t.getMinutes();e=t.getSeconds();var i=n>11?"pm":"am";return e<10&&(e="0"+e),r<10&&(r="0"+r),n===0?n=12:n>12&&(n%=12),n+":"+r+":"+e+" "+i},relativeDate:function(e){var t=new Date(e),n=(Date.now()-t.getTime())/1e3,r=Math.floor(n/86400),i=Math.floor(r/30),s=Math.floor(i/12);if(isNaN(r)||r<0)return;return i>=12?s===1?"1 year ago":s+" years ago":r>=30?i===1?"1 month ago":i+" months ago":r===0&&(n<60&&"just now"||n<120&&"1 minute ago"||n<3600&&Math.floor(n/60)+" minutes ago"||n<7200&&"1 hour ago"||n<86400&&Math.floor(n/3600)+" hours ago")||r===1&&"Yesterday"||r<7&&r+" days ago"||r<31&&Math.ceil(r/7)+" weeks ago"},trim:function(e){return e=e||"",e.replace(/^\s+|\s+$/g,"")},renderErrors:function(e){var t="";if(typeof e=="object")for(var n in e){var r=n.charAt(0).toUpperCase()+n.slice(1);t+=r+" "+e[n].join(", ")+".<br/>"}else typeof e=="string"&&(t=e);return t},makeEditable:function(e){var t=".inline_editable";e=e||s("body"),e.find(t).each(function(e,t){s(t).inlineEdit()})},submitOnChange:function(){var e=".submit_on_change";s(e).live("change",function(e){s(e.target).closest("form").submit()})},invokeIfExists:function(e,t,n){n=n||[],typeof e[t]=="function"&&e[t].apply(e,n)},inherits:function(e,t){var n=function(){};n.prototype=t.prototype,e.super_=t.prototype,e.prototype=new n,e.prototype.constructor=e},tmpl:function(e){return r.template((s("#"+e).html()||"").trim())},getLocale:function(){var e=window.location.pathname.split("/")[1],t=CCDATA.available_locales;return e.match(RegExp("^("+t+")$"))?e+"/":""},makeTestable:function(e){var t={};e.__getTestables__=function(){return t},e.testExport=function(e,n){e&&typeof e=="object"?r.extend(t,e):t[e]=n}},deepDecode:function(e){if(e&&typeof e=="object")for(var t in e){if(!e.hasOwnProperty(t))continue;e[t]=u.deepDecode(e[t])}else if(typeof e=="string")return decodeURIComponent(e);return e},extname:function(e){if(e)return(e.split(".").slice(-1)[0]||"").toLowerCase()},processTabs:function(e){var t=[];if(r.isObject(e)&&!Array.isArray(e))r.each(e,function(e,n){n={html:"index.html",css:"style.css",js:"script.js"}[n]||n,t.push({filename:n,content:e})});else{if(!Array.isArray(e))throw new Error("Wrong tabs structure");t=e}return t},objectifyForm:function(e){return this.deparam("?"+e.serialize())},deparam:function(e,t){var n=e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1"),r={},i={"true":!0,"false":!1,"null":null};return s.each(n.replace(/\+/g," ").split("&"),function(e,n){var o=n.split("="),u=decodeURIComponent(o[0]),a,f=r,l=0,c=u.split("]["),h=c.length-1;/\[/.test(c[0])&&/\]$/.test(c[h])?(c[h]=c[h].replace(/\]$/,""),c=c.shift().split("[").concat(c),h=c.length-1):h=0;if(o.length===2){a=decodeURIComponent(o[1]),t&&(a=a&&!isNaN(a)?+a:a==="undefined"?undefined:i[a]!==undefined?i[a]:a);if(h)for(;l<=h;l++)u=c[l]===""?f.length:c[l],f=f[u]=l<h?f[u]||(c[l+1]&&isNaN(c[l+1])?{}:[]):a;else s.isArray(r[u])?r[u].push(a):r[u]!==undefined?r[u]=[r[u],a]:r[u]=a}else u&&(r[u]=t?undefined:"")}),r},mustache:function(e){var t=window.JST||{},n=t[e],i={};return r.each(t,function(e,t){var n=t.split("/").slice(-1)[0];n.charAt(0)==="_"&&(i[t.split("/").slice(0,-1).join("/")+"/"+n.slice(1)]=e)}),function(e){return o.to_html(n,e,i)}},template:function(e){var t=window.JST||{},n=t[e];if(typeof n!="string")throw new Error("Missing mustache template: "+e);var r=o.compile(n);return function(e){return r(e,t)}},combineViews:function(e,t,n){var r=document.createDocumentFragment();return n||(n=t),e.forEach(function(e){r.appendChild(n.call(t,e))}),r},wrapMatch:function(e,t){var n=t.exec(e);return!n||!n[0]?e:e.replace(t,n[0].bold())},pluralize:function(e,t,n){return t=parseInt(t,10),n=n||e+"s",t===1?e:n},proxyEvents:function(e,t,n){var i=function(e){return function(){n.trigger.apply(n,[e].concat(r.toArray(arguments)))}};Array.isArray(e)||(e=[e]);if(n.listenTo&&t.listenTo)n.listenTo(t,r.object(e.map(function(e){return[e,i(e)]})));else{if(!t.on)throw new Error("No way to listen to events.");e.forEach(function(e){t.on(e,i(e))})}}};n.exports=u}),define("components/standalone_editor",["require","exports","module","vendor/react","orion","jquery","underscore","libs/utils"],function(e,t,n){var r=e("vendor/react"),i=e("orion"),s=e("jquery"),o=e("underscore"),u=e("libs/utils");n.exports=r.createClass({displayName:"exports",getInitialState:function(){return{}},_showFile:function(e){if(!e){console.warn("No file provided to code editor.");return}var t=this.refs.editorParent.getDOMNode();this.state.editor!=undefined&&this.state.editor.destroy();var n=i({parent:t});n.getModel().addEventListener("Changed",o.debounce(this.onModelChanged,200)),n.getTextView().addEventListener("Selection",this.onSelectionChanged),n.setText(e.content),this.setState({editor:n})},componentDidMount:function(){var e=this.props.presenter.files;e.length>0&&this._showFile(e[0]),this.setState({activeTab:0})},componentDidUpdate:function(e,t){var n=this.props.presenter.files,r=e.presenter.files;if(n.length>0&&JSON.stringify(n)!=JSON.stringify(r)||this.state.shouldUpdateEditor){var i=this.state.activeTab<n.length?this.state.activeTab:0;this._showFile(n[i]),this.setState({shouldUpdateEditor:!1})}},onModelChanged:function(e){var t=this.state.editor.getText(),n=this.props.presenter.files;n[this.state.activeTab].content=t,this.props.broadcast.update({files:n})},onSelectionChanged:function(e){},handleTabClick:function(e){this.setState({activeTab:e,shouldUpdateEditor:!0})},submitClick:function(e){this.props.broadcast.submit()},render:function(){var e=[],t="html";if(this.props.presenter.files.length>0){for(var n=0;n<this.props.presenter.files.length;n++){var i=r.DOM.button({className:"button",onClick:this.handleTabClick.bind(this,n)},this.props.presenter.files[n].filename);e.push(i)}t=u.extname(this.props.presenter.files[this.state.activeTab||0].filename)}return r.DOM.div({className:"editor"},e,r.DOM.button({className:"button",onClick:this.submitClick},"submit"),r.DOM.pre({className:"orion-editor hljs-snippet--theme-ace-dark",ref:"editorParent","data-editor-lang":t,"data-editor-tab-size":"2","data-editor-full-selection":"false","data-editor-show-annotation-ruler":"false","data-editor-show-overview-ruler":"false","data-editor-show-lines-ruler":"true","data-editor-show-folding-ruler":"false","data-editor-wrappable":"true","data-editor-wrap-mode":"true"}))}})}),define("components/francine_image",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react");n.exports=r.createClass({displayName:"exports",getInitialState:function(){return this.props},render:function(){return r.DOM.div({className:"francine_image"},r.DOM.img({src:this.props.presenter.url,className:"fit-full"}))}})}),define("components/accordion",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react"),i=r.DOM;n.exports=r.createClass({displayName:"exports",getInitialState:function(){var e={};for(var t=0;t<this.props.content.length;t++)t==0?e[t]=!0:e[t]=!1;return{isVisible:e}},handleClick:function(e){var t=this.state.isVisible;if(t[e])t[e]=!1;else for(var n=0;n<this.props.content.length;n++)n==e?t[n]=!0:t[n]=!1;this.setState({isVisible:t})},render:function(){var e=[];for(var t=0;t<this.props.content.length;t++){var n=this.state.isVisible[t],i=n?"-":"+",s=r.addons.classSet,o=s({"accordion-section-body":!0,"accordion-visible":n,"accordion-hidden":!n}),u=r.DOM.div({className:"accordion-section"},r.DOM.div({className:"accordion-section-heading",onClick:this.handleClick.bind(this,t)},this.props.content[t].heading,r.DOM.div({className:"accordion-icon"},i)),r.DOM.div({className:o},this.props.content[t].content));e.push(u)}return r.DOM.div({className:"accordion"},e)}})}),define("components/support_buttons",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react"),i=r.DOM;n.exports=r.createClass({displayName:"exports",render:function(){return r.DOM.div(null,r.DOM.p(null,"Still struggling? Try the Glossary and the Q&A forums to get more help or dig deeper into the lesson."),r.DOM.div(null,r.DOM.button({className:"button"},"Glossary")," ",r.DOM.button({className:"button"},"Q&A Forums")))}})}),define("vendor/markdown",["require","exports","module"],function(e,t,n){var r={};(function(e){function n(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function o(e){var t=0,n=-1;while((n=e.indexOf("\n",n+1))!==-1)t++;return t}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function f(e){if(typeof e=="string")return a(e);var t=e.shift(),n={},r=[];e.length&&typeof e[0]=="object"&&!(e[0]instanceof Array)&&(n=e.shift());while(e.length)r.push(f(e.shift()));var i="";for(var s in n)i+=" "+s+'="'+a(n[s])+'"';return t==="img"||t==="br"||t==="hr"?"<"+t+i+"/>":"<"+t+i+">"+r.join("")+"</"+t+">"}function l(e,t,n){var r;n=n||{};var i=e.slice(0);typeof n.preprocessTreeNode=="function"&&(i=n.preprocessTreeNode(i,t));var s=u(i);if(s){i[1]={};for(r in s)i[1][r]=s[r];s=i[1]}if(typeof i=="string")return i;switch(i[0]){case"header":i[0]="h"+i[1].level,delete i[1].level;break;case"bulletlist":i[0]="ul";break;case"numberlist":i[0]="ol";break;case"listitem":i[0]="li";break;case"para":i[0]="p";break;case"markdown":i[0]="html",s&&delete s.references;break;case"code_block":i[0]="pre",r=s?2:1;var o=["code"];o.push.apply(o,i.splice(r,i.length-r)),i[r]=o;break;case"inlinecode":i[0]="code";break;case"img":i[1].src=i[1].href,delete i[1].href;break;case"linebreak":i[0]="br";break;case"link":i[0]="a";break;case"link_ref":i[0]="a";var a=t[s.ref];if(!a)return s.original;delete s.ref,s.href=a.href,a.title&&(s.title=a.title),delete s.original;break;case"img_ref":i[0]="img";var a=t[s.ref];if(!a)return s.original;delete s.ref,s.src=a.href,a.title&&(s.title=a.title),delete s.original}r=1;if(s){for(var f in i[1]){r=2;break}r===1&&i.splice(r,1)}for(;r<i.length;++r)i[r]=l(i[r],t,n);return i}function c(e){var t=u(e)?2:1;while(t<e.length)typeof e[t]=="string"?t+1<e.length&&typeof e[t+1]=="string"?e[t]+=e.splice(t+1,1)[0]:++t:(c(e[t]),++t)}function g(e,t){function i(e){this.len_after=e,this.name="close_"+t}var n=e+"_state",r=e==="strong"?"em_state":"strong_state";return function(s){if(this[n][0]===t)return this[n].shift(),[s.length,new i(s.length-t.length)];var o=this[r].slice(),u=this[n].slice();this[n].unshift(t);var a=this.processInline(s.substr(t.length)),f=a[a.length-1],l=this[n].shift();if(f instanceof i){a.pop();var c=s.length-f.len_after;return[c,[e].concat(a)]}return this[r]=o,this[n]=u,[t.length,t]}}function b(e){var t=e.split(""),n=[""],r=!1;while(t.length){var i=t.shift();switch(i){case" ":r?n[n.length-1]+=i:n.push("");break;case"'":case'"':r=!r;break;case"\\":i=t.shift();default:n[n.length-1]+=i}}return n}var t={};t.mk_block=function(e,t,r){arguments.length===1&&(t="\n\n");var i=new String(e);return i.trailing=t,i.toSource=n,r!==undefined&&(i.lineNumber=r),i};var r=t.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};Array.prototype.forEach?t.forEach=function(t,n,r){return t.forEach(n,r)}:t.forEach=function(t,n,r){for(var i=0;i<t.length;i++)n.call(r||t,t[i],i,t)},t.isEmpty=function(t){for(var n in t)if(hasOwnProperty.call(t,n))return!1;return!0},t.extract_attr=function(t){return r(t)&&t.length>1&&typeof t[1]=="object"&&!r(t[1])?t[1]:undefined};var i=function(e){switch(typeof e){case"undefined":this.dialect=i.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in i.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=i.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};i.dialects={};var s=i.mk_block=t.mk_block,r=t.isArray;i.parse=function(e,t){var n=new i(t);return n.toTree(e)},i.prototype.split_blocks=function(t){t=t.replace(/(\r\n|\n|\r)/g,"\n");var n=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,r=[],i,u=1;(i=/^(\s*\n)/.exec(t))!==null&&(u+=o(i[0]),n.lastIndex=i[0].length);while((i=n.exec(t))!==null)i[2]==="\n#"&&(i[2]="\n",n.lastIndex--),r.push(s(i[1],i[2],u)),u+=o(i[0]);return r},i.prototype.processBlock=function(t,n){var i=this.dialect.block,s=i.__order__;if("__call__"in i)return i.__call__.call(this,t,n);for(var o=0;o<s.length;o++){var u=i[s[o]].call(this,t,n);if(u)return(!r(u)||u.length>0&&!r(u[0]))&&this.debug(s[o],"didn't return a proper array"),u}return[]},i.prototype.processInline=function(t){return this.dialect.inline.__call__.call(this,String(t))},i.prototype.toTree=function(t,n){var r=t instanceof Array?t:this.split_blocks(t),i=this.tree;try{this.tree=n||this.tree||["markdown"];e:while(r.length){var s=this.processBlock(r.shift(),r);if(!s.length)continue e;this.tree.push.apply(this.tree,s)}return this.tree}finally{n&&(this.tree=i)}},i.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),typeof print!="undefined"&&print.apply(print,e),typeof console!="undefined"&&typeof console.log!="undefined"&&console.log.apply(null,e)},i.prototype.loop_re_over_block=function(e,t,n){var r,i=t.valueOf();while(i.length&&(r=e.exec(i))!==null)i=i.substr(r[0].length),n.call(this,r);return i},i.buildBlockOrder=function(e){var t=[];for(var n in e){if(n==="__order__"||n==="__call__")continue;t.push(n)}e.__order__=t},i.buildInlinePatterns=function(e){var t=[];for(var n in e){if(n.match(/^__.*__$/))continue;var r=n.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");t.push(n.length===1?r:"(?:"+r+")")}t=t.join("|"),e.__patterns__=t;var i=e.__call__;e.__call__=function(e,n){return n!==undefined?i.call(this,e,n):i.call(this,e,t)}};var u=t.extract_attr;i.renderJsonML=function(e,t){t=t||{},t.root=t.root||!1;var n=[];if(t.root)n.push(f(e));else{e.shift(),e.length&&typeof e[0]=="object"&&!(e[0]instanceof Array)&&e.shift();while(e.length)n.push(f(e.shift()))}return n.join("\n\n")},i.toHTMLTree=function(t,n,r){typeof t=="string"&&(t=this.parse(t,n));var i=u(t),s={};i&&i.references&&(s=i.references);var o=l(t,s,r);return c(o),o},i.toHTML=function(t,n,r){var i=this.toHTMLTree(t,n,r);return this.renderJsonML(i)};var h={};h.inline_until_char=function(e,t){var n=0,r=[];for(;;){if(e.charAt(n)===t)return n++,[n,r];if(n>=e.length)return null;var i=this.dialect.inline.__oneElement__.call(this,e.substr(n));n+=i[0],r.push.apply(r,i.slice(1))}},h.subclassDialect=function(e){function t(){}function n(){}return t.prototype=e.block,n.prototype=e.inline,{block:new t,inline:new n}};var p=t.forEach,u=t.extract_attr,s=t.mk_block,d=t.isEmpty,v=h.inline_until_char,m={block:{atxHeader:function(t,n){var r=t.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!r)return undefined;var i=["header",{level:r[1].length}];return Array.prototype.push.apply(i,this.processInline(r[2])),r[0].length<t.length&&n.unshift(s(t.substr(r[0].length),t.trailing,t.lineNumber+2)),[i]},setextHeader:function(t,n){var r=t.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!r)return undefined;var i=r[2]==="="?1:2,o=["header",{level:i},r[1]];return r[0].length<t.length&&n.unshift(s(t.substr(r[0].length),t.trailing,t.lineNumber+2)),[o]},code:function(t,n){var r=[],i=/^(?: {0,3}\t| {4})(.*)\n?/;if(!t.match(i))return undefined;e:do{var o=this.loop_re_over_block(i,t.valueOf(),function(e){r.push(e[1])});if(o.length){n.unshift(s(o,t.trailing));break e}if(!n.length)break e;if(!n[0].match(i))break e;r.push(t.trailing.replace(/[^\n]/g,"").substring(2)),t=n.shift()}while(!0);return[["code_block",r.join("\n")]]},horizRule:function(t,n){var r=t.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!r)return undefined;var i=[["hr"]];if(r[1]){var o=s(r[1],"",t.lineNumber);i.unshift.apply(i,this.toTree(o,[]))}return r[3]&&n.unshift(s(r[3],t.trailing,t.lineNumber+1)),i},lists:function(){function i(t){return new RegExp("(?:^("+r+"{0,"+t+"} {0,3})("+e+")\\s+)|"+"(^"+r+"{0,"+(t-1)+"}[ ]{0,4})")}function o(e){return e.replace(/ {0,3}\t/g,"    ")}function u(e,t,n,r){if(t){e.push(["para"].concat(n));return}var i=e[e.length-1]instanceof Array&&e[e.length-1][0]==="para"?e[e.length-1]:e;r&&e.length>1&&n.unshift(r);for(var s=0;s<n.length;s++){var o=n[s],u=typeof o=="string";u&&i.length>1&&typeof i[i.length-1]=="string"?i[i.length-1]+=o:i.push(o)}}function a(e,t){var n=new RegExp("^("+r+"{"+e+"}.*?\\n?)*$"),i=new RegExp("^"+r+"{"+e+"}","gm"),o=[];while(t.length>0){if(!n.exec(t[0]))break;var u=t.shift(),a=u.replace(i,"");o.push(s(a,u.trailing,u.lineNumber))}return o}function f(e,t,n){var r=e.list,i=r[r.length-1];if(i[1]instanceof Array&&i[1][0]==="para")return;if(t+1===n.length)i.push(["para"].concat(i.splice(1,i.length-1)));else{var s=i.pop();i.push(["para"].concat(i.splice(1,i.length-1)),s)}}var e="[*+-]|\\d+\\.",t=/[*+-]/,n=new RegExp("^( {0,3})("+e+")[ 	]+"),r="(?: {0,3}\\t| {4})";return function(e,r){function l(e){var n=t.exec(e[2])?["bulletlist"]:["numberlist"];return c.push({list:n,indent:e[1]}),n}var s=e.match(n);if(!s)return undefined;var c=[],h=l(s),d,v=!1,m=[c[0].list],g;e:for(;;){var y=e.split(/(?=\n)/),b="",w="";for(var E=0;E<y.length;E++){w="";var S=y[E].replace(/^\n/,function(e){return w=e,""}),x=i(c.length);s=S.match(x);if(s[1]!==undefined){b.length&&(u(d,v,this.processInline(b),w),v=!1,b=""),s[1]=o(s[1]);var T=Math.floor(s[1].length/4)+1;if(T>c.length)h=l(s),d.push(h),d=h[1]=["listitem"];else{var N=!1;for(g=0;g<c.length;g++){if(c[g].indent!==s[1])continue;h=c[g].list,c.splice(g+1,c.length-(g+1)),N=!0;break}N||(T++,T<=c.length?(c.splice(T,c.length-T),h=c[T-1].list):(h=l(s),d.push(h))),d=["listitem"],h.push(d)}w=""}S.length>s[0].length&&(b+=w+S.substr(s[0].length))}b.length&&(u(d,v,this.processInline(b),w),v=!1,b="");var C=a(c.length,r);C.length>0&&(p(c,f,this),d.push.apply(d,this.toTree(C,[])));var k=r[0]&&r[0].valueOf()||"";if(k.match(n)||k.match(/^ /)){e=r.shift();var L=this.dialect.block.horizRule(e,r);if(L){m.push.apply(m,L);break}p(c,f,this),v=!0;continue e}break}return m}}(),blockquote:function(t,n){if(!t.match(/^>/m))return undefined;var r=[];if(t[0]!==">"){var i=t.split(/\n/),o=[],a=t.lineNumber;while(i.length&&i[0][0]!==">")o.push(i.shift()),a++;var f=s(o.join("\n"),"\n",t.lineNumber);r.push.apply(r,this.processBlock(f,[])),t=s(i.join("\n"),t.trailing,a)}while(n.length&&n[0][0]===">"){var l=n.shift();t=s(t+t.trailing+l,l.trailing,t.lineNumber)}var c=t.replace(/^> ?/gm,""),h=this.tree,p=this.toTree(c,["blockquote"]),v=u(p);return v&&v.references&&(delete v.references,d(v)&&p.splice(1,1)),r.push(p),r},referenceDefn:function(t,n){var r=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!t.match(r))return undefined;u(this.tree)||this.tree.splice(1,0,{});var i=u(this.tree);i.references===undefined&&(i.references={});var o=this.loop_re_over_block(r,t,function(e){e[2]&&e[2][0]==="<"&&e[2][e[2].length-1]===">"&&(e[2]=e[2].substring(1,e[2].length-1));var t=i.references[e[1].toLowerCase()]={href:e[2]};e[4]!==undefined?t.title=e[4]:e[5]!==undefined&&(t.title=e[5])});return o.length&&n.unshift(s(o,t.trailing)),[]},para:function(t){return[["para"].concat(this.processInline(t))]}},inline:{__oneElement__:function(t,n,r){var i,s;n=n||this.dialect.inline.__patterns__;var o=new RegExp("([\\s\\S]*?)("+(n.source||n)+")");i=o.exec(t);if(!i)return[t.length,t];if(i[1])return[i[1].length,i[1]];var s;return i[2]in this.dialect.inline&&(s=this.dialect.inline[i[2]].call(this,t.substr(i.index),i,r||[])),s=s||[i[2].length,i[2]],s},__call__:function(t,n){function s(e){typeof e=="string"&&typeof r[r.length-1]=="string"?r[r.length-1]+=e:r.push(e)}var r=[],i;while(t.length>0)i=this.dialect.inline.__oneElement__.call(this,t,n,r),t=t.substr(i.shift()),p(i,s);return r},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(t){return this.dialect.inline.__escape__.exec(t)?[2,t.charAt(1)]:[1,"\\"]},"![":function(t){var n=t.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(n){n[2]&&n[2][0]==="<"&&n[2][n[2].length-1]===">"&&(n[2]=n[2].substring(1,n[2].length-1)),n[2]=this.dialect.inline.__call__.call(this,n[2],/\\/)[0];var r={alt:n[1],href:n[2]||""};return n[4]!==undefined&&(r.title=n[4]),[n[0].length,["img",r]]}return n=t.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),n?[n[0].length,["img_ref",{alt:n[1],ref:n[2].toLowerCase(),original:n[0]}]]:[2,"!["]},"[":function w(e){var t=String(e),n=v.call(this,e.substr(1),"]");if(!n)return[1,"["];var r=1+n[0],i=n[1],w,s;e=e.substr(r);var o=e.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(o){var u=o[1];r+=o[0].length,u&&u[0]==="<"&&u[u.length-1]===">"&&(u=u.substring(1,u.length-1));if(!o[3]){var a=1;for(var f=0;f<u.length;f++)switch(u[f]){case"(":a++;break;case")":--a===0&&(r-=u.length-f,u=u.substring(0,f))}}return u=this.dialect.inline.__call__.call(this,u,/\\/)[0],s={href:u||""},o[3]!==undefined&&(s.title=o[3]),w=["link",s].concat(i),[r,w]}return o=e.match(/^\s*\[(.*?)\]/),o?(r+=o[0].length,s={ref:(o[1]||String(i)).toLowerCase(),original:t.substr(0,r)},w=["link_ref",s].concat(i),[r,w]):i.length===1&&typeof i[0]=="string"?(s={ref:i[0].toLowerCase(),original:t.substr(0,r)},w=["link_ref",s,i[0]],[r,w]):[1,"["]},"<":function(t){var n;return(n=t.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))!==null?n[3]?[n[0].length,["link",{href:"mailto:"+n[3]},n[3]]]:n[2]==="mailto"?[n[0].length,["link",{href:n[1]},n[1].substr("mailto:".length)]]:[n[0].length,["link",{href:n[1]},n[1]]]:[1,"<"]},"`":function(t){var n=t.match(/(`+)(([\s\S]*?)\1)/);return n&&n[2]?[n[1].length+n[2].length,["inlinecode",n[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}}};m.inline["**"]=g("strong","**"),m.inline.__=g("strong","__"),m.inline["*"]=g("em","*"),m.inline._=g("em","_"),i.dialects.Gruber=m,i.buildBlockOrder(i.dialects.Gruber.block),i.buildInlinePatterns(i.dialects.Gruber.inline);var y=h.subclassDialect(m),u=t.extract_attr,p=t.forEach;y.processMetaHash=function(t){var n=b(t),r={};for(var i=0;i<n.length;++i)if(/^#/.test(n[i]))r.id=n[i].substring(1);else if(/^\./.test(n[i]))r["class"]?r["class"]=r["class"]+n[i].replace(/./," "):r["class"]=n[i].substring(1);else if(/\=/.test(n[i])){var s=n[i].split(/\=/);r[s[0]]=s[1]}return r},y.block.document_meta=function(t){if(t.lineNumber>1)return undefined;if(!t.match(/^(?:\w+:.*\n)*\w+:.*$/))return undefined;u(this.tree)||this.tree.splice(1,0,{});var n=t.split(/\n/);for(var r in n){var i=n[r].match(/(\w+):\s*(.*)$/),s=i[1].toLowerCase(),o=i[2];this.tree[1][s]=o}return[]},y.block.block_meta=function(t){var n=t.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!n)return undefined;var r=this.dialect.processMetaHash(n[2]),i;if(n[1]===""){var s=this.tree[this.tree.length-1];i=u(s);if(typeof s=="string")return undefined;i||(i={},s.splice(1,0,i));for(var o in r)i[o]=r[o];return[]}var a=t.replace(/\n.*$/,""),f=this.processBlock(a,[]);i=u(f[0]),i||(i={},f[0].splice(1,0,i));for(var o in r)i[o]=r[o];return f},y.block.definition_list=function(t,n){var r=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,i=["dl"],s,o;if(!(o=t.match(r)))return undefined;var u=[t];while(n.length&&r.exec(n[0]))u.push(n.shift());for(var a=0;a<u.length;++a){var o=u[a].match(r),f=o[1].replace(/\n$/,"").split(/\n/),l=o[2].split(/\n:\s+/);for(s=0;s<f.length;++s)i.push(["dt",f[s]]);for(s=0;s<l.length;++s)i.push(["dd"].concat(this.processInline(l[s].replace(/(\n)\s+/,"$1"))))}return[i]},y.block.table=function E(e){var t=function(e,t){t=t||"\\s",t.match(/^[\\|\[\]{}?*.+^$]$/)&&(t="\\"+t);var n=[],r=new RegExp("^((?:\\\\.|[^\\\\"+t+"])*)"+t+"(.*)"),i;while(i=e.match(r))n.push(i[1]),e=i[2];return n.push(e),n},n=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,r=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/,i,s;if(s=e.match(n))s[3]=s[3].replace(/^\s*\|/gm,"");else if(!(s=e.match(r)))return undefined;var E=["table",["thead",["tr"]],["tbody"]];s[2]=s[2].replace(/\|\s*$/,"").split("|");var o=[];p(s[2],function(e){e.match(/^\s*-+:\s*$/)?o.push({align:"right"}):e.match(/^\s*:-+\s*$/)?o.push({align:"left"}):e.match(/^\s*:-+:\s*$/)?o.push({align:"center"}):o.push({})}),s[1]=t(s[1].replace(/\|\s*$/,""),"|");for(i=0;i<s[1].length;i++)E[1][1].push(["th",o[i]||{}].concat(this.processInline(s[1][i].trim())));return p(s[3].replace(/\|\s*$/mg,"").split("\n"),function(e){var n=["tr"];e=t(e,"|");for(i=0;i<e.length;i++)n.push(["td",o[i]||{}].concat(this.processInline(e[i].trim())));E[2].push(n)},this),[E]},y.inline["{:"]=function(t,n,r){if(!r.length)return[2,"{:"];var i=r[r.length-1];if(typeof i=="string")return[2,"{:"];var s=t.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!s)return[2,"{:"];var o=this.dialect.processMetaHash(s[1]),a=u(i);a||(a={},i.splice(1,0,a));for(var f in o)a[f]=o[f];return[s[0].length,""]},i.dialects.Maruku=y,i.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,i.buildBlockOrder(i.dialects.Maruku.block),i.buildInlinePatterns(i.dialects.Maruku.inline),e.Markdown=i,e.parse=i.parse,e.toHTML=i.toHTML,e.toHTMLTree=i.toHTMLTree,e.renderJsonML=i.renderJsonML})(r),n.exports=r}),define("components/narrative",["require","exports","module","vendor/react","components/accordion","components/support_buttons","vendor/markdown"],function(e,t,n){var r=e("vendor/react"),i=e("components/accordion"),s=e("components/support_buttons"),o=e("vendor/markdown");n.exports=r.createClass({displayName:"exports",getInitialState:function(){return this.props},render:function(){var e="",t="",n="",u=this.props.presenter,e=u.heading,n=u.instructions;n&&(n=o.toHTML(n));var t=o.toHTML(u.content),a;this.props.presenter.SCTresult?a=r.DOM.div(null,r.DOM.h1(null,"Hooray! You passed!"),r.DOM.img({src:"http://i.giphy.com/13eiswTaTM0O8E.gif"})):this.props.presenter.SCTerror!==undefined&&(a=r.DOM.div(null,r.DOM.h1(null,"Error: ",this.props.presenter.SCTerror," "),r.DOM.img({src:"http://i.giphy.com/Pch8FiF08bc1G.gif"})));var f=r.DOM.div(null,a,s(null),";"),l=[{heading:"Learn",content:r.DOM.span({dangerouslySetInnerHTML:{__html:t}})}];return n&&n.length>0&&(l.push({heading:"Instructions",content:r.DOM.span({dangerouslySetInnerHTML:{__html:n}})}),l.push({heading:"Support",content:f})),r.DOM.div({className:"narrative--markdown"},r.DOM.div({className:"narrative-header"},r.DOM.h2(null,e)),i({content:l}))}})}),define("components/highlight",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react");n.exports=r.createClass({displayName:"exports",render:function(){return r.DOM.div({className:"highlight"},r.DOM.p(null,"Highlight stub component"))}})}),define("components/tests/Terminal",["require","exports","module"],function(e,t,n){n.exports={didRunOneOf:function(e){for(var t=0;t<e.length;t++)if(this.didRunCommand(e[t]))return!0},didRunCommand:function(e){return this.state.history.some(function(t){return t.input==e},this)}}}),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j=function(e,t){return function(){return e.apply(t,arguments)}},F=[].slice;e=jQuery,D=0,P=1,H=2,T=13,O=9,E=46,w=8,C=37,A=39,M=38,S=40,N=36,x=35,L=33,k=34,a="jqconsole-",i=""+a+"cursor",s=""+a+"header",f=""+a+"prompt",u=""+a+"old-prompt",o=""+a+"input",r=""+a+"blurred",y="keypress",v="<span/>",p="<div/>",d=":empty",_="\n",h=">>> ",c="... ",l=2,n=""+a+"ansi-",m="",g=/\[(\d*)(?:;(\d*))*m/,t=function(){function e(){this.stylize=j(this.stylize,this),this._closeSpan=j(this._closeSpan,this),this._openSpan=j(this._openSpan,this),this.getClasses=j(this.getClasses,this),this._style=j(this._style,this),this._color=j(this._color,this),this._remove=j(this._remove,this),this._append=j(this._append,this),this.klasses=[]}return e.prototype.COLORS=["black","red","green","yellow","blue","magenta","cyan","white"],e.prototype._append=function(e){e=""+n+e;if(this.klasses.indexOf(e)===-1)return this.klasses.push(e)},e.prototype._remove=function(){var e,t,r,i,s,o;r=1<=arguments.length?F.call(arguments,0):[],o=[];for(i=0,s=r.length;i<s;i++)t=r[i],t==="fonts"||t==="color"||t==="background-color"?o.push(this.klasses=function(){var r,i,s,o;s=this.klasses,o=[];for(r=0,i=s.length;r<i;r++)e=s[r],e.indexOf(t)!==n.length&&o.push(e);return o}.call(this)):(t=""+n+t,o.push(this.klasses=function(){var n,r,i,s;i=this.klasses,s=[];for(n=0,r=i.length;n<r;n++)e=i[n],e!==t&&s.push(e);return s}.call(this)));return o},e.prototype._color=function(e){return this.COLORS[e]},e.prototype._style=function(e){e===""&&(e=0),e=parseInt(e);if(isNaN(e))return;switch(e){case 0:return this.klasses=[];case 1:return this._append("bold");case 2:return this._append("lighter");case 3:return this._append("italic");case 4:return this._append("underline");case 5:return this._append("blink");case 6:return this._append("blink-rapid");case 8:return this._append("hidden");case 9:return this._append("line-through");case 10:return this._remove("fonts");case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:return this._remove("fonts"),this._append("fonts-"+(e-10));case 20:return this._append("fraktur");case 21:return this._remove("bold","lighter");case 22:return this._remove("bold","lighter");case 23:return this._remove("italic","fraktur");case 24:return this._remove("underline");case 25:return this._remove("blink","blink-rapid");case 28:return this._remove("hidden");case 29:return this._remove("line-through");case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:return this._remove("color"),this._append("color-"+this._color(e-30));case 39:return this._remove("color");case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:return this._remove("background-color"),this._append("background-color-"+this._color(e-40));case 49:return this._remove("background-color");case 51:return this._append("framed");case 53:return this._append("overline");case 54:return this._remove("framed");case 55:return this._remove("overline")}},e.prototype.getClasses=function(){return this.klasses.join(" ")},e.prototype._openSpan=function(e){return'<span class="'+this.getClasses()+'">'+e},e.prototype._closeSpan=function(e){return""+e+"</span>"},e.prototype.stylize=function(e){var t,n,r,i,s,o;e=this._openSpan(e),r=0;while((r=e.indexOf(m,r))&&r!==-1)if(n=e.slice(r).match(g)){o=n.slice(1);for(i=0,s=o.length;i<s;i++)t=o[i],this._style(t);e=this._closeSpan(e.slice(0,r))+this._openSpan(e.slice(r+1+n[0].length))}else r++;return this._closeSpan(e)},e}(),B=function(e,t){return'<span class="'+e+'">'+(t||"")+"</span>"},b=function(){function n(n,r,i,o){this.container=n,this._HideComposition=j(this._HideComposition,this),this._ShowComposition=j(this._ShowComposition,this),this._UpdateComposition=j(this._UpdateComposition,this),this._EndComposition=j(this._EndComposition,this),this._StartComposition=j(this._StartComposition,this),this._CheckComposition=j(this._CheckComposition,this),this._ProcessMatch=j(this._ProcessMatch,this),this._HandleKey=j(this._HandleKey,this),this._HandleChar=j(this._HandleChar,this),this.isMobile=!!navigator.userAgent.match(/iPhone|iPad|iPod|Android/i),this.isIos=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),this.isAndroid=!!navigator.userAgent.match(/Android/i),this.$window=e(window),this.header=r||"",this.prompt_label_main=typeof i=="string"?i:h,this.prompt_label_continue=o||c,this.indent_width=l,this.state=P,this.input_queue=[],this.input_callback=null,this.multiline_callback=null,this.history=[],this.history_index=0,this.history_new="",this.history_active=!1,this.shortcuts={},this.$console=e('<pre class="jqconsole"/>').appendTo(this.container),this.$console.css({position:"absolute",top:0,bottom:0,right:0,left:0,margin:0,overflow:"auto"}),this.$console_focused=!0,this.$input_container=e(p).appendTo(this.container),this.$input_container.css({position:"relative",width:1,height:0,top:-999999,overflow:"hidden"}),this.$input_source=e("<textarea/>"),this.$input_source.attr({wrap:"off",autocapitalize:"off",autocorrect:"off",spellcheck:"false",autocomplete:"off"}),this.$input_source.css({position:"absolute",width:2}),this.$input_source.appendTo(this.$input_container),this.$composition=e(p),this.$composition.addClass(""+a+"composition"),this.$composition.css({display:"inline",position:"relative"}),this.matchings={openings:{},closings:{},clss:[]},this.ansi=new t,this._InitPrompt(),this._SetupEvents(),this.Write(this.header,s),e(this.container).data("jqconsole",this)}return n.prototype.ResetHistory=function(){return this.SetHistory([])},n.prototype.ResetShortcuts=function(){return this.shortcuts={}},n.prototype.ResetMatchings=function(){return this.matchings={openings:{},closings:{},clss:[]}},n.prototype.Reset=function(){return this.state!==P&&this.ClearPromptText(!0),this.state=P,this.input_queue=[],this.input_callback=null,this.multiline_callback=null,this.ResetHistory(),this.ResetShortcuts(),this.ResetMatchings(),this.$prompt.detach(),this.$input_container.detach(),this.$console.html(""),this.$prompt.appendTo(this.$console),this.$input_container.appendTo(this.container),this.Write(this.header,s),void 0},n.prototype.GetHistory=function(){return this.history},n.prototype.SetHistory=function(e){return this.history=e.slice(),this.history_index=this.history.length},n.prototype._CheckKeyCode=function(e){isNaN(e)?e=e.charCodeAt(0):e=parseInt(e,10);if(0<e&&e<256&&!isNaN(e))return e;throw new Error("Key code must be a number between 0 and 256 exclusive.")},n.prototype._LetterCaseHelper=function(e,t){t(e),65<=e&&e<=90&&t(e+32);if(97<=e&&e<=122)return t(e-32)},n.prototype.RegisterShortcut=function(e,t){var n,r=this;e=this._CheckKeyCode(e);if(typeof t!="function")throw new Error("Callback must be a function, not "+t+".");return n=function(e){return e in r.shortcuts||(r.shortcuts[e]=[]),r.shortcuts[e].push(t)},this._LetterCaseHelper(e,n),void 0},n.prototype.UnRegisterShortcut=function(e,t){var n,r=this;return e=this._CheckKeyCode(e),n=function(e){if(e in r.shortcuts)return t?r.shortcuts[e].splice(r.shortcuts[e].indexOf(t),1):delete r.shortcuts[e]},this._LetterCaseHelper(e,n),void 0},n.prototype.GetColumn=function(){var e;return this.$prompt_cursor.text(""),e=this.$console.text().split(_),this.$prompt_cursor.html("&nbsp;"),e[e.length-1].length},n.prototype.GetLine=function(){return this.$console.text().split(_).length-1},n.prototype.ClearPromptText=function(e){if(this.state===P)throw new Error("ClearPromptText() is not allowed in output state.");return this.$prompt_before.html(""),this.$prompt_after.html(""),this.$prompt_label.text(e?"":this._SelectPromptLabel(!1)),this.$prompt_left.text(""),this.$prompt_right.text(""),void 0},n.prototype.GetPromptText=function(t){var n,r,i,s,o;if(this.state===P)throw new Error("GetPromptText() is not allowed in output state.");return t?(this.$prompt_cursor.text(""),o=this.$prompt.text(),this.$prompt_cursor.html("&nbsp;"),o):(s=function(t){var n;return n=[],t.children().each(function(){return n.push(e(this).children().last().text())}),n.join(_)},r=s(this.$prompt_before),r&&(r+=_),i=this.$prompt_left.text()+this.$prompt_right.text(),n=s(this.$prompt_after),n&&(n=_+n),r+i+n)},n.prototype.SetPromptText=function(e){if(this.state===P)throw new Error("SetPromptText() is not allowed in output state.");return this.ClearPromptText(!1),this._AppendPromptText(e),this._ScrollToEnd(),void 0},n.prototype.SetPromptLabel=function(e,t){return this.prompt_label_main=e,t!=null&&(this.prompt_label_continue=t),void 0},n.prototype.Write=function(t,n,r){var i;return r==null&&(r=!0),r&&(t=this.ansi.stylize(e(v).text(t).html())),i=e(v).html(t),n!=null&&i.addClass(n),this.Append(i)},n.prototype.Append=function(t){var n;return n=e(t).insertBefore(this.$prompt),this._ScrollToEnd(),this.$prompt_cursor.detach().insertAfter(this.$prompt_left),n},n.prototype.Input=function(e){var t,n,r,i,s=this;if(this.state===H)r=this.input_callback,i=this.multiline_callback,n=this.history_active,t=this.async_multiline,this.AbortPrompt(),this.input_queue.unshift(function(){return s.Prompt(n,r,i,t)});else if(this.state!==P){this.input_queue.push(function(){return s.Input(e)});return}return this.history_active=!1,this.input_callback=e,this.multiline_callback=null,this.state=D,this.$prompt.attr("class",o),this.$prompt_label.text(this._SelectPromptLabel(!1)),this.Focus(),this._ScrollToEnd(),void 0},n.prototype.Prompt=function(e,t,n,r){var i=this;if(this.state!==P){this.input_queue.push(function(){return i.Prompt(e,t,n,r)});return}return this.history_active=e,this.input_callback=t,this.multiline_callback=n,this.async_multiline=r,this.state=H,this.$prompt.attr("class",f+" "+this.ansi.getClasses()),this.$prompt_label.text(this._SelectPromptLabel(!1)),this.Focus(),this._ScrollToEnd(),void 0},n.prototype.AbortPrompt=function(){if(this.state!==H)throw new Error("Cannot abort prompt when not in prompt state.");return this.Write(this.GetPromptText(!0)+_,u),this.ClearPromptText(!0),this.state=P,this.input_callback=this.multiline_callback=null,this._CheckInputQueue(),void 0},n.prototype.Focus=function(){return this.IsDisabled()||this.$input_source.focus(),void 0},n.prototype.SetIndentWidth=function(e){return this.indent_width=e},n.prototype.GetIndentWidth=function(){return this.indent_width},n.prototype.RegisterMatching=function(e,t,n){var r;return r={opening_char:e,closing_char:t,cls:n},this.matchings.clss.push(n),this.matchings.openings[e]=r,this.matchings.closings[t]=r},n.prototype.UnRegisterMatching=function(e,t){var n;return n=this.matchings.openings[e].cls,delete this.matchings.openings[e],delete this.matchings.closings[t],this.matchings.clss.splice(this.matchings.clss.indexOf(n),1)},n.prototype.Dump=function(){var t,n;return t=this.$console.find("."+s).nextUntil("."+f),function(){var r,i,s;s=[];for(r=0,i=t.length;r<i;r++)n=t[r],e(n).is("."+u)?s.push(e(n).text().replace(/^\s+/,">>> ")):s.push(e(n).text());return s}().join(" ")},n.prototype.GetState=function(){return this.state===D?"input":this.state===P?"output":"prompt"},n.prototype.Disable=function(){return this.$input_source.attr("disabled",!0),this.$input_source.blur()},n.prototype.Enable=function(){return this.$input_source.attr("disabled",!1)},n.prototype.IsDisabled=function(){return Boolean(this.$input_source.attr("disabled"))},n.prototype.MoveToStart=function(e){return this._MoveTo(e,!0),void 0},n.prototype.MoveToEnd=function(e){return this._MoveTo(e,!1),void 0},n.prototype._CheckInputQueue=function(){if(this.input_queue.length)return this.input_queue.shift()()},n.prototype._InitPrompt=function(){this.$prompt=e(B(o)).appendTo(this.$console),this.$prompt_before=e(v).appendTo(this.$prompt),this.$prompt_current=e(v).appendTo(this.$prompt),this.$prompt_after=e(v).appendTo(this.$prompt),this.$prompt_label=e(v).appendTo(this.$prompt_current),this.$prompt_left=e(v).appendTo(this.$prompt_current),this.$prompt_right=e(v).appendTo(this.$prompt_current),this.$prompt_right.css({position:"relative"}),this.$prompt_cursor=e(B(i,"&nbsp;")),this.$prompt_cursor.insertBefore(this.$prompt_right),this.$prompt_cursor.css({color:"transparent",display:"inline",zIndex:0});if(!this.isMobile)return this.$prompt_cursor.css("position","absolute")},n.prototype._SetupEvents=function(){var t,n,i=this;this.isMobile?this.$console.click(function(e){return e.preventDefault(),i.Focus()}):this.$console.mouseup(function(e){var t;return e.which===2?i.Focus():(t=function(){if(!window.getSelection().toString())return e.preventDefault(),i.Focus()},setTimeout(t,0))}),this.$input_source.focus(function(){var e,t;return i._ScrollToEnd(),i.$console_focused=!0,i.$console.removeClass(r),t=function(){if(i.$console_focused)return i.$console.removeClass(r)},setTimeout(t,100),e=function(){if(i.isIos&&i.$console_focused)return i.$input_source.hide()},setTimeout(e,500)}),this.$input_source.blur(function(){var e;return i.$console_focused=!1,i.isIos&&i.$input_source.show(),e=function(){if(!i.$console_focused)return i.$console.addClass(r)},setTimeout(e,100)}),n=e.browser.opera?"input":"paste",this.$input_source.bind(n,function(){var e;return e=function(){if(i.in_composition)return;return i._AppendPromptText(i.$input_source.val()),i.$input_source.val(""),i.Focus()},setTimeout(e,0)}),this.$input_source.keypress(this._HandleChar),this.$input_source.keydown(this._HandleKey),this.$input_source.keydown(this._CheckComposition),e.browser.mozilla!=null&&(this.$input_source.bind("compositionstart",this._StartComposition),this.$input_source.bind("compositionend",this._EndCommposition),this.$input_source.bind("text",this._UpdateComposition));if(e.browser.opera!=null)return t=function(){if(i.in_composition)return;if(i.$input_source.val().length)return i._StartComposition()},setInterval(t,200)},n.prototype._HandleChar=function(e){var t,n;return this.state===P||e.metaKey||e.ctrlKey?!0:(t=e.which,t===8||t===9||t===13?!1:(n=String.fromCharCode(t),n.length===0?!0:(this.$prompt_left.text(this.$prompt_left.text()+n),this._ScrollToEnd(),!1)))},n.prototype._HandleKey=function(t){var n;if(this.state===P)return!0;n=t.keyCode||t.which,setTimeout(e.proxy(this._CheckMatchings,this),0);if(t.altKey)return!0;if(t.ctrlKey||t.metaKey)return this._HandleCtrlShortcut(n);if(t.shiftKey){switch(n){case T:this._HandleEnter(!0);break;case O:this._Unindent();break;case M:this._MoveUp();break;case S:this._MoveDown();break;case L:this._ScrollUp();break;case k:this._ScrollDown();break;default:return!0}return!1}switch(n){case T:this._HandleEnter(!1);break;case O:this._Indent();break;case E:this._Delete(!1);break;case w:this._Backspace(!1);break;case C:this._MoveLeft(!1);break;case A:this._MoveRight(!1);break;case M:this._HistoryPrevious();break;case S:this._HistoryNext();break;case N:this.MoveToStart(!1);break;case x:this.MoveToEnd(!1);break;case L:this._ScrollUp();break;case k:this._ScrollDown();break;default:return!0}return!1},n.prototype._HandleCtrlShortcut=function(e){var t,n,r,i;switch(e){case E:this._Delete(!0);break;case w:this._Backspace(!0);break;case C:this._MoveLeft(!0);break;case A:this._MoveRight(!0);break;case M:this._MoveUp();break;case S:this._MoveDown();break;case x:this.MoveToEnd(!0);break;case N:this.MoveToStart(!0);break;default:if(e in this.shortcuts){i=this.shortcuts[e];for(n=0,r=i.length;n<r;n++)t=i[n],t.call(this);return!1}return!0}return!1},n.prototype._HandleEnter=function(e){var t,n,r=this;return e?this._InsertNewLine(!0):(n=this.GetPromptText(),t=function(e){var t,i,s,o,u,f;if(e!==!1){r.MoveToEnd(!0),r._InsertNewLine(!0),f=[];for(s=o=0,u=Math.abs(e);0<=u?o<u:o>u;s=0<=u?++o:--o)e>0?f.push(r._Indent()):f.push(r._Unindent());return f}return i=r.state===D?"input":"prompt",r.Write(r.GetPromptText(!0)+_,""+a+"old-"+i),r.ClearPromptText(!0),r.history_active&&((!r.history.length||r.history[r.history.length-1]!==n)&&r.history.push(n),r.history_index=r.history.length),r.state=P,t=r.input_callback,r.input_callback=null,t&&t(n),r._CheckInputQueue()},this.multiline_callback?this.async_multiline?this.multiline_callback(n,t):t(this.multiline_callback(n)):t(!1))},n.prototype._GetDirectionals=function(t){var n,r,i,s,o,u,a,f;return s=t?this.$prompt_left:this.$prompt_right,n=t?this.$prompt_right:this.$prompt_left,i=t?this.$prompt_before:this.$prompt_after,r=t?this.$prompt_after:this.$prompt_before,u=t?e.proxy(this.MoveToStart,this):e.proxy(this.MoveToEnd,this),o=t?e.proxy(this._MoveLeft,this):e.proxy(this._MoveRight,this),f=t?"last":"first",a=t?"prependTo":"appendTo",{$prompt_which:s,$prompt_opposite:n,$prompt_relative:i,$prompt_rel_opposite:r,MoveToLimit:u,MoveDirection:o,which_end:f,where_append:a}},n.prototype._VerticalMove=function(e){var t,n,r,i,s,o,u,a;a=this._GetDirectionals(e),r=a.$prompt_which,t=a.$prompt_opposite,n=a.$prompt_relative,s=a.MoveToLimit,i=a.MoveDirection;if(n.is(d))return;return o=this.$prompt_left.text().length,s(),i(),u=r.text(),t.text(e?u.slice(o):u.slice(0,o)),r.text(e?u.slice(0,o):u.slice(o))},n.prototype._MoveUp=function(){return this._VerticalMove(!0)},n.prototype._MoveDown=function(){return this._VerticalMove()},n.prototype._HorizontalMove=function(t,n){var r,i,s,o,u,a,f,l,c,h,p,m,g,y;y=this._GetDirectionals(n),u=y.$prompt_which,i=y.$prompt_opposite,o=y.$prompt_relative,s=y.$prompt_rel_opposite,m=y.which_end,p=y.where_append,l=n?/\w*\W*$/:/^\w*\W*/,c=u.text();if(c){if(t){g=c.match(l);if(!g)return;return g=g[0],h=i.text(),i.text(n?g+h:h+g),f=g.length,u.text(n?c.slice(0,-f):c.slice(f))}return h=i.text(),i.text(n?c.slice(-1)+h:h+c[0]),u.text(n?c.slice(0,-1):c.slice(1))}if(!o.is(d))return a=e(v)[p](s),a.append(e(v).text(this.$prompt_label.text())),a.append(e(v).text(i.text())),r=o.children()[m]().detach(),this.$prompt_label.text(r.children().first().text()),u.text(r.children().last().text()),i.text("")},n.prototype._MoveLeft=function(e){return this._HorizontalMove(e,!0)},n.prototype._MoveRight=function(e){return this._HorizontalMove(e)},n.prototype._MoveTo=function(e,t){var n,r,i,s,o,u,a;u=this._GetDirectionals(t),i=u.$prompt_which,n=u.$prompt_opposite,r=u.$prompt_relative,o=u.MoveToLimit,s=u.MoveDirection;if(e){a=[];while(!r.is(d)||i.text()!=="")o(!1),a.push(s(!1));return a}return n.text(this.$prompt_left.text()+this.$prompt_right.text()),i.text("")},n.prototype._Delete=function(e){var t,n,r;n=this.$prompt_right.text();if(n){if(e){r=n.match(/^\w*\W*/);if(!r)return;return r=r[0],this.$prompt_right.text(n.slice(r.length))}return this.$prompt_right.text(n.slice(1))}if(!this.$prompt_after.is(d))return t=this.$prompt_after.children().first().detach(),this.$prompt_right.text(t.children().last().text())},n.prototype._Backspace=function(t){var n,r,i;setTimeout(e.proxy(this._ScrollToEnd,this),0),r=this.$prompt_left.text();if(r){if(t){i=r.match(/\w*\W*$/);if(!i)return;return i=i[0],this.$prompt_left.text(r.slice(0,-i.length))}return this.$prompt_left.text(r.slice(0,-1))}if(!this.$prompt_before.is(d))return n=this.$prompt_before.children().last().detach(),this.$prompt_label.text(n.children().first().text()),this.$prompt_left.text(n.children().last().text())},n.prototype._Indent=function(){var e;return this.$prompt_left.prepend(function(){var t,n,r;r=[];for(e=t=1,n=this.indent_width;1<=n?t<=n:t>=n;e=1<=n?++t:--t)r.push(" ");return r}.call(this).join(""))},n.prototype._Unindent=function(){var e,t,n,r,i;e=this.$prompt_left.text()+this.$prompt_right.text(),i=[];for(t=n=1,r=this.indent_width;1<=r?n<=r:n>=r;t=1<=r?++n:--n){if(!/^ /.test(e))break;this.$prompt_left.text()?this.$prompt_left.text(this.$prompt_left.text().slice(1)):this.$prompt_right.text(this.$prompt_right.text().slice(1)),i.push(e=e.slice(1))}return i},n.prototype._InsertNewLine=function(t){var n,r,i;return t==null&&(t=!1),i=this._SelectPromptLabel(!this.$prompt_before.is(d)),n=e(v).appendTo(this.$prompt_before),n.append(e(v).text(i)),n.append(e(v).text(this.$prompt_left.text())),this.$prompt_label.text(this._SelectPromptLabel(!0)),t&&(r=this.$prompt_left.text().match(/^\s+/))?this.$prompt_left.text(r[0]):this.$prompt_left.text(""),this._ScrollToEnd()},n.prototype._AppendPromptText=function(e){var t,n,r,i,s,o;n=e.split(_),this.$prompt_left.text(this.$prompt_left.text()+n[0]),s=n.slice(1),o=[];for(r=0,i=s.length;r<i;r++)t=s[r],this._InsertNewLine(),o.push(this.$prompt_left.text(t));return o},n.prototype._ScrollUp=function(){var e;return e=this.$console[0].scrollTop-this.$console.height(),this.$console.stop().animate({scrollTop:e},"fast")},n.prototype._ScrollDown=function(){var e;return e=this.$console[0].scrollTop+this.$console.height(),this.$console.stop().animate({scrollTop:e},"fast")},n.prototype._ScrollToEnd=function(){var e,t=this;return this.$console.scrollTop(this.$console[0].scrollHeight),e=function(){var e,n,r,i,s,o,u;n=t.$prompt_cursor.height(),u=t.$window.scrollTop(),o=t.$window.scrollLeft(),e=document.documentElement.clientHeight,i=t.$prompt_cursor.offset(),s=t.$prompt_cursor.position(),t.$input_container.css({left:s.left,top:s.top-999999}),r=i.top-2*n;if(t.isMobile&&typeof orientation!="undefined"&&orientation!==null){if(u<i.top||u>i.top)return t.$window.scrollTop(r)}else{if(u+e<i.top)return t.$window.scrollTop(i.top-e+n);if(u>r)return t.$window.scrollTop(i.top)}},setTimeout(e,0)},n.prototype._SelectPromptLabel=function(e){return this.state===H?e?" \n"+this.prompt_label_continue:this.prompt_label_main:e?"\n ":" "},n.prototype._outerHTML=function(t){return document.body.outerHTML?t.get(0).outerHTML:e(p).append(t.eq(0).clone()).html()},n.prototype._Wrap=function(e,t,n){var r,i;return i=e.html(),r=i.slice(0,t)+B(n,i[t])+i.slice(t+1),e.html(r)},n.prototype._WalkCharacters=function(e,t,n,r,i){var s,o,u;o=i?e.length:0,e=e.split(""),u=function(){var t,n,r,s;return i?(r=e,e=2<=r.length?F.call(r,0,n=r.length-1):(n=0,[]),t=r[n++]):(s=e,t=s[0],e=2<=s.length?F.call(s,1):[]),t&&(o+=i?-1:1),t};while(s=u()){s===t?r++:s===n&&r--;if(r===0)return{index:o,current_count:r}}return{index:-1,current_count:r}},n.prototype._ProcessMatch=function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d,v,m=this;return p=n?[t.closing_char,t.opening_char]:[t.opening_char,t.closing_char],u=p[0],c=p[1],d=this._GetDirectionals(n),o=d.$prompt_which,s=d.$prompt_relative,a=1,f=!1,h=o.html(),n||(h=h.slice(1)),r&&n&&(h=h.slice(0,-1)),v=this._WalkCharacters(h,u,c,a,n),l=v.index,a=v.current_count,l>-1?(this._Wrap(o,l,t.cls),f=!0):(i=s.children(),i=n?Array.prototype.reverse.call(i):i,i.each(function(r,i){var s,o;s=e(i).children().last(),h=s.html(),o=m._WalkCharacters(h,u,c,a,n),l=o.index,a=o.current_count;if(l>-1)return n||l--,m._Wrap(s,l,t.cls),f=!0,!1})),f},n.prototype._CheckMatchings=function(t){var n,r,i,s,o,u,a;i=t?this.$prompt_left.text().slice(this.$prompt_left.text().length-1):this.$prompt_right.text()[0],a=this.matchings.clss;for(o=0,u=a.length;o<u;o++)n=a[o],e("."+n,this.$console).contents().unwrap();(r=this.matchings.closings[i])?s=this._ProcessMatch(r,!0,t):(r=this.matchings.openings[i])?s=this._ProcessMatch(r,!1,t):t||this._CheckMatchings(!0);if(t){if(s)return this._Wrap(this.$prompt_left,this.$prompt_left.html().length-1,r.cls)}else if(s)return this._Wrap(this.$prompt_right,0,r.cls)},n.prototype._HistoryPrevious=function(){if(!this.history_active)return;if(this.history_index<=0)return;return this.history_index===this.history.length&&(this.history_new=this.GetPromptText()),this.SetPromptText(this.history[--this.history_index])},n.prototype._HistoryNext=function(){if(!this.history_active)return;if(this.history_index>=this.history.length)return;return this.history_index===this.history.length-1?(this.history_index++,this.SetPromptText(this.history_new)):this.SetPromptText(this.history[++this.history_index])},n.prototype._CheckComposition=function(t){var n;n=t.keyCode||t.which,e.browser.opera!=null&&this.in_composition&&this._UpdateComposition();if(n===229)return this.in_composition?this._UpdateComposition():this._StartComposition()},n.prototype._StartComposition=function(){return this.$input_source.bind(y,this._EndComposition),this.in_composition=!0,this._ShowComposition(),setTimeout(this._UpdateComposition,0)},n.prototype._EndComposition=function(){return this.$input_source.unbind(y,this._EndComposition),this.in_composition=!1,this._HideComposition(),this.$input_source.val("")},n.prototype._UpdateComposition=function(e){var t,n=this;return t=function(){if(!n.in_composition)return;return n.$composition.text(n.$input_source.val())},setTimeout(t,0)},n.prototype._ShowComposition=function(){return this.$composition.css("height",this.$prompt_cursor.height()),this.$composition.empty(),this.$composition.appendTo(this.$prompt_left)},n.prototype._HideComposition=function(){return this.$composition.detach()},n}(),e.fn.jqconsole=function(e,t,n){return new b(this,e,t,n)},e.fn.jqconsole.JQConsole=b,e.fn.jqconsole.Ansi=t}.call(this),define("vendor/jqconsole",function(){}),define("components/terminal",["require","exports","module","vendor/react","libs/utils","underscore","jquery","components/tests/Terminal","vendor/jqconsole"],function(e,t,n){var r=e("vendor/react"),i=e("libs/utils"),s=e("underscore"),o=e("jquery"),u=e("components/tests/Terminal");e("vendor/jqconsole");var a=r.DOM,f="jqconsole-output",l="> ",c="",h=".. ",p={},d={"{}":"brace","[]":"bracket","()":"paren"},v=function(e,t){t(!1)},m={shortcuts:p,matchings:d,continueLabel:h,promptLabel:l,header:c,multilineCallback:v,evaluator:o.noop};n.exports=r.createClass({displayName:"exports",mixins:[u],_startPrompt:function(){this.state.console.Prompt(!0,this._handleInput)},_handleInput:function(e){return this.props.broadcast.input({input:e,terminal:this,callback:this._handleResult}),this._startPrompt(),this},_handleResult:function(e,t,n){t&&this.state.console.Write("==> "+t+"\n",f);var r={input:e,output:t,exitCode:n};this.state.history.push(r),this.setState({history:this.state.history})},focus:function(){this.state.console.Focus()},print:function(e){this.state.console.Write(e,"jqconsole-output")},getInitialState:function(){return{history:[]}},componentDidMount:function(){var e=this.refs.terminal.getDOMNode(),t=m,n=o(e).jqconsole(t.header,t.promptLabel,t.continueLabel);this.state.console=n,this.setState({console:n}),this._startPrompt()},render:function(){return r.DOM.div({className:"fill-container"},r.DOM.div({className:"terminal-container"},r.DOM.div({ref:"terminal"})))}})}),define("components/francine_components",["require","exports","module","components/standalone_editor","components/iframe_preview","components/francine_image","components/standalone_editor","components/narrative","components/highlight","components/terminal"],function(e,t,n){var r=e("components/standalone_editor"),i=e("components/iframe_preview"),s=e("components/francine_image"),o=e("components/standalone_editor"),u=e("components/narrative"),a=e("components/highlight"),f=e("components/terminal");n.exports={CodeEditor:r,FullWebPreview:i,TemplatedWebPreview:i,Image:s,Narrative:u,Highlight:a,Terminal:f}}),define("components/progress",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react"),i=r.DOM;n.exports=r.createClass({displayName:"exports",render:function(){var e=this.props.percent+"%",t={width:this.props.percent+"%"},n={position:"relative"};return r.DOM.div(null,r.DOM.div({className:"color-scheme--white",style:n},r.DOM.div({className:"progress"},r.DOM.div({className:"progress__indicator"},e),r.DOM.div({className:"progress__bar"},r.DOM.div({className:"progress__bar__complete",style:t})))))}})}),define("components/nav_widget",["require","exports","module","vendor/react","components/progress"],function(e,t,n){var r=e("vendor/react"),i=e("components/progress");n.exports=r.createClass({displayName:"exports",getInitialState:function(){return{showTopicsMenu:!1}},broadcast:function(e){this.props.broadcast(e)},switchTopic:function(e){this.setState({showTopicsMenu:!1}),this.props.switchTopic(e)},next:function(){this.broadcast(this.props.currentIndex+1)},prev:function(){this.props.currentIndex>0&&this.broadcast(this.props.currentIndex-1)},toggleTopicsMenu:function(){this.setState({showTopicsMenu:!this.state.showTopicsMenu})},render:function(){percent=Math.round(100*this.props.currentIndex/this.props.exerciseNames.length);var e=i({percent:percent}),t=this.props.currentIndex+1+" of "+this.props.exerciseNames.length,n=r.addons.classSet,s=n({"fcn-topic-list":!0,hidden:!this.state.showTopicsMenu}),o=n({"fcn-topic-button":!0,"fcn-topic-button--selected":this.state.showTopicsMenu}),u=[];for(var a=0;a<this.props.topics.children_order.length;a++){var f=this.props.topics.children[this.props.topics.children_order[a]],l=r.DOM.li(null,r.DOM.div({className:"fcn-topic-list__progress"},"Y%"),r.DOM.a({href:f.url,onClick:this.switchTopic.bind(this,f.slug)},f.title),r.DOM.br(null),r.DOM.div({className:"fcn-topic-list__remaining-text"},"X Exercises Left"));u.push(l)}var c=r.DOM.li({className:"fcn-topics__overview-button"},"View Full Overview");return u.push(c),r.DOM.div({className:"fcn-nav-wrapper"},r.DOM.div({className:o,onClick:this.toggleTopicsMenu},r.DOM.h5(null,this.props.topics.title)),r.DOM.div(null,r.DOM.ul({className:s},u)),r.DOM.div({className:"fcn-nav__exercise-text"},t),r.DOM.div({className:"fcn-nav__progress"},e),r.DOM.a({className:"button",onClick:this.prev},"Prev"),r.DOM.a({className:"button",onClick:this.next},"Next"))}})}),define("components/francine_slot",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react");n.exports=r.createClass({displayName:"exports",render:function(){return r.DOM.div({className:"fcn-slot","data-fcn-arrangement":this.props.arrangement},r.DOM.div({className:"fcn-component"},this.props.component({presenter:this.props.presenter,broadcast:this.props.adapter.broadcast!==undefined?this.props.adapter.broadcast[this.props.componentName]:function(){console.log("NOT HANDLED")},ref:this.props.componentName})))},componentDidMount:function(){this.props.adapter.registerComponent&&this.props.adapter.registerComponent(this.props.componentName,this.refs[this.props.componentName])}})}),define("modules/event_brokering",["require","exports","module"],function(e,t,n){n.exports={listenFor:function(e,t){var n=[],r=this;return this.listenTo(e,t,function(){var e=arguments;n.forEach(function(t){t.apply(r,e)})}),{bubbleUp:function(){return n.push(function(){this.trigger.bind(this,t).apply(this,arguments)}),this},bubbleUpAs:function(e){return n.push(function(){this.trigger.bind(this,e).apply(this,arguments)}),this},and:function(e){return n.push(e),this}}}}}),define("controllers/controller",["require","exports","module","modules/event_brokering"],function(e,t,n){function o(){this.initialize.apply(this,arguments)}var r=window.Backbone,i=window._,s=e("modules/event_brokering");o.extend=r.View.extend,o.prototype={},i.extend(o.prototype,r.Events),i.extend(o.prototype,s),n.exports=o}),define("controllers/francine/layout_config",["require","exports","module","jquery","underscore","controllers/controller"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("controllers/controller");n.exports=s.extend({initialize:function(){},arrangements:{CodeEditor_Narrative:{Narrative:{slots:14,col:1},CodeEditor:{slots:2356,col:23}},CodeEditor_FullWebPreview_Narrative:{Narrative:{slots:14,col:1},CodeEditor:{slots:25,col:2},FullWebPreview:{slots:36,col:3}},CodeEditor_FullWebPreview_Narrative_Terminal:{Narrative:{slots:14,col:1},CodeEditor:{slots:2,col:2},Terminal:{slots:5,col:2},FullWebPreview:{slots:36,col:3}},CodeEditor_Image_Narrative:{Narrative:{slots:14,col:1},CodeEditor:{slots:25,col:2},Image:{slots:36,col:3}},CodeEditor_Image_Narrative_Terminal:{Narrative:{slots:14,col:1},CodeEditor:{slots:2,col:2},Terminal:{slots:5,col:2},Image:{slots:36,col:3}},CodeEditor_Narrative_TemplatedWebPreview:{Narrative:{slots:14,col:1},CodeEditor:{slots:25,col:2},TemplatedWebPreview:{slots:36,col:3}},CodeEditor_Narrative_Terminal:{Narrative:{slots:14,col:1},CodeEditor:{slots:25,col:2},Terminal:{slots:36,col:3}},FullWebPreview_Image_Narrative:{Narrative:{slots:14,col:1},FullWebPreview:{slots:23,col:23},Image:{slots:56,col:23}},FullWebPreview_Narrative:{Narrative:{slots:14,col:1},FullWebPreview:{slots:2356,col:23}},FullWebPreview_Narrative_Terminal:{Narrative:{slots:14,col:1},FullWebPreview:{slots:36,col:3},Terminal:{slots:25,col:2}},Image_Narrative:{Narrative:{slots:14,col:1},Image:{slots:2356,col:23}},Image_Narrative_Terminal:{Narrative:{slots:14,col:1},Image:{slots:56,col:3},Terminal:{slots:25,col:2}},Narrative:{Narrative:{slots:14,col:1}},Narrative_Terminal:{Narrative:{slots:14,col:1},Terminal:{slots:2356,col:23}},Narrative_CodeEditor_TemplatedWebPreview_Terminal:{Narrative:{slots:14,col:1},TemplatedWebPreview:{slots:36,col:3},Terminal:{slots:5,col:2},CodeEditor:{slots:2,col:2}},Narrative_CodeEditor_Terminal:{Narrative:{slots:14,col:1},Terminal:{slots:56,col:23},CodeEditor:{slots:23,col:23}}},getArrangement:function(e){return this.arrangements[this.buildComponentName(e)]},buildComponentName:function(e){return Object.keys(e).sort().join("_")}})}),define("controllers/francine/adapters/adapter",["require","exports","module","controllers/controller"],function(require,exports,module){var Controller=require("controllers/controller");module.exports=Controller.extend({initialize:function(e,t){this.updateComponent=e,this._tests=t},registerComponent:function(e,t){this._components[e]=t},runTests:function(){this._tests.forEach(function(test,i){var component=this._components[test.componentName];component===undefined&&console.warn("Oops: found a test for a component we don't have!"),eval(test.test);var testResult=componentTest(component);testResult?console.log("PASSED"):console.log("FAILED")}.bind(this))},_components:{}})}),define("controllers/francine/adapters/CodeEditor_FullWebPreview_Narrative",["require","exports","module","jquery","underscore","controllers/francine/adapters/adapter"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("controllers/francine/adapters/adapter");n.exports=s.extend({broadcast:{CodeEditor:{submit:function(){this._components.FullWebPreview.runLegacySCT(this._tests[0].test)},update:function(e){this.updateComponent("FullWebPreview",e),this.updateComponent("CodeEditor",e)}},FullWebPreview:{testResult:function(e,t){this.updateComponent("Narrative",{SCTresult:e,SCTerror:t})}},Narrative:{}}})}),define("controllers/francine/adapters/CodeEditor_Narrative_TemplatedWebPreview",["require","exports","module","jquery","underscore","controllers/francine/adapters/adapter"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("controllers/francine/adapters/adapter");n.exports=s.extend({broadcast:{CodeEditor:{submit:function(){console.log("this components ",this._components),this._components.TemplatedWebPreview.runLegacySCT(this._tests[0].test)},update:function(e){this.updateComponent("TemplatedWebPreview",e)}},TemplatedWebPreview:{},Narrative:{}}})}),define("controllers/francine/adapters/Narrative_Terminal",["require","exports","module","jquery","underscore","controllers/francine/adapters/adapter"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("controllers/francine/adapters/adapter");n.exports=s.extend({broadcast:{Terminal:{input:function(e){e.callback(e.input,"got payload: "+e.input,0),this.runTests()}},Narrative:function(e){console.log("NARRATIVE:",e)}}})}),define("controllers/francine/adapters/adapters",["require","exports","module","controllers/francine/adapters/CodeEditor_FullWebPreview_Narrative","controllers/francine/adapters/CodeEditor_Narrative_TemplatedWebPreview","controllers/francine/adapters/Narrative_Terminal"],function(e,t,n){var r={CodeEditor_FullWebPreview_Narrative:e("controllers/francine/adapters/CodeEditor_FullWebPreview_Narrative"),CodeEditor_Narrative_TemplatedWebPreview:e("controllers/francine/adapters/CodeEditor_Narrative_TemplatedWebPreview"),Narrative_Terminal:e("controllers/francine/adapters/Narrative_Terminal")};n.exports={load:function(e){var t=Object.keys(e).sort().join("_");return r[t]!==undefined?r[t]:(console.warn("No communication adapter for components",t),function(){})}}}),define("libs/francine/ios_resets",["require","exports","module"],function(e,t,n){n.exports={disableScrolling:function(){document.addEventListener("touchmove",function(e){e.preventDefault()})},fixHeight:function(){if(navigator.userAgent.match(/iPad;.*CPU.*OS 7_\d/i)&&window.innerHeight!=document.documentElement.clientHeight){var e=function(){document.documentElement.style.height=window.innerHeight+"px",document.body.scrollTop!==0&&window.scrollTo(0,0)};window.addEventListener("scroll",e,!1),window.addEventListener("orientationchange",e,!1),e(),document.body.style.webkitTransform="translate3d(0,0,0)"}}}}),define("components/skills2show",["require","exports","module","vendor/react","components/francine_components","components/nav_widget","components/francine_slot","controllers/francine/layout_config","controllers/francine/adapters/adapters","libs/francine/ios_resets"],function(e,t,n){var r=e("vendor/react"),i=e("components/francine_components"),s=e("components/nav_widget"),o=e("components/francine_slot"),u=e("controllers/francine/layout_config"),a=e("controllers/francine/adapters/adapters").load,f=e("libs/francine/ios_resets");n.exports=r.createClass({displayName:"exports",getInitialState:function(){var e=0,t=this.props.initialTopic.children[this.props.initialTopic.children_order[e]];return{currentExerciseIndex:e,currentExercise:t,currentTopic:this.props.initialTopic,config:new u,adapter:this.getAdapter(t)}},componentWillMount:function(){f.disableScrolling(),f.fixHeight()},getAdapter:function(e){var t=[{componentName:"TemplatedWebPreview",test:e.tests.sct}],n=a(e.components),r=new n(this.updateExerciseComponent,t);for(var i in r.broadcast)for(var s in r.broadcast[i])r.broadcast[i][s]=r.broadcast[i][s].bind(r);return r},navigate:function(e){var t=this.getChildAtIndex(e),n=a(t.components);this.setState({currentExerciseIndex:e,currentExercise:t,adapter:this.getAdapter(t)})},navigateToTopic:function(e){var t=this.props.topics.children[e],n=t.path;window.history.pushState({},t.title,n),this.setState({currentTopic:t,currentExerciseIndex:0,currentExercise:t.children[t.children_order[0]]})},getChildAtIndex:function(e){return this.state.currentTopic.children[this.state.currentTopic.children_order[e]]},notify:function(e,t){var n=JSON.parse(JSON.stringify(this.props));n.presenter[e]=t,this.setProps(n)},updateExerciseComponent:function(e,t){var n=JSON.parse(JSON.stringify(this.state.currentExercise));n.components[e]=_.extend(n.components[e],t),this.setState({currentExercise:n})},buildComponents:function(){this.components=[];var e=this.state.currentExercise.components,t=this.state.config.getArrangement(e);for(key in e){var n=i[e[key]._schema];this.components.push(r.DOM.div({className:"fcn-col fcn-col-"+t[key].col},o({component:n,componentName:key,presenter:e[key],adapter:this.state.adapter,arrangement:t[key].slots})))}return this.components},render:function(){return r.DOM.div(null,r.DOM.div({className:"fcn-grid"},this.buildComponents()),r.DOM.nav(null,s({topics:this.props.topics,exerciseNames:this.state.currentTopic.children_order,currentIndex:this.state.currentExerciseIndex,currentExercise:this.state.currentExercise,broadcast:this.navigate,switchTopic:this.navigateToTopic})))}})}),define("components/button_widget",["require","exports","module","vendor/react"],function(e,t,n){var r=e("vendor/react");n.exports=r.createClass({displayName:"exports",getInitialState:function(){return this.props},broadcast:function(){var e=this.props,t=e.data.value+1;e.data.value=t,this.props.broadcast(this.props.data)},render:function(){return r.DOM.div(null,r.DOM.button({className:"button button--fill-space",onClick:this.broadcast,ref:"inc_button"},this.props.value))}})}),define("components/react_ujs_config",["require","exports","module","components/test_widget","components/test_widget2","components/iframe_preview","components/cc_text_area","components/skills2show","components/francine_image","components/button_widget","components/francine_slot","components/narrative","components/standalone_editor"],function(e,t,n){var r={TestWidget:e("components/test_widget"),TestWidget2:e("components/test_widget2"),IframePreview:e("components/iframe_preview"),CCTextArea:e("components/cc_text_area"),Skills2Show:e("components/skills2show"),FrancineImage:e("components/francine_image"),ButtonWidget:e("components/button_widget"),FrancineSlot:e("components/francine_slot"),Narrative:e("components/narrative"),StandaloneEditor:e("components/standalone_editor")};n.exports=r}),define("components/workspace",["require","exports","module","vendor/react","components/cc_text_area","components/react_ujs_config"],function(e,t,n){var r=e("vendor/react"),i=e("components/cc_text_area"),s=e("components/react_ujs_config");n.exports=r.createClass({displayName:"exports",getInitialState:function(){return this.props},updateField:function(e){presenter=JSON.parse(e.value),this.setProps(presenter)},render:function(){var e=s[this.props.presenter.widget_name](this.props.presenter);return r.DOM.div({className:"grid-row"},r.DOM.div({className:"grid-col-8"},e),r.DOM.div({className:"grid-col-4"},r.DOM.h2(null,this.state.presenter.widget_name),r.DOM.p(null,"Edit the JSON below and click the button to see changes."),i({value:JSON.stringify(this.state),onJSONSubmit:this.updateField})))}})}),define("plugins/react_ujs",["require","exports","module","vendor/react","components/react_ujs_config","components/workspace"],function(require,exports){window.React=require("vendor/react");var ComponentLibrary=require("components/react_ujs_config");ComponentLibrary.WorkSpace=require("components/workspace"),function(document,window,React){var CLASS_NAME_ATTR="data-react-class",PROPS_ATTR="data-react-props",$=typeof jQuery!="undefined"&&jQuery,findReactDOMNodes=function(){var e="["+CLASS_NAME_ATTR+"]";return $?$(e):document.querySelectorAll(e)},mountReactComponents=function(){var nodes=findReactDOMNodes();for(var i=0;i<nodes.length;++i){var node=nodes[i],className=node.getAttribute(CLASS_NAME_ATTR),constructor;console.log("widget ",className),constructor=ComponentLibrary[className]||eval.call(ComponentLibrary,className);var propsJson=node.getAttribute(PROPS_ATTR),props=propsJson&&JSON.parse(propsJson);React.renderComponent(constructor(props),node)}},unmountReactComponents=function(){var e=findReactDOMNodes();for(var t=0;t<e.length;++t)React.unmountComponentAtNode(e[t])};$?($(mountReactComponents),$(window).unload(unmountReactComponents)):(document.addEventListener("DOMContentLoaded",mountReactComponents),window.addEventListener("unload",unmountReactComponents));if(typeof Turbolinks!="undefined"){var handleEvent;$?handleEvent=function(e,t){$(document).on(e,t)}:handleEvent=function(e,t){document.addEventListener(e,t)},handleEvent("page:change",mountReactComponents),handleEvent("page:before-change",unmountReactComponents)}}(document,window,React)}),function(e,t){e.extend(t.prototype,{toJSON:function(t){t||(t={});var n=this,r=t.methods,i=e.clone(this.attributes),s=t.namespace||e.result(this,"namespace"),o=t.transform||e.result(this,"toJSONKeysTransform");r&&(e.isString(r)&&(r=[r]),e.each(r,function(t,r,s){e.isArray(s)&&(r=t,t=[]);if(!n[r])throw new Error("Missing method: "+r);i[r]=n[r].apply(n,t)}));if(o&&t.transform!==!1){var u={};e.each(i,function(e,t,r){u[n["_"+o](t)]=e}),i=u}return i},_camelCase:function(e){return e.replace(/(\-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""})},_underscore:function(e){return e.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}})}.call(this,_,Backbone.Model),define("plugins/backbone-to-json",function(){}),function(e){var t=e.Backbone,n=e._;if(!n){n=typeof require!="undefined"&&require("underscore");if(!n)throw new Error("Can't find underscore")}if(!t){t=typeof require!="undefined"&&require("backbone");if(!t)throw new Error("Can't find Backbone")}var r=t.View,i={model:{},collection:{}};t.View=r.extend({constructor:function(){r.apply(this,Array.prototype.slice.call(arguments)),this.bindModelEvents(),this.bindCollectionEvents()},_bindDeclarativeEvents:function(e,t){var r=i[e][this.cid]||(i[e][this.cid]={});for(var s in t){var o=t[s];n.isFunction(o)||(o=this[t[s]]);if(!o)throw new Error('Method "'+t[s]+'" does not exist');r[s]=o}this.listenTo(this[e],r)},_unbindDeclarativeEvents:function(e){var t=i[e][this.cid];if(!t)return;this.stopListening(this[e],t),delete i[e][this.cid]},bindModelEvents:function(e){if(!e&&!(e=n.result(this,"modelEvents")))return;if(!this.model)throw new Error("View model does not exist");this.unbindModelEvents(),this._bindDeclarativeEvents("model",e)},unbindModelEvents:function(){this._unbindDeclarativeEvents("model")},bindCollectionEvents:function(e){if(!e&&!(e=n.result(this,"collectionEvents")))return;if(!this.collection)throw new Error("View collection does not exist");this.unbindCollectionEvents(),this._bindDeclarativeEvents("collection",e)},unbindCollectionEvents:function(){this._unbindDeclarativeEvents("collection")}})}(this),define("plugins/backbone.declarative",function(){}),define("libs/router",["require","exports","module","libs/server","libs/utils","underscore","jquery"],function(e,t){var n=e("libs/server"),r=e("libs/utils"),i=e("underscore"),s=e("jquery");r.makeEventEmitter(t);var o="!/",u=window.location,a=window.history,f=!1;t.setHashLocation=function(e,n,r){typeof e=="string"&&(n=e,e=undefined,r=!!n);var s=t.getHashLocation(),a=o;f=!!r,e===undefined?(n.charAt(0)==="/"&&(n=n.substr(1)),u.hash=a+n):(s[e]=n,u.hash=a+i.filter(s,Boolean).join("/"))},t.getHashLocation=function(){var e=u.hash.slice(o.length+1).split("/");return i.filter(e,Boolean)};var l="onpopstate"in window,c="onhashchange"in window,h=!!a&&!!a.pushState,p="",d=u.hash,v=function(){var e=t.getHashLocation();f?f=!1:t.fire("hashchange",[e])},m=function(){var e=u.hash.slice(1);e!==p&&(!e&&a&&typeof a.back=="function"&&history.back(),p=e,v())};l?s(window).bind("popstate",m):c?s(window).bind("hashchange",m):setInterval(m,250),i.defer(function(){d.trim()&&(u.hash=d,v(),s.browser.webkit&&(f=!0))}),t.isHomepage=function(){var e=u.pathname.split("/").filter(Boolean);return e.length===0||e.length===1&&e[0].match(/^[a-z][a-z]$/)!=null};var g=!s.browser.webkit,y=location.href;s(window).on("popstate",function(e){if(!g&&location.href===y)return g=!0,e.stopImmediatePropagation(),!1});var b=0;h?t.intercept=function(e,t,r){var i=++b,o=function(e,t,s){var o={uid:i},u=r.apply(this,[e,o,t,s]),f=e.indexOf("?")>-1?"&":"?";return typeof u=="function"?(n.get(e+f+"_="+Date.now(),function(n){t||a.pushState(o,"",e),u(n,e,s)}),!1):!u};s(e).on("click submit",t,function(e){var t=s(this),n;if(t.is("form")&&e.type==="submit")n=t.attr("action")+"?"+t.serialize();else{if(!t.is("a")||e.type!=="click")return!0;n=t.attr("href")}return o(n,!1,t)}),s(window).on("popstate",function(e){if(e.originalEvent.state&&i!==e.originalEvent.state.uid)return;if(!g)return;return o(u.pathname+u.search,!0)})}:t.intercept=function(){},t.deparam=function(){return r.deparam(u.href)}}),define("modules/chrome",["require","exports","module","libs/router","modules/notifications","jquery"],function(e,t){var n=e("libs/router"),r=e("modules/notifications"),i=e("jquery"),s="a.toggle_feedback_form",o='<a class="toggle_feedback_form" href="javascript:void(0);">Send More Feedback</a>',u=".new_feedback",a=".feedback_flash_message",f=".upvote_form, .downvote_form",l='<span id="feedback_thank_you">Thank you for your feedback!</span><br>'+o,c="Thanks for your additional feedback!",h=".votes",p="li.section",d=".section_link a",v="#overlay",m=".close, .help_text",g=".new_feedback select",y=".new_feedback textarea",b="#feedback_thank_you",w="#section_scratch_pad_toggle .discussion a",E="form.notify",S=".tab_block",x=5e3,T=function(e){var t=e.index(),r=e.closest(S);i(".tabs > li, .nav-tabs > li",r).removeClass("active"),i(".pages > li",r).hide(),e.addClass("active"),i(i(".pages > li",r).get(t)).show(),e.attr("data-name")&&n.setHashLocation(e.attr("data-name"),!0)},N=function(){var e=window.FB||undefined;e&&e.XFBML.parse();var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://apis.google.com/js/plusone.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},C=function(){i.each(i(S),function(e,t){var n=S+"> .tabs > li, "+S+"> .nav-tabs > li",r=i(t);r.delegate(n,"click",function(e){var t=i(e.target).closest("li");T(t)})});var e=n.getHashLocation(),t=k(e[0]);t&&T(t),n.on("hashchange",function(e){var t=k(e[0]);t&&T(t)})},k=function(e){if(e&&e!==""){var t=".tabs > li[data-name*="+e+"], "+".nav-tabs > li[data-name*="+e+"]";return i(t,S)}};t.initPlugins=function(){N()},t.init=function(){i(document).on("click",s,function(){i(this).next().toggle()}),i(document).on("click",p,function(){var e=i(this).find(d).attr("href");e&&(window.location=e)}),i(u).bind("submit",function(e){var t=i(this).children("textarea"),n=i(this).children("select");t.val()===""||n.val()===""?i(a).slideDown(100,function(){i(this).css({display:"inline-block"}).effect("highlight",{color:"#FBE3E4"},1e3).delay(2e3).slideUp(300)}):i(b).length?(i(e.target).hide(),i(b).html(c),i(b).effect("highlight",{},1e3)):i(e.target).hide().prev().replaceWith(l)}),i(u).bind("ajax:success",function(){i(g).first().val(""),i(y).val("")}),i(f).bind("submit",function(e){i(e.target).closest(h).find("[disabled]").removeAttr("disabled"),i(e.target).find("input[type*=submit]").attr("disabled","disabled")}),i(E).bind("ajax:success",function(e,t){t.responseText&&(t=JSON.parse(t.responseText)),r.bar({header:"Success!",body:t.success,timeout:x})}),i(E).bind("ajax:error",function(e,t){t=JSON.parse(t.responseText),r.bar({header:"Error!",body:t.error,timeout:x})});var e=i(v);e.delegate(m,"click",function(t){e.empty().hide(),t.preventDefault()}),N(),C()},function(){var e="#codertag";t.updateUserBadge=function(t){i(e).replaceWith(t)}}(),t.getQALink=function(){return i(w).attr("href")||!1}}),define("modules/notifications",["require","exports","module","underscore","libs/server","libs/utils","jquery","modules/chrome"],function(e,t){var n=e("underscore"),r=e("libs/server"),i=e("libs/utils"),s=e("jquery"),o=e("modules/chrome");t.bar=function(e){if(!e)return;if(n.isString(e))return t.bar({body:e});if(!n.isObject(e))return;e.callback=e.callback||s.noop,e.body=e.body||"",e.header=e.header||"",e.noticeName=e.noticeName||"",e.appendDiv=e.appendDiv||s("#header"),e.containerSelected=e.containerSelected||"#notices";var u=i.mustache("common/_banner"),a=s(e.containerSelected),f=s(u(e)),l=function(){f.slideUp(500,function(){f.remove(),e.persistHide&&e.noticeName&&r.persistNotificationHide(e.noticeName)})},c=s.Deferred(),h=c.promise();return e.noticeName?r.showNotification(e.noticeName,function(e){c.resolve(e.result)}):c.resolve(!0),s.when(h).done(function(t){t&&(a.css("position","relative"),a.append(f),e.appendDiv.append(a),f.slideDown(300),f.on("click",".close",function(e){e.preventDefault(),l()}))}),e.timeout&&setTimeout(l,e.timeout),o.initPlugins(),f},t.overlay=function(e){if(!e)return;if(n.isString(e))return t.overlay({text:{body:e}});if(!n.isObject(e))return;var u=i.mustache("common/_overlay"),a=s("#overlay"),f=null;if(e instanceof s){var l=s(u({}));l.find(".overlay-body").append(e),f=l,f.find(".overlay-footer").hide()}else e.type=e.type||"none",e.persistHide=e.persistHide||!1,e.noticeName=e.noticeName||"",e.text=e.text||{},e.text.header=e.text.header||"",e.text.subheader=e.text.subheader||"",e.text.body=e.text.body||"",e.text.footer=e.text.footer||{},e.text.footer.primary=e.text.footer.primary||"Okay",e.text.footer.cancel=e.text.footer.cancel||"Cancel",f=s(u(e.text)),e.onHide&&f.on("click",".close",function(){e.onHide()}),e.onOk&&f.on("click",".btn-primary",function(){e.onOk()}),e.onCancel&&f.on("click",".btn-cancel",function(){e.onCancel()}),f.find(".overlay-footer").toggle(e.type!=="none"),f.find(".btn-primary").toggle(e.type!=="alert");return a.children().remove(),a.append(f),f.show(),a.fadeIn("fast"),f.on("click",".close, .btn-cancel, .btn-primary",function(t){t.preventDefault(),e.persistHide&&e.noticeName&&r.persistNotificationHide(e.noticeName),a.fadeOut("fast",function(){f.remove()})}),t.hideOverlay=function(){s("#overlay").fadeOut("fast",function(){s(this).remove()})},o.initPlugins(),f}}),+function(e){function i(){e(t).remove(),e(n).each(function(t){var n=s(e(this));if(!n.hasClass("open is-shown"))return;n.trigger(t=e.Event("hide.bs.dropdown"));if(t.isDefaultPrevented())return;n.removeClass("open is-shown").trigger("hidden.bs.dropdown")})}function s(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}var t=".dropdown-backdrop",n="[data-toggle=dropdown]",r=function(t){var n=e(t).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var r=s(n),o=r.hasClass("open is-shown");i();if(!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",i),r.trigger(t=e.Event("show.bs.dropdown"));if(t.isDefaultPrevented())return;r.toggleClass("open is-shown").trigger("shown.bs.dropdown"),n.focus()}return!1},r.prototype.keydown=function(t){if(!/(38|40|27)/.test(t.keyCode))return;var r=e(this);t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;var i=s(r),o=i.hasClass("open is-shown");if(!o||o&&t.keyCode==27)return t.which==27&&i.find(n).focus(),r.click();var u=e("[role=menu] li:not(.divider):visible a",i);if(!u.length)return;var a=u.index(u.filter(":focus"));t.keyCode==38&&a>0&&a--,t.keyCode==40&&a<u.length-1&&a++,~a||(a=0),u.eq(a).focus()};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new r(this)),typeof t=="string"&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n+", [role=menu]",r.prototype.keydown)}(window.jQuery),define("plugins/bootstrap-dropdown",function(){}),!function(e){var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom());var f=this.unpin;a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.$element.trigger(a?"unpin":"pin"),this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))},e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),define("plugins/bootstrap-afix",function(){}),define("modules/group_membership",["require","exports","module"],function(e,t,n){n.exports={isGroupMember:function(e){return e.hasRole({role:"member",userId:this.id})},is_group_moderator:function(e){return e.hasRole({role:"moderator",userId:this.id})},is_group_leader:function(e){return e.hasRole({userId:this.id,role:"leader"})},is_group_invitee:function(e){return e.hasRole({userId:this.id,role:"invitee"})},can_be_promoted_in_group:function(e){return e.hasRole({userId:this.id,role:"member"})&&!e.hasRole({userId:this.id,role:"moderator"})&&!e.hasRole({userId:this.id,role:"leader"})},can_be_demoted_in_group:function(e){return e.hasRole({role:"moderator",userId:this.id})&&!e.hasRole({role:"leader",userId:this.id})},membershipStatus:function(e){if(this.is_group_leader(e))return"is_leader";if(this.is_group_moderator(e))return"is_co_leader";if(this.isGroupMember(e))return"is_member";if(e.isPublic())return"can_join";if(e.isRestricted())return this.is_group_invitee(e)?"has_requested":"must_request"},fetchGroups:function(e,t){t=t||{};var n=[CCDATA.API_HOST,"v1","users",this.id,"groups"].join("/");return t.url=n,e.fetch(t)}}}),define("modules/validatable",["require","exports","module","underscore"],function(e,t,n){var r=e("underscore");n.exports={validate:function(e){var t=[],n=this;r(this.validations).each(function(r,i){var s=r.call(n,e[i],e);if(s){var o={};o[i]=s,t.push(o)}});if(t.length)return t}}}),function(e){function O(e,t,n,r){var i=n.lang();return i[e].call?i[e](n,r):i[e][t]}function M(e,t){return function(n){return B(e.call(this,n),t)}}function _(e){return function(t){var n=e.call(this,t);return n+this.lang().ordinal(n)}}function D(e,t,n){this._d=e,this._isUTC=!!t,this._a=e._a||null,this._lang=n||!1}function P(e){var t=this._data={},n=e.years||e.y||0,r=e.months||e.M||0,i=e.weeks||e.w||0,s=e.days||e.d||0,o=e.hours||e.h||0,u=e.minutes||e.m||0,a=e.seconds||e.s||0,f=e.milliseconds||e.ms||0;this._milliseconds=f+a*1e3+u*6e4+o*36e5,this._days=s+i*7,this._months=r+n*12,t.milliseconds=f%1e3,a+=H(f/1e3),t.seconds=a%60,u+=H(a/60),t.minutes=u%60,o+=H(u/60),t.hours=o%24,s+=H(o/24),s+=i*7,t.days=s%30,r+=H(s/30),t.months=r%12,n+=H(r/12),t.years=n,this._lang=!1}function H(e){return e<0?Math.ceil(e):Math.floor(e)}function B(e,t){var n=e+"";while(n.length<t)n="0"+n;return n}function j(e,t,n){var r=t._milliseconds,i=t._days,s=t._months,o;r&&e._d.setTime(+e+r*n),i&&e.date(e.date()+i*n),s&&(o=e.date(),e.date(1).month(e.month()+s*n).date(Math.min(o,e.daysInMonth())))}function F(e){return Object.prototype.toString.call(e)==="[object Array]"}function I(e,t){var n=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),i=0,s;for(s=0;s<n;s++)~~e[s]!==~~t[s]&&i++;return i+r}function q(e,t,n,r){var i,s,o=[];for(i=0;i<7;i++)o[i]=e[i]=e[i]==null?i===2?1:0:e[i];return e[7]=o[7]=t,e[8]!=null&&(o[8]=e[8]),e[3]+=n||0,e[4]+=r||0,s=new Date(0),t?(s.setUTCFullYear(e[0],e[1],e[2]),s.setUTCHours(e[3],e[4],e[5],e[6])):(s.setFullYear(e[0],e[1],e[2]),s.setHours(e[3],e[4],e[5],e[6])),s._a=o,s}function R(e,n){var r,i,o=[];!n&&u&&(n=require("./lang/"+e));for(r=0;r<a.length;r++)n[a[r]]=n[a[r]]||s.en[a[r]];for(r=0;r<12;r++)i=t([2e3,r]),o[r]=new RegExp("^"+(n.months[r]||n.months(i,""))+"|^"+(n.monthsShort[r]||n.monthsShort(i,"")).replace(".",""),"i");return n.monthsParse=n.monthsParse||o,s[e]=n,n}function U(e){var n=typeof e=="string"&&e||e&&e._lang||null;return n?s[n]||R(n):t}function z(e){return e.match(/\[.*\]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function W(e){var t=e.match(l),n,r;for(n=0,r=t.length;n<r;n++)A[t[n]]?t[n]=A[t[n]]:t[n]=z(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=typeof t[n].call=="function"?t[n].call(i,e):t[n];return s}}function X(e,t){function r(t){return e.lang().longDateFormat[t]||t}var n=5;while(n--&&c.test(t))t=t.replace(c,r);return C[t]||(C[t]=W(t)),C[t](e)}function V(e){switch(e){case"DDDD":return v;case"YYYY":return m;case"S":case"SS":case"SSS":case"DDD":return d;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return g;case"Z":case"ZZ":return y;case"T":return b;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return p;default:return new RegExp(e.replace("\\",""))}}function $(e,t,n,r){var i,s;switch(e){case"M":case"MM":n[1]=t==null?0:~~t-1;break;case"MMM":case"MMMM":for(i=0;i<12;i++)if(U().monthsParse[i].test(t)){n[1]=i,s=!0;break}s||(n[8]=!1);break;case"D":case"DD":case"DDD":case"DDDD":t!=null&&(n[2]=~~t);break;case"YY":n[0]=~~t+(~~t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":r.isPm=(t+"").toLowerCase()==="pm";break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(("0."+t)*1e3);break;case"Z":case"ZZ":r.isUTC=!0,i=(t+"").match(x),i&&i[1]&&(r.tzh=~~i[1]),i&&i[2]&&(r.tzm=~~i[2]),i&&i[0]==="+"&&(r.tzh=-r.tzh,r.tzm=-r.tzm)}t==null&&(n[8]=!1)}function J(e,t){var n=[0,0,1,0,0,0,0],r={tzh:0,tzm:0},i=t.match(l),s,o;for(s=0;s<i.length;s++)o=(V(i[s]).exec(e)||[])[0],o&&(e=e.slice(e.indexOf(o)+o.length)),A[i[s]]&&$(i[s],o,n,r);return r.isPm&&n[3]<12&&(n[3]+=12),r.isPm===!1&&n[3]===12&&(n[3]=0),q(n,r.isUTC,r.tzh,r.tzm)}function K(e,t){var n,r=e.match(h)||[],i,s=99,o,u,a;for(o=0;o<t.length;o++)u=J(e,t[o]),i=X(new D(u),t[o]).match(h)||[],a=I(r,i),a<s&&(s=a,n=u);return n}function Q(e){var t="YYYY-MM-DDT",n;if(w.exec(e)){for(n=0;n<4;n++)if(S[n][1].exec(e)){t+=S[n][0];break}return y.exec(e)?J(e,t+" Z"):J(e,t)}return new Date(e)}function G(e,t,n,r,i){var s=i.relativeTime[e];return typeof s=="function"?s(t||1,!!n,e,r):s.replace(/%d/i,t||1)}function Y(e,t,n){var i=r(Math.abs(e)/1e3),s=r(i/60),o=r(s/60),u=r(o/24),a=r(u/365),f=i<45&&["s",i]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",r(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,G.apply({},f)}function Z(e,n){t.fn[e]=function(e){var t=this._isUTC?"UTC":"";return e!=null?(this._d["set"+t+n](e),this):this._d["get"+t+n]()}}function et(e){t.duration.fn[e]=function(){return this._data[e]}}function tt(e,n){t.duration.fn["as"+e]=function(){return+this/n}}var t,n="1.7.2",r=Math.round,i,s={},o="en",u=typeof module!="undefined"&&module.exports,a="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),f=/^\/?Date\((\-?\d+)/i,l=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?|.)/g,c=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?)/g,h=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,p=/\d\d?/,d=/\d{1,3}/,v=/\d{3}/,m=/\d{1,4}/,g=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,y=/Z|[\+\-]\d\d:?\d\d/i,b=/T/i,w=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,E="YYYY-MM-DDTHH:mm:ssZ",S=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],x=/([\+\-]|\d\d)/gi,T="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),N={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},C={},k="DDD w M D d".split(" "),L="M D H h m s w".split(" "),A={M:function(){return this.month()+1},MMM:function(e){return O("monthsShort",this.month(),this,e)},MMMM:function(e){return O("months",this.month(),this,e)},D:function(){return this.date()},DDD:function(){var e=new Date(this.year(),this.month(),this.date()),t=new Date(this.year(),0,1);return~~((e-t)/864e5+1.5)},d:function(){return this.day()},dd:function(e){return O("weekdaysMin",this.day(),this,e)},ddd:function(e){return O("weekdaysShort",this.day(),this,e)},dddd:function(e){return O("weekdays",this.day(),this,e)},w:function(){var e=new Date(this.year(),this.month(),this.date()-this.day()+5),t=new Date(e.getFullYear(),0,4);return~~((e-t)/864e5/7+1.5)},YY:function(){return B(this.year()%100,2)},YYYY:function(){return B(this.year(),4)},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return B(~~(this.milliseconds()/10),2)},SSS:function(){return B(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+B(~~(e/60),2)+":"+B(~~e%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+B(~~(10*e/6),4)}};while(k.length)i=k.pop(),A[i+"o"]=_(A[i]);while(L.length)i=L.pop(),A[i+i]=M(A[i],2);A.DDDD=M(A.DDD,3),t=function(n,r){if(n===null||n==="")return null;var i,s;return t.isMoment(n)?new D(new Date(+n._d),n._isUTC,n._lang):(r?F(r)?i=K(n,r):i=J(n,r):(s=f.exec(n),i=n===e?new Date:s?new Date(+s[1]):n instanceof Date?n:F(n)?q(n):typeof n=="string"?Q(n):new Date(n)),new D(i))},t.utc=function(e,n){return F(e)?new D(q(e,!0),!0):(typeof e=="string"&&!y.exec(e)&&(e+=" +0000",n&&(n+=" Z")),t(e,n).utc())},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=t.isDuration(e),i=typeof e=="number",s=r?e._data:i?{}:e,o;return i&&(n?s[n]=e:s.milliseconds=e),o=new P(s),r&&(o._lang=e._lang),o},t.humanizeDuration=function(e,n,r){return t.duration(e,n===!0?null:n).humanize(n===!0?!0:r)},t.version=n,t.defaultFormat=E,t.lang=function(e,n){var r;if(!e)return o;(n||!s[e])&&R(e,n);if(s[e]){for(r=0;r<a.length;r++)t[a[r]]=s[e][a[r]];t.monthsParse=s[e].monthsParse,o=e}},t.langData=U,t.isMoment=function(e){return e instanceof D},t.isDuration=function(e){return e instanceof P},t.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return~~(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th"}}),t.fn=D.prototype={clone:function(){return t(this)},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return this._d.toString()},toDate:function(){return this._d},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?this._a[8]!=null?!!this._a[8]:!I(this._a,(this._a[7]?t.utc(this._a):t(this._a)).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return X(this,e?e:t.defaultFormat)},add:function(e,n){var r=n?t.duration(+n,e):t.duration(e);return j(this,r,1),this},subtract:function(e,n){var r=n?t.duration(+n,e):t.duration(e);return j(this,r,-1),this},diff:function(e,n,i){var s=this._isUTC?t(e).utc():t(e).local(),o=(this.zone()-s.zone())*6e4,u=this._d-s._d-o,a=this.year()-s.year(),f=this.month()-s.month(),l=this.date()-s.date(),c;return n==="months"?c=a*12+f+l/30:n==="years"?c=a+(f+l/30)/12:c=n==="seconds"?u/1e3:n==="minutes"?u/6e4:n==="hours"?u/36e5:n==="days"?u/864e5:n==="weeks"?u/6048e5:u,i?c:r(c)},from:function(e,n){return t.duration(this.diff(e)).lang(this._lang).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=this.diff(t().sod(),"days",!0),n=this.lang().calendar,r=n.sameElse,i=e<-6?r:e<-1?n.lastWeek:e<0?n.lastDay:e<1?n.sameDay:e<2?n.nextDay:e<7?n.nextWeek:r;return this.format(typeof i=="function"?i.apply(this):i)},isLeapYear:function(){var e=this.year();return e%4===0&&e%100!==0||e%400===0},isDST:function(){return this.zone()<t([this.year()]).zone()||this.zone()<t([this.year(),5]).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e==null?t:this.add({d:e-t})},startOf:function(e){switch(e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return t.utc([this.year(),this.month()+1,0]).date()},lang:function(t){return t===e?U(this):(this._lang=t,this)}};for(i=0;i<T.length;i++)Z(T[i].toLowerCase(),T[i]);Z("year","FullYear"),t.duration.fn=P.prototype={weeks:function(){return H(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months*2592e6},humanize:function(e){var t=+this,n=this.lang().relativeTime,r=Y(t,!e,this.lang()),i=t<=0?n.past:n.future;return e&&(typeof i=="function"?r=i(r):r=i.replace(/%s/i,r)),r},lang:t.fn.lang};for(i in N)N.hasOwnProperty(i)&&(tt(i,N[i]),et(i.toLowerCase()));tt("Weeks",6048e5),u&&(module.exports=t),this.moment=t,typeof define=="function"&&define.amd&&define("moment",[],function(){return t})}.call(this),define("vendor/moment",function(e){return function(){return e.moment}}(this)),define("models/shared/user",["require","exports","module","backbone","modules/group_membership","modules/validatable","vendor/moment","underscore"],function(e,t,n){var r=e("backbone"),i=e("modules/group_membership"),s=e("modules/validatable"),o=e("vendor/moment"),u=e("underscore");n.exports=r.Model.extend({idAttribute:"_id",MAXIMUM_ABOUT_ME_LENGTH:250,defaults:{profile_image_url:"/assets/icons/default_user.png"},validations:{about_me:function(e){if(e&&e.length>this.MAXIMUM_ABOUT_ME_LENGTH)return"About me is too long"},website:function(e){if(e&&!e.match(/https?:\/\//))return"Invalid url"}},url:function(){return"/users/"+this.id+"/info"},streakCount:function(){return this.get("streak_hash").count},pointsToday:function(){return this.get("points_hash").points_today},is_admin:function(){return u.indexOf(this.get("roles"),"admin")!==-1},humanized_last_sign_in:function(){return o(this.get("current_sign_in_at")).fromNow()},last_signed_in:function(){return(new Date(this.get("current_sign_in_at"))).getTime()},startCurriculum:function(e,t){var n="/users/"+this.id+"/start_curriculum/"+e,r={success:t,url:n};return this._sync("create",r)},nameLowerCase:function(){return this.get("name").toLowerCase()},hasHandle:function(e){var t=this.get("handles")[e];switch(e){case"twitter":case"github":return!!t;case"linked_in":return t&&t!=="http://www.linkedin.com/";default:return!1}},handleUrl:function(e){var t=this.get("handles")[e];switch(e){case"twitter":return"http://www.twitter.com/"+t;case"github":return"http://www.github.com/"+t;case"linked_in":return t;default:return"#"}},_sync:function(e,t){return r.sync.call(this,e,this,t)}}),u.extend(n.exports.prototype,s,i)}),define("libs/user",["require","exports","module","models/shared/user","modules/notifications","libs/server","jquery"],function(e,t){var n=e("models/shared/user"),r=e("modules/notifications"),i=e("libs/server"),s=e("jquery"),o,u=function(){return o=new n(CCDATA.current_user)},a=function(){i.loadSource("/set_username",function(e){r.overlay(e);var t=s("#username-modal"),n=s("#user_username",t),i=s(".available",t),o=s(".taken",t),a=s("input[type=submit]",t),f=function(e){var t=function(){i.hide(),o.show(),a.attr("disabled",!0)},n=function(){i.show(),o.hide(),a.removeAttr("disabled")};s.ajax({url:"/users/username",data:{username:e},dataType:"json",success:function(e){e.is_valid?n():t()},error:function(){t()}})};n.keyup(function(){f(n.val())}),t.find("form").on("ajax:success",function(){window.location.reload(),u()})})};t.init=function(){u(),o&&o.get("email")&&!o.get("username")&&a()},t.getUser=function(){return o||u()},t.showPickUsernameModal=function(){a()}}),define("libs/user_auth_prefilter",["require","jquery","libs/user"],function(e){var t=e("jquery"),n=e("libs/user");t.ajaxPrefilter(function(e){var t=e.url.indexOf("?")>0?"&":"?";e.url+=t+"authentication_token="+n.getUser().get("authentication_token")})}),define("libs/toggle_class",["require","jquery"],function(e){var t=e("jquery"),n="open";t(function(){t("body").on("click",".toggle-class",function(e){e.preventDefault();var r=t(e.currentTarget),i=r.data(),s;i.closest?s=i.closest==="parent"?r.parent():r.closest(i.closest):s=r;var o=i.className||n;s.toggleClass(o),i.focus&&s.hasClass(o)&&s.find("input, textarea").focus()})})}),define("libs/nonmaintained_curricula_notifier",["require","jquery","modules/notifications"],function(e){var t=e("jquery"),n=e("modules/notifications");window.CCDATA&&CCDATA.curriculumNotMaintained&&n.bar({header:"Oops, this track is not maintained anymore.",body:'For an updated version of this track, please visit <a href="http://www.codecademy.com/learn">codecademy.com/learn</a>.',appendDiv:t("header.main")})}),define("widgets/cc_view",["require","exports","module","backbone","libs/utils","underscore"],function(e,t,n){var r=e("backbone"),i=e("libs/utils"),s=e("underscore");n.exports=r.View.extend({addSubViews:function(e){var t=this;this._subViews=this._subViews||[],s(e).each(function(e,n){t._subViews.push(e),t[n]=e})},attachSubViews:function(){if(!this._subViews)return this;var e=this;return this._subViews.forEach(function(t){var n=t.options.selector||"."+t.className.split(" ")[0];t.setElement(e.$(n)),t.attachSubViews&&t.attachSubViews()}),this},template:function(){var e=this.options.templateName||s.result(this,"templateName");return i.template(e).apply(this,s.toArray(arguments))},dispose:function(){return this._subViews&&this._subViews.length&&s.invoke(this._subViews,"dispose"),r.View.prototype.dispose.apply(this,s.toArray(arguments))},templateData:function(){return{}},render:function(){var e=this.templateData?this.templateData():{};return this.$el.html(this.template(e)),this}})}),define("presenters/feed_items/item",["require","exports","module","libs/user","models/shared/user"],function(e,t,n){var r=e("libs/user"),i=e("models/shared/user"),s=function(e){this.options=e};s.prototype.serialize=function(){var e=["createdAtDetailed","createdAtRelative","createdAtEpoch"],t=this.options.model.toJSON({methods:e,transform:"underscore"}),n=r.getUser(),s;return t.actor&&(s=new i(t.actor)),s&&n&&s.id===n.id&&(t.is_current_user=!0),t},n.exports=s}),define("views/feed/item",["require","exports","module","widgets/cc_view","presenters/feed_items/item"],function(e,t,n){var r=e("widgets/cc_view"),i=e("presenters/feed_items/item");n.exports=r.extend({tagName:"li",attributes:function(){var e=["feed-item","feed-action-"+this.model.get("action"),"owner-type-"+this.model.ownerType()];return this.model.isUnread&&this.model.isUnread()&&e.push("is-unread"),{"class":e.join(" ")}},templateName:function(){var e=this.model.get("action");return e.indexOf("group")===0&&this.model.ownerType()==="user-notification"&&(e="notification_"+e),"feed_items/_"+e},templateData:function(){var e=new i({model:this.model});return e.serialize()}})}),define("views/feed/list",["require","exports","module","backbone","libs/utils","views/feed/item","jquery"],function(e,t,n){var r=e("backbone"),i=e("libs/utils"),s=e("views/feed/item"),o=e("jquery");n.exports=r.View.extend({collectionEvents:{"fetch:after":"render"},expandTextTemplate:i.template("feed_items/shared/_expand_text"),emptyTemplate:function(){return i.template("feed_items/_no_content_"+this.collection.ownerType)()},checkForOverFlow:function(e){var t=this;o(e).find(".entry").each(function(){var e=o(this);!e.data("expanded")&&e.outerHeight()<this.scrollHeight&&e.data({expanded:!0}).after(t.expandTextTemplate())})},render:function(){if(this.collection.isEmpty()&&this.collection.hasBeenFetched())return this.$el.html(this.emptyTemplate()),this;var e=this.collection.rest(this.collection.offset),t=[];return e.forEach(function(e){var n=new s({model:e});t.push(n.render().el)}),this.collection.loadCount<2&&this.$el.empty(),this.$el.append(t),this.checkForOverFlow(t),this}})}),define("views/header/header_notifications",["require","exports","module","backbone","jquery","underscore","views/feed/list"],function(e,t,n){var r=e("backbone"),i=e("jquery"),s=e("underscore"),o=e("views/feed/list");n.exports=r.View.extend({initialize:function(){this.collection.data.on("change:unread_count",this.toggleAttention,this);var e=s.debounce(this.onDropdownScroll.bind(this),100);this.$(".dropdown-container").on("scroll",e),this.feedListView=new o({el:i(".feed-list"),collection:this.collection})},events:{"click .dropdown-trigger":"onDropdownTriggerClick","click .js-toggle-notifications-dropdown":"onDropdownTriggerClick","mousewheel .dropdown-container":"onScroll","DOMMouseScroll .dropdown-container":"onScroll"},collectionEvents:{"fetch:before":function(){this.$el.addClass("loading")},"fetch:after":function(){this.$el.removeClass("loading")}},toggleAttention:function(e,t){this.$(".unread-notification-count").text(t),this.$el.toggleClass("attention",t>0)},onDropdownTriggerClick:function(e){e.preventDefault(),this.feedListView.render(),this.collection.hasBeenFetched()||this.collection.fetch();var t=this.$el.closest("nav").width();this.$(".dropdown-container").outerWidth(t)},_distanceToBottom:function(e){return e.get(0).scrollHeight-(e.outerHeight()+e.scrollTop())},onDropdownScroll:function(e){var t=i(e.currentTarget),n=t.find(".feed-list"),r=this._distanceToBottom(t,n)<30;r&&this.collection.fetch({update:!0,remove:!1})},onScroll:function(e){var t=this._$feedList||(this._$feedList=this.$(".feed-list")),n=this._$container||(this._$container=this.$(".dropdown-container")),r=e.originalEvent,i=(r.wheelDelta||-r.detail)<0,s=this._distanceToBottom(n,t);i&&s<0&&e.preventDefault()}})}),define("views/header/header_stats",["require","exports","module","backbone","libs/utils"],function(e,t,n){var r=e("backbone"),i=e("libs/utils"),s=r.View.extend({template:i.mustache("common/_header_stats"),modelEvents:{"change:points_hash change:streak_hash":"render"},render:function(){var e=this.model.toJSON({methods:["streakCount","pointsToday"],transform:"underscore"});return e.points_singular=e.points_today===1,this.$el.html(this.template(e)),this}});n.exports=s}),define("modules/timestamps",["require","exports","module","vendor/moment","underscore"],function(e,t,n){var r=e("vendor/moment"),i=e("underscore");n.exports={timeRelative:function(e){return r(e).fromNow()},timeEpoch:function(e){return r(e).valueOf()},timeDetailed:function(e){return r(e).format("MMMM Do YYYY, h:mm:ss a")},editedAtRelative:function(){return this.timeRelative(this._editedAt())},editedAtEpoch:function(){return this.timeEpoch(this._editedAt())},editedAtDetailed:function(){return this.timeDetailed(this._editedAt())},lastActiveAtRelative:function(){return this.timeRelative(this._lastActiveAt())},lastActiveAtEpoch:function(){return this.timeEpoch(this._lastActiveAt())},lastActiveAtDetailed:function(){return this.timeDetailed(this._lastActiveAt())},createdAtRelative:function(){return this.timeRelative(this._createdAt())},createdAtEpoch:function(){return this.timeEpoch(this._createdAt())},createdAtDetailed:function(){return this.timeDetailed(this._createdAt())},updatedAtRelative:function(){return this.timeRelative(this._updatedAt())},updatedAtEpoch:function(){return this.timeEpoch(this._updatedAt())},updatedAtDetailed:function(){return this.timeDetailed(this._updatedAt())},hasBeenUpdated:function(){return this._updatedAt()&&this._createdAt()!==this._updatedAt()},_createdAt:function(){return i.result(this,"createdAt")||this.get("created_at")},_updatedAt:function(){return i.result(this,"updatedAt")||this.get("updated_at")},_editedAt:function(){return i.result(this,"editedAt")||this.get("edited_at")},_lastActiveAt:function(){return i.result(this,"lastActiveAt")||this.get("last_active_at")}}}),define("modules/fetch_wrapper",["require","exports","module","backbone","underscore"],function(e,t,n){var r=e("backbone"),i=e("underscore");n.exports={fetch:function(e){e=e?i.clone(e):{};var t=this,n=e.complete,s;if(this instanceof r.Collection)s=r.Collection;else{if(!(this instanceof r.Model))throw new Error("Object is not a Backbone model or collection");s=r.Model}return e.complete=function(e){e.always(function(e,n){t._isLoading=!1,t.trigger("fetch:after",n,t,e)}),n&&n.apply(this,arguments)},this._isLoading=!0,this.trigger("fetch:before",this),s.prototype.fetch.call(this,e)},isLoading:function(){return this._isLoading}}}),define("models/api/base",["require","exports","module","backbone","modules/timestamps","modules/fetch_wrapper","underscore"],function(e,t,n){var r=e("backbone"),i=e("modules/timestamps"),s=e("modules/fetch_wrapper"),o=e("underscore");n.exports=r.Model.extend({idAttribute:"_id",parse:function(e){return e.id&&(e._id=e.id),e},sync:function(e,t,n){n=n||{};if(this.namespace&&(e==="create"||e==="update")){var i={};i[this.namespace]=o.extend(t.toJSON(),n.data),n.processData=!0,n.data=i}return r.sync.call(this,e,this,n)},toJSON:function(){var e=this.toJSONWithoutAuthenticityToken.apply(this,arguments);return e.authenticity_token=CCDATA.authenticity_token,e},toJSONWithoutAuthenticityToken:function(){return r.Model.prototype.toJSON.apply(this,arguments)}}),o.extend(n.exports.prototype,i,s)}),define("collections/api/base",["require","exports","module","backbone","models/api/base","modules/fetch_wrapper","underscore"],function(e,t,n){var r=e("backbone"),i=e("models/api/base"),s=e("modules/fetch_wrapper"),o=e("underscore");n.exports=r.Collection.extend({model:i,bootstrap:function(e,t){var n=this.parse(e);return this.add(n,t)},url:function(e){return e=e||o.result(this,"endpoint"),[CCDATA.API_HOST,"v1",e].join("/")},loadedAll:function(){return this.length>=this.total},parse:function(e){return typeof e.total!="undefined"&&(this.total=e.total),typeof e.search_total!="undefined"&&(this.searchTotal=e.search_total),e.items},totalPages:function(){return Math.ceil(this.total/this.PER_PAGE)},page:function(e){var t=(e-1)*this.PER_PAGE,n=t+(this.PER_PAGE-1);return this.models.slice(t,n+1)},getIn:function(e){var t=this.filter(function(t){return o(e).include(t.id)});return o(t).compact()},hasAll:function(e){var t=this;return o.all(e,function(e){return!!t.get(e)})},load:function(e,t){var n=this.getIn(e);if(n.length===e.length)return t(this,n);var r=this,i=o.difference(e,n.map(function(e){return e.id})),s=function(){var e=n.concat(r.getIn(i));t&&t(r,e)};return this.xhr&&this.xhr.abort(),this.xhr=this.fetch({update:!0,remove:!1,data:{ids:i},success:s}),this}}),o.extend(n.exports.prototype,s)}),define("collections/shared/feed",["require","exports","module","collections/api/base","libs/user"],function(e,t,n){var r=e("collections/api/base"),i=e("libs/user");n.exports=r.extend({AUTO_LOAD_LIMIT:3,offset:0,loadCount:function(){return this._loadCount||(this._loadCount=0)},incrementLoadCount:function(){this._loadCount=this.loadCount()+1},initialize:function(){this.on("fetch:before",this.onFetchBefore,this),this.on("fetch:after",this.onFetchAfter,this)},onFetchBefore:function(){this.offset=this.length},onFetchAfter:function(){this.length===this.total&&this.trigger("totalItemsLoaded"),this.incrementLoadCount()},underAutoLoadLimit:function(){return this.loadCount()<this.AUTO_LOAD_LIMIT},hasBeenFetched:function(){return this.loadCount()>0},autoFetch:function(e){this.underAutoLoadLimit()&&this.fetch(e)},reset:function(){return this._loadCount=0,this.offset=0,r.prototype.reset.apply(this,arguments)},hasUnloadedItems:function(){return this.loadCount()===0||this.total>this.length},fetch:function(e){return!this.hasUnloadedItems()||this.isLoading()?!1:(e=e||{},e.data=e.data||{},this.isEmpty()||(e.data.last_id=this.last().id),e.data.user_id=i.getUser().get("_id"),e.data.show_discussions=!0,r.prototype.fetch.call(this,e))},bootstrap:function(){return this.incrementLoadCount(),r.prototype.bootstrap.apply(this,arguments)},parse:function(e){return e.owner_type&&(this.ownerType=e.owner_type),r.prototype.parse.apply(this,arguments)}})}),define("modules/feed_item",["require","exports","module"],function(e,t,n){n.exports={is_current_user:function(e){return this.get("actor")._id===e},ownerType:function(){return this.collection.ownerType}}}),define("models/api/notification",["require","exports","module","models/api/base","modules/feed_item","underscore"],function(e,t,n){var r=e("models/api/base"),i=e("modules/feed_item"),s=e("underscore");n.exports=r.extend({isUnread:function(){return this.collection.indexOf(this)<this.collection.unreadCount()}}),s.extend(n.exports.prototype,i)}),define("modules/pollable",["require","exports","module","underscore"],function(e,t,n){var r=e("underscore");n.exports={POLLING_INTERVAL:5e3,startPolling:function(e,t){this._pollingInterval=e||this.POLLING_INTERVAL,this._pollingOptions=t||{},this._isPolling=!0,this._startPolling()},stopPolling:function(){this._isPolling=!1},_startPolling:function(){var e=this,t=this._pollingOptions;r.isFunction(t)&&(t=t()),setTimeout(function(){var n=e.fetch(r.extend({update:!0,remove:!1},t));e._isPolling&&n.promise().done(function(t,n){n==="success"&&e._startPolling()})},this._pollingInterval)}}}),define("collections/api/notifications",["require","exports","module","collections/shared/feed","backbone","libs/user","models/api/notification","modules/pollable","underscore"],function(e,t,n){var r=e("collections/shared/feed"),i=e("backbone"),s=e("libs/user"),o=e("models/api/notification"),u=e("modules/pollable"),a=e("underscore");n.exports=r.extend({model:o,ownerType:"user-notification",initialize:function(){r.prototype.initialize.apply(this,arguments);var e=i.Model.extend({url:[this.url(),"unread_count"].join("/")});a.extend(e.prototype,u),this.data=new e({unread_count:CCDATA.unreadNotificationCount}),this.on("fetch:after",this.clearUnreadCount,this)},parse:function(e){return e.unread_count?this.data.set({unreadCount:e.unread_count}):r.prototype.parse.apply(this,arguments)},pollForUnread:function(){this.data.startPolling(3e5)},endpoint:function(){return["notifications",s.getUser().id].join("/")},clearUnreadCount:function(){a.defer(this.setUnreadCount.bind(this,0))},unreadCount:function(){return this.data.get("unread_count")},setUnreadCount:function(e){return this.data.set({unread_count:e}),this}})}),define("widgets/autocomplete",["require","exports","module","backbone","underscore","jquery","vendor/mustache"],function(e,t,n){var r=e("backbone"),i=e("underscore"),s=e("jquery"),o=e("vendor/mustache"),u=38,a=40,f=27,l=13,c=9,h=r.View.extend({events:{click:"pick",mouseenter:"select",mouseleave:"unSelect"},modelEvents:{"change:selected":function(e,t){this.$el.toggleClass("autocomplete-selected",t)}},tagName:"li",className:"autocomplete-item",pick:function(){this.model.trigger("picked",this.model)},select:function(){this.model.collection.where({selected:!0}).map(function(e){e.set({select:!1})}),this.model.set({selected:!0})},unSelect:function(){this.model.set({selected:!1})},render:function(){return this.$el.html(this.options.template(this.model.toJSON())),this}}),p=o.compile("{{value}}"),d=r.View.extend({collectionEvents:{reset:"render"},modelEvents:{"change:position":"onPositionChange",close:function(){this.$el.hide()}},onPositionChange:function(e,t){this.$el.css(t)},tagName:"ul",attributes:function(){return{"class":["autocomplete-results",this.options.className].join(" ")}},render:function(){var e=this.options.itemTemplate,t=[];return this.collection.forEach(function(n){var r=new h({model:n,template:e});t.push(r.render().el)}),this.options.autoSelect&&this.collection.length&&this.collection.first().set({selected:!0}),this.$el.html(t).show(),this.appended||(s("body").append(this.$el.css({position:"absolute"})),this.appended=!0),this}});n.exports=r.View.extend({events:{keyup:"onKeyup",keydown:"onKeyDown",blur:"onBlur",focus:"_setOffset"},initialize:function(){this.$el.attr("autocomplete","off"),this.collection=new r.Collection,this.collection.parse=this.options.parse||i.indentity,this.collection.on("picked",this.onPicked,this),i.isFunction(this.options.source)?this.search=this._searchFunction:(this.collection.url=this.options.source,this.search=this._searchCollection),this.model=new r.Model,this.model.on("change:query",this.search,this),this.options.clearOnClose!=0&&this.model.on("close",function(){this.$el.val("")},this);var e=this.options.itemTemplate||p;this.resultsContainerView=new d({collection:this.collection,model:this.model,className:this.options.className,autoSelect:this.options.autoSelect,itemTemplate:e})},onBlur:function(){i.delay(function(){this.model.trigger("close")}.bind(this),300)},onKeyup:function(){var e=this.$el.val();if(this.options.minLength&&e.length<this.options.minLength)return;e&&this.model.set({query:this.$el.val()})},onKeyDown:function(e){var t=this.collection.where({selected:!0})[0],n=this.collection.indexOf(t);t&&t.set({selected:!1});switch(e.which){case u:n--;break;case a:n++;break;case l:t&&(this.collection.trigger("picked",t),e.preventDefault());return;case c:t&&(this.collection.trigger("picked",t),this.options.clearOnClose!=0&&e.preventDefault());return;case f:this.model.trigger("close"),this.$el.blur();return;default:return}e.preventDefault(),n>this.collection.length&&(n=0),n<-1&&(n=this.collection.length-1),t=this.collection.at(n),t&&t.set({selected:!0})},onPicked:function(e){this.model.trigger("close"),this._setOffset(),this.options.pick(e.toJSON())},_setOffset:function(){var e=this;i.defer(function(){var t=e.$el.offset(),n=e.$el.outerHeight();t.top=t.top+n,e.options.matchWidth&&(t.width=e.$el.outerWidth()),e.setOffset(t)})},setOffset:function(e){this.model.set(e).trigger("change:position",this.model,e)},_searchFunction:function(e,t){this.collection.reset(this.options.source(t))},_searchCollection:function(e,t){var n=this.options.ajaxOptions?i.clone(this.options.ajaxOptions):{};n.data=n.data||{},n.data[this.options.query||"query"]=t,this.xhr&&this.xhr.abort(),this.xhr=this.collection.fetch(n)}})}),define("widgets/teachers_autocomplete",["require","exports","module","widgets/autocomplete","vendor/mustache","underscore","jquery"],function(e,t,n){var r=e("widgets/autocomplete"),i=e("vendor/mustache"),s=e("underscore"),o=e("jquery"),u=i.compile("<a class='search-result' href='javascript:void(0)'>{{value}}</a>");t.teachers=function(e){new r({el:e.el,source:"/donors_choose/teachers?dcs_id="+CCDATA.donors_choose_student_id,parse:function(t){return t.length==1&&t[0].value==e.el.val()?[]:t},itemTemplate:u,className:"search-results",autoSelect:!0,pick:e.pick,clearOnClose:!1})}}),define("libs/modal",["require","exports","module","jquery","widgets/teachers_autocomplete"],function(e,t,n){var r=e("jquery"),i=27,s,o,u,a,f=e("widgets/teachers_autocomplete"),l=function(){if(a)return;u=r("body"),s=r('<div class="modal-overlay"/>'),o=r('<div class="modal-content"/>'),u.append(s,o),a=!0},c=function(e,t){u.css({overflow:"hidden"}),u.on("click.modal",".modal-content, .modal-content .close-modal",function(n){p(n,e,t)}),t!=1&&u.on("keydown.modal",function(t){d(t,e)}),s.show(),o.css({top:u.scrollTop()}).show(),o.find("a").click(function(){})},h=function(){u.css({overflow:""}).off("keydown.modal click.modal"),s.hide(),o.hide()},p=function(e,t,n){var i=r(e.target),s=i.is(".close-modal");s&&e.preventDefault();if(i.is(".modal-content")&&n!=1||s)t&&t(),h()},d=function(e,t){e.keyCode===i&&(t&&t(),h())},v=function(e,t,n){var i=r(e).append('<a class="bttn-close close-modal close">&times;</a>');return l(),o.empty().append(i),c(t,n),i},m=function(e,t,n){v(e,t),r(".yes").on("click.modal",function(e){e.preventDefault(),t&&h(),n&&n()})},g=function(e){v(e,null,!0);var t=r("#donors_choose_student_form_teacher"),n=t.find('input[name="donors_choose_student[teacher_name]"]');new f.teachers({el:n,pick:function(e){n.val(e.value)}}),r("#donors_choose_student_form_teacher").submit(function(e){e.preventDefault();var t=r(this),n=t.find("input[name='donors_choose_student[teacher_name]']").val(),i=t.attr("action"),s=r.ajax(i,{type:"POST",data:{"donors_choose_student[teacher_name]":n},success:function(e,n){t.find("input[type='submit']").attr("disabled","disabled"),t.hide(),r(".cmpsr-modal-content--donorschoose--email").text("Thank you! You should receive your gift code within the next 7 days."),r(".cmpsr-modal__footer--donorschoose").show()},error:function(e,n){t.find("input[type='submit']").attr("disabled","disabled"),t.hide(),r(".cmpsr-modal-content--donorschoose--email").html('There was a problem while saving your teacher name. If you do not receive your gift code within the next 7 days, please contact <a href="http://www.donorschoose.org/">DonorsChoose.org</a>.'),r(".cmpsr-modal__footer--donorschoose").find("a.close-modal").text("Ok, continue learning"),r(".cmpsr-modal__footer--donorschoose").show()}})})};n.exports={lightbox:v,confirm:m,formbox:g}}),define("widgets/ui/toggle_expand",["require","exports","module","jquery"],function(e,t){var n=e("jquery");t.BASE_CSS_SELECTOR=".toggle-element";var r="ui-toggle-",i=r+"expanded",s=r+"collapsed";t.init=function(e){var t=e.height(),r=e.innerHeight()-t,o=e.find("a.toggle"),u=o.height()-r/2;e.css("overflow","hidden"),e.height(u),o.addClass(s),o.on("click",function(){var r=n(this),o=r.is("."+s)?t:u;e.animate({height:o}),r.toggleClass(s).toggleClass(i)})}}),define("widgets/ui/tabbed_radio",["require","exports","module","jquery"],function(e,t){var n=e("jquery");t.BASE_CSS_SELECTOR=".tabbed-radio";var r="ul.tabbed-radio-tabs",i=".tabbed-radio-description",s=".arrow";t.init=function(e){e.on("click",r+" li",function(){var t=n(this);t.siblings().removeClass("selected"),t.addClass("selected");var r=e.find(i),o=r.find(s);return o.animate({left:t.position().left+t.width()/2-5},{easing:"linear"}),r.find("ul li:visible p").animate({opacity:0},{duration:"fast",complete:function(){var e=r.find("ul"),n=e.height(),i=e.find("li").hide().eq(t.index());i.find("p").css("opacity",0).end().show();var s=e.height();e.height(n),i.find("p").animate({opacity:1},{duration:"fast"}),e.animate({height:s},{easing:"linear",complete:function(){e.css("height","auto")}})}}),t.find("input").attr("checked",!0),!1});var t=e.find("selected");t.length?t.click():n(r+" li:first").click()}}),define("widgets/ui/placeholder",["require","exports","module"],function(e,t){t.BASE_CSS_SELECTOR="input,textarea";var n="placeholder"in document.createElement("input")&&"placeholder"in document.createElement("textarea");t.init=function(e){if(n)return;var t=e.attr("placeholder"),r=e.val()===""&&t!=="";r&&(e.val(e.attr("placeholder")),e.on("focus",function(){e.val()===t&&e.val("")}),e.on("blur",function(){e.val()===""&&e.val(t)}))}}),define("widgets/ui/tabs",["require","exports","module","jquery"],function(e,t){var n=e("jquery");t.init=function(){n("body").on("click",".js-tabs > tabs > li.tab, .js-tabs > .nav-tabs > li.tab",function(){var e=n(this),t=e.closest(".js-tabs");t.find(".nav-tabs .active, tabs .active").removeClass("active"),e.addClass("active"),t.find("> .pages > li.page").hide().eq(e.index()).show().trigger("show")})}}),define("widgets/ui",["require","exports","module","underscore","jquery","widgets/ui/toggle_expand","widgets/ui/tabbed_radio","widgets/ui/placeholder","widgets/ui/tabs"],function(e,t){var n=e("underscore"),r=e("jquery"),i=[e("widgets/ui/toggle_expand"),e("widgets/ui/tabbed_radio"),e("widgets/ui/placeholder")];e("widgets/ui/tabs").init(),t.initWidgets=function(){n.each(i,function(e){r(e.BASE_CSS_SELECTOR+":not(.ui-inited)").each(function(t,n){e.init(r(n)),r(n).addClass("ui-inited")})})},t.init=function(){var e=function(){setTimeout(function(){t.initWidgets()},0)};r(document).ajaxSuccess(e),r(document).on("ajax:success","form",e),r(e)}}),function(e){e.fn.insideOf=function(t){var n=this[0];return n.parentNode?n==t?!0:e(n.parentNode).insideOf(t):!1}}(jQuery),define("plugins/jquery.insideof",function(){}),define("pages/header/dropdown",["require","exports","module","jquery","underscore","controllers/controller","plugins/jquery.insideof"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("controllers/controller");e("plugins/jquery.insideof"),n.exports=s.extend({initialize:function(e){var t=this;this.$menu=r(e.menu),this.$button=r(e.button),this.$button.click(function(e){t.$button.attr("state")==="selected"?t.close():t.open()}),r(window).resize(t.close.bind(t))},open:function(){var e=this;this.$menu.show(),this.$button.attr("state","selected"),i.defer(function(){r(document).one("click",function(t){r(t.target).insideOf(e.$menu)||e.close()})})},close:function(){this.$menu.hide(),this.$button.removeAttr("state")}})}),define("libs/header",["require","exports","module","views/header/header_notifications","views/header/header_stats","collections/api/notifications","libs/user","jquery","libs/modal","widgets/ui","pages/header/dropdown"],function(e,t){var n=e("views/header/header_notifications"),r=e("views/header/header_stats"),i=e("collections/api/notifications"),s=new i,o=e("libs/user"),u=e("jquery"),a=e("libs/modal"),f=e("widgets/ui"),l=e("pages/header/dropdown");t.init=function(){new r({el:".user-stats",model:o.getUser()}),CCDATA.API_HOST&&CCDATA.current_user&&(new n({el:"#js-notifications",collection:s}),CCDATA.pollForNotifications&&(s.data.fetch(),s.pollForUnread())),u("body").on("click",".sign_up",function(e){!CCDATA.current_user&&u("#user-registration-modal").length&&(e.preventDefault(),a.lightbox(u("#user-registration-modal").html()),f.initWidgets())}),u("body").on("click",".sign_in",function(e){!CCDATA.current_user&&u("#user-session-modal").length&&(e.preventDefault(),a.lightbox(u("#user-session-modal").html()),f.initWidgets())}),new l({menu:".js-profile-dropdown",button:".js-toggle-profile-dropdown"})},t.getNotifications=function(){return s}}),define("libs/footer",["require","exports","module","jquery"],function(e,t){var n=e("jquery"),r="#footer select.locales";t.init=function(){n(r).on("change",function(e){window.location=n(e.target).val()})}}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&e.type==="file"||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.focus=function(e){var t;this.deviceIsIOS&&e.setSelectionRange?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var t,n;t=e.fastClickScrollParent;if(!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];if(this.deviceIsIOS){r=window.getSelection();if(r.rangeCount&&!r.isCollapsed)return!0;if(!this.deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<200&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.findControl=function(e){return e.control!==undefined?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,n,r,i,s,o=this.targetElement;this.touchHasMoved(e)&&(this.trackingClick=!1,this.targetElement=null);if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<200)return this.cancelNextClick=!0,!0;this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(s=e.changedTouches[0],o=document.elementFromPoint(s.pageX-window.pageXOffset,s.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=o.tagName.toLowerCase();if(r==="label"){t=this.findControl(o);if(t){this.focus(o);if(this.deviceIsAndroid)return!1;o=t}}else if(this.needsFocus(o)){if(e.timeStamp-n>100||this.deviceIsIOS&&window.top!==window&&r==="input")return this.targetElement=null,!1;this.focus(o);if(!this.deviceIsIOS4||r!=="select")this.targetElement=null,e.preventDefault();return!1}if(this.deviceIsIOS&&!this.deviceIsIOS4){i=o.fastClickScrollParent;if(i&&i.fastClickLastScrollTop!==i.scrollTop)return!0}return this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0:!0},FastClick.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):e.target.type==="submit"&&e.detail===0?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var t;if(typeof window.ontouchstart=="undefined")return!0;if(/Chrome\/[0-9]+/.test(navigator.userAgent)){if(!FastClick.prototype.deviceIsAndroid)return!0;t=document.querySelector("meta[name=viewport]");if(t&&t.content.indexOf("user-scalable=no")!==-1)return!0}return e.style.msTouchAction==="none"?!0:!1},FastClick.attach=function(e){return new FastClick(e)},typeof define!="undefined"&&define.amd?define("vendor/fastclick",[],function(){return FastClick}):typeof module!="undefined"&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,define("common",["require","exports","module","libs/log_errors","highlightjs","vendor/es5-shim","jquery","plugins/jquery.migrate","libs/logger","vendor/rails","vendor/modernizr.custom","plugins/ie_xdr","plugins/jquery.sortable","plugins/jquery.cookie","plugins/jquery.flash-class","underscore","backbone","plugins/react_ujs","plugins/backbone-to-json","plugins/backbone.declarative","modules/notifications","libs/router","libs/markdown","plugins/bootstrap-dropdown","plugins/bootstrap-afix","libs/user_auth_prefilter","libs/toggle_class","libs/nonmaintained_curricula_notifier","libs/utils","libs/header","libs/footer","libs/user","modules/chrome","widgets/ui","vendor/fastclick"],function(e,t){var n=function(){},r=["debug","error","info","log","warn","dir","dirxml","trace","assert","count","markTimeline","profile","profileEnd","time","timeEnd","timeStamp","group","groupCollapsed","groupEnd"];typeof console=="undefined"&&(window.console={});for(var i=0;i<r.length;i++)if(typeof window.console[r[i]]!="function")try{window.console[r[i]]=n}catch(s){}var o=e("libs/log_errors");window.attachEvent?window.attachEvent("onerror",o.handler):window.onerror=o.handler,e("highlightjs"),window.hljs.tabReplace="    ",window.hljs.initHighlightingOnLoad(),e("vendor/es5-shim");var u=e("jquery");e("plugins/jquery.migrate");var a=e("libs/logger");CCDATA&&CCDATA.env==="development"?u.migrateWarnings.push=function(e){a.warn(e)}:u.migrateMute=!0,e("vendor/rails"),e("vendor/modernizr.custom"),e("plugins/ie_xdr"),e("plugins/jquery.sortable"),e("plugins/jquery.cookie"),e("plugins/jquery.flash-class"),e("underscore"),e("backbone"),e("plugins/react_ujs"),e("plugins/backbone-to-json"),e("plugins/backbone.declarative"),e("modules/notifications"),e("libs/router"),e("libs/markdown"),e("plugins/bootstrap-dropdown"),e("plugins/bootstrap-afix"),e("libs/user_auth_prefilter"),e("libs/toggle_class"),e("libs/nonmaintained_curricula_notifier");var f=e("libs/utils"),l=e("libs/header"),c=e("libs/footer"),h=e("libs/user");CCDATA.current_user&&(CCDATA.current_user=f.deepDecode(CCDATA.current_user));if(!u.cookie("codecademy_timezone")){var p=new Date,d=p.getTimezoneOffset();u.cookie("codecademy_timezone",d)}[e("modules/chrome"),e("widgets/ui")].forEach(function(e){e.init()}),t.init=function(){h.init(),l.init(),c.init(),f.isMobile()&&u("body").addClass("is-mobile-device");var e=/^panda\./.test(location.host)||/^orca\./.test(location.host),t=e||CCDATA.env==="development";window.top!==window&&!t&&(u("body").html("Codecademy is not allowed in a frame."),window.top.location=window.location)},u(function(){var t=e("vendor/fastclick");u(".js-lesson-editor")[0]?u("body > *:not(.js-lesson-editor)").each(function(e,n){t.attach(n)}):t.attach(document.body)})})
;
